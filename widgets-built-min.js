!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function elt(tag,attrs){var result=document.createElement(tag);if(attrs)for(var name in attrs)"style"==name?result.style.cssText=attrs[name]:null!=attrs[name]&&result.setAttribute(name,attrs[name]);for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_len>_key;_key++)args[_key-2]=arguments[_key];for(var i=0;i<args.length;i++)add(args[i],result);return result}function add(value,target){if("string"==typeof value&&(value=document.createTextNode(value)),Array.isArray(value))for(var i=0;i<value.length;i++)add(value[i],target);else target.appendChild(value)}function requestAnimationFrame(f){reqFrame?reqFrame(f):setTimeout(f,10)}function contains(parent,child){return 1!=child.nodeType&&(child=child.parentNode),child&&parent.contains(child)}function insertCSS(css){cssNode?cssNode.textContent+=css:accumulatedCSS+=css}function ensureCSSAdded(){cssNode||(cssNode=document.createElement("style"),cssNode.textContent="/* ProseMirror CSS */\n"+accumulatedCSS,document.head.insertBefore(cssNode,document.head.firstChild))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.elt=elt,exports.requestAnimationFrame=requestAnimationFrame,exports.contains=contains,exports.insertCSS=insertCSS,exports.ensureCSSAdded=ensureCSSAdded;var reqFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,ie_upto10=/MSIE \d/.test(navigator.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),accumulatedCSS=(exports.browser={mac:/Mac/.test(navigator.platform),ie_upto10:ie_upto10,ie_11up:ie_11up,ie:ie_upto10||ie_11up,gecko:/gecko\/\d/i.test(navigator.userAgent)},""),cssNode=null},{}],2:[function(require,module,exports){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function moveBackward(parent,offset,by){"char"!=by&&"word"!=by&&_error.AssertionError.raise("Unknown motion unit: "+by);for(var cat=null,counted=0;;){if(0==offset)return offset;var _parent$chunkBefore=parent.chunkBefore(offset),start=_parent$chunkBefore.start,node=_parent$chunkBefore.node;if(!node.isText)return cat?offset:offset-1;if("char"==by)for(var i=offset-start;i>0;i--){if(!(0,_char.isExtendingChar)(node.text.charAt(i-1)))return offset-1;offset--}else if("word"==by)for(var i=offset-start;i>0;i--){var nextCharCat=(0,_char.charCategory)(node.text.charAt(i-1));if(null==cat||1==counted&&"space"==cat)cat=nextCharCat;else if(cat!=nextCharCat)return offset;offset--,counted++}}}function deleteBarrier(pm,cut){var around=pm.doc.path(cut.path),before=around.child(cut.offset-1),after=around.child(cut.offset);if(!before.type.canContainContent(after.type)||pm.tr.join(cut).apply(pm.apply.scroll)===!1){var conn=void 0;if(after.isTextblock&&(conn=before.type.findConnection(after.type))){var tr=pm.tr,end=cut.move(1);if(tr.step("ancestor",cut,end,null,{types:[before.type].concat(_toConsumableArray(conn)),attrs:[before.attrs].concat(_toConsumableArray(conn.map(function(){return null})))}),tr.join(end),tr.join(cut),tr.apply(pm.apply.scroll)!==!1)return}var selAfter=(0,_selection.findSelectionFrom)(pm.doc,cut,1);return pm.tr.lift(selAfter.from,selAfter.to).apply(pm.apply.scroll)}}function moveForward(parent,offset,by){"char"!=by&&"word"!=by&&_error.AssertionError.raise("Unknown motion unit: "+by);for(var cat=null,counted=0;;){if(offset==parent.size)return offset;var _parent$chunkAfter=parent.chunkAfter(offset),start=_parent$chunkAfter.start,node=_parent$chunkAfter.node;if(!node.isText)return cat?offset:offset+1;if("char"==by)for(var i=offset-start;i<node.text.length;i++){if(!(0,_char.isExtendingChar)(node.text.charAt(i+1)))return offset+1;offset++}else if("word"==by)for(var i=offset-start;i<node.text.length;i++){var nextCharCat=(0,_char.charCategory)(node.text.charAt(i));if(null==cat||1==counted&&"space"==cat)cat=nextCharCat;else if(cat!=nextCharCat)return offset;offset++,counted++}}}function joinPointAbove(pm){var _pm$selection7=pm.selection,node=_pm$selection7.node,from=_pm$selection7.from;return node?(0,_transform.joinableBlocks)(pm.doc,from)?from:null:(0,_transform.joinPoint)(pm.doc,from,-1)}function joinPointBelow(pm){var _pm$selection8=pm.selection,node=_pm$selection8.node,to=_pm$selection8.to;return node?(0,_transform.joinableBlocks)(pm.doc,to)?to:null:(0,_transform.joinPoint)(pm.doc,to,1)}function nodeAboveSelection(pm){var sel=pm.selection,i=0;if(sel.node)return!!sel.from.depth&&sel.from.shorten();for(;i<sel.head.depth&&i<sel.anchor.depth&&sel.head.path[i]==sel.anchor.path[i];i++);return 0==i?!1:sel.head.shorten(i-1)}function moveSelectionBlock(pm,dir){var _pm$selection15=pm.selection,from=_pm$selection15.from,to=_pm$selection15.to,node=_pm$selection15.node,side=dir>0?to:from;return(0,_selection.findSelectionFrom)(pm.doc,node&&node.isBlock?side:side.shorten(null,dir>0?1:0),dir)}function selectNodeHorizontally(pm,dir){var _pm$selection16=pm.selection,empty=_pm$selection16.empty,node=_pm$selection16.node,from=_pm$selection16.from,to=_pm$selection16.to;if(!empty&&!node)return!1;if(node&&node.isInline)return pm.setTextSelection(dir>0?to:from),!0;var parent=void 0;if(!node&&(parent=pm.doc.path(from.path))&&(dir>0?from.offset<parent.size:from.offset)){var _ref=dir>0?parent.chunkAfter(from.offset):parent.chunkBefore(from.offset),nextNode=_ref.node,start=_ref.start;return nextNode.type.selectable&&start==from.offset-(dir>0?0:1)?(pm.setNodeSelection(0>dir?from.move(-1):from),!0):!1}var next=moveSelectionBlock(pm,dir);return next&&(next instanceof _selection.NodeSelection||node)?(pm.setSelectionDirect(next),!0):!1}function selectNodeVertically(pm,dir){var _pm$selection17=pm.selection,empty=_pm$selection17.empty,node=_pm$selection17.node,from=_pm$selection17.from,to=_pm$selection17.to;if(!empty&&!node)return!1;var leavingTextblock=!0;if((!node||node.isInline)&&(leavingTextblock=(0,_selection.verticalMotionLeavesTextblock)(pm,dir>0?to:from,dir)),leavingTextblock){var next=moveSelectionBlock(pm,dir);if(next&&next instanceof _selection.NodeSelection)return pm.setSelectionDirect(next),node||(pm.sel.lastNonNodePos=from),!0}if(!node)return!1;if(node.isInline)return(0,_dompos.setDOMSelectionToPos)(pm,from),!1;var last=pm.sel.lastNonNodePos,beyond=(0,_selection.findSelectionFrom)(pm.doc,0>dir?from:to,dir);return last&&beyond&&_model.Pos.samePath(last.path,beyond.from.path)?((0,_dompos.setDOMSelectionToPos)(pm,last),!1):(pm.setSelectionDirect(beyond),!0)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.baseCommands=void 0;var _model=require("../model"),_transform=require("../transform"),_error=require("../util/error"),_char=require("./char"),_selection=require("./selection"),_dompos=require("./dompos"),baseCommands=exports.baseCommands=Object.create(null);baseCommands.deleteSelection={label:"Delete the selection",run:function(pm){return pm.tr.replaceSelection().apply(pm.apply.scroll)},keys:{all:["Backspace(10)","Delete(10)","Mod-Backspace(10)","Mod-Delete(10)"],mac:["Ctrl-H(10)","Alt-Backspace(10)","Ctrl-D(10)","Ctrl-Alt-Backspace(10)","Alt-Delete(10)","Alt-D(10)"]}},baseCommands.joinBackward={label:"Join with the block above",run:function(pm){var _pm$selection=pm.selection,head=_pm$selection.head,empty=_pm$selection.empty;if(!empty||head.offset>0)return!1;for(var before=void 0,cut=void 0,i=head.path.length-1;!before&&i>=0;i--)head.path[i]>0&&(cut=head.shorten(i),before=pm.doc.path(cut.path).child(cut.offset-1));return before?null==before.type.contains?pm.tr["delete"](cut.move(-1),cut).apply(pm.apply.scroll):deleteBarrier(pm,cut):pm.tr.lift(head).apply(pm.apply.scroll)},keys:["Backspace(30)","Mod-Backspace(30)"]},baseCommands.deleteCharBefore={label:"Delete a character before the cursor",run:function(pm){var _pm$selection2=pm.selection,head=_pm$selection2.head,empty=_pm$selection2.empty;if(!empty||0==head.offset)return!1;var from=moveBackward(pm.doc.path(head.path),head.offset,"char");return pm.tr["delete"](new _model.Pos(head.path,from),head).apply(pm.apply.scroll)},keys:{all:["Backspace(60)"],mac:["Ctrl-H(40)"]}},baseCommands.deleteWordBefore={label:"Delete the word before the cursor",run:function(pm){var _pm$selection3=pm.selection,head=_pm$selection3.head,empty=_pm$selection3.empty;if(!empty||0==head.offset)return!1;var from=moveBackward(pm.doc.path(head.path),head.offset,"word");return pm.tr["delete"](new _model.Pos(head.path,from),head).apply(pm.apply.scroll)},keys:{all:["Mod-Backspace(40)"],mac:["Alt-Backspace(40)"]}},baseCommands.joinForward={label:"Join with the block below",run:function(pm){var _pm$selection4=pm.selection,head=_pm$selection4.head,empty=_pm$selection4.empty;if(!empty||head.offset<pm.doc.path(head.path).size)return!1;for(var after=void 0,cut=void 0,i=head.path.length-1;!after&&i>=0;i--){cut=head.shorten(i,1);var parent=pm.doc.path(cut.path);cut.offset<parent.size&&(after=parent.child(cut.offset))}return after?null==after.type.contains?pm.tr["delete"](cut,cut.move(1)).apply(pm.apply.scroll):deleteBarrier(pm,cut):!1},keys:["Delete(30)","Mod-Delete(30)"]},baseCommands.deleteCharAfter={label:"Delete a character after the cursor",run:function(pm){var _pm$selection5=pm.selection,head=_pm$selection5.head,empty=_pm$selection5.empty;if(!empty||head.offset==pm.doc.path(head.path).size)return!1;var to=moveForward(pm.doc.path(head.path),head.offset,"char");return pm.tr["delete"](head,new _model.Pos(head.path,to)).apply(pm.apply.scroll)},keys:{all:["Delete(60)"],mac:["Ctrl-D(60)"]}},baseCommands.deleteWordAfter={label:"Delete a word after the cursor",run:function(pm){var _pm$selection6=pm.selection,head=_pm$selection6.head,empty=_pm$selection6.empty;if(!empty||head.offset==pm.doc.path(head.path).size)return!1;var to=moveForward(pm.doc.path(head.path),head.offset,"word");return pm.tr["delete"](head,new _model.Pos(head.path,to)).apply(pm.apply.scroll)},keys:{all:["Mod-Delete(40)"],mac:["Ctrl-Alt-Backspace(40)","Alt-Delete(40)","Alt-D(40)"]}},baseCommands.joinUp={label:"Join with above block",run:function(pm){var point=joinPointAbove(pm),isNode=pm.selection.node;return point?(pm.tr.join(point).apply(),void(isNode&&pm.setNodeSelection(point.move(-1)))):!1},select:function(pm){return joinPointAbove(pm)},menu:{group:"block",rank:80,display:{type:"icon",width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"}},keys:["Alt-Up"]},baseCommands.joinDown={label:"Join with below block",run:function(pm){var node=pm.selection.node,point=joinPointBelow(pm);return point?(pm.tr.join(point).apply(),void(node&&pm.setNodeSelection(point.move(-1)))):!1},select:function(pm){return joinPointBelow(pm)},keys:["Alt-Down"]},baseCommands.lift={label:"Lift out of enclosing block",run:function(pm){var _pm$selection9=pm.selection,from=_pm$selection9.from,to=_pm$selection9.to;return pm.tr.lift(from,to).apply(pm.apply.scroll)},select:function(pm){var _pm$selection10=pm.selection,from=_pm$selection10.from,to=_pm$selection10.to;return(0,_transform.canLift)(pm.doc,from,to)},menu:{group:"block",rank:75,display:{type:"icon",width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"}},keys:["Alt-Left"]},baseCommands.newlineInCode={label:"Insert newline",run:function(pm){var _pm$selection11=pm.selection,from=_pm$selection11.from,to=_pm$selection11.to,node=_pm$selection11.node,block=void 0;return!node&&_model.Pos.samePath(from.path,to.path)&&(block=pm.doc.path(from.path)).type.isCode&&to.offset<block.size?pm.tr.typeText("\n").apply(pm.apply.scroll):!1},keys:["Enter(10)"]},baseCommands.createParagraphNear={label:"Create a paragraph near the selected leaf block",run:function(pm){var _pm$selection12=pm.selection,from=_pm$selection12.from,to=_pm$selection12.to,node=_pm$selection12.node;if(!node||!node.isBlock||node.type.contains)return!1;var side=from.offset?to:from;pm.tr.insert(side,pm.schema.defaultTextblockType().create()).apply(pm.apply.scroll),pm.setTextSelection(new _model.Pos(side.toPath(),0))},keys:["Enter(20)"]},baseCommands.liftEmptyBlock={label:"Move current block up",run:function(pm){var _pm$selection13=pm.selection,head=_pm$selection13.head,empty=_pm$selection13.empty;if(!empty||head.offset>0||pm.doc.path(head.path).size)return!1;if(head.depth>1){var shorter=head.shorten();if(shorter.offset>0&&shorter.offset<pm.doc.path(shorter.path).size-1&&pm.tr.split(shorter).apply()!==!1)return}return pm.tr.lift(head).apply(pm.apply.scroll)},keys:["Enter(30)"]},baseCommands.splitBlock={label:"Split the current block",run:function(pm){var _pm$selection14=pm.selection,from=_pm$selection14.from,to=_pm$selection14.to,node=_pm$selection14.node,block=pm.doc.path(to.path);if(node&&node.isBlock)return from.offset?pm.tr.split(from).apply(pm.apply.scroll):!1;var deflt=pm.schema.defaultTextblockType(),type=to.offset==block.size?deflt:null,tr=pm.tr["delete"](from,to).split(from,1,type);return to.offset<block.size&&!from.offset&&pm.doc.path(from.path).type!=deflt&&tr.setNodeType(from.shorten(),deflt),tr.apply(pm.apply.scroll)},keys:["Enter(60)"]},baseCommands.selectParentNode={label:"Select parent node",run:function(pm){var node=nodeAboveSelection(pm);return node?void pm.setNodeSelection(node):!1},select:function(pm){return nodeAboveSelection(pm)},menu:{group:"block",rank:90,display:{type:"icon",text:"⬚",style:"font-weight: bold; vertical-align: 20%"}},keys:["Esc"]},baseCommands.selectNodeLeft={label:"Move the selection onto or out of the block to the left",run:function(pm){var done=selectNodeHorizontally(pm,-1);return done&&pm.scrollIntoView(),done},keys:["Left","Mod-Left"]},baseCommands.selectNodeRight={label:"Move the selection onto or out of the block to the right",run:function(pm){var done=selectNodeHorizontally(pm,1);return done&&pm.scrollIntoView(),done},keys:["Right","Mod-Right"]},baseCommands.selectNodeUp={label:"Move the selection onto or out of the block above",run:function(pm){var done=selectNodeVertically(pm,-1);return done!==!1&&pm.scrollIntoView(),done},keys:["Up"]},baseCommands.selectNodeDown={label:"Move the selection onto or out of the block below",run:function(pm){var done=selectNodeVertically(pm,1);return done!==!1&&pm.scrollIntoView(),done},keys:["Down"]},baseCommands.undo={label:"Undo last change",run:function(pm){return pm.scrollIntoView(),pm.history.undo()},select:function(pm){return pm.history.undoDepth>0},menu:{group:"history",rank:10,display:{type:"icon",width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"}},keys:["Mod-Z"]},baseCommands.redo={label:"Redo last undone change",run:function(pm){return pm.scrollIntoView(),pm.history.redo()},select:function(pm){return pm.history.redoDepth>0},menu:{group:"history",rank:20,display:{type:"icon",width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"}},keys:["Mod-Y","Shift-Mod-Z"]}},{"../model":34,"../transform":40,"../util/error":52,"./char":4,"./dompos":8,"./selection":17}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function nothing(){}function ensureSelection(pm){if(pm.selection.node){var found=(0,_selection.findSelectionNear)(pm.doc,pm.selection.from,1,!0);found&&(0,_dompos.setDOMSelectionToPos)(pm,found.head)}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.captureKeys=void 0;var _browserkeymap=require("browserkeymap"),_browserkeymap2=_interopRequireDefault(_browserkeymap),_selection=require("./selection"),_dompos=require("./dompos"),_dom=require("../dom"),keys={Esc:nothing,Enter:nothing,"Mod-Enter":nothing,"Shift-Enter":nothing,Backspace:nothing,Delete:nothing,"Mod-B":nothing,"Mod-I":nothing,"Mod-Backspace":nothing,"Mod-Delete":nothing,"Shift-Backspace":nothing,"Shift-Delete":nothing,"Shift-Mod-Backspace":nothing,"Shift-Mod-Delete":nothing,"Mod-Z":nothing,"Mod-Y":nothing,"Shift-Mod-Z":nothing,"Ctrl-D":nothing,"Ctrl-H":nothing,"Ctrl-Alt-Backspace":nothing,"Alt-D":nothing,"Alt-Delete":nothing,"Alt-Backspace":nothing,"Mod-A":ensureSelection};["Left","Right","Up","Down","Home","End","PageUp","PageDown"].forEach(function(key){keys[key]=keys["Shift-"+key]=keys["Mod-"+key]=keys["Shift-Mod-"+key]=keys["Alt-"+key]=keys["Shift-Alt-"+key]=ensureSelection}),["Left","Mod-Left","Right","Mod-Right","Up","Down"].forEach(function(key){return delete keys[key]}),_dom.browser.mac&&(keys["Ctrl-F"]=keys["Ctrl-B"]=keys["Ctrl-P"]=keys["Ctrl-N"]=keys["Alt-F"]=keys["Alt-B"]=keys["Ctrl-A"]=keys["Ctrl-E"]=keys["Ctrl-V"]=keys.goPageUp=ensureSelection);exports.captureKeys=new _browserkeymap2["default"](keys)},{"../dom":1,"./dompos":8,"./selection":17,browserkeymap:65}],4:[function(require,module,exports){"use strict";function isWordChar(ch){return/\w/.test(ch)||isExtendingChar(ch)||ch>""&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))}function charCategory(ch){return/\s/.test(ch)?"space":isWordChar(ch)?"word":"other"}function isExtendingChar(ch){return ch.charCodeAt(0)>=768&&extendingChar.test(ch)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWordChar=isWordChar,exports.charCategory=charCategory,exports.isExtendingChar=isExtendingChar;var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,extendingChar=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/},{}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function deriveCommandSpec(type,spec,name){if(!spec.derive)return spec;var conf="object"==_typeof(spec.derive)?spec.derive:{},dname=conf.name||name,derive=type.constructor.deriveableCommands[dname];derive||_error.AssertionError.raise("Don't know how to derive command "+dname);var derived=derive.call(type,conf);for(var prop in spec)"derive"!=prop&&(derived[prop]=spec[prop]);return derived}function deriveKeymap(pm){function add(command,keys){for(var i=0;i<keys.length;i++){var _$exec=/^(.+?)(?:\((\d+)\))?$/.exec(keys[i]),_$exec2=_slicedToArray(_$exec,3),name=(_$exec2[0],_$exec2[1]),_$exec2$=_$exec2[2],rank=void 0===_$exec2$?50:_$exec2$;(0,_sortedinsert2["default"])(bindings[name]||(bindings[name]=[]),{command:command,rank:rank},function(a,b){return a.rank-b.rank})}}var bindings={},platform=_dom.browser.mac?"mac":"pc";for(var name in pm.commands){var cmd=pm.commands[name],keys=cmd.spec.keys;keys&&(Array.isArray(keys)&&add(cmd,keys),keys.all&&add(cmd,keys.all),keys[platform]&&add(cmd,keys[platform]))}for(var key in bindings)bindings[key]=bindings[key].map(function(b){return b.command.name});return new _browserkeymap2["default"](bindings)}function updateCommands(pm,set){pm.signal("commandsChanging"),pm.commands=set.derive(pm.schema),pm.input.baseKeymap=deriveKeymap(pm),pm.commandKeys=Object.create(null),pm.signal("commandsChanged")}function markActive(pm,type){var sel=pm.selection;return sel.empty?type.isInSet(pm.activeMarks()):pm.doc.rangeHasMark(sel.from,sel.to,type)}function canAddInline(pm,type){var _pm$selection=pm.selection,from=_pm$selection.from,to=_pm$selection.to,empty=_pm$selection.empty;if(empty)return!type.isInSet(pm.activeMarks())&&pm.doc.path(from.path).type.canContainMark(type);var can=!1;return pm.doc.nodesBetween(from,to,function(node){return can||node.isTextblock&&!node.type.canContainMark(type)?!1:void(node.isInline&&!type.isInSet(node.marks)&&(can=!0))}),can}function markApplies(pm,type){var _pm$selection2=pm.selection,from=_pm$selection2.from,to=_pm$selection2.to,relevant=!1;return pm.doc.nodesBetween(from,to,function(node){return node.isTextblock?(node.type.canContainMark(type)&&(relevant=!0),!1):void 0}),relevant}function selectedMarkAttr(pm,type,attr){var _pm$selection3=pm.selection,from=_pm$selection3.from,to=_pm$selection3.to,empty=_pm$selection3.empty,start=void 0,end=void 0;if(empty)start=end=type.isInSet(pm.activeMarks());else{var startParent=pm.doc.path(from.path),startChunk=startParent.size>from.offset&&startParent.chunkAfter(from.offset);start=startChunk?type.isInSet(startChunk.node.marks):null,end=type.isInSet(pm.doc.marksAt(to))}return start&&end&&start.attrs[attr]==end.attrs[attr]?start.attrs[attr]:void 0}function selectedNodeAttr(pm,type,name){var node=pm.selection.node;return node&&node.type==type?node.attrs[name]:void 0}function deriveParams(type,params){return params&&params.map(function(param){var attr=type.attrs[param.attr],obj={type:"text","default":attr["default"],prefill:type instanceof _model.NodeType?function(pm){return selectedNodeAttr(pm,this,param.attr)}:function(pm){return selectedMarkAttr(pm,this,param.attr)}};for(var prop in param)obj[prop]=param[prop];return obj})}function fillAttrs(conf,givenParams){var attrs=conf.attrs;return conf.params&&!function(){var filled=Object.create(null);if(attrs)for(var name in attrs)filled[name]=attrs[name];conf.params.forEach(function(param,i){return filled[param.attr]=givenParams[i]}),attrs=filled}(),attrs}function isAtTopOfListItem(doc,from,to,listType){return _model.Pos.samePath(from.path,to.path)&&from.path.length>=2&&0==from.path[from.path.length-1]&&listType.canContain(doc.path(from.path.slice(0,from.path.length-1)))}function alreadyHasBlockType(doc,from,to,type,attrs){var found=!1;return attrs||(attrs={}),doc.nodesBetween(from,to||from,function(node){return node.isTextblock?(node.hasMarkup(type,attrs)&&(found=!0),!1):void 0}),found}function activeTextblockIs(pm,type,attrs){var _pm$selection6=pm.selection,from=_pm$selection6.from,to=_pm$selection6.to,node=_pm$selection6.node;if(!node||node.isInline){if(!_model.Pos.samePath(from.path,to.path))return!1;node=pm.doc.path(from.path)}else if(!node.isTextblock)return!1;return node.hasMarkup(type,attrs)}var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommandSet=exports.Command=void 0,exports.updateCommands=updateCommands,exports.selectedNodeAttr=selectedNodeAttr;var _browserkeymap=require("browserkeymap"),_browserkeymap2=_interopRequireDefault(_browserkeymap),_model=require("../model"),_transform=require("../transform"),_dom=require("../dom"),_sortedinsert=require("../util/sortedinsert"),_sortedinsert2=_interopRequireDefault(_sortedinsert),_error=require("../util/error"),_obj=require("../util/obj"),_base_commands=require("./base_commands"),Command=exports.Command=function(){function Command(spec,self,name){_classCallCheck(this,Command),this.name=name,this.name||_error.NamespaceError.raise("Trying to define a command without a name"),this.spec=spec,this.self=self}return _createClass(Command,[{key:"exec",value:function(pm,params){var run=this.spec.run;return params?(this.params.length!=(params?params.length:0)&&_error.AssertionError.raise("Invalid amount of parameters for command "+this.name),run.call.apply(run,[this.self,pm].concat(_toConsumableArray(params)))):this.params.length?new pm.options.commandParamPrompt(pm,this).open():run.call(this.self,pm)}},{key:"select",value:function(pm){var f=this.spec.select;return f?f.call(this.self,pm):!0}},{key:"active",value:function(pm){var f=this.spec.active;return f?f.call(this.self,pm):!1}},{key:"params",get:function(){return this.spec.params||empty}},{key:"label",get:function(){return this.spec.label||this.name}}]),Command}(),empty=[],CommandSet=function(){function CommandSet(base,op){_classCallCheck(this,CommandSet),this.base=base,this.op=op}return _createClass(CommandSet,[{key:"add",value:function(set,filter){return new CommandSet(this,function(commands,schema){function add(name,spec,self){(!filter||filter(name,spec))&&(commands[name]&&_error.AssertionError.raise("Duplicate definition of command "+name),commands[name]=new Command(spec,self,name))}if("schema"===set)schema.registry("command",function(name,spec,type,typeName){add(typeName+":"+name,deriveCommandSpec(type,spec,name),type)});else for(var name in set)add(name,set[name])})}},{key:"update",value:function(_update){return new CommandSet(this,function(commands){for(var name in _update){var spec=_update[name];if(spec)if(spec.run)commands[name]=new Command(spec,null,name);else{var known=commands[name];known&&(commands[name]=new Command((0,_obj.copyObj)(spec,(0,_obj.copyObj)(known.spec)),known.self,name))}else delete commands[name]}})}},{key:"derive",value:function(schema){var commands=this.base?this.base.derive(schema):Object.create(null);return this.op(commands,schema),commands}}]),CommandSet}();exports.CommandSet=CommandSet,CommandSet.empty=new CommandSet(null,function(){return null}),CommandSet["default"]=CommandSet.empty.add("schema").add(_base_commands.baseCommands),_model.NodeType.deriveableCommands=Object.create(null),_model.MarkType.deriveableCommands=Object.create(null),_model.MarkType.deriveableCommands.set=function(conf){return{run:function(pm){for(var _len=arguments.length,params=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)params[_key-1]=arguments[_key];pm.setMark(this,!0,fillAttrs(conf,params))},select:function(pm){return conf.inverseSelect?markApplies(pm,this)&&!markActive(pm,this):canAddInline(pm,this)},params:deriveParams(this,conf.params)}},_model.MarkType.deriveableCommands.unset=function(){return{run:function(pm){pm.setMark(this,!1)},select:function(pm){return markActive(pm,this)}}},_model.MarkType.deriveableCommands.toggle=function(){return{run:function(pm){pm.setMark(this,null)},active:function(pm){return markActive(pm,this)},select:function(pm){return markApplies(pm,this)}}},_model.NodeType.deriveableCommands.wrap=function(conf){return{run:function(pm){var _pm$selection4=pm.selection,from=_pm$selection4.from,to=_pm$selection4.to,head=_pm$selection4.head,doJoin=!1;if(conf.list&&head&&isAtTopOfListItem(pm.doc,from,to,this)){if(0==from.path[from.path.length-2])return!1;doJoin=!0}for(var _len2=arguments.length,params=Array(_len2>1?_len2-1:0),_key2=1;_len2>_key2;_key2++)params[_key2-1]=arguments[_key2];var tr=pm.tr.wrap(from,to,this,fillAttrs(conf,params));return doJoin&&tr.join(from.shorten(from.depth-2)),tr.apply(pm.apply.scroll)},select:function(pm){var _pm$selection5=pm.selection,from=_pm$selection5.from,to=_pm$selection5.to,head=_pm$selection5.head;return conf.list&&head&&isAtTopOfListItem(pm.doc,from,to,this)&&0==from.path[from.path.length-2]?!1:(0,_transform.canWrap)(pm.doc,from,to,this,conf.attrs)},params:deriveParams(this,conf.params)}},_model.NodeType.deriveableCommands.make=function(conf){return{run:function(pm){var _pm$selection7=pm.selection,from=_pm$selection7.from,to=_pm$selection7.to;return pm.tr.setBlockType(from,to,this,conf.attrs).apply(pm.apply.scroll)},select:function(pm){var _pm$selection8=pm.selection,from=_pm$selection8.from,to=_pm$selection8.to,node=_pm$selection8.node;return node?node.isTextblock&&!node.hasMarkup(this,conf.attrs):!alreadyHasBlockType(pm.doc,from,to,this,conf.attrs)},active:function(pm){return activeTextblockIs(pm,this,conf.attrs)}}},_model.NodeType.deriveableCommands.insert=function(conf){return{run:function(pm){for(var _len3=arguments.length,params=Array(_len3>1?_len3-1:0),_key3=1;_len3>_key3;_key3++)params[_key3-1]=arguments[_key3];return pm.tr.replaceSelection(this.create(fillAttrs(conf,params))).apply(pm.apply.scroll)},select:this.isInline?function(pm){return pm.doc.path(pm.selection.from.path).type.canContainType(this)}:null,params:deriveParams(this,conf.params)}}},{"../dom":1,"../model":34,"../transform":40,"../util/error":52,"../util/obj":55,"../util/sortedinsert":56,"./base_commands":2,browserkeymap:65}],6:[function(require,module,exports){"use strict";var _dom=require("../dom");(0,_dom.insertCSS)('\n\n.ProseMirror {\n  border: 1px solid silver;\n  position: relative;\n}\n\n.ProseMirror-content {\n  padding: 4px 8px 4px 14px;\n  white-space: pre-wrap;\n  line-height: 1.2;\n}\n\n.ProseMirror-drop-target {\n  position: absolute;\n  width: 1px;\n  background: #666;\n  display: none;\n}\n\n.ProseMirror-content ul.tight p, .ProseMirror-content ol.tight p {\n  margin: 0;\n}\n\n.ProseMirror-content ul, .ProseMirror-content ol {\n  padding-left: 30px;\n  cursor: default;\n}\n\n.ProseMirror-content blockquote {\n  padding-left: 1em;\n  border-left: 3px solid #eee;\n  margin-left: 0; margin-right: 0;\n}\n\n.ProseMirror-content pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\n.ProseMirror-nodeselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-content p:first-child,\n.ProseMirror-content h1:first-child,\n.ProseMirror-content h2:first-child,\n.ProseMirror-content h3:first-child,\n.ProseMirror-content h4:first-child,\n.ProseMirror-content h5:first-child,\n.ProseMirror-content h6:first-child {\n  margin-top: .3em;\n}\n\n/* Add space around the hr to make clicking it easier */\n\n.ProseMirror-content hr {\n  position: relative;\n  height: 6px;\n  border: none;\n}\n\n.ProseMirror-content hr:after {\n  content: "";\n  position: absolute;\n  left: 10px;\n  right: 10px;\n  top: 2px;\n  border-top: 2px solid silver;\n}\n\n.ProseMirror-content img {\n  cursor: default;\n}\n\n/* Make sure li selections wrap around markers */\n\n.ProseMirror-content li {\n  position: relative;\n  pointer-events: none; /* Don\'t do weird stuff with marker clicks */\n}\n.ProseMirror-content li > * {\n  pointer-events: auto;\n}\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px; top: -2px; bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n');
},{"../dom":1}],7:[function(require,module,exports){"use strict";function isAtEnd(node,pos,depth){for(var i=depth||0;i<pos.path.length;i++){var n=pos.path[depth];if(n<node.size-1)return!1;node=node.child(n)}return pos.offset==node.size}function isAtStart(pos,depth){if(pos.offset>0)return!1;for(var i=depth||0;i<pos.path.length;i++)if(pos.path[depth]>0)return!1;return!0}function parseNearSelection(pm){for(var dom=pm.content,node=pm.doc,_pm$selection=pm.selection,from=_pm$selection.from,to=_pm$selection.to,depth=0;;depth++){var toNode=node.child(to.path[depth]),fromStart=isAtStart(from,depth+1),toEnd=isAtEnd(toNode,to,depth+1);if(fromStart||toEnd||from.path[depth]!=to.path[depth]||toNode.isTextblock){var startOffset=depth==from.depth?from.offset:from.path[depth];fromStart&&startOffset>0&&startOffset--;var endOffset=depth==to.depth?to.offset:to.path[depth]+1;toEnd&&endOffset<node.size-1&&endOffset++;var parsed=(0,_format.fromDOM)(pm.schema,dom,{topNode:node.copy(),from:startOffset,to:dom.childNodes.length-(node.size-endOffset),preserveWhitespace:!0});parsed=parsed.copy(node.content.slice(0,startOffset).append(parsed.content).append(node.content.slice(endOffset)));for(var i=depth-1;i>=0;i--){var wrap=pm.doc.path(from.path.slice(0,i));parsed=wrap.replace(from.path[i],parsed)}return parsed}node=toNode,dom=(0,_dompos.findByPath)(dom,from.path[depth],!1)}}function applyDOMChange(pm){var updated=parseNearSelection(pm),changeStart=(0,_model.findDiffStart)(pm.doc.content,updated.content);if(changeStart){var changeEnd=findDiffEndConstrained(pm.doc.content,updated.content,changeStart);return markDirtyFor(pm,changeStart,changeEnd),pm.tr.replace(changeStart,changeEnd.a,updated,changeStart,changeEnd.b).apply(),!0}return!1}function offsetBy(first,second,pos){var same=(0,_tree.samePathDepth)(first,second),firstEnd=same==first.depth,secondEnd=same==second.depth,off=(secondEnd?second.offset:second.path[same])-(firstEnd?first.offset:first.path[same]),shorter=firstEnd?pos.move(off):pos.shorten(same,off);return secondEnd?shorter:shorter.extend(new _model.Pos(second.path.slice(same),second.offset))}function findDiffEndConstrained(a,b,start){var end=(0,_model.findDiffEnd)(a,b);return end?end.a.cmp(start)<0?{a:start,b:offsetBy(end.a,start,end.b)}:end.b.cmp(start)<0?{a:offsetBy(end.b,start,end.a),b:start}:end:end}function sameDepth(a,b){for(var max=Math.min(a.depth,b.depth),i=0;max>i;i++)if(a.path[i]!=b.path[i])return i;return max}function markDirtyFor(pm,start,end){var depth=Math.min(sameDepth(start,end.a),sameDepth(start,end.b));if(0==depth)pm.markAllDirty();else{var pos=_model.Pos.from(start.path.slice(0,depth));pm.markRangeDirty({from:pos,to:pos.move(1)})}}function textContext(data){var range=window.getSelection().getRangeAt(0),start=range.startContainer,end=range.endContainer;if(start==end&&3==start.nodeType){var value=start.nodeValue,lead=range.startOffset,_end=range.endOffset;return data&&_end>=data.length&&value.slice(_end-data.length,_end)==data&&(lead=_end-data.length),{inside:start,lead:lead,trail:value.length-_end}}for(var sizeBefore=null,sizeAfter=null,before=start.childNodes[range.startOffset-1]||nodeBefore(start);before.lastChild;)before=before.lastChild;if(before&&3==before.nodeType){var value=before.nodeValue;sizeBefore=value.length,data&&value.slice(value.length-data.length)==data&&(sizeBefore-=data.length)}for(var after=end.childNodes[range.endOffset]||nodeAfter(end);after.firstChild;)after=after.firstChild;return after&&3==after.nodeType&&(sizeAfter=after.nodeValue.length),{before:before,sizeBefore:sizeBefore,after:after,sizeAfter:sizeAfter}}function textInContext(context,deflt){if(context.inside){var _val=context.inside.nodeValue;return _val.slice(context.lead,_val.length-context.trail)}var before=context.before,after=context.after,val="";if(!before)return deflt;3==before.nodeType&&(val=before.nodeValue.slice(context.sizeBefore));var scan=scanText(before,after);if(null==scan)return deflt;if(val+=scan,after&&3==after.nodeType){var valAfter=after.nodeValue;val+=valAfter.slice(0,valAfter.length-context.sizeAfter)}return val}function nodeAfter(node){for(;;){var next=node.nextSibling;if(next){for(;next.firstChild;)next=next.firstChild;return next}if(!(node=node.parentElement))return null}}function nodeBefore(node){for(;;){var prev=node.previousSibling;if(prev){for(;prev.lastChild;)prev=prev.lastChild;return prev}if(!(node=node.parentElement))return null}}function scanText(start,end){for(var text="",cur=nodeAfter(start);;){if(cur==end)return text;if(!cur)return null;3==cur.nodeType&&(text+=cur.nodeValue),cur=cur.firstChild||nodeAfter(cur)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyDOMChange=applyDOMChange,exports.textContext=textContext,exports.textInContext=textInContext;var _model=require("../model"),_format=require("../format"),_tree=require("../transform/tree"),_dompos=require("./dompos")},{"../format":20,"../model":34,"../transform/tree":48,"./dompos":8}],8:[function(require,module,exports){"use strict";function pathFromDOM(pm,node){for(var path=[];node!=pm.content;){var attr=node.getAttribute("pm-offset");attr&&path.unshift(+attr),node=node.parentNode}return path}function widthFromDOM(dom){var attr=dom.getAttribute("pm-leaf");return attr&&"true"!=attr?+attr:1}function posFromDOM(pm,dom,domOffset,loose){!loose&&pm.operation&&pm.doc!=pm.operation.doc&&_error.AssertionError.raise("Fetching a position from an outdated DOM structure"),null==domOffset&&(domOffset=Array.prototype.indexOf.call(dom.parentNode.childNodes,dom),dom=dom.parentNode);for(var extraOffset=0,tag=void 0;;){var adjust=0;if(3==dom.nodeType)extraOffset+=domOffset;else{if(dom.hasAttribute("pm-container"))break;(tag=dom.getAttribute("pm-inner-offset"))?(extraOffset+=+tag,adjust=-1):domOffset&&domOffset==dom.childNodes.length&&(adjust=1)}var parent=dom.parentNode;domOffset=0>adjust?0:Array.prototype.indexOf.call(parent.childNodes,dom)+adjust,dom=parent}var path=pathFromDOM(pm,dom);if(dom.hasAttribute("pm-leaf"))return _model.Pos.from(path,extraOffset+(domOffset?1:0));for(var offset=0,i=domOffset-1;i>=0;i--){var child=dom.childNodes[i];if(3==child.nodeType)loose&&(extraOffset+=child.nodeValue.length);else{if(tag=child.getAttribute("pm-offset")){offset=+tag+widthFromDOM(child);break}loose&&!child.hasAttribute("pm-ignore")&&(extraOffset+=child.textContent.length)}}return new _model.Pos(path,offset+extraOffset)}function findByPath(node,n,fromEnd){for(var container=childContainer(node),ch=fromEnd?container.lastChild:container.firstChild;ch;ch=fromEnd?ch.previousSibling:ch.nextSibling)if(1==ch.nodeType){var offset=ch.getAttribute("pm-offset");if(offset&&+offset==n)return ch}}function pathToDOM(parent,path){for(var node=parent,i=0;i<path.length;i++)node=findByPath(node,path[i]),node||_error.AssertionError.raise("Failed to resolve path "+path.join("/"));return node}function childContainer(dom){return dom.hasAttribute("pm-container")?dom:dom.querySelector("[pm-container]")}function findByOffset(node,offset,after){for(var attr,ch=node.firstChild,i=0;ch;ch=ch.nextSibling,i++)if(1==ch.nodeType&&(attr=ch.getAttribute("pm-offset"))){var diff=offset-+attr,width=widthFromDOM(ch);if(diff>=0&&(after?width>=diff:width>diff))return{node:ch,offset:i,innerOffset:diff}}}function leafAt(node,offset){for(;;){var child=node.firstChild;if(!child)return{node:node,offset:offset};if(1!=child.nodeType)return{node:child,offset:offset};if(child.hasAttribute("pm-inner-offset")){for(var nodeOffset=0;;){var nextSib=child.nextSibling,nextOffset=void 0;if(!nextSib||(nextOffset=+nextSib.getAttribute("pm-inner-offset"))>=offset)break;child=nextSib,nodeOffset=nextOffset}offset-=nodeOffset}node=child}}function DOMFromPos(parent,pos){var dom=childContainer(pathToDOM(parent,pos.path)),found=findByOffset(dom,pos.offset,!0),inner=void 0;return found?"true"!=found.node.getAttribute("pm-leaf")&&(inner=leafAt(found.node,found.innerOffset))?inner:{node:found.node.parentNode,offset:found.offset+(found.innerOffset?1:0)}:{node:dom,offset:0}}function windowRect(){return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight}}function scrollIntoView(pm,pos){pos||(pos=pm.sel.range.head||pm.sel.range.from);for(var coords=coordsAtPos(pm,pos),parent=pm.content;;parent=parent.parentNode){var atBody=parent==document.body,rect=atBody?windowRect():parent.getBoundingClientRect(),moveX=0,moveY=0;if(coords.top<rect.top?moveY=-(rect.top-coords.top+scrollMargin):coords.bottom>rect.bottom&&(moveY=coords.bottom-rect.bottom+scrollMargin),coords.left<rect.left?moveX=-(rect.left-coords.left+scrollMargin):coords.right>rect.right&&(moveX=coords.right-rect.right+scrollMargin),moveX||moveY?atBody&&window.scrollBy(moveX,moveY):(moveY&&(parent.scrollTop+=moveY),moveX&&(parent.scrollLeft+=moveX)),atBody)break}}function findOffsetInNode(node,coords){for(var closest=void 0,dyClosest=1e8,coordsClosest=void 0,offset=0,child=node.firstChild;child;child=child.nextSibling){var rects=void 0;if(1==child.nodeType)rects=child.getClientRects();else{if(3!=child.nodeType)continue;rects=textRects(child)}for(var i=0;i<rects.length;i++){var rect=rects[i];if(rect.left<=coords.left&&rect.right>=coords.left){var dy=rect.top>coords.top?rect.top-coords.top:rect.bottom<coords.top?coords.top-rect.bottom:0;if(dyClosest>dy){closest=child,dyClosest=dy,coordsClosest=dy?{left:coords.left,top:rect.top}:coords,1!=child.nodeType||child.firstChild||(offset=i+(coords.left>=(rect.left+rect.right)/2?1:0));continue}}!closest&&(coords.top>=rect.bottom||coords.top>=rect.top&&coords.left>=rect.right)&&(offset=i+1)}}return closest?3==closest.nodeType?findOffsetInText(closest,coordsClosest):closest.firstChild?findOffsetInNode(closest,coordsClosest):{node:node,offset:offset}:{node:node,offset:offset}}function findOffsetInText(node,coords){for(var len=node.nodeValue.length,range=document.createRange(),i=0;len>i;i++){range.setEnd(node,i+1),range.setStart(node,i);var rect=range.getBoundingClientRect();if(rect.top!=rect.bottom&&rect.left<=coords.left&&rect.right>=coords.left&&rect.top<=coords.top&&rect.bottom>=coords.top)return{node:node,offset:i+(coords.left>=(rect.left+rect.right)/2?1:0)}}return{node:node,offset:0}}function posAtCoords(pm,coords){var elt=document.elementFromPoint(coords.left,coords.top+1);if(!(0,_dom.contains)(pm.content,elt))return null;elt.firstChild||(elt=elt.parentNode);var _findOffsetInNode=findOffsetInNode(elt,coords),node=_findOffsetInNode.node,offset=_findOffsetInNode.offset;return posFromDOM(pm,node,offset)}function textRect(node,from,to){var range=document.createRange();return range.setEnd(node,to),range.setStart(node,from),range.getBoundingClientRect()}function textRects(node){var range=document.createRange();return range.setEnd(node,node.nodeValue.length),range.setStart(node,0),range.getClientRects()}function coordsAtPos(pm,pos){var _DOMFromPos=DOMFromPos(pm.content,pos),node=_DOMFromPos.node,offset=_DOMFromPos.offset,side=void 0,rect=void 0;if(3==node.nodeType)offset<node.nodeValue.length&&(rect=textRect(node,offset,offset+1),side="left"),rect&&rect.left!=rect.right||!offset||(rect=textRect(node,offset-1,offset),side="right");else if(node.firstChild){if(offset<node.childNodes.length){var child=node.childNodes[offset];rect=3==child.nodeType?textRect(child,0,child.nodeValue.length):child.getBoundingClientRect(),side="left"}if((!rect||rect.left==rect.right)&&offset){var child=node.childNodes[offset-1];rect=3==child.nodeType?textRect(child,0,child.nodeValue.length):child.getBoundingClientRect(),side="right"}}else rect=node.getBoundingClientRect(),side="left";var x=rect[side];return{top:rect.top,bottom:rect.bottom,left:x,right:x}}function setDOMSelectionToPos(pm,pos){var _DOMFromPos2=DOMFromPos(pm.content,pos),node=_DOMFromPos2.node,offset=_DOMFromPos2.offset,range=document.createRange();range.setEnd(node,offset),range.setStart(node,offset);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range)}function selectableNodeAbove(pm,dom,coords,liberal){for(;dom&&dom!=pm.content;dom=dom.parentNode)if(dom.hasAttribute("pm-offset")){var path=pathFromDOM(pm,dom),node=pm.doc.path(path);if(node.type.countCoordsAsChild){var result=node.type.countCoordsAsChild(node,path,dom,coords);if(result)return result}if((liberal||null==node.type.contains)&&node.type.selectable)return _model.Pos.from(path);if(!liberal)return null}}function handleNodeClick(pm,type,event,direct){for(var dom=event.target;dom&&dom!=pm.content;dom=dom.parentNode)if(dom.hasAttribute("pm-offset")){var path=pathFromDOM(pm,dom),node=pm.doc.path(path),handled=node.type[type]&&node.type[type](pm,event,path,node)!==!1;if(direct||handled)return handled}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.pathFromDOM=pathFromDOM,exports.widthFromDOM=widthFromDOM,exports.posFromDOM=posFromDOM,exports.findByPath=findByPath,exports.pathToDOM=pathToDOM,exports.childContainer=childContainer,exports.DOMFromPos=DOMFromPos,exports.scrollIntoView=scrollIntoView,exports.posAtCoords=posAtCoords,exports.coordsAtPos=coordsAtPos,exports.setDOMSelectionToPos=setDOMSelectionToPos,exports.selectableNodeAbove=selectableNodeAbove,exports.handleNodeClick=handleNodeClick;var _model=require("../model"),_dom=require("../dom"),_error=require("../util/error"),scrollMargin=5},{"../dom":1,"../model":34,"../util/error":52}],9:[function(require,module,exports){"use strict";function options(path,ranges){return{onRender:function(node,dom,offset){return node.isText||null!=node.type.contains||(dom.contentEditable=!1,node.isBlock&&dom.setAttribute("pm-leaf","true")),node.isBlock&&null!=offset&&dom.setAttribute("pm-offset",offset),node.isTextblock&&adjustTrailingHacks(dom,node),dom},onContainer:function(node){node.setAttribute("pm-container",!0)},renderInlineFlat:function(node,dom,offset){ranges.advanceTo(new _model.Pos(path,offset));for(var end=new _model.Pos(path,offset+node.width),nextCut=ranges.nextChangeBefore(end),inner=dom,wrapped=void 0,i=0;i<node.marks.length;i++)inner=inner.firstChild;1!=dom.nodeType&&(dom=(0,_dom.elt)("span",null,dom),nextCut||(wrapped=dom)),wrapped||!nextCut&&!ranges.current.length||(wrapped=inner==dom?dom=(0,_dom.elt)("span",null,inner):inner.parentNode.appendChild((0,_dom.elt)("span",null,inner))),dom.setAttribute("pm-offset",offset),null==node.type.contains&&dom.setAttribute("pm-leaf",node.isText?node.width:"true");for(var inlineOffset=0;nextCut;){var size=nextCut-offset,split=splitSpan(wrapped,size);ranges.current.length&&(split.className=ranges.current.join(" ")),split.setAttribute("pm-inner-offset",inlineOffset),inlineOffset+=size,offset+=size,ranges.advanceTo(new _model.Pos(path,offset)),(nextCut=ranges.nextChangeBefore(end))||wrapped.setAttribute("pm-inner-offset",inlineOffset)}return ranges.current.length&&(wrapped.className=ranges.current.join(" ")),dom},document:document,path:path}}function splitSpan(span,at){var textNode=span.firstChild,text=textNode.nodeValue,newNode=span.parentNode.insertBefore((0,_dom.elt)("span",null,text.slice(0,at)),span);return textNode.nodeValue=text.slice(at),newNode}function draw(pm,doc){pm.content.textContent="",pm.content.appendChild((0,_format.toDOM)(doc,options([],pm.ranges.activeRangeTracker())))}function adjustTrailingHacks(dom,node){var needs=0==node.size||node.lastChild.type.isBR||node.type.isCode&&node.lastChild.isText&&/\n$/.test(node.lastChild.text)?"br":node.lastChild.isText||null!=node.lastChild.type.contains?null:"text",last=dom.lastChild,has=last&&1==last.nodeType&&last.hasAttribute("pm-ignore")?"BR"==last.nodeName?"br":"text":null;needs!=has&&(has&&dom.removeChild(last),needs&&dom.appendChild("br"==needs?(0,_dom.elt)("br",{"pm-ignore":"trailing-break"}):(0,_dom.elt)("span",{"pm-ignore":"cursor-text"},"")))}function findNodeIn(iter,node){for(var child,copy=iter.copy();child=copy.next().value;)if(child==node)return child}function movePast(dom){var next=dom.nextSibling;return dom.parentNode.removeChild(dom),next}function redraw(pm,dirty,doc,prev){function scan(dom,node,prev){for(var child,iNode=node.iter(),iPrev=prev.iter(),pChild=iPrev.next().value,domPos=dom.firstChild;child=iNode.next().value;){var offset=iNode.offset-child.width,matching=void 0,reuseDOM=void 0;if(node.isTextblock||opts.path.push(offset),pChild==child)matching=pChild;else if(matching=findNodeIn(iPrev,child))for(;pChild!=matching;)pChild=iPrev.next().value,domPos=movePast(domPos);if(matching&&!dirty.get(matching))reuseDOM=!0;else if(pChild&&!child.isText&&child.sameMarkup(pChild)&&dirty.get(pChild)!=_main.DIRTY_REDRAW)reuseDOM=!0,pChild.type.contains&&scan((0,_dompos.childContainer)(domPos),child,pChild);else{var rendered=(0,_format.nodeToDOM)(child,opts,offset);dom.insertBefore(rendered,domPos),reuseDOM=!1}reuseDOM&&(domPos.setAttribute("pm-offset",offset),domPos=domPos.nextSibling,pChild=iPrev.next().value),node.isTextblock||opts.path.pop()}for(;pChild;)domPos=movePast(domPos),pChild=iPrev.next().value;node.isTextblock&&adjustTrailingHacks(dom,node)}if(dirty.get(prev)==_main.DIRTY_REDRAW)return draw(pm,doc);var opts=options([],pm.ranges.activeRangeTracker());scan(pm.content,doc,prev)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.draw=draw,exports.redraw=redraw;var _model=require("../model"),_format=require("../format"),_dom=require("../dom"),_main=require("./main"),_dompos=require("./dompos")},{"../dom":1,"../format":20,"../model":34,"./dompos":8,"./main":13}],10:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function isDelStep(step){return"replace"==step.type&&step.from.offset<step.to.offset&&_model.Pos.samePath(step.from.path,step.to.path)&&(!step.param||0==step.param.content.size)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.History=void 0;var _model=require("../model"),_transform=require("../transform"),InvertedStep=function InvertedStep(step,version,id){_classCallCheck(this,InvertedStep),this.step=step,this.version=version,this.id=id},BranchRemapping=function(){function BranchRemapping(branch){_classCallCheck(this,BranchRemapping),this.branch=branch,this.remap=new _transform.Remapping,this.version=branch.version,this.mirrorBuffer=Object.create(null)}return _createClass(BranchRemapping,[{key:"moveToVersion",value:function(version){for(;this.version>version;)this.addNextMap()}},{key:"addNextMap",value:function(){var found=this.branch.mirror[this.version],mapOffset=this.branch.maps.length-(this.branch.version-this.version)-1,id=this.remap.addToFront(this.branch.maps[mapOffset],this.mirrorBuffer[this.version]);return--this.version,null!=found&&(this.mirrorBuffer[found]=id),id}},{key:"movePastStep",value:function(result){var id=this.addNextMap();result&&this.remap.addToBack(result.map,id)}}]),BranchRemapping}(),workTime=100,pauseTime=150,CompressionWorker=function(){function CompressionWorker(doc,branch,callback){_classCallCheck(this,CompressionWorker),this.branch=branch,this.callback=callback,this.remap=new BranchRemapping(branch),this.doc=doc,this.events=[],this.maps=[],this.version=this.startVersion=branch.version,this.i=branch.events.length,this.timeout=null,this.aborted=!1}return _createClass(CompressionWorker,[{key:"work",value:function(){var _this=this;if(!this.aborted)for(var endTime=Date.now()+workTime;;){if(0==this.i)return this.finish();for(var event=this.branch.events[--this.i],outEvent=[],j=event.length-1;j>=0;j--){var _event$j=event[j],step=_event$j.step,stepVersion=_event$j.version,stepID=_event$j.id;this.remap.moveToVersion(stepVersion);var mappedStep=step.map(this.remap.remap);if(mappedStep&&isDelStep(step)){for(var extra=0,start=step.from;j>0;){var next=event[j-1];if(next.version!=stepVersion-1||!isDelStep(next.step)||start.cmp(next.step.to))break;extra+=next.step.to.offset-next.step.from.offset,start=next.step.from,stepVersion--,j--,this.remap.addNextMap()}if(extra>0){var _start=mappedStep.from.move(-extra);mappedStep=new _transform.Step("replace",_start,mappedStep.to,_start)}}var result=mappedStep&&mappedStep.apply(this.doc);result&&(this.doc=result.doc,this.maps.push(result.map.invert()),outEvent.push(new InvertedStep(mappedStep,this.version,stepID)),this.version--),this.remap.movePastStep(result)}if(outEvent.length&&(outEvent.reverse(),this.events.push(outEvent)),Date.now()>endTime)return void(this.timeout=window.setTimeout(function(){return _this.work()},pauseTime))}}},{key:"finish",value:function(){this.aborted||(this.events.reverse(),this.maps.reverse(),this.callback(this.maps.concat(this.branch.maps.slice(this.branch.maps.length-(this.branch.version-this.startVersion))),this.events))}},{key:"abort",value:function(){this.aborted=!0,window.clearTimeout(this.timeout)}}]),CompressionWorker}(),compressStepCount=150,Branch=function(){function Branch(maxDepth){_classCallCheck(this,Branch),this.maxDepth=maxDepth,this.version=0,this.nextStepID=1,this.maps=[],this.mirror=Object.create(null),this.events=[],this.stepsSinceCompress=0,this.compressing=null,this.compressTimeout=null}return _createClass(Branch,[{key:"clear",value:function(force){(force||!this.empty())&&(this.maps.length=this.events.length=this.stepsSinceCompress=0,this.mirror=Object.create(null),this.abortCompression())}},{key:"newEvent",value:function(){for(this.abortCompression(),this.events.push([]);this.events.length>this.maxDepth;)this.events.shift()}},{key:"addMap",value:function(map){return this.empty()?void 0:(this.maps.push(map),this.version++,this.stepsSinceCompress++,!0)}},{key:"empty",value:function(){return 0==this.events.length}},{key:"addStep",value:function(step,map,id){this.addMap(map),null==id&&(id=this.nextStepID++),this.events[this.events.length-1].push(new InvertedStep(step,this.version,id))}},{key:"addTransform",value:function(transform,ids){this.abortCompression();for(var i=0;i<transform.steps.length;i++){var inverted=transform.steps[i].invert(transform.docs[i],transform.maps[i]);this.addStep(inverted,transform.maps[i],ids&&ids[i])}}},{key:"popEvent",value:function(doc,allowCollapsing){this.abortCompression();var event=this.events.pop();if(!event)return null;for(var remap=new BranchRemapping(this),collapsing=allowCollapsing,tr=new _transform.Transform(doc),ids=[],i=event.length-1;i>=0;i--){var invertedStep=event[i],step=invertedStep.step;if(collapsing&&invertedStep.version==remap.version)this.version--,delete this.mirror[this.version],this.maps.pop(),tr.step(step),ids.push(invertedStep.id),--remap.version;else{collapsing=!1,remap.moveToVersion(invertedStep.version),step=step.map(remap.remap);var result=step&&tr.step(step);result&&(ids.push(invertedStep.id),this.addMap(result.map)&&(this.mirror[this.version]=invertedStep.version)),i>0&&remap.movePastStep(result)}}return this.empty()&&this.clear(!0),{transform:tr,ids:ids}}},{key:"lastStep",value:function(){for(var i=this.events.length-1;i>=0;i--){var event=this.events[i];if(event.length)return event[event.length-1]}}},{key:"getVersion",value:function(){var step=this.lastStep();return{lastID:step&&step.id,version:this.version}}},{key:"isAtVersion",value:function(version){var step=this.lastStep();return this.version==version.version&&(step&&step.id)==version.lastID}},{key:"findVersion",value:function(version){for(var i=this.events.length-1;i>=0;i--)for(var event=this.events[i],j=event.length-1;j>=0;j--)if(event[j].id<=version.lastID)return{event:i,step:j+1}}},{key:"rebased",value:function(newMaps,rebasedTransform,positions){if(!this.empty()){this.abortCompression();var startVersion=this.version-positions.length;out:for(var i=this.events.length-1;i>=0;i--)for(var event=this.events[i],j=event.length-1;j>=0;j--){var step=event[j];if(step.version<=startVersion)break out;var off=positions[step.version-startVersion-1];if(-1==off)event.splice(j--,1);else{var inv=rebasedTransform.steps[off].invert(rebasedTransform.docs[off],rebasedTransform.maps[off]);event[j]=new InvertedStep(inv,startVersion+newMaps.length+off+1,step.id)}}this.maps.length>positions.length?this.maps=this.maps.slice(0,this.maps.length-positions.length).concat(newMaps).concat(rebasedTransform.maps):this.maps=rebasedTransform.maps.slice(),this.version=startVersion+newMaps.length+rebasedTransform.maps.length,this.stepsSinceCompress+=newMaps.length+rebasedTransform.steps.length-positions.length}}},{key:"abortCompression",value:function(){this.compressing&&(this.compressing.abort(),this.compressing=null)}},{key:"needsCompression",value:function(){return this.stepsSinceCompress>compressStepCount&&!this.compressing}},{key:"startCompression",value:function(doc){var _this2=this;this.compressing=new CompressionWorker(doc,this,function(maps,events){_this2.maps=maps,_this2.events=events,_this2.mirror=Object.create(null),_this2.compressing=null,_this2.stepsSinceCompress=0}),this.compressing.work()}}]),Branch}(),compressDelay=750;exports.History=function(){function History(pm){var _this3=this;_classCallCheck(this,History),this.pm=pm,this.done=new Branch(pm.options.historyDepth),this.undone=new Branch(pm.options.historyDepth),this.lastAddedAt=0,this.ignoreTransform=!1,this.allowCollapsing=!0,pm.on("transform",function(transform,options){return _this3.recordTransform(transform,options)})}return _createClass(History,[{key:"recordTransform",value:function(transform,options){if(!this.ignoreTransform){if(0==options.addToHistory)for(var i=0;i<transform.maps.length;i++){var map=transform.maps[i];this.done.addMap(map),this.undone.addMap(map)}else{this.undone.clear();var now=Date.now();now>this.lastAddedAt+this.pm.options.historyEventDelay&&this.done.newEvent(),this.done.addTransform(transform),this.lastAddedAt=now}this.maybeScheduleCompression()}}},{key:"undo",value:function(){return this.shift(this.done,this.undone)}},{key:"redo",value:function(){return this.shift(this.undone,this.done)}},{key:"shift",value:function(from,to){var event=from.popEvent(this.pm.doc,this.allowCollapsing);if(!event)return!1;var transform=event.transform,ids=event.ids;return this.ignoreTransform=!0,this.pm.apply(transform),this.ignoreTransform=!1,transform.steps.length?(to&&(to.newEvent(),to.addTransform(transform,ids)),this.lastAddedAt=0,!0):this.shift(from,to)}},{key:"getVersion",value:function(){return this.done.getVersion()}},{key:"isAtVersion",value:function(version){return this.done.isAtVersion(version)}},{key:"backToVersion",value:function(version){var found=this.done.findVersion(version);if(!found)return!1;var event=this.done.events[found.event];if(found.event==this.done.events.length-1&&found.step==event.length)return!0;var combined=this.done.events.slice(found.event+1).reduce(function(comb,arr){return comb.concat(arr)},event.slice(found.step));return this.done.events.length=found.event+((event.length=found.step)?1:0),this.done.events.push(combined),this.shift(this.done),!0}},{key:"rebased",value:function(newMaps,rebasedTransform,positions){this.done.rebased(newMaps,rebasedTransform,positions),this.undone.rebased(newMaps,rebasedTransform,positions),this.maybeScheduleCompression()}},{key:"maybeScheduleCompression",value:function(){this.maybeScheduleCompressionForBranch(this.done),this.maybeScheduleCompressionForBranch(this.undone)}},{key:"maybeScheduleCompressionForBranch",value:function(branch){var _this4=this;window.clearTimeout(branch.compressTimeout),branch.needsCompression()&&(branch.compressTimeout=window.setTimeout(function(){branch.needsCompression()&&branch.startCompression(_this4.pm.doc)},compressDelay))}},{key:"undoDepth",get:function(){return this.done.events.length}},{key:"redoDepth",get:function(){return this.undone.events.length}}]),History}()},{"../model":34,"../transform":40}],11:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Keymap=exports.baseCommands=exports.Command=exports.CommandSet=exports.MarkedRange=exports.SelectionError=exports.Range=exports.defineOption=exports.ProseMirror=void 0;var _main=require("./main");Object.defineProperty(exports,"ProseMirror",{enumerable:!0,get:function(){return _main.ProseMirror}});var _options=require("./options");Object.defineProperty(exports,"defineOption",{enumerable:!0,get:function(){return _options.defineOption}});var _selection=require("./selection");Object.defineProperty(exports,"Range",{enumerable:!0,get:function(){return _selection.Range}}),Object.defineProperty(exports,"SelectionError",{enumerable:!0,get:function(){return _selection.SelectionError}});var _range=require("./range");Object.defineProperty(exports,"MarkedRange",{enumerable:!0,get:function(){return _range.MarkedRange}});var _command=require("./command");Object.defineProperty(exports,"CommandSet",{enumerable:!0,get:function(){return _command.CommandSet}}),Object.defineProperty(exports,"Command",{enumerable:!0,get:function(){return _command.Command}});var _base_commands=require("./base_commands");Object.defineProperty(exports,"baseCommands",{enumerable:!0,get:function(){return _base_commands.baseCommands}}),require("./schema_commands");var _browserkeymap=require("browserkeymap"),_browserkeymap2=_interopRequireDefault(_browserkeymap);exports.Keymap=_browserkeymap2["default"]},{"./base_commands":2,"./command":5,"./main":13,"./options":14,"./range":15,"./schema_commands":16,"./selection":17,browserkeymap:65}],12:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function dispatchKey(pm,name,e){var seq=pm.input.keySeq;if(seq){if(_browserkeymap2["default"].isModifierKey(name))return!0;clearTimeout(stopSeq),stopSeq=setTimeout(function(){pm.input.keySeq==seq&&(pm.input.keySeq=null)},50),name=seq+" "+name}for(var handle=function handle(bound){if(bound===!1)return"nothing";if("..."==bound)return"multi";if(null==bound)return!1;var result=!1;if(Array.isArray(bound))for(var i=0;result===!1&&i<bound.length;i++)result=handle(bound[i]);else result="string"==typeof bound?pm.execCommand(bound):bound(pm);return 0==result?!1:"handled"},result=void 0,i=0;!result&&i<pm.input.keymaps.length;i++)result=handle(pm.input.keymaps[i].map.lookup(name,pm));return result||(result=handle(pm.input.baseKeymap.lookup(name,pm))||handle(_capturekeys.captureKeys.lookup(name))),"multi"==result&&(pm.input.keySeq=name),("handled"==result||"multi"==result)&&e.preventDefault(),seq&&!result&&/\'$/.test(name)?(e.preventDefault(),!0):!!result}function inputText(pm,range,text){if(range.empty&&!text)return!1;var marks=pm.input.storedMarks||pm.doc.marksAt(range.from);pm.tr.replaceWith(range.from,range.to,pm.schema.text(text,marks)).apply({scrollIntoView:!0}),pm.signal("textInput",text)}function selectClickedNode(pm,e){var pos=(0,_dompos.selectableNodeAbove)(pm,e.target,{left:e.clientX,top:e.clientY},!0);if(!pos)return pm.sel.fastPoll();var _pm$selection=pm.selection,node=_pm$selection.node,from=_pm$selection.from;if(node&&pos.depth>=from.depth&&0==pos.shorten(from.depth).cmp(from)){if(0==from.depth)return pm.sel.fastPoll();pos=from.shorten()}pm.setNodeSelection(pos),pm.focus(),e.preventDefault()}function handleTripleClick(pm,e){e.preventDefault();var pos=(0,_dompos.selectableNodeAbove)(pm,e.target,{left:e.clientX,top:e.clientY},!0);if(pos){var node=pm.doc.nodeAfter(pos);if(node.isBlock&&!node.isTextblock)pm.setNodeSelection(pos);else{var path=node.isInline?pos.path:pos.toPath();
node.isInline&&(node=pm.doc.path(path)),pm.setTextSelection(new _model.Pos(path,0),new _model.Pos(path,node.size))}pm.focus()}}function finishComposing(pm){var info=pm.input.composing,text=(0,_domchange.textInContext)(info.context,info.endData),range=(0,_selection.rangeFromDOMLoose)(pm);pm.ensureOperation(),pm.input.composing=null,text!=info.data&&inputText(pm,info.range,text),range&&!range.eq(pm.sel.range)&&pm.setSelectionDirect(range)}function toClipboard(doc,from,to,dataTransfer){var fragment=doc.sliceBetween(from,to),html='<div pm-sides="'+from.depth+" "+to.depth+'">'+(0,_format.toHTML)(fragment)+"</div>";dataTransfer.clearData(),dataTransfer.setData("text/html",html),dataTransfer.setData("text/plain",(0,_format.toText)(fragment))}function fromClipboard(pm,dataTransfer,plainText){var txt=dataTransfer.getData("text/plain"),html=dataTransfer.getData("text/html");if(!html&&!txt)return null;var doc=void 0,from=void 0,to=void 0;if(!plainText&&html||!txt){var dom=document.createElement("div");dom.innerHTML=pm.signalPipelined("transformPastedHTML",html);var wrap=dom.querySelector("[pm-sides]"),depths=void 0;wrap&&(depths=/^(\d+) (\d+)$/.exec(wrap.getAttribute("pm-sides")))?(doc=(0,_format.fromDOM)(pm.schema,wrap),from=posAtLeft(doc,+depths[1]),to=posAtRight(doc,+depths[2])):doc=(0,_format.fromDOM)(pm.schema,dom)}else doc=(0,_format.parseFrom)(pm.schema,pm.signalPipelined("transformPastedText",txt),!plainText&&(0,_format.knownSource)("markdown")?"markdown":"text");return{doc:doc,from:from||(0,_selection.findSelectionAtStart)(doc).from,to:to||(0,_selection.findSelectionAtEnd)(doc).to}}function posAtLeft(doc,depth){for(var path=[],i=0,node=doc;depth>i&&(node=node.firstChild);i++)path.push(0);return new _model.Pos(path,0)}function posAtRight(doc,depth){for(var path=[],node=doc,i=0;depth>i&&node.size;i++)path.push(node.size-1),node=node.lastChild;return new _model.Pos(path,node.size)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Input=void 0,exports.dispatchKey=dispatchKey;var _browserkeymap=require("browserkeymap"),_browserkeymap2=_interopRequireDefault(_browserkeymap),_model=require("../model"),_format=require("../format"),_capturekeys=require("./capturekeys"),_dom=require("../dom"),_domchange=require("./domchange"),_selection=require("./selection"),_dompos=require("./dompos"),stopSeq=null,handlers={};exports.Input=function(){function Input(pm){var _this=this;_classCallCheck(this,Input),this.pm=pm,this.baseKeymap=null,this.keySeq=null,this.composing=null,this.mouseDown=null,this.shiftKey=this.updatingComposition=!1,this.skipInput=0,this.draggingFrom=!1,this.keymaps=[],this.defaultKeymap=null,this.storedMarks=null,this.dropTarget=pm.wrapper.appendChild((0,_dom.elt)("div",{"class":"ProseMirror-drop-target"}));var _loop=function(event){var handler=handlers[event];pm.content.addEventListener(event,function(e){return handler(pm,e)})};for(var event in handlers)_loop(event);pm.on("selectionChange",function(){return _this.storedMarks=null})}return _createClass(Input,[{key:"maybeAbortComposition",value:function(){if(this.composing&&!this.updatingComposition){if(this.composing.finished)finishComposing(this.pm);else{this.composing=null,this.skipInput++;var sel=window.getSelection();if(sel.rangeCount){var range=sel.getRangeAt(0);sel.removeAllRanges(),sel.addRange(range)}}return!0}}}]),Input}();handlers.keydown=function(pm,e){if(pm.signal("interaction"),16==e.keyCode&&(pm.input.shiftKey=!0),!pm.input.composing){var name=_browserkeymap2["default"].keyName(e);name&&dispatchKey(pm,name,e)||pm.sel.fastPoll()}},handlers.keyup=function(pm,e){16==e.keyCode&&(pm.input.shiftKey=!1)},handlers.keypress=function(pm,e){if(!(pm.input.composing||!e.charCode||e.ctrlKey&&!e.altKey||_dom.browser.mac&&e.metaKey||dispatchKey(pm,_browserkeymap2["default"].keyName(e),e))){var sel=pm.selection;sel.node&&null==sel.node.contains&&(pm.tr["delete"](sel.from,sel.to).apply(),sel=pm.selection),inputText(pm,sel,String.fromCharCode(e.charCode)),e.preventDefault()}};var lastClick=0,oneButLastClick=0;handlers.mousedown=function(pm,e){pm.signal("interaction");var now=Date.now(),doubleClick=500>now-lastClick,tripleClick=600>now-oneButLastClick;oneButLastClick=lastClick,lastClick=now,tripleClick?handleTripleClick(pm,e):pm.input.mouseDown=new MouseDown(pm,e,doubleClick)};var MouseDown=function(){function MouseDown(pm,event,doubleClick){_classCallCheck(this,MouseDown),this.pm=pm,this.event=event,this.leaveToBrowser=pm.input.shiftKey||doubleClick;var path=(0,_dompos.pathFromDOM)(pm,event.target),node=pm.doc.path(path);this.mightDrag=node.type.draggable||node==pm.sel.range.node?path:null,this.mightDrag&&(event.target.draggable=!0,_dom.browser.gecko&&(this.setContentEditable=!event.target.hasAttribute("contentEditable"))&&event.target.setAttribute("contentEditable","false")),this.x=event.clientX,this.y=event.clientY,window.addEventListener("mouseup",this.up=this.up.bind(this)),window.addEventListener("mousemove",this.move=this.move.bind(this)),pm.sel.fastPoll()}return _createClass(MouseDown,[{key:"done",value:function(){window.removeEventListener("mouseup",this.up),window.removeEventListener("mousemove",this.move),this.mightDrag&&(this.event.target.draggable=!1,_dom.browser.gecko&&this.setContentEditable&&this.event.target.removeAttribute("contentEditable"))}},{key:"up",value:function(){if(this.done(),this.leaveToBrowser)this.pm.sel.fastPoll();else if(this.event.ctrlKey)selectClickedNode(this.pm,this.event);else if(!(0,_dompos.handleNodeClick)(this.pm,"handleClick",this.event,!0)){var pos=(0,_dompos.selectableNodeAbove)(this.pm,this.event.target,{left:this.x,top:this.y});pos?(this.pm.setNodeSelection(pos),this.pm.focus()):this.pm.sel.fastPoll()}}},{key:"move",value:function(event){!this.leaveToBrowser&&(Math.abs(this.x-event.clientX)>4||Math.abs(this.y-event.clientY)>4)&&(this.leaveToBrowser=!0),this.pm.sel.fastPoll()}}]),MouseDown}();handlers.touchdown=function(pm){pm.sel.fastPoll()},handlers.contextmenu=function(pm,e){(0,_dompos.handleNodeClick)(pm,"handleContextMenu",e,!1)};var Composing=function Composing(pm,data){_classCallCheck(this,Composing),this.finished=!1,this.context=(0,_domchange.textContext)(data),this.data=data,this.endData=null;var range=pm.selection;if(data){var path=range.head.path,line=pm.doc.path(path).textContent,found=line.indexOf(data,range.head.offset-data.length);found>-1&&found<=range.head.offset+data.length&&(range=new _selection.TextSelection(new _model.Pos(path,found),new _model.Pos(path,found+data.length)))}this.range=range};handlers.compositionstart=function(pm,e){if(!pm.input.maybeAbortComposition()){pm.flush(),pm.input.composing=new Composing(pm,e.data);var above=pm.selection.head.shorten();pm.markRangeDirty({from:above,to:above.move(1)})}},handlers.compositionupdate=function(pm,e){var info=pm.input.composing;info&&info.data!=e.data&&(info.data=e.data,pm.input.updatingComposition=!0,inputText(pm,info.range,info.data),pm.input.updatingComposition=!1,info.range=new _selection.TextSelection(info.range.from,info.range.from.move(info.data.length)))},handlers.compositionend=function(pm,e){var info=pm.input.composing;info&&(pm.input.composing.finished=!0,pm.input.composing.endData=e.data,setTimeout(function(){pm.input.composing==info&&finishComposing(pm)},20))},handlers.input=function(pm){return pm.input.skipInput?--pm.input.skipInput:pm.input.composing?void(pm.input.composing.finished&&finishComposing(pm)):(pm.startOperation({readSelection:!1}),(0,_domchange.applyDOMChange)(pm),void pm.scrollIntoView())},handlers.copy=handlers.cut=function(pm,e){var _pm$selection2=pm.selection,from=_pm$selection2.from,to=_pm$selection2.to,empty=_pm$selection2.empty;!empty&&e.clipboardData&&(toClipboard(pm.doc,from,to,e.clipboardData),e.preventDefault(),"cut"!=e.type||empty||pm.tr["delete"](from,to).apply())},handlers.paste=function(pm,e){if(e.clipboardData){var sel=pm.selection,fragment=fromClipboard(pm,e.clipboardData,pm.input.shiftKey);fragment&&(e.preventDefault(),pm.tr.replace(sel.from,sel.to,fragment.doc,fragment.from,fragment.to).apply(),pm.scrollIntoView())}},handlers.dragstart=function(pm,e){var mouseDown=pm.input.mouseDown;if(mouseDown&&mouseDown.done(),e.dataTransfer){var _pm$selection3=pm.selection,from=_pm$selection3.from,to=_pm$selection3.to,empty=_pm$selection3.empty,fragment=void 0,pos=!empty&&pm.posAtCoords({left:e.clientX,top:e.clientY});if(pos&&pos.cmp(from)>=0&&pos.cmp(to)<=0)fragment={from:from,to:to};else if(mouseDown&&mouseDown.mightDrag){var _pos=_model.Pos.from(mouseDown.mightDrag);fragment={from:_pos,to:_pos.move(1)}}fragment&&(pm.input.draggingFrom=fragment,toClipboard(pm.doc,fragment.from,fragment.to,e.dataTransfer))}},handlers.dragend=function(pm){return window.setTimeout(function(){return pm.input.draggingFrom=!1},50)},handlers.dragover=handlers.dragenter=function(pm,e){e.preventDefault();var cursorPos=pm.posAtCoords({left:e.clientX,top:e.clientY});if(cursorPos){var coords=(0,_dompos.coordsAtPos)(pm,cursorPos),rect=pm.wrapper.getBoundingClientRect();coords.top-=rect.top,coords.right-=rect.left,coords.bottom-=rect.top,coords.left-=rect.left;var target=pm.input.dropTarget;target.style.display="block",target.style.left=coords.left-1+"px",target.style.top=coords.top+"px",target.style.height=coords.bottom-coords.top+"px"}},handlers.dragleave=function(pm){return pm.input.dropTarget.style.display=""},handlers.drop=function(pm,e){if(pm.input.dropTarget.style.display="",e.dataTransfer&&!pm.signalDOM(e)){var fragment=fromClipboard(pm,e.dataTransfer);if(fragment){e.preventDefault();var insertPos=pm.posAtCoords({left:e.clientX,top:e.clientY}),origPos=insertPos;if(!insertPos)return;var tr=pm.tr;pm.input.draggingFrom&&!e.ctrlKey&&(tr["delete"](pm.input.draggingFrom.from,pm.input.draggingFrom.to),insertPos=tr.map(insertPos).pos),tr.replace(insertPos,insertPos,fragment.doc,fragment.from,fragment.to).apply();var posAfter=tr.map(origPos).pos;_model.Pos.samePath(insertPos.path,posAfter.path)&&posAfter.offset==insertPos.offset+1&&pm.doc.nodeAfter(insertPos).type.selectable?pm.setNodeSelection(insertPos):pm.setTextSelection(insertPos,posAfter),pm.focus()}}},handlers.focus=function(pm){pm.wrapper.classList.add("ProseMirror-focused"),pm.signal("focus")},handlers.blur=function(pm){pm.wrapper.classList.remove("ProseMirror-focused"),pm.signal("blur")}},{"../dom":1,"../format":20,"../model":34,"./capturekeys":3,"./domchange":7,"./dompos":8,"./selection":17,browserkeymap:65}],13:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.DIRTY_REDRAW=exports.DIRTY_RESCAN=exports.ProseMirror=void 0,require("./css");var _browserkeymap=require("browserkeymap"),_browserkeymap2=_interopRequireDefault(_browserkeymap),_model=require("../model"),_transform=require("../transform"),_sortedinsert=require("../util/sortedinsert"),_sortedinsert2=_interopRequireDefault(_sortedinsert),_error=require("../util/error"),_map=require("../util/map"),_event=require("../util/event"),_dom=require("../dom"),_format=require("../format"),_options=require("./options"),_selection2=require("./selection"),_dompos=require("./dompos"),_draw=require("./draw"),_input=require("./input"),_history=require("./history"),_range=require("./range"),ProseMirror=exports.ProseMirror=function(){function ProseMirror(opts){_classCallCheck(this,ProseMirror),(0,_dom.ensureCSSAdded)(),opts=this.options=(0,_options.parseOptions)(opts),this.schema=opts.schema,null==opts.doc&&(opts.doc=this.schema.node("doc",null,[this.schema.node("paragraph")])),this.content=(0,_dom.elt)("div",{"class":"ProseMirror-content","pm-container":!0}),this.wrapper=(0,_dom.elt)("div",{"class":"ProseMirror"},this.content),this.wrapper.ProseMirror=this,opts.place&&opts.place.appendChild?opts.place.appendChild(this.wrapper):opts.place&&opts.place(this.wrapper),this.setDocInner(opts.docFormat?(0,_format.parseFrom)(this.schema,opts.doc,opts.docFormat):opts.doc),(0,_draw.draw)(this,this.doc),this.content.contentEditable=!0,opts.label&&this.content.setAttribute("aria-label",opts.label),this.mod=Object.create(null),this.cached=Object.create(null),this.operation=null,this.dirtyNodes=new _map.Map,this.flushScheduled=!1,this.sel=new _selection2.SelectionState(this,(0,_selection2.findSelectionAtStart)(this.doc)),this.accurateSelection=!1,this.input=new _input.Input(this),this.commands=null,this.commandKeys=null,(0,_options.initOptions)(this)}return _createClass(ProseMirror,[{key:"setOption",value:function(name,value){(0,_options.setOption)(this,name,value),this.signal("optionChanged",name,value)}},{key:"getOption",value:function(name){return this.options[name]}},{key:"setTextSelection",value:function(anchor,head){this.setSelection(new _selection2.TextSelection(anchor,head))}},{key:"setNodeSelection",value:function(pos){this.checkPos(pos,!1);var parent=this.doc.path(pos.path);pos.offset>=parent.size&&_selection2.SelectionError.raise("Trying to set a node selection at the end of a node");var node=parent.child(pos.offset);node.type.selectable||_selection2.SelectionError.raise("Trying to select a non-selectable node"),this.input.maybeAbortComposition(),this.sel.setAndSignal(new _selection2.NodeSelection(pos,pos.move(1),node))}},{key:"setSelection",value:function(selection){selection instanceof _selection2.TextSelection?(this.checkPos(selection.head,!0),selection.empty||this.checkPos(selection.anchor,!0)):this.checkPos(selection.to,!1),this.setSelectionDirect(selection)}},{key:"setSelectionDirect",value:function(selection){this.ensureOperation(),this.input.maybeAbortComposition(),selection.eq(this.sel.range)||this.sel.setAndSignal(selection)}},{key:"setContent",value:function(value,format){format&&(value=(0,_format.parseFrom)(this.schema,value,format)),this.setDoc(value)}},{key:"getContent",value:function(format){return format?(0,_format.serializeTo)(this.doc,format):this.doc}},{key:"setDocInner",value:function(doc){doc.type!=this.schema.nodes.doc&&_error.AssertionError.raise("Trying to set a document with a different schema"),this.doc=doc,this.ranges=new _range.RangeStore(this),this.history=new _history.History(this)}},{key:"setDoc",value:function(doc,sel){sel||(sel=(0,_selection2.findSelectionAtStart)(doc)),this.signal("beforeSetDoc",doc,sel),this.ensureOperation(),this.setDocInner(doc),this.sel.set(sel,!0),this.signal("setDoc",doc,sel)}},{key:"updateDoc",value:function(doc,mapping,selection){this.ensureOperation(),this.input.maybeAbortComposition(),this.ranges.transform(mapping),this.doc=doc,this.sel.setAndSignal(selection||this.sel.range.map(doc,mapping)),this.signal("change")}},{key:"apply",value:function(transform){var options=arguments.length<=1||void 0===arguments[1]?nullOptions:arguments[1];return transform.doc==this.doc?!1:(transform.docs[0]!=this.doc&&(0,_model.findDiffStart)(transform.docs[0],this.doc)&&_error.AssertionError.raise("Applying a transform that does not start with the current document"),this.updateDoc(transform.doc,transform,options.selection),this.signal("transform",transform,options),options.scrollIntoView&&this.scrollIntoView(),transform)}},{key:"checkPos",value:function(pos,textblock){pos.isValid(this.doc,textblock)||_error.AssertionError.raise("Position "+pos+" is not valid in current document")}},{key:"ensureOperation",value:function(){return this.operation||this.startOperation()}},{key:"startOperation",value:function(options){var _this=this;return this.operation=new Operation(this),options&&options.readSelection===!1||!this.sel.readFromDOM()||(this.operation.sel=this.sel.range),this.flushScheduled||((0,_dom.requestAnimationFrame)(function(){_this.flushScheduled=!1,_this.flush()}),this.flushScheduled=!0),this.operation}},{key:"flush",value:function(){if(document.body.contains(this.wrapper)&&this.operation){this.signal("flushing");var op=this.operation;if(op){this.operation=null,this.accurateSelection=!0;var docChanged=op.doc!=this.doc||this.dirtyNodes.size,redrawn=!1;this.input.composing||!docChanged&&!op.composingAtStart||((0,_draw.redraw)(this,this.dirtyNodes,this.doc,op.doc),this.dirtyNodes.clear(),redrawn=!0),((redrawn||!op.sel.eq(this.sel.range))&&!this.input.composing||op.focus)&&this.sel.toDOM(op.focus),op.scrollIntoView!==!1&&(0,_dompos.scrollIntoView)(this,op.scrollIntoView),docChanged&&this.signal("draw"),this.signal("flush"),this.accurateSelection=!1}}}},{key:"addKeymap",value:function(map){var rank=arguments.length<=1||void 0===arguments[1]?50:arguments[1];(0,_sortedinsert2["default"])(this.input.keymaps,{map:map,rank:rank},function(a,b){return a.rank-b.rank})}},{key:"removeKeymap",value:function(map){for(var maps=this.input.keymaps,i=0;i<maps.length;++i)if(maps[i].map==map||maps[i].map.options.name==map)return maps.splice(i,1),!0}},{key:"markRange",value:function(from,to,options){this.checkPos(from),this.checkPos(to);var range=new _range.MarkedRange(from,to,options);return this.ranges.addRange(range),range}},{key:"removeRange",value:function(range){this.ranges.removeRange(range)}},{key:"setMark",value:function(type,to,attrs){var sel=this.selection;if(sel.empty){var marks=this.activeMarks();if(null==to&&(to=!type.isInSet(marks)),to&&!this.doc.path(sel.head.path).type.canContainMark(type))return;this.input.storedMarks=to?type.create(attrs).addToSet(marks):type.removeFromSet(marks),this.signal("activeMarkChange")}else(null!=to?to:!this.doc.rangeHasMark(sel.from,sel.to,type))?this.apply(this.tr.addMark(sel.from,sel.to,type.create(attrs))):this.apply(this.tr.removeMark(sel.from,sel.to,type))}},{key:"activeMarks",value:function(){var head;return this.input.storedMarks||((head=this.selection.head)?this.doc.marksAt(head):[])}},{key:"focus",value:function(){this.operation?this.operation.focus=!0:this.sel.toDOM(!0)}},{key:"hasFocus",value:function(){return this.sel.range instanceof _selection2.NodeSelection?document.activeElement==this.content:(0,_selection2.hasFocus)(this)}},{key:"posAtCoords",value:function(coords){return(0,_dompos.posAtCoords)(this,coords)}},{key:"coordsAtPos",value:function(pos){return this.checkPos(pos),(0,_dompos.coordsAtPos)(this,pos)}},{key:"scrollIntoView",value:function(){var pos=arguments.length<=0||void 0===arguments[0]?null:arguments[0];pos&&this.checkPos(pos),this.ensureOperation(),this.operation.scrollIntoView=pos}},{key:"execCommand",value:function(name,params){var cmd=this.commands[name];return!(!cmd||cmd.exec(this,params)===!1)}},{key:"keyForCommand",value:function(name){var cached=this.commandKeys[name];if(void 0!==cached)return cached;var cmd=this.commands[name],keymap=this.input.baseKeymap;if(!cmd)return this.commandKeys[name]=null;var key=cmd.spec.key||(_dom.browser.mac?cmd.spec.macKey:cmd.spec.pcKey);if(key){key=_browserkeymap2["default"].normalizeKeyName(Array.isArray(key)?key[0]:key);var deflt=keymap.bindings[key];if(Array.isArray(deflt)?deflt.indexOf(name)>-1:deflt==name)return this.commandKeys[name]=key}for(var _key in keymap.bindings){var bound=keymap.bindings[_key];if(Array.isArray(bound)?bound.indexOf(name)>-1:bound==name)return this.commandKeys[name]=_key}return this.commandKeys[name]=null}},{key:"markRangeDirty",value:function(range){this.ensureOperation();for(var dirty=this.dirtyNodes,from=range.from,to=range.to,depth=0,node=this.doc;;depth++){var fromEnd=depth==from.depth,toEnd=depth==to.depth;if(fromEnd||toEnd||from.path[depth]!=to.path[depth]){var _ret=function(){var start=fromEnd?from.offset:from.path[depth],end=toEnd?to.offset:to.path[depth]+1;if(node.isTextblock)node.forEach(function(child,cStart,cEnd){end>cStart&&cEnd>start&&dirty.set(child,DIRTY_REDRAW)});else for(var child,i=node.iter(start,end);child=i.next().value;)dirty.set(child,DIRTY_REDRAW);return"break"}();if("break"===_ret)break}else{var child=node.child(from.path[depth]);dirty.has(child)||dirty.set(child,DIRTY_RESCAN),node=child}}}},{key:"markAllDirty",value:function(){this.dirtyNodes.set(this.doc,DIRTY_REDRAW)}},{key:"selection",get:function(){return this.accurateSelection||this.ensureOperation(),this.sel.range}},{key:"tr",get:function(){return new EditorTransform(this)}}]),ProseMirror}();ProseMirror.prototype.apply.scroll={scrollIntoView:!0};var DIRTY_RESCAN=exports.DIRTY_RESCAN=1,DIRTY_REDRAW=exports.DIRTY_REDRAW=2,nullOptions={};(0,_event.eventMixin)(ProseMirror);var Operation=function Operation(pm){_classCallCheck(this,Operation),this.doc=pm.doc,this.sel=pm.sel.range,this.scrollIntoView=!1,this.focus=!1,this.composingAtStart=!!pm.input.composing},EditorTransform=function(_Transform){function EditorTransform(pm){_classCallCheck(this,EditorTransform);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(EditorTransform).call(this,pm.doc));return _this2.pm=pm,_this2}return _inherits(EditorTransform,_Transform),_createClass(EditorTransform,[{key:"apply",value:function(options){return this.pm.apply(this,options)}},{key:"replaceSelection",value:function(node,inheritMarks){var _selection=this.selection,empty=_selection.empty,from=_selection.from,to=_selection.to,selNode=_selection.node,parent=void 0;if(node&&node.isInline&&inheritMarks!==!1){var marks=empty?this.pm.input.storedMarks:this.doc.marksAt(from);node=node.type.create(node.attrs,node.text,marks)}if(selNode&&selNode.isTextblock&&node&&node.isInline)from=new _model.Pos(from.toPath(),0),to=new _model.Pos(from.path,selNode.size);else if(selNode)for(;from.depth&&0==from.offset&&(parent=this.doc.path(from.path))&&from.offset==parent.size-1&&!parent.type.canBeEmpty&&(!node||!parent.type.canContain(node));)from=from.shorten(),to=to.shorten(null,1);else if(node&&node.isBlock&&this.doc.path(from.path.slice(0,from.depth-1)).type.canContain(node)){this["delete"](from,to);var _parent=this.doc.path(from.path);return from.offset&&from.offset!=_parent.size&&this.split(from),this.insert(from.shorten(null,from.offset?1:0),node)}return node?this.replaceWith(from,to,node):this["delete"](from,to)}},{key:"deleteSelection",value:function(){return this.replaceSelection()}},{key:"typeText",value:function(text){return this.replaceSelection(this.pm.schema.text(text),!0)}},{key:"selection",get:function(){return this.steps.length?this.pm.selection.map(this):this.pm.selection}}]),EditorTransform}(_transform.Transform)},{"../dom":1,"../format":20,"../model":34,"../transform":40,"../util/error":52,"../util/event":53,"../util/map":54,"../util/sortedinsert":56,"./css":6,"./dompos":8,"./draw":9,"./history":10,"./input":12,"./options":14,"./range":15,"./selection":17,browserkeymap:65}],14:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function defineOption(name,defaultValue,update,updateOnInit){options[name]=new Option(defaultValue,update,updateOnInit)}function parseOptions(obj){var result=Object.create(null),given=obj?[obj].concat(obj.use||[]):[];outer:for(var opt in options){for(var i=0;i<given.length;i++)if(opt in given[i]){result[opt]=given[i][opt];continue outer}result[opt]=options[opt].defaultValue}return result}function initOptions(pm){for(var opt in options){var desc=options[opt];desc.update&&desc.updateOnInit&&desc.update(pm,pm.options[opt],null,!0)}}function setOption(pm,name,value){var desc=options[name];void 0===desc&&_error.AssertionError.raise("Option '"+name+"' is not defined"),desc.update===!1&&_error.AssertionError.raise("Option '"+name+"' can not be changed");var old=pm.options[name];pm.options[name]=value,desc.update&&desc.update(pm,value,old,!1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.defineOption=defineOption,exports.parseOptions=parseOptions,exports.initOptions=initOptions,exports.setOption=setOption;var _model=require("../model"),_error=require("../util/error"),_prompt=require("../ui/prompt"),_command=require("./command"),Option=function Option(defaultValue,update,updateOnInit){_classCallCheck(this,Option),this.defaultValue=defaultValue,this.update=update,this.updateOnInit=updateOnInit!==!1},options=Object.create(null);defineOption("schema",_model.defaultSchema,!1),defineOption("doc",null,function(pm,value){return pm.setDoc(value)},!1),defineOption("docFormat",null),defineOption("place",null),defineOption("historyDepth",100),defineOption("historyEventDelay",500),defineOption("commands",_command.CommandSet["default"],_command.updateCommands),defineOption("commandParamPrompt",_prompt.ParamPrompt),defineOption("label",null)},{"../model":34,"../ui/prompt":49,"../util/error":52,"./command":5}],15:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.RangeStore=exports.MarkedRange=void 0;var _event=require("../util/event"),MarkedRange=exports.MarkedRange=function(){function MarkedRange(from,to,options){_classCallCheck(this,MarkedRange),this.options=options||{},this.from=from,this.to=to}return _createClass(MarkedRange,[{key:"remove",value:function(){this.signal("removed",this.from,this.to.max(this.from)),this.from=this.to=null}}]),MarkedRange}();(0,_event.eventMixin)(MarkedRange);var RangeSorter=function(){function RangeSorter(){_classCallCheck(this,RangeSorter),this.sorted=[]}return _createClass(RangeSorter,[{key:"find",value:function(at){for(var min=0,max=this.sorted.length;;){if(min+10>max){for(var i=min;max>i;i++)if(this.sorted[i].at.cmp(at)>=0)return i;return max}var mid=min+max>>1;this.sorted[mid].at.cmp(at)>0?max=mid:min=mid}}},{key:"insert",value:function(obj){this.sorted.splice(this.find(obj.at),0,obj)}},{key:"remove",value:function(at,range){for(var pos=this.find(at),dist=0;;dist++){var leftPos=pos-dist-1,rightPos=pos+dist;if(leftPos>=0&&this.sorted[leftPos].range==range)return void this.sorted.splice(leftPos,1);if(rightPos<this.sorted.length&&this.sorted[rightPos].range==range)return void this.sorted.splice(rightPos,1)}}},{key:"resort",value:function(){for(var i=0;i<this.sorted.length;i++)for(var cur=this.sorted[i],at=cur.at="open"==cur.type?cur.range.from:cur.range.to,pos=i;pos>0&&this.sorted[pos-1].at.cmp(at)>0;)this.sorted[pos]=this.sorted[pos-1],this.sorted[--pos]=cur}}]),RangeSorter}(),RangeTracker=(exports.RangeStore=function(){function RangeStore(pm){_classCallCheck(this,RangeStore),this.pm=pm,this.ranges=[],this.sorted=new RangeSorter}return _createClass(RangeStore,[{key:"addRange",value:function(range){this.ranges.push(range),this.sorted.insert({type:"open",at:range.from,range:range}),this.sorted.insert({type:"close",at:range.to,range:range}),this.pm.markRangeDirty(range)}},{key:"removeRange",value:function(range){var found=this.ranges.indexOf(range);found>-1&&(this.ranges.splice(found,1),this.sorted.remove(range.from,range),this.sorted.remove(range.to,range),this.pm.markRangeDirty(range),range.remove())}},{key:"transform",value:function(mapping){for(var i=0;i<this.ranges.length;i++){var range=this.ranges[i];range.from=mapping.map(range.from,range.options.inclusiveLeft?-1:1).pos,range.to=mapping.map(range.to,range.options.inclusiveRight?1:-1).pos;var diff=range.from.cmp(range.to);range.options.removeWhenEmpty!==!1&&diff>=0?(this.removeRange(range),i--):diff>0&&(range.to=range.from)}this.sorted.resort()}},{key:"activeRangeTracker",value:function(){return new RangeTracker(this.sorted.sorted)}}]),RangeStore}(),function(){function RangeTracker(sorted){_classCallCheck(this,RangeTracker),this.sorted=sorted,this.pos=0,this.current=[]}return _createClass(RangeTracker,[{key:"advanceTo",value:function(pos){for(var next=void 0;this.pos<this.sorted.length&&(next=this.sorted[this.pos]).at.cmp(pos)<=0;){var className=next.range.options.className;className&&("open"==next.type?this.current.push(className):this.current.splice(this.current.indexOf(className),1)),this.pos++}}},{key:"nextChangeBefore",value:function(pos){for(;;){if(this.pos==this.sorted.length)return null;var next=this.sorted[this.pos];if(next.range.options.className)return next.at.cmp(pos)>=0?null:next.at.offset;this.pos++}}}]),RangeTracker}())},{"../util/event":53}],16:[function(require,module,exports){"use strict";var _model=require("../model"),_command=require("./command"),_format=require("../format");_model.StrongMark.register("command","set",{derive:!0,label:"Set strong"}),_model.StrongMark.register("command","unset",{derive:!0,label:"Unset strong"}),_model.StrongMark.register("command","toggle",{derive:!0,label:"Toggle strong",menu:{group:"inline",rank:20,display:{type:"icon",width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"}},keys:["Mod-B"]}),_model.EmMark.register("command","set",{derive:!0,label:"Add emphasis"}),_model.EmMark.register("command","unset",{derive:!0,label:"Remove emphasis"}),_model.EmMark.register("command","toggle",{derive:!0,label:"Toggle emphasis",menu:{group:"inline",rank:21,display:{type:"icon",width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"
}},keys:["Mod-I"]}),_model.CodeMark.register("command","set",{derive:!0,label:"Set code style"}),_model.CodeMark.register("command","unset",{derive:!0,label:"Remove code style"}),_model.CodeMark.register("command","toggle",{derive:!0,label:"Toggle code style",menu:{group:"inline",rank:22,display:{type:"icon",width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"}},keys:["Mod-`"]});var linkIcon={type:"icon",width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"};_model.LinkMark.register("command","unset",{derive:!0,label:"Unlink",menu:{group:"inline",rank:30,display:linkIcon},active:function(){return!0}}),_model.LinkMark.register("command","set",{derive:{inverseSelect:!0,params:[{label:"Target",attr:"href"},{label:"Title",attr:"title"}]},label:"Add link",menu:{group:"inline",rank:30,display:linkIcon}}),_model.Image.register("command","insert",{derive:{params:[{label:"Image URL",attr:"src"},{label:"Description / alternative text",attr:"alt",prefill:function(pm){return(0,_command.selectedNodeAttr)(pm,this,"alt")||(0,_format.toText)(pm.doc.sliceBetween(pm.selection.from,pm.selection.to))}},{label:"Title",attr:"title"}]},label:"Insert image",menu:{group:"insert",rank:20,display:{type:"label",label:"Image"}}}),_model.BulletList.register("command","wrap",{derive:{list:!0},label:"Wrap the selection in a bullet list",menu:{group:"block",rank:40,display:{type:"icon",width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"}},keys:["Alt-Right '*'","Alt-Right '-'"]}),_model.OrderedList.register("command","wrap",{derive:{list:!0},label:"Wrap the selection in an ordered list",menu:{group:"block",rank:41,display:{type:"icon",width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"}},keys:["Alt-Right '1'"]}),_model.BlockQuote.register("command","wrap",{derive:!0,label:"Wrap the selection in a block quote",menu:{group:"block",rank:45,display:{type:"icon",width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},keys:["Alt-Right '>'","Alt-Right '\"'"]}),_model.HardBreak.register("command","insert",{label:"Insert hard break",run:function(pm){var _pm$selection=pm.selection,node=_pm$selection.node,from=_pm$selection.from;return node&&node.isBlock?!1:pm.doc.path(from.path).type.isCode?pm.tr.typeText("\n").apply(pm.apply.scroll):pm.tr.replaceSelection(this.create()).apply(pm.apply.scroll)},keys:["Mod-Enter","Shift-Enter"]}),_model.ListItem.register("command","split",{label:"Split the current list item",run:function(pm){var _pm$selection2=pm.selection,from=_pm$selection2.from,to=_pm$selection2.to,node=_pm$selection2.node;if(node&&node.isBlock||from.path.length<2||!_model.Pos.samePath(from.path,to.path))return!1;var toParent=from.shorten(),grandParent=pm.doc.path(toParent.path);if(grandParent.type!=this)return!1;var nextType=to.offset==grandParent.child(toParent.offset).size?pm.schema.defaultTextblockType():null;return pm.tr["delete"](from,to).split(from,2,nextType).apply(pm.apply.scroll)},keys:["Enter(50)"]});for(var _loop=function(i){_model.Heading.registerComputed("command","make"+i,function(type){return i<=type.maxLevel?{derive:{name:"make",attrs:{level:i}},label:"Change to heading "+i,keys:["Mod-H '"+i+"'"],menu:{group:"textblockHeading",rank:30+i,display:{type:"label",label:"Level "+i},activeDisplay:"Head "+i}}:void 0})},i=1;10>=i;i++)_loop(i);_model.Paragraph.register("command","make",{derive:!0,label:"Change to paragraph",keys:["Mod-P"],menu:{group:"textblock",rank:10,display:{type:"label",label:"Plain"},activeDisplay:"Plain"}}),_model.CodeBlock.register("command","make",{derive:!0,label:"Change to code block",keys:["Mod-\\"],menu:{group:"textblock",rank:20,display:{type:"label",label:"Code"},activeDisplay:"Code"}}),_model.HorizontalRule.register("command","insert",{derive:!0,label:"Insert horizontal rule",keys:["Mod-Shift--"],menu:{group:"insert",rank:70,display:{type:"label",label:"Horizontal rule"}}})},{"../format":20,"../model":34,"./command":5}],17:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function rangeFromDOMLoose(pm){if(!hasFocus(pm))return null;var sel=window.getSelection();return new TextSelection((0,_dompos.posFromDOM)(pm,sel.anchorNode,sel.anchorOffset,!0),(0,_dompos.posFromDOM)(pm,sel.focusNode,sel.focusOffset,!0))}function hasFocus(pm){var sel=window.getSelection();return sel.rangeCount&&(0,_dom.contains)(pm.content,sel.anchorNode)}function findSelectionIn(doc,path,offset,dir,text){var node=doc.path(path);if(node.isTextblock)return new TextSelection(new _model.Pos(path,offset));for(var i=offset+(dir>0?0:-1);dir>0?i<node.size:i>=0;i+=dir){var child=node.child(i);if(!text&&null==child.type.contains&&child.type.selectable)return new NodeSelection(new _model.Pos(path,i),new _model.Pos(path,i+1),child);path.push(i);var inside=findSelectionIn(doc,path,0>dir?child.size:0,dir,text);if(inside)return inside;path.pop()}}function findSelectionFrom(doc,pos,dir,text){for(var path=pos.path.slice(),offset=pos.offset;;){var found=findSelectionIn(doc,path,offset,dir,text);if(found)return found;if(!path.length)break;offset=path.pop()+(dir>0?1:0)}}function findSelectionNear(doc,pos){var bias=arguments.length<=2||void 0===arguments[2]?1:arguments[2],text=arguments[3],result=findSelectionFrom(doc,pos,bias,text)||findSelectionFrom(doc,pos,-bias,text);return result||SelectionError("Searching for selection in invalid document "+doc),result}function findSelectionAtStart(node){var path=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],text=arguments[2];return findSelectionIn(node,path.slice(),0,1,text)}function findSelectionAtEnd(node){var path=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],text=arguments[2];return findSelectionIn(node,path.slice(),node.size,-1,text)}function verticalMotionLeavesTextblock(pm,pos,dir){for(var dom=(0,_dompos.pathToDOM)(pm.content,pos.path),coords=(0,_dompos.coordsAtPos)(pm,pos),child=dom.firstChild;child;child=child.nextSibling)if(1==child.nodeType)for(var boxes=child.getClientRects(),i=0;i<boxes.length;i++){var box=boxes[i];if(0>dir?box.bottom<coords.top:box.top>coords.bottom)return!1}return!0}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeSelection=exports.TextSelection=exports.Selection=exports.SelectionState=exports.SelectionError=void 0,exports.rangeFromDOMLoose=rangeFromDOMLoose,exports.hasFocus=hasFocus,exports.findSelectionFrom=findSelectionFrom,exports.findSelectionNear=findSelectionNear,exports.findSelectionAtStart=findSelectionAtStart,exports.findSelectionAtEnd=findSelectionAtEnd,exports.verticalMotionLeavesTextblock=verticalMotionLeavesTextblock;var _model=require("../model"),_error=require("../util/error"),_dom=require("../dom"),_dompos=require("./dompos"),SelectionError=exports.SelectionError=function(_ProseMirrorError){function SelectionError(){return _classCallCheck(this,SelectionError),_possibleConstructorReturn(this,Object.getPrototypeOf(SelectionError).apply(this,arguments))}return _inherits(SelectionError,_ProseMirrorError),SelectionError}(_error.ProseMirrorError),Selection=(exports.SelectionState=function(){function SelectionState(pm,range){var _this2=this;_classCallCheck(this,SelectionState),this.pm=pm,this.range=range,this.lastNonNodePos=null,this.polling=null,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastNode=null,pm.content.addEventListener("focus",function(){return _this2.receivedFocus()}),this.poller=this.poller.bind(this)}return _createClass(SelectionState,[{key:"setAndSignal",value:function(range,clearLast){this.set(range,clearLast),this.pm.signal("selectionChange")}},{key:"set",value:function(range,clearLast){this.range=range,range.node||(this.lastNonNodePos=null),clearLast!==!1&&(this.lastAnchorNode=null)}},{key:"poller",value:function(){hasFocus(this.pm)?(this.pm.operation||this.readFromDOM(),this.polling=setTimeout(this.poller,100)):this.polling=null}},{key:"startPolling",value:function(){clearTimeout(this.polling),this.polling=setTimeout(this.poller,50)}},{key:"fastPoll",value:function(){this.startPolling()}},{key:"stopPolling",value:function(){clearTimeout(this.polling),this.polling=null}},{key:"domChanged",value:function(){var sel=window.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastHeadNode||sel.focusOffset!=this.lastHeadOffset}},{key:"storeDOMState",value:function(){var sel=window.getSelection();this.lastAnchorNode=sel.anchorNode,this.lastAnchorOffset=sel.anchorOffset,this.lastHeadNode=sel.focusNode,this.lastHeadOffset=sel.focusOffset}},{key:"readFromDOM",value:function(){if(this.pm.input.composing||!hasFocus(this.pm)||!this.domChanged())return!1;var sel=window.getSelection(),doc=this.pm.doc,anchor=(0,_dompos.posFromDOM)(this.pm,sel.anchorNode,sel.anchorOffset),head=sel.isCollapsed?anchor:(0,_dompos.posFromDOM)(this.pm,sel.focusNode,sel.focusOffset),newRange=findSelectionNear(doc,head,this.range.head&&this.range.head.cmp(head)<0?-1:1);return newRange instanceof TextSelection&&doc.path(anchor.path).isTextblock&&(newRange=new TextSelection(anchor,newRange.head)),this.setAndSignal(newRange),newRange instanceof NodeSelection||newRange.head.cmp(head)||newRange.anchor.cmp(anchor)?this.toDOM():(this.clearNode(),this.storeDOMState()),!0}},{key:"toDOM",value:function(takeFocus){if(!hasFocus(this.pm)){if(!takeFocus)return;_dom.browser.gecko&&this.pm.content.focus()}this.range instanceof NodeSelection?this.nodeToDOM():this.rangeToDOM()}},{key:"nodeToDOM",value:function(){var dom=(0,_dompos.pathToDOM)(this.pm.content,this.range.from.toPath());dom!=this.lastNode&&(this.clearNode(),dom.classList.add("ProseMirror-selectednode"),this.pm.content.classList.add("ProseMirror-nodeselection"),this.lastNode=dom);var range=document.createRange(),sel=window.getSelection();range.selectNode(dom),sel.removeAllRanges(),sel.addRange(range),this.storeDOMState()}},{key:"rangeToDOM",value:function(){this.clearNode();var anchor=(0,_dompos.DOMFromPos)(this.pm.content,this.range.anchor),head=(0,_dompos.DOMFromPos)(this.pm.content,this.range.head),sel=window.getSelection(),range=document.createRange();if(sel.extend)range.setEnd(anchor.node,anchor.offset),range.collapse(!1);else{if(this.range.anchor.cmp(this.range.head)>0){var tmp=anchor;anchor=head,head=tmp}range.setEnd(head.node,head.offset),range.setStart(anchor.node,anchor.offset)}sel.removeAllRanges(),sel.addRange(range),sel.extend&&sel.extend(head.node,head.offset),this.storeDOMState()}},{key:"clearNode",value:function(){return this.lastNode?(this.lastNode.classList.remove("ProseMirror-selectednode"),this.pm.content.classList.remove("ProseMirror-nodeselection"),this.lastNode=null,!0):void 0}},{key:"receivedFocus",value:function(){null==this.polling&&this.startPolling()}}]),SelectionState}(),exports.Selection=function Selection(){_classCallCheck(this,Selection)}),TextSelection=exports.TextSelection=function(_Selection){function TextSelection(anchor,head){_classCallCheck(this,TextSelection);var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(TextSelection).call(this));return _this3.anchor=anchor,_this3.head=head||anchor,_this3}return _inherits(TextSelection,_Selection),_createClass(TextSelection,[{key:"eq",value:function(other){return other instanceof TextSelection&&!other.head.cmp(this.head)&&!other.anchor.cmp(this.anchor)}},{key:"map",value:function(doc,mapping){var head=mapping.map(this.head).pos;if(!doc.path(head.path).isTextblock)return findSelectionNear(doc,head);var anchor=mapping.map(this.anchor).pos;return new TextSelection(doc.path(anchor.path).isTextblock?anchor:head,head)}},{key:"inverted",get:function(){return this.anchor.cmp(this.head)>0}},{key:"from",get:function(){return this.inverted?this.head:this.anchor}},{key:"to",get:function(){return this.inverted?this.anchor:this.head}},{key:"empty",get:function(){return 0==this.anchor.cmp(this.head)}}]),TextSelection}(Selection),NodeSelection=exports.NodeSelection=function(_Selection2){function NodeSelection(from,to,node){_classCallCheck(this,NodeSelection);var _this4=_possibleConstructorReturn(this,Object.getPrototypeOf(NodeSelection).call(this));return _this4.from=from,_this4.to=to,_this4.node=node,_this4}return _inherits(NodeSelection,_Selection2),_createClass(NodeSelection,[{key:"eq",value:function(other){return other instanceof NodeSelection&&!this.from.cmp(other.from)}},{key:"map",value:function(doc,mapping){var from=mapping.map(this.from,1).pos,to=mapping.map(this.to,-1).pos;if(_model.Pos.samePath(from.path,to.path)&&from.offset==to.offset-1){var node=doc.nodeAfter(from);if(node.type.selectable)return new NodeSelection(from,to,node)}return findSelectionNear(doc,from)}},{key:"empty",get:function(){return!1}}]),NodeSelection}(Selection)},{"../dom":1,"../model":34,"../util/error":52,"./dompos":8}],18:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function fromDOM(schema,dom,options){options||(options={});var context=new DOMParseState(schema,options.topNode||schema.node("doc"),options),start=options.from?dom.childNodes[options.from]:dom.firstChild,end=null!=options.to&&dom.childNodes[options.to]||null;context.addAll(start,end,!0);var doc=void 0;do doc=context.leave();while(context.stack.length);return doc}function fromHTML(schema,html,options){var wrap=(options&&options.document||window.document).createElement("div");return wrap.innerHTML=html,fromDOM(schema,wrap,options)}function parseStyles(style){for(var re=/\s*([\w-]+)\s*:\s*([^;]+)/g,m=void 0,result=[];m=re.exec(style);)result.push(m[1],m[2].trim());return result}function schemaInfo(schema){return schema.cached.parseDOMInfo||(schema.cached.parseDOMInfo=summarizeSchemaInfo(schema))}function summarizeSchemaInfo(schema){var tags=Object.create(null),styles=Object.create(null);return tags._=[],schema.registry("parseDOM",function(tag,info,type){var parse=info.parse;"block"==parse?parse=function(dom,state){state.wrapIn(dom,this)}:"mark"==parse&&(parse=function(dom,state){state.wrapMark(dom,this)}),(0,_sortedinsert2["default"])(tags[tag]||(tags[tag]=[]),{type:type,parse:parse,rank:null==info.rank?50:info.rank},function(a,b){return a.rank-b.rank})}),schema.registry("parseDOMStyle",function(style,info,type){(0,_sortedinsert2["default"])(styles[style]||(styles[style]=[]),{type:type,parse:info.parse,rank:null==info.rank?50:info.rank},function(a,b){return a.rank-b.rank})}),{tags:tags,styles:styles}}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromDOM=fromDOM,exports.fromHTML=fromHTML;var _model=require("../model"),_sortedinsert=require("../util/sortedinsert"),_sortedinsert2=_interopRequireDefault(_sortedinsert),_register=require("./register");(0,_register.defineSource)("dom",fromDOM),(0,_register.defineSource)("html",fromHTML);var blockElements={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreElements={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},noMarks=[],DOMParseState=function(){function DOMParseState(schema,topNode,options){_classCallCheck(this,DOMParseState),this.options=options||{},this.schema=schema,this.stack=[],this.marks=noMarks,this.closing=!1,this.enter(topNode.type,topNode.attrs);var info=schemaInfo(schema);this.tagInfo=info.tags,this.styleInfo=info.styles}return _createClass(DOMParseState,[{key:"addDOM",value:function(dom){if(3==dom.nodeType){var value=dom.nodeValue,top=this.top,last=void 0;(/\S/.test(value)||top.type.isTextblock)&&(this.options.preserveWhitespace||(value=value.replace(/\s+/g," "),/^\s/.test(value)&&(!(last=top.content[top.content.length-1])||"text"==last.type.name&&/\s$/.test(last.text))&&(value=value.slice(1))),value&&this.insertNode(this.schema.text(value,this.marks)))}else if(1!=dom.nodeType||dom.hasAttribute("pm-ignore"));else{var style=dom.getAttribute("style");style?this.addElementWithStyles(parseStyles(style),dom):this.addElement(dom)}}},{key:"addElement",value:function(dom){var name=dom.nodeName.toLowerCase();this.parseNodeType(name,dom)||ignoreElements.hasOwnProperty(name)||(this.addAll(dom.firstChild,null),blockElements.hasOwnProperty(name)&&this.top.type==this.schema.defaultTextblockType()&&(this.closing=!0))}},{key:"addElementWithStyles",value:function(styles,dom){for(var _this=this,wrappers=[],i=0;i<styles.length;i+=2){var parsers=this.styleInfo[styles[i]],value=styles[i+1];if(parsers)for(var j=0;j<parsers.length;j++)wrappers.push(parsers[j],value)}var next=function next(i){if(i==wrappers.length)_this.addElement(dom);else{var parser=wrappers[i];parser.parse.call(parser.type,wrappers[i+1],_this,next.bind(null,i+2))}};next(0)}},{key:"tryParsers",value:function(parsers,dom){if(parsers)for(var i=0;i<parsers.length;i++){var parser=parsers[i];if(parser.parse.call(parser.type,dom,this)!==!1)return!0}}},{key:"parseNodeType",value:function(name,dom){return this.tryParsers(this.tagInfo[name],dom)||this.tryParsers(this.tagInfo._,dom)}},{key:"addAll",value:function(from,to,sync){for(var stack=sync&&this.stack.slice(),dom=from;dom!=to;dom=dom.nextSibling)this.addDOM(dom),sync&&blockElements.hasOwnProperty(dom.nodeName.toLowerCase())&&this.sync(stack)}},{key:"doClose",value:function(){if(this.closing&&!(this.stack.length<2)){var left=this.leave();this.enter(left.type,left.attrs),this.closing=!1}}},{key:"insertNode",value:function(node){if(this.top.type.canContain(node))this.doClose();else for(var i=this.stack.length-1;i>=0;i--){var route=this.stack[i].type.findConnection(node.type);if(route){if(i==this.stack.length-1)this.doClose();else for(;this.stack.length>i+1;)this.leave();for(var j=0;j<route.length;j++)this.enter(route[j]);this.marks.length&&(this.marks=noMarks);break}}return this.top.content.push(node),node}},{key:"insert",value:function(type,attrs,content){return this.insertNode(type.createAutoFill(attrs,content,this.marks))}},{key:"enter",value:function(type,attrs){this.stack.push({type:type,attrs:attrs,content:[]})}},{key:"leave",value:function(){this.marks.length&&(this.marks=noMarks);var top=this.stack.pop(),last=top.content[top.content.length-1];!this.options.preserveWhitespace&&last&&last.isText&&/\s$/.test(last.text)&&(top.content[top.content.length-1]=last.copy(last.text.slice(0,last.text.length-1)));var node=top.type.createAutoFill(top.attrs,top.content);return this.stack.length&&this.insertNode(node),node}},{key:"sync",value:function(stack){for(;this.stack.length>stack.length;)this.leave();for(;;){var n=this.stack.length-1,one=this.stack[n],two=stack[n];if(one.type==two.type&&_model.Node.sameAttrs(one.attrs,two.attrs))break;this.leave()}for(;stack.length>this.stack.length;){var add=stack[this.stack.length];this.enter(add.type,add.attrs)}this.marks.length&&(this.marks=noMarks),this.closing=!1}},{key:"wrapIn",value:function(dom,type,attrs){this.enter(type,attrs),this.addAll(dom.firstChild,null,!0),this.leave()}},{key:"wrapMark",value:function(inner,mark){var old=this.marks;this.marks=(mark.instance||mark).addToSet(old),inner.call?inner():this.addAll(inner.firstChild,null),this.marks=old}},{key:"top",get:function(){return this.stack[this.stack.length-1]}}]),DOMParseState}();_model.Paragraph.register("parseDOM","p",{parse:"block"}),_model.BlockQuote.register("parseDOM","blockquote",{parse:"block"});for(var _loop=function(i){_model.Heading.registerComputed("parseDOM","h"+i,function(type){return i<=type.maxLevel?{parse:function(dom,state){state.wrapIn(dom,this,{level:i})}}:void 0})},i=1;6>=i;i++)_loop(i);_model.HorizontalRule.register("parseDOM","hr",{parse:"block"}),_model.CodeBlock.register("parseDOM","pre",{parse:function(dom,state){var params=dom.firstChild&&/^code$/i.test(dom.firstChild.nodeName)&&dom.firstChild.getAttribute("class");if(params&&/fence/.test(params)){for(var found=[],re=/(?:^|\s)lang-(\S+)/g,m=void 0;m=re.exec(params);)found.push(m[1]);params=found.join(" ")}else params=null;var text=dom.textContent;state.insert(this,{params:params},text?[state.schema.text(text)]:[])}}),_model.BulletList.register("parseDOM","ul",{parse:"block"}),_model.OrderedList.register("parseDOM","ol",{parse:function(dom,state){var attrs={order:dom.getAttribute("start")||1};state.wrapIn(dom,this,attrs)}}),_model.ListItem.register("parseDOM","li",{parse:"block"}),_model.HardBreak.register("parseDOM","br",{parse:function(_,state){state.insert(this)}}),_model.Image.register("parseDOM","img",{parse:function(dom,state){state.insert(this,{src:dom.getAttribute("src"),title:dom.getAttribute("title")||null,alt:dom.getAttribute("alt")||null})}}),_model.LinkMark.register("parseDOM","a",{parse:function(dom,state){var href=dom.getAttribute("href");return href?void state.wrapMark(dom,this.create({href:href,title:dom.getAttribute("title")})):!1}}),_model.EmMark.register("parseDOM","i",{parse:"mark"}),_model.EmMark.register("parseDOM","em",{parse:"mark"}),_model.StrongMark.register("parseDOMStyle","font-style",{parse:function(value,state,inner){"italic"==value?state.wrapMark(inner,this):inner()}}),_model.StrongMark.register("parseDOM","b",{parse:"mark"}),_model.StrongMark.register("parseDOM","strong",{parse:"mark"}),_model.StrongMark.register("parseDOMStyle","font-weight",{parse:function(value,state,inner){"bold"==value||"bolder"==value||!/\D/.test(value)&&+value>=500?state.wrapMark(inner,this):inner()}}),_model.CodeMark.register("parseDOM","code",{parse:"mark"})},{"../model":34,"../util/sortedinsert":56,"./register":21}],19:[function(require,module,exports){"use strict";function fromText(schema,text){for(var blocks=text.trim().split(/\n{2,}/),nodes=[],i=0;i<blocks.length;i++){for(var spans=[],parts=blocks[i].split("\n"),j=0;j<parts.length;j++)j&&spans.push(schema.node("hard_break")),parts[j]&&spans.push(schema.text(parts[j]));nodes.push(schema.node("paragraph",null,spans))}return nodes.length||nodes.push(schema.node("paragraph")),schema.node("doc",null,nodes)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromText=fromText;var _register=require("./register");(0,_register.defineSource)("text",fromText)},{"./register":21}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _register=require("./register");Object.defineProperty(exports,"serializeTo",{enumerable:!0,get:function(){return _register.serializeTo}}),Object.defineProperty(exports,"knownTarget",{enumerable:!0,get:function(){return _register.knownTarget}}),Object.defineProperty(exports,"defineTarget",{enumerable:!0,get:function(){return _register.defineTarget}}),Object.defineProperty(exports,"parseFrom",{enumerable:!0,get:function(){return _register.parseFrom}}),Object.defineProperty(exports,"knownSource",{enumerable:!0,get:function(){return _register.knownSource}}),Object.defineProperty(exports,"defineSource",{enumerable:!0,get:function(){return _register.defineSource}});var _from_dom=require("./from_dom");Object.defineProperty(exports,"fromDOM",{enumerable:!0,get:function(){return _from_dom.fromDOM}}),Object.defineProperty(exports,"fromHTML",{enumerable:!0,get:function(){return _from_dom.fromHTML}});var _to_dom=require("./to_dom");Object.defineProperty(exports,"toDOM",{enumerable:!0,get:function(){return _to_dom.toDOM}}),Object.defineProperty(exports,"toHTML",{enumerable:!0,get:function(){return _to_dom.toHTML}}),Object.defineProperty(exports,"nodeToDOM",{enumerable:!0,get:function(){return _to_dom.nodeToDOM}});var _from_text=require("./from_text");Object.defineProperty(exports,"fromText",{enumerable:!0,get:function(){return _from_text.fromText}});var _to_text=require("./to_text");Object.defineProperty(exports,"toText",{enumerable:!0,get:function(){return _to_text.toText}})},{"./from_dom":18,"./from_text":19,"./register":21,"./to_dom":22,"./to_text":23}],21:[function(require,module,exports){"use strict";function serializeTo(doc,format,options){var converter=serializers[format];return converter||_error.NamespaceError.raise("Target format "+format+" not defined"),converter(doc,options)}function knownTarget(format){return!!serializers[format]}function defineTarget(format,func){serializers[format]=func}function parseFrom(schema,value,format,options){var converter=parsers[format];return converter||_error.NamespaceError.raise("Source format "+format+" not defined"),converter(schema,value,options)}function knownSource(format){return!!parsers[format]}function defineSource(format,func){parsers[format]=func}Object.defineProperty(exports,"__esModule",{value:!0}),exports.serializeTo=serializeTo,exports.knownTarget=knownTarget,exports.defineTarget=defineTarget,exports.parseFrom=parseFrom,exports.knownSource=knownSource,exports.defineSource=defineSource;var _error=require("../util/error"),serializers=Object.create(null);defineTarget("json",function(doc){return doc.toJSON()});var parsers=Object.create(null);defineSource("json",function(schema,json){return schema.nodeFromJSON(json)})},{"../util/error":52}],22:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function toDOM(node,options){return new DOMSerializer(options).renderContent(node)}function nodeToDOM(node,options,offset){var serializer=new DOMSerializer(options),dom=serializer.renderNode(node,offset);return node.isInline&&(dom=serializer.wrapInlineFlat(dom,node.marks),serializer.options.renderInlineFlat&&(dom=options.renderInlineFlat(node,dom,offset)||dom)),dom}function toHTML(node,options){var serializer=new DOMSerializer(options),wrap=serializer.elt("div");return wrap.appendChild(serializer.renderContent(node)),wrap.innerHTML}function def(cls,method){cls.prototype.serializeDOM=method}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.toDOM=toDOM,exports.nodeToDOM=nodeToDOM,exports.toHTML=toHTML;var _model=require("../model"),_register=require("./register"),DOMSerializer=function(){function DOMSerializer(options){_classCallCheck(this,DOMSerializer),this.options=options||{},this.doc=this.options.document||window.document}return _createClass(DOMSerializer,[{key:"elt",value:function(type,attrs){var result=this.doc.createElement(type);if(attrs)for(var name in attrs)"style"==name?result.style.cssText=attrs[name]:attrs[name]&&result.setAttribute(name,attrs[name]);for(var _len=arguments.length,content=Array(_len>2?_len-2:0),_key=2;_len>_key;_key++)content[_key-2]=arguments[_key];for(var i=0;i<content.length;i++)result.appendChild("string"==typeof content[i]?this.doc.createTextNode(content[i]):content[i]);return result}},{key:"renderNode",value:function(node,offset){var dom=node.type.serializeDOM(node,this);return this.options.onRender&&(dom=this.options.onRender(node,dom,offset)||dom),dom}},{key:"renderContent",value:function(node,where){return where||(where=this.doc.createDocumentFragment()),node.isTextblock?this.options.renderInlineFlat?this.renderInlineFlatInto(node,where):this.renderInlineInto(node,where):this.renderBlocksInto(node,where),where}},{key:"renderBlocksInto",value:function(parent,where){for(var child,i=parent.iter();child=i.next().value;)this.options.path&&this.options.path.push(i.offset-child.width),where.appendChild(this.renderNode(child,i.offset-child.width)),this.options.path&&this.options.path.pop()}},{key:"renderInlineInto",value:function(parent,where){var _this=this,top=where,active=[];parent.forEach(function(node,offset){for(var keep=0;keep<Math.min(active.length,node.marks.length)&&node.marks[keep].eq(active[keep]);++keep);for(;keep<active.length;)active.pop(),top=top.parentNode;for(;active.length<node.marks.length;){var add=node.marks[active.length];active.push(add),top=top.appendChild(_this.renderMark(add))}top.appendChild(_this.renderNode(node,offset))})}},{key:"renderInlineFlatInto",value:function(parent,where){var _this2=this;parent.forEach(function(node,start){var dom=_this2.renderNode(node,start);dom=_this2.wrapInlineFlat(dom,node.marks),dom=_this2.options.renderInlineFlat(node,dom,start)||dom,where.appendChild(dom)})}},{key:"renderMark",value:function(mark){return mark.type.serializeDOM(mark,this)}},{key:"wrapInlineFlat",value:function(dom,marks){for(var i=marks.length-1;i>=0;i--){var wrap=this.renderMark(marks[i]);wrap.appendChild(dom),dom=wrap}return dom}},{key:"renderAs",value:function(node,tagName,tagAttrs){
var dom=this.renderContent(node,this.elt(tagName,tagAttrs));return this.options.onContainer&&this.options.onContainer(dom),dom}}]),DOMSerializer}();(0,_register.defineTarget)("dom",toDOM),(0,_register.defineTarget)("html",toHTML),def(_model.BlockQuote,function(node,s){return s.renderAs(node,"blockquote")}),_model.BlockQuote.prototype.countCoordsAsChild=function(_,path,dom,coords){var childBox=dom.firstChild.getBoundingClientRect();return coords.left<childBox.left-2?_model.Pos.from(path):void 0},def(_model.BulletList,function(node,s){return s.renderAs(node,"ul")}),def(_model.OrderedList,function(node,s){return s.renderAs(node,"ol",{start:"1"!=node.attrs.order&&node.attrs.order})}),_model.OrderedList.prototype.countCoordsAsChild=_model.BulletList.prototype.countCoordsAsChild=function(_,path,dom,coords){for(var i=0;i<dom.childNodes.length;i++){var child=dom.childNodes[i];if(child.hasAttribute("pm-offset")){var childBox=child.getBoundingClientRect();if(coords.left>childBox.left-2)return null;if(childBox.top<=coords.top&&childBox.bottom>=coords.top)return new _model.Pos(path,i)}}},def(_model.ListItem,function(node,s){return s.renderAs(node,"li")}),def(_model.HorizontalRule,function(_,s){return s.elt("hr")}),def(_model.Paragraph,function(node,s){return s.renderAs(node,"p")}),def(_model.Heading,function(node,s){return s.renderAs(node,"h"+node.attrs.level)}),def(_model.CodeBlock,function(node,s){var code=s.renderAs(node,"code");return null!=node.attrs.params&&(code.className="fence "+node.attrs.params.replace(/(^|\s+)/g,"$&lang-")),s.elt("pre",null,code)}),def(_model.Text,function(node,s){return s.doc.createTextNode(node.text)}),def(_model.Image,function(node,s){return s.elt("img",{src:node.attrs.src,alt:node.attrs.alt,title:node.attrs.title})}),def(_model.HardBreak,function(_,s){return s.elt("br")}),def(_model.EmMark,function(_,s){return s.elt("em")}),def(_model.StrongMark,function(_,s){return s.elt("strong")}),def(_model.CodeMark,function(_,s){return s.elt("code")}),def(_model.LinkMark,function(mark,s){return s.elt("a",{href:mark.attrs.href,title:mark.attrs.title})})},{"../model":34,"./register":21}],23:[function(require,module,exports){"use strict";function toText(doc){return doc.type.serializeText(doc).trim()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toText=toText;var _model=require("../model"),_register=require("./register");_model.Block.prototype.serializeText=function(node){var accum="";return node.forEach(function(child){return accum+=child.type.serializeText(child)}),accum},_model.Textblock.prototype.serializeText=function(node){var text=_model.Block.prototype.serializeText(node);return text&&text+"\n\n"},_model.Inline.prototype.serializeText=function(){return""},_model.HardBreak.prototype.serializeText=function(){return"\n"},_model.Text.prototype.serializeText=function(node){return node.text},(0,_register.defineTarget)("text",toText)},{"../model":34,"./register":21}],24:[function(require,module,exports){"use strict";function wrapAndJoin(pm,pos,type){var attrs=arguments.length<=3||void 0===arguments[3]?null:arguments[3],predicate=arguments.length<=4||void 0===arguments[4]?null:arguments[4],before=pos.shorten(),sibling=before.offset>0&&pm.doc.path(before.path).child(before.offset-1),join=sibling&&sibling.type.name==type&&(!predicate||predicate(sibling)),tr=pm.tr.wrap(pos,pos,type,attrs),delPos=tr.map(pos).pos;tr["delete"](new _model.Pos(delPos.path,0),delPos),join&&tr.join(before),tr.apply()}function setAs(pm,pos,type,attrs){pm.tr.setBlockType(pos,pos,type,attrs)["delete"](new _model.Pos(pos.path,0),pos).apply()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.autoInputRules=void 0;var _model=require("../model"),_edit=require("../edit"),_inputrules=require("./inputrules"),autoInputRules=exports.autoInputRules=Object.create(null);(0,_edit.defineOption)("autoInput",!1,function(pm,val){pm.mod.autoInput&&(pm.mod.autoInput.forEach(function(rule){return(0,_inputrules.removeInputRule)(pm,rule)}),pm.mod.autoInput=null),val&&!function(){val===!0&&(val=["schema",autoInputRules]);var rules=Object.create(null),list=pm.mod.autoInput=[];val.forEach(function(spec){if("schema"===spec)pm.schema.registry("autoInput",function(name,rule,type,typeName){var rname=typeName+":"+name,handler=rule.handler;handler.bind&&(handler=handler.bind(type)),rules[rname]=new _inputrules.InputRule(rule.match,rule.filter,handler)});else for(var name in spec){var _val=spec[name];null==_val?delete rules[name]:rules[name]=_val}});for(var name in rules)(0,_inputrules.addInputRule)(pm,rules[name]),list.push(rules[name])}()}),autoInputRules.emDash=new _inputrules.InputRule(/--$/,"-","—"),autoInputRules.openDoubleQuote=new _inputrules.InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,'"',"“"),autoInputRules.closeDoubleQuote=new _inputrules.InputRule(/"$/,'"',"”"),autoInputRules.openSingleQuote=new _inputrules.InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"'","‘"),autoInputRules.closeSingleQuote=new _inputrules.InputRule(/'$/,"'","’"),_model.BlockQuote.register("autoInput","startBlockQuote",new _inputrules.InputRule(/^\s*> $/," ",function(pm,_,pos){wrapAndJoin(pm,pos,this)})),_model.OrderedList.register("autoInput","startOrderedList",new _inputrules.InputRule(/^(\d+)\. $/," ",function(pm,match,pos){var order=+match[1];wrapAndJoin(pm,pos,this,{order:order||null},function(node){return node.size+(node.attrs.order||1)==order})})),_model.BulletList.register("autoInput","startBulletList",new _inputrules.InputRule(/^\s*([-+*]) $/," ",function(pm,match,pos){var bullet=match[1];wrapAndJoin(pm,pos,this,null,function(node){return node.attrs.bullet==bullet})})),_model.CodeBlock.register("autoInput","startCodeBlock",new _inputrules.InputRule(/^```$/,"`",function(pm,_,pos){setAs(pm,pos,this,{params:""})})),_model.Heading.registerComputed("autoInput","startHeading",function(type){var re=new RegExp("^(#{1,"+type.maxLevel+"}) $");return new _inputrules.InputRule(re," ",function(pm,match,pos){setAs(pm,pos,this,{level:match[1].length})})})},{"../edit":11,"../model":34,"./inputrules":25}],25:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function addInputRule(pm,rule){pm.mod.interpretInput||(pm.mod.interpretInput=new InputRules(pm)),pm.mod.interpretInput.addRule(rule)}function removeInputRule(pm,rule){var ii=pm.mod.interpretInput;ii&&(ii.removeRule(rule),0==ii.rules.length&&(ii.unregister(),pm.mod.interpretInput=null))}function getContext(doc,pos){for(var child,parent=doc.path(pos.path),isCode=parent.type.isCode,textBefore="",i=parent.iter(0,pos.offset);child=i.next().value;)child.isText?textBefore+=child.text:textBefore="",i.atEnd()&&child.marks.some(function(st){return st.type.isCode})&&(isCode=!0);return{textBefore:textBefore,isCode:isCode}}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputRule=void 0,exports.addInputRule=addInputRule,exports.removeInputRule=removeInputRule;var _model=require("../model"),_edit=require("../edit"),InputRules=(exports.InputRule=function InputRule(match,filter,handler){_classCallCheck(this,InputRule),this.filter=filter,this.match=match,this.handler=handler},function(){function InputRules(pm){var _this=this;_classCallCheck(this,InputRules),this.pm=pm,this.rules=[],this.cancelVersion=null,pm.on("selectionChange",this.onSelChange=function(){return _this.cancelVersion=null}),pm.on("textInput",this.onTextInput=this.onTextInput.bind(this)),pm.addKeymap(new _edit.Keymap({Backspace:function(pm){return _this.backspace(pm)}},{name:"inputRules"}),20)}return _createClass(InputRules,[{key:"unregister",value:function(){this.pm.off("selectionChange",this.onSelChange),this.pm.off("textInput",this.onTextInput),this.pm.removeKeymap("inputRules")}},{key:"addRule",value:function(rule){this.rules.push(rule)}},{key:"removeRule",value:function(rule){var found=this.rules.indexOf(rule);return found>-1?(this.rules.splice(found,1),!0):void 0}},{key:"onTextInput",value:function(text){var pos=this.pm.selection.head;if(pos)for(var textBefore=void 0,isCode=void 0,lastCh=text[text.length-1],i=0;i<this.rules.length;i++){var rule=this.rules[i],match=void 0;if(!rule.filter||rule.filter==lastCh){if(null==textBefore){var _getContext=getContext(this.pm.doc,pos);if(textBefore=_getContext.textBefore,isCode=_getContext.isCode)return}if(match=rule.match.exec(textBefore)){var startVersion=this.pm.history.getVersion();if("string"==typeof rule.handler){var offset=pos.offset-(match[1]||match[0]).length,start=new _model.Pos(pos.path,offset),marks=this.pm.doc.marksAt(pos);this.pm.tr["delete"](start,pos).insert(start,this.pm.schema.text(rule.handler,marks)).apply()}else rule.handler(this.pm,match,pos);return void(this.cancelVersion=startVersion)}}}}},{key:"backspace",value:function(){return this.cancelVersion?(this.pm.history.backToVersion(this.cancelVersion),void(this.cancelVersion=null)):!1}}]),InputRules}())},{"../edit":11,"../model":34}],26:[function(require,module,exports){"use strict";function getIcon(name,data){var node=document.createElement("div");if(node.className=prefix,data.path){svgBuilt[name]||buildSVG(name,data);var svg=node.appendChild(document.createElementNS(SVG,"svg"));svg.style.width=data.width/data.height+"em";var use=svg.appendChild(document.createElementNS(SVG,"use"));use.setAttributeNS(XLINK,"href","#pm-icon-"+name)}else node.appendChild(document.createElement("span")).textContent=data.text||"",data.css&&(node.firstChild.style.cssText=data.css);return node}function buildSVG(name,data){svgCollection||(svgCollection=document.createElementNS(SVG,"svg"),svgCollection.style.display="none",document.body.insertBefore(svgCollection,document.body.firstChild));var sym=document.createElementNS(SVG,"symbol");sym.id="pm-icon-"+name,sym.setAttribute("viewBox","0 0 "+data.width+" "+data.height);var path=sym.appendChild(document.createElementNS(SVG,"path"));path.setAttribute("d",data.path),svgCollection.appendChild(sym),svgBuilt[name]=!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getIcon=getIcon;var _dom=require("../dom"),svgCollection=null,svgBuilt=Object.create(null),SVG="http://www.w3.org/2000/svg",XLINK="http://www.w3.org/1999/xlink",prefix="ProseMirror-icon";(0,_dom.insertCSS)("\n."+prefix+" {\n  display: inline-block;\n  line-height: .8;\n  vertical-align: -2px; /* Compensate for padding */\n  padding: 2px 8px;\n  cursor: pointer;\n}\n\n."+prefix+" svg {\n  fill: currentColor;\n  height: 1em;\n}\n\n."+prefix+" span {\n  vertical-align: text-top;\n}")},{"../dom":1}],27:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function title(pm,command){if(!command.label)return null;var key=command.name&&pm.keyForCommand(command.name);return key?command.label+" ("+key+")":command.label}function renderDropdownItems(items,pm){for(var rendered=[],i=0;i<items.length;i++){var inner=items[i].render(pm);inner&&rendered.push((0,_dom.elt)("div",{"class":prefix+"-dropdown-item"},inner))}return rendered.length||rendered.push((0,_dom.elt)("div",{"class":prefix+"-dropdown-empty"},"(empty)")),rendered}function resolveGroup(pm,content){for(var result=void 0,isArray=Array.isArray(content),i=0;i<(isArray?content.length:1);i++){var cur=isArray?content[i]:content;if(cur instanceof MenuCommandGroup){var elts=cur.get(pm);if(!isArray||1==content.length)return elts;result=(result||content.slice(0,i)).concat(elts)}else result&&result.push(cur)}return result||(isArray?content:[content])}function renderGrouped(pm,content){for(var result=document.createDocumentFragment(),needSep=!1,i=0;i<content.length;i++){for(var items=resolveGroup(pm,content[i]),added=!1,j=0;j<items.length;j++){var rendered=items[j].render(pm);rendered&&(!added&&needSep&&result.appendChild(separator()),result.appendChild((0,_dom.elt)("span",{"class":prefix+"item"},rendered)),added=!0)}added&&(needSep=!0)}return result}function separator(){return(0,_dom.elt)("span",{"class":prefix+"separator"})}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.historyGroup=exports.blockGroup=exports.textblockMenu=exports.insertMenu=exports.inlineGroup=exports.DropdownSubmenu=exports.Dropdown=exports.MenuCommandGroup=exports.MenuCommand=void 0,exports.resolveGroup=resolveGroup,exports.renderGrouped=renderGrouped;var _dom=require("../dom"),_sortedinsert=require("../util/sortedinsert"),_sortedinsert2=_interopRequireDefault(_sortedinsert),_obj=require("../util/obj"),_error=require("../util/error"),_icons=require("./icons"),prefix="ProseMirror-menu",MenuCommand=exports.MenuCommand=function(){function MenuCommand(command,options){_classCallCheck(this,MenuCommand),this.command_=command,this.options=options}return _createClass(MenuCommand,[{key:"command",value:function(pm){return"string"==typeof this.command_?pm.commands[this.command_]:this.command_}},{key:"render",value:function(pm){var cmd=this.command(pm),disabled=!1;if(cmd){if("ignore"!=this.options.select&&!cmd.select(pm)){if(null==this.options.select||"hide"==this.options.select)return null;"disable"==this.options.select&&(disabled=!0)}var disp=this.options.display;disp||_error.AssertionError.raise("No display style defined for menu command "+cmd.name);var dom=void 0;return disp.render?dom=disp.render(cmd,pm):"icon"==disp.type?(dom=(0,_icons.getIcon)(cmd.name,disp),!disabled&&cmd.active(pm)&&dom.classList.add(prefix+"-active")):"label"==disp.type?dom=(0,_dom.elt)("div",null,disp.label||cmd.spec.label):_error.AssertionError.raise("Unsupported command display style: "+disp.type),dom.setAttribute("title",title(pm,cmd)),this.options["class"]&&dom.classList.add(this.options["class"]),disabled&&dom.classList.add(prefix+"-disabled"),this.options.css&&(dom.style.cssText+=this.options.css),dom.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),pm.signal("interaction"),cmd.exec(pm,null,dom)}),dom}}}]),MenuCommand}(),MenuCommandGroup=exports.MenuCommandGroup=function(){function MenuCommandGroup(name,options){_classCallCheck(this,MenuCommandGroup),this.name=name,this.options=options}return _createClass(MenuCommandGroup,[{key:"collect",value:function(pm){var _this=this,result=[];for(var name in pm.commands){var cmd=pm.commands[name],spec=cmd.spec.menu;spec&&spec.group==this.name&&(0,_sortedinsert2["default"])(result,{cmd:cmd,rank:null==spec.rank?50:spec.rank},function(a,b){return a.rank-b.rank})}return result.map(function(o){var spec=o.cmd.spec.menu;return _this.options&&(spec=(0,_obj.copyObj)(_this.options,(0,_obj.copyObj)(spec))),new MenuCommand(o.cmd,spec)})}},{key:"get",value:function(pm){var groups=pm.mod.menuGroups||this.startGroups(pm);return groups[this.name]||(groups[this.name]=this.collect(pm))}},{key:"startGroups",value:function(pm){var clear=function clear(){pm.mod.menuGroups=null,pm.off("commandsChanging",clear)};return pm.on("commandsChanging",clear),pm.mod.menuGroups=Object.create(null)}}]),MenuCommandGroup}(),Dropdown=exports.Dropdown=function(){function Dropdown(options,content){_classCallCheck(this,Dropdown),this.options=options||{},this.content=content}return _createClass(Dropdown,[{key:"render",value:function(pm){var _this2=this;if(0!=resolveGroup(pm,this.content).length){var label=this.options.activeLabel&&this.findActiveIn(this,pm)||this.options.label,dom=(0,_dom.elt)("div",{"class":prefix+"-dropdown "+(this.options["class"]||""),style:this.options.css,title:this.options.title},label),open=null;return dom.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),open=open&&open()?null:_this2.expand(pm,dom)}),dom}}},{key:"expand",value:function(pm,dom){function finish(){return done?void 0:(done=!0,pm.off("interaction",finish),pm.wrapper.removeChild(menuDOM),!0)}var rendered=renderDropdownItems(resolveGroup(pm,this.content),pm),box=dom.getBoundingClientRect(),outer=pm.wrapper.getBoundingClientRect(),menuDOM=(0,_dom.elt)("div",{"class":prefix+"-dropdown-menu "+(this.options["class"]||""),style:"left: "+(box.left-outer.left)+"px; top: "+(box.bottom-outer.top)+"px"},rendered),done=!1;return pm.signal("interaction"),pm.wrapper.appendChild(menuDOM),pm.on("interaction",finish),finish}},{key:"findActiveIn",value:function(element,pm){for(var items=resolveGroup(pm,element.content),i=0;i<items.length;i++){var cur=items[i];if(cur instanceof MenuCommand){var active=cur.command(pm).active(pm);if(active)return cur.options.activeLabel}else if(cur instanceof DropdownSubmenu){var found=this.findActiveIn(cur,pm);if(found)return found}}}}]),Dropdown}(),DropdownSubmenu=exports.DropdownSubmenu=function(){function DropdownSubmenu(options,content){_classCallCheck(this,DropdownSubmenu),this.options=options||{},this.content=content}return _createClass(DropdownSubmenu,[{key:"render",value:function(pm){var items=resolveGroup(pm,this.content);if(items.length){var label=(0,_dom.elt)("div",{"class":prefix+"-submenu-label"},this.options.label),wrap=(0,_dom.elt)("div",{"class":prefix+"-submenu-wrap"},label,(0,_dom.elt)("div",{"class":prefix+"-submenu"},renderDropdownItems(items,pm)));return label.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),wrap.classList.toggle(prefix+"-submenu-wrap-active")}),wrap}}}]),DropdownSubmenu}();exports.inlineGroup=new MenuCommandGroup("inline"),exports.insertMenu=new Dropdown({label:"Insert"},new MenuCommandGroup("insert")),exports.textblockMenu=new Dropdown({label:"Type..",displayActive:!0,"class":"ProseMirror-textblock-dropdown"},[new MenuCommandGroup("textblock"),new DropdownSubmenu({label:"Heading"},new MenuCommandGroup("textblockHeading"))]),exports.blockGroup=new MenuCommandGroup("block"),exports.historyGroup=new MenuCommandGroup("history");(0,_dom.insertCSS)("\n\n.ProseMirror-textblock-dropdown {\n  min-width: 3em;\n}\n\n."+prefix+" {\n  margin: 0 -4px;\n  line-height: 1;\n}\n\n.ProseMirror-tooltip ."+prefix+" {\n  width: -webkit-fit-content;\n  width: fit-content;\n  white-space: pre;\n}\n\n."+prefix+"item {\n  margin-right: 3px;\n  display: inline-block;\n}\n\n."+prefix+"separator {\n  border-right: 1px solid #ddd;\n  margin-right: 3px;\n}\n\n."+prefix+"-dropdown, ."+prefix+"-dropdown-menu {\n  font-size: 90%;\n  white-space: nowrap;\n}\n\n."+prefix+"-dropdown {\n  padding: 1px 14px 1px 4px;\n  display: inline-block;\n  vertical-align: 1px;\n  position: relative;\n  cursor: pointer;\n}\n\n."+prefix+'-dropdown:after {\n  content: "";\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid currentColor;\n  opacity: .6;\n  position: absolute;\n  right: 2px;\n  top: calc(50% - 2px);\n}\n\n.'+prefix+"-dropdown-menu, ."+prefix+"-submenu {\n  position: absolute;\n  background: white;\n  color: #666;\n  border: 1px solid #aaa;\n  padding: 2px;\n}\n\n."+prefix+"-dropdown-menu {\n  z-index: 15;\n  min-width: 6em;\n}\n\n."+prefix+"-dropdown-item {\n  cursor: pointer;\n  padding: 2px 8px 2px 4px;\n}\n\n."+prefix+"-dropdown-item:hover {\n  background: #f2f2f2;\n}\n\n."+prefix+"-dropdown-empty {\n  opacity: 0.4;\n}\n\n."+prefix+"-submenu-wrap {\n  position: relative;\n  margin-right: -4px;\n}\n\n."+prefix+'-submenu-label:after {\n  content: "";\n  border-top: 4px solid transparent;\n  border-bottom: 4px solid transparent;\n  border-left: 4px solid currentColor;\n  opacity: .6;\n  position: absolute;\n  right: 4px;\n  top: calc(50% - 4px);\n}\n\n.'+prefix+"-submenu {\n  display: none;\n  min-width: 4em;\n  left: 100%;\n  top: -3px;\n}\n\n."+prefix+"-active {\n  background: #eee;\n  border-radius: 4px;\n}\n\n."+prefix+"-active {\n  background: #eee;\n  border-radius: 4px;\n}\n\n."+prefix+"-disabled {\n  opacity: .3;\n}\n\n."+prefix+"-submenu-wrap:hover ."+prefix+"-submenu, ."+prefix+"-submenu-wrap-active ."+prefix+"-submenu {\n  display: block;\n}\n")},{"../dom":1,"../util/error":52,"../util/obj":55,"../util/sortedinsert":56,"./icons":26}],28:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function findWrappingScrollable(node){for(var cur=node.parentNode;cur;cur=cur.parentNode)if(cur.scrollHeight>cur.clientHeight)return cur}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_edit=require("../edit"),_dom=require("../dom"),_update=require("../ui/update"),_menu=require("./menu"),prefix="ProseMirror-menubar";(0,_edit.defineOption)("menuBar",!1,function(pm,value){pm.mod.menuBar&&pm.mod.menuBar.detach(),pm.mod.menuBar=value?new MenuBar(pm,value):null});var defaultMenu=[_menu.inlineGroup,_menu.insertMenu,[_menu.textblockMenu,_menu.blockGroup],_menu.historyGroup],MenuBar=function(){function MenuBar(pm,config){var _this=this;_classCallCheck(this,MenuBar),this.pm=pm,this.config=config||{},this.wrapper=pm.wrapper.insertBefore((0,_dom.elt)("div",{"class":prefix}),pm.wrapper.firstChild),this.spacer=null,this.maxHeight=0,this.widthForMaxHeight=0,this.updater=new _update.UpdateScheduler(pm,"selectionChange change activeMarkChange commandsChanged",function(){return _this.update()}),this.content=config.content||defaultMenu,this.updater.force(),this.floating=!1,this.config["float"]&&(this.updateFloat(),this.scrollFunc=function(){document.body.contains(_this.pm.wrapper)?_this.updateFloat():window.removeEventListener("scroll",_this.scrollFunc)},window.addEventListener("scroll",this.scrollFunc))}return _createClass(MenuBar,[{key:"detach",value:function(){this.updater.detach(),this.wrapper.parentNode.removeChild(this.wrapper),this.scrollFunc&&window.removeEventListener("scroll",this.scrollFunc)}},{key:"update",value:function(){var _this2=this;return this.wrapper.textContent="",this.wrapper.appendChild((0,_menu.renderGrouped)(this.pm,this.content)),this["float"]?this.updateScrollCursor():function(){return _this2.wrapper.offsetWidth!=_this2.widthForMaxHeight&&(_this2.widthForMaxHeight=_this2.wrapper.offsetWidth,_this2.maxHeight=0),_this2.wrapper.offsetHeight>_this2.maxHeight?(_this2.maxHeight=_this2.wrapper.offsetHeight,function(){_this2.wrapper.style.minHeight=_this2.maxHeight+"px"}):void 0}}},{key:"updateFloat",value:function(){var editorRect=this.pm.wrapper.getBoundingClientRect();if(this.floating)if(editorRect.top>=0||editorRect.bottom<this.wrapper.offsetHeight+10)this.floating=!1,this.wrapper.style.position=this.wrapper.style.left=this.wrapper.style.width="",this.wrapper.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var border=(this.pm.wrapper.offsetWidth-this.pm.wrapper.clientWidth)/2;this.wrapper.style.left=editorRect.left+border+"px",this.wrapper.style.display=editorRect.top>window.innerHeight?"none":""}else if(editorRect.top<0&&editorRect.bottom>=this.wrapper.offsetHeight+10){this.floating=!0;var menuRect=this.wrapper.getBoundingClientRect();this.wrapper.style.left=menuRect.left+"px",this.wrapper.style.width=menuRect.width+"px",this.wrapper.style.position="fixed",this.spacer=(0,_dom.elt)("div",{"class":prefix+"-spacer",style:"height: "+menuRect.height+"px"}),this.pm.wrapper.insertBefore(this.spacer,this.wrapper)}}},{key:"updateScrollCursor",value:function(){var _this3=this;if(!this.floating)return null;var head=this.pm.selection.head;return head?function(){var cursorPos=_this3.pm.coordsAtPos(head),menuRect=_this3.wrapper.getBoundingClientRect();if(cursorPos.top<menuRect.bottom&&cursorPos.bottom>menuRect.top){var _ret=function(){var scrollable=findWrappingScrollable(_this3.pm.wrapper);return scrollable?{v:function(){scrollable.scrollTop-=menuRect.bottom-cursorPos.top}}:void 0}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v}}:null}}]),MenuBar}();(0,_dom.insertCSS)("\n."+prefix+" {\n  border-top-left-radius: inherit;\n  border-top-right-radius: inherit;\n  position: relative;\n  min-height: 1em;\n  color: #666;\n  padding: 1px 6px;\n  top: 0; left: 0; right: 0;\n  border-bottom: 1px solid silver;\n  background: white;\n  z-index: 10;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: visible;\n}\n")},{"../dom":1,"../edit":11,"../ui/update":51,"./menu":27}],29:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function topCenterOfSelection(){var range=window.getSelection().getRangeAt(0),rects=range.getClientRects();if(!rects.length)return range.getBoundingClientRect();for(var _rects$=rects[0],left=_rects$.left,right=_rects$.right,top=_rects$.top,i=1;left==right&&rects.length>i;){var _rects=rects[i++];left=_rects.left,right=_rects.right,top=_rects.top}for(;i<rects.length;i++)rects[i].top<rects[0].bottom-1&&(i==rects.length-1||Math.abs(rects[i+1].left-rects[i].left)>1)&&(left=Math.min(left,rects[i].left),right=Math.max(right,rects[i].right),top=Math.min(top,rects[i].top));return{top:top,left:(left+right)/2}}function topOfNodeSelection(pm){var selected=pm.content.querySelector(".ProseMirror-selectednode");if(!selected)return{left:0,top:0};var box=selected.getBoundingClientRect();return{left:Math.min((box.left+box.right)/2,box.left+20),top:box.top}}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_model=require("../model"),_edit=require("../edit"),_dom=require("../dom"),_tooltip=require("../ui/tooltip"),_update=require("../ui/update"),_menu=require("./menu"),classPrefix="ProseMirror-tooltipmenu";(0,_edit.defineOption)("tooltipMenu",!1,function(pm,value){pm.mod.tooltipMenu&&pm.mod.tooltipMenu.detach(),pm.mod.tooltipMenu=value?new TooltipMenu(pm,value):null});var defaultInline=[_menu.inlineGroup,_menu.insertMenu],defaultBlock=[[_menu.textblockMenu,_menu.blockGroup]],TooltipMenu=function(){function TooltipMenu(pm,config){var _this=this;_classCallCheck(this,TooltipMenu),this.pm=pm,this.config=config||{},this.showLinks=this.config.showLinks!==!1,this.selectedBlockMenu=this.config.selectedBlockMenu,this.updater=new _update.UpdateScheduler(pm,"change selectionChange blur commandsChanged",function(){return _this.update()}),this.onContextMenu=this.onContextMenu.bind(this),pm.content.addEventListener("contextmenu",this.onContextMenu),this.tooltip=new _tooltip.Tooltip(pm.wrapper,"above"),this.inlineContent=this.config.inlineContent||defaultInline,this.blockContent=this.config.blockContent||defaultBlock,this.selectedBlockContent=this.config.selectedBlockContent||this.inlineContent.concat(this.blockContent)}return _createClass(TooltipMenu,[{key:"detach",value:function(){this.updater.detach(),this.tooltip.detach(),this.pm.content.removeEventListener("contextmenu",this.onContextMenu)}},{key:"show",value:function(content,coords){this.tooltip.open((0,_dom.elt)("div",null,(0,_menu.renderGrouped)(this.pm,content)),coords)}},{key:"update",value:function(){var _this2=this,_pm$selection=this.pm.selection,empty=_pm$selection.empty,node=_pm$selection.node,from=_pm$selection.from,to=_pm$selection.to,link=void 0;if(this.pm.hasFocus()){if(node&&node.isBlock)return function(){var coords=topOfNodeSelection(_this2.pm);return function(){return _this2.show(_this2.blockContent,coords)}};if(!empty)return function(){var coords=node?topOfNodeSelection(_this2.pm):topCenterOfSelection(),showBlock=_this2.selectedBlockMenu&&_model.Pos.samePath(from.path,to.path)&&0==from.offset&&to.offset==_this2.pm.doc.path(from.path).size;return function(){return _this2.show(showBlock?_this2.selectedBlockContent:_this2.inlineContent,coords)}};if(this.selectedBlockMenu&&0==this.pm.doc.path(from.path).size)return function(){var coords=_this2.pm.coordsAtPos(from);return function(){return _this2.show(_this2.blockContent,coords)}};if(this.showLinks&&(link=this.linkUnderCursor()))return function(){var coords=_this2.pm.coordsAtPos(from);return function(){return _this2.showLink(link,coords)}};this.tooltip.close()}else this.tooltip.close()}},{key:"linkUnderCursor",value:function(){var head=this.pm.selection.head;if(!head)return null;var marks=this.pm.doc.marksAt(head);return marks.reduce(function(found,m){return found||"link"==m.type.name&&m},null)}},{key:"showLink",value:function(link,pos){var node=(0,_dom.elt)("div",{"class":classPrefix+"-linktext"},(0,_dom.elt)("a",{href:link.attrs.href,title:link.attrs.title},link.attrs.href));this.tooltip.open(node,pos)}},{key:"onContextMenu",value:function(e){if(this.pm.selection.empty){var pos=this.pm.posAtCoords({left:e.clientX,top:e.clientY});pos&&pos.isValid(this.pm.doc,!0)&&(this.pm.setTextSelection(pos,pos),this.pm.flush(),this.show(this.inlineContent,topCenterOfSelection()))}}}]),TooltipMenu}();(0,_dom.insertCSS)("\n\n."+classPrefix+"-linktext a {\n  color: #444;\n  text-decoration: none;\n  padding: 0 5px;\n}\n\n."+classPrefix+"-linktext a:hover {\n  text-decoration: underline;\n}\n\n")},{"../dom":1,"../edit":11,"../model":34,"../ui/tooltip":50,"../ui/update":51,"./menu":27}],30:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){
for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultSchema=exports.CodeMark=exports.LinkMark=exports.StrongMark=exports.EmMark=exports.HardBreak=exports.Image=exports.Paragraph=exports.CodeBlock=exports.Heading=exports.HorizontalRule=exports.ListItem=exports.BulletList=exports.OrderedList=exports.BlockQuote=exports.Doc=void 0;var _schema=require("./schema"),Doc=exports.Doc=function(_Block){function Doc(){return _classCallCheck(this,Doc),_possibleConstructorReturn(this,Object.getPrototypeOf(Doc).apply(this,arguments))}return _inherits(Doc,_Block),_createClass(Doc,null,[{key:"kinds",get:function(){return"doc"}}]),Doc}(_schema.Block),BlockQuote=exports.BlockQuote=function(_Block2){function BlockQuote(){return _classCallCheck(this,BlockQuote),_possibleConstructorReturn(this,Object.getPrototypeOf(BlockQuote).apply(this,arguments))}return _inherits(BlockQuote,_Block2),BlockQuote}(_schema.Block),OrderedList=exports.OrderedList=function(_Block3){function OrderedList(){return _classCallCheck(this,OrderedList),_possibleConstructorReturn(this,Object.getPrototypeOf(OrderedList).apply(this,arguments))}return _inherits(OrderedList,_Block3),_createClass(OrderedList,[{key:"contains",get:function(){return"list_item"}},{key:"attrs",get:function(){return{order:new _schema.Attribute({"default":"1"})}}}]),OrderedList}(_schema.Block),BulletList=exports.BulletList=function(_Block4){function BulletList(){return _classCallCheck(this,BulletList),_possibleConstructorReturn(this,Object.getPrototypeOf(BulletList).apply(this,arguments))}return _inherits(BulletList,_Block4),_createClass(BulletList,[{key:"contains",get:function(){return"list_item"}}]),BulletList}(_schema.Block),ListItem=exports.ListItem=function(_Block5){function ListItem(){return _classCallCheck(this,ListItem),_possibleConstructorReturn(this,Object.getPrototypeOf(ListItem).apply(this,arguments))}return _inherits(ListItem,_Block5),_createClass(ListItem,null,[{key:"kinds",get:function(){return"list_item"}}]),ListItem}(_schema.Block),HorizontalRule=exports.HorizontalRule=function(_Block6){function HorizontalRule(){return _classCallCheck(this,HorizontalRule),_possibleConstructorReturn(this,Object.getPrototypeOf(HorizontalRule).apply(this,arguments))}return _inherits(HorizontalRule,_Block6),_createClass(HorizontalRule,[{key:"contains",get:function(){return null}}]),HorizontalRule}(_schema.Block),Heading=exports.Heading=function(_Textblock){function Heading(){return _classCallCheck(this,Heading),_possibleConstructorReturn(this,Object.getPrototypeOf(Heading).apply(this,arguments))}return _inherits(Heading,_Textblock),_createClass(Heading,[{key:"attrs",get:function(){return{level:new _schema.Attribute({"default":"1"})}}},{key:"maxLevel",get:function(){return 6}}]),Heading}(_schema.Textblock),CodeBlock=exports.CodeBlock=function(_Textblock2){function CodeBlock(){return _classCallCheck(this,CodeBlock),_possibleConstructorReturn(this,Object.getPrototypeOf(CodeBlock).apply(this,arguments))}return _inherits(CodeBlock,_Textblock2),_createClass(CodeBlock,[{key:"contains",get:function(){return"text"}},{key:"containsMarks",get:function(){return!1}},{key:"isCode",get:function(){return!0}}]),CodeBlock}(_schema.Textblock),Paragraph=exports.Paragraph=function(_Textblock3){function Paragraph(){return _classCallCheck(this,Paragraph),_possibleConstructorReturn(this,Object.getPrototypeOf(Paragraph).apply(this,arguments))}return _inherits(Paragraph,_Textblock3),_createClass(Paragraph,[{key:"defaultTextblock",get:function(){return!0}}]),Paragraph}(_schema.Textblock),Image=exports.Image=function(_Inline){function Image(){return _classCallCheck(this,Image),_possibleConstructorReturn(this,Object.getPrototypeOf(Image).apply(this,arguments))}return _inherits(Image,_Inline),_createClass(Image,[{key:"attrs",get:function(){return{src:new _schema.Attribute,alt:new _schema.Attribute({"default":""}),title:new _schema.Attribute({"default":""})}}},{key:"draggable",get:function(){return!0}}]),Image}(_schema.Inline),HardBreak=exports.HardBreak=function(_Inline2){function HardBreak(){return _classCallCheck(this,HardBreak),_possibleConstructorReturn(this,Object.getPrototypeOf(HardBreak).apply(this,arguments))}return _inherits(HardBreak,_Inline2),_createClass(HardBreak,[{key:"selectable",get:function(){return!1}},{key:"isBR",get:function(){return!0}}]),HardBreak}(_schema.Inline),EmMark=exports.EmMark=function(_MarkType){function EmMark(){return _classCallCheck(this,EmMark),_possibleConstructorReturn(this,Object.getPrototypeOf(EmMark).apply(this,arguments))}return _inherits(EmMark,_MarkType),_createClass(EmMark,null,[{key:"rank",get:function(){return 51}}]),EmMark}(_schema.MarkType),StrongMark=exports.StrongMark=function(_MarkType2){function StrongMark(){return _classCallCheck(this,StrongMark),_possibleConstructorReturn(this,Object.getPrototypeOf(StrongMark).apply(this,arguments))}return _inherits(StrongMark,_MarkType2),_createClass(StrongMark,null,[{key:"rank",get:function(){return 52}}]),StrongMark}(_schema.MarkType),LinkMark=exports.LinkMark=function(_MarkType3){function LinkMark(){return _classCallCheck(this,LinkMark),_possibleConstructorReturn(this,Object.getPrototypeOf(LinkMark).apply(this,arguments))}return _inherits(LinkMark,_MarkType3),_createClass(LinkMark,[{key:"attrs",get:function(){return{href:new _schema.Attribute,title:new _schema.Attribute({"default":""})}}}],[{key:"rank",get:function(){return 25}}]),LinkMark}(_schema.MarkType),CodeMark=exports.CodeMark=function(_MarkType4){function CodeMark(){return _classCallCheck(this,CodeMark),_possibleConstructorReturn(this,Object.getPrototypeOf(CodeMark).apply(this,arguments))}return _inherits(CodeMark,_MarkType4),_createClass(CodeMark,[{key:"isCode",get:function(){return!0}}],[{key:"rank",get:function(){return 101}}]),CodeMark}(_schema.MarkType),defaultSpec=new _schema.SchemaSpec({doc:Doc,blockquote:BlockQuote,ordered_list:OrderedList,bullet_list:BulletList,list_item:ListItem,horizontal_rule:HorizontalRule,paragraph:Paragraph,heading:Heading,code_block:CodeBlock,text:_schema.Text,image:Image,hard_break:HardBreak},{em:EmMark,strong:StrongMark,link:LinkMark,code:CodeMark});exports.defaultSchema=new _schema.Schema(defaultSpec)},{"./schema":38}],31:[function(require,module,exports){"use strict";function findDiffStart(a,b){for(var path=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],iA=a.iter(),iB=b.iter(),offset=0;;){if(iA.atEnd()||iB.atEnd()){if(a.size==b.size)return null;break}var childA=iA.next(),childB=iB.next();if(childA!=childB){if(!childA.sameMarkup(childB))break;if(childA.isText&&childA.text!=childB.text){for(var j=0;childA.text[j]==childB.text[j];j++)offset++;break}if(childA.size||childB.size){path.push(offset);var inner=findDiffStart(childA.content,childB.content,path);if(inner)return inner;path.pop()}offset+=childA.width}else offset+=childA.width}return new _pos.Pos(path,offset)}function findDiffEnd(a,b){for(var pathA=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],pathB=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],iA=a.reverseIter(),iB=b.reverseIter(),offA=a.size,offB=b.size;;){if(iA.atEnd()||iB.atEnd()){if(a.size==b.size)return null;break}var childA=iA.next(),childB=iB.next();if(childA!=childB){if(!childA.sameMarkup(childB))break;if(childA.isText&&childA.text!=childB.text){for(var same=0,minSize=Math.min(childA.text.length,childB.text.length);minSize>same&&childA.text[childA.text.length-same-1]==childB.text[childB.text.length-same-1];)same++,offA--,offB--;break}if(offA-=childA.width,offB-=childB.width,childA.size||childB.size){pathA.push(offA),pathB.push(offB);var inner=findDiffEnd(childA.content,childB.content,pathA,pathB);if(inner)return inner;pathA.pop(),pathB.pop()}}else offA-=childA.width,offB-=childB.width}return{a:new _pos.Pos(pathA,offA),b:new _pos.Pos(pathB,offB)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.findDiffStart=findDiffStart,exports.findDiffEnd=findDiffEnd;var _pos=require("./pos")},{"./pos":37}],32:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModelError=void 0;var _error=require("../util/error");exports.ModelError=function(_ProseMirrorError){function ModelError(){return _classCallCheck(this,ModelError),_possibleConstructorReturn(this,Object.getPrototypeOf(ModelError).apply(this,arguments))}return _inherits(ModelError,_ProseMirrorError),ModelError}(_error.ProseMirrorError)},{"../util/error":52}],33:[function(require,module,exports){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.emptyFragment=exports.Fragment=void 0;var _error=require("./error"),Fragment=exports.Fragment=function(){function Fragment(){_classCallCheck(this,Fragment)}return _createClass(Fragment,[{key:"append",value:function(other){var joinLeft=arguments.length<=1||void 0===arguments[1]?0:arguments[1],joinRight=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return this.size?other.size?this.appendInner(other,joinLeft,joinRight):joinLeft?this.replace(this.size-1,this.lastChild.close(joinLeft-1,"end")):this:joinRight?other.replace(0,other.firstChild.close(joinRight-1,"start")):other}},{key:"toString",value:function(){var str="";return this.forEach(function(n){return str+=(str?", ":"")+n.toString()}),str}},{key:"toArray",value:function(){for(var n,from=arguments.length<=0||void 0===arguments[0]?0:arguments[0],to=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1],f=arguments[2],result=[],iter=this.iter(from,to);n=iter.next().value;)result.push(f?f(n):n);return result}},{key:"map",value:function(f){return Fragment.fromArray(this.toArray(void 0,void 0,f))}},{key:"some",value:function(f){for(var n,iter=this.iter();n=iter.next().value;)if(f(n))return n}},{key:"close",value:function(depth,side){var child="start"==side?this.firstChild:this.lastChild,closed=child.close(depth-1,side);return closed==child?this:this.replace("start"==side?0:this.size-1,closed)}},{key:"nodesBetween",value:function(from,to,f,path,parent){for(var node,moreFrom=from&&from.depth>path.length,moreTo=to&&to.depth>path.length,start=moreFrom?from.path[path.length]:from?from.offset:0,end=moreTo?to.path[path.length]+1:to?to.offset:this.size,iter=this.iter(start,end);node=iter.next().value;){var startOffset=iter.offset-node.width;path.push(startOffset),node.nodesBetween(moreFrom&&startOffset==start?from:null,moreTo&&iter.offset==end?to:null,f,path,parent),path.pop()}}},{key:"sliceBetween",value:function(from,to){for(var node,depth=arguments.length<=2||void 0===arguments[2]?0:arguments[2],moreFrom=from&&from.depth>depth,moreTo=to&&to.depth>depth,start=moreFrom?from.path[depth]:from?from.offset:0,end=moreTo?to.path[depth]+1:to?to.offset:this.size,nodes=[],iter=this.iter(start,end);node=iter.next().value;){var passFrom=moreFrom&&iter.offset-node.width==start?from:null,passTo=moreTo&&iter.offset==end?to:null;(passFrom||passTo)&&(node=node.sliceBetween(passFrom,passTo,depth+1)),nodes.push(node)}return new this.constructor(nodes)}},{key:"textContent",get:function(){var text="";return this.forEach(function(n){return text+=n.textContent}),text}}],[{key:"fromJSON",value:function(schema,value){return value?this.fromArray(value.map(schema.nodeFromJSON)):emptyFragment}},{key:"fromArray",value:function(array){if(!array.length)return emptyFragment;for(var hasText=!1,joined=void 0,i=0;i<array.length;i++){var node=array[i];node.isText&&(hasText=!0,i&&array[i-1].sameMarkup(node))?(joined||(joined=array.slice(0,i)),joined[joined.length-1]=node.copy(joined[joined.length-1].text+node.text)):joined&&joined.push(node)}return hasText?new TextFragment(joined||array):new FlatFragment(array)}},{key:"from",value:function(nodes){return nodes?nodes instanceof Fragment?nodes:this.fromArray(Array.isArray(nodes)?nodes:[nodes]):emptyFragment}}]),Fragment}(),iterEnd={done:!0},FlatIterator=function(){function FlatIterator(array,pos,end){_classCallCheck(this,FlatIterator),this.array=array,this.pos=pos,this.end=end}return _createClass(FlatIterator,[{key:"copy",value:function(){return new this.constructor(this.array,this.pos,this.end)}},{key:"atEnd",value:function(){return this.pos==this.end}},{key:"next",value:function(){return this.pos==this.end?iterEnd:this.array[this.pos++]}},{key:"offset",get:function(){return this.pos}}]),FlatIterator}(),ReverseFlatIterator=function(_FlatIterator){function ReverseFlatIterator(){return _classCallCheck(this,ReverseFlatIterator),_possibleConstructorReturn(this,Object.getPrototypeOf(ReverseFlatIterator).apply(this,arguments))}return _inherits(ReverseFlatIterator,_FlatIterator),_createClass(ReverseFlatIterator,[{key:"next",value:function(){return this.pos==this.end?iterEnd:this.array[--this.pos]}}]),ReverseFlatIterator}(FlatIterator),FlatFragment=function(_Fragment){function FlatFragment(content){_classCallCheck(this,FlatFragment);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(FlatFragment).call(this));return _this2.content=content,_this2}return _inherits(FlatFragment,_Fragment),_createClass(FlatFragment,[{key:"iter",value:function(){var start=arguments.length<=0||void 0===arguments[0]?0:arguments[0],end=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1];return new FlatIterator(this.content,start,end)}},{key:"reverseIter",value:function(){var start=arguments.length<=0||void 0===arguments[0]?this.size:arguments[0],end=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return new ReverseFlatIterator(this.content,start,end)}},{key:"child",value:function(off){return(0>off||off>=this.content.length)&&_error.ModelError.raise("Offset "+off+" out of range"),this.content[off]}},{key:"forEach",value:function(f){for(var i=0;i<this.content.length;i++)f(this.content[i],i,i+1)}},{key:"chunkBefore",value:function(off){return{node:this.child(off-1),start:off-1}}},{key:"chunkAfter",value:function(off){return{node:this.child(off),start:off}}},{key:"slice",value:function(from){var to=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1];return from==to?emptyFragment:new FlatFragment(this.content.slice(from,to))}},{key:"replace",value:function(offset,node){node.isText&&_error.ModelError.raise("Argument to replace should be a non-text node");var copy=this.content.slice();return copy[offset]=node,new FlatFragment(copy)}},{key:"appendInner",value:function(other,joinLeft,joinRight){var last=this.content.length-1,content=this.content.slice(0,last),before=this.content[last],after=other.firstChild;return joinLeft>0&&joinRight>0&&before.sameMarkup(after)?content.push(before.append(after.content,joinLeft-1,joinRight-1)):content.push(before.close(joinLeft-1,"end"),after.close(joinRight-1,"start")),Fragment.fromArray(content.concat(other.toArray(after.width)))}},{key:"toJSON",value:function(){return this.content.map(function(n){return n.toJSON()})}},{key:"size",get:function(){return this.content.length}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}}]),FlatFragment}(Fragment),emptyFragment=exports.emptyFragment=new FlatFragment([]),TextIterator=function(){function TextIterator(fragment,startOffset,endOffset){var pos=arguments.length<=3||void 0===arguments[3]?-1:arguments[3];_classCallCheck(this,TextIterator),this.frag=fragment,this.offset=startOffset,this.pos=pos,this.endOffset=endOffset}return _createClass(TextIterator,[{key:"copy",value:function(){return new this.constructor(this.frag,this.offset,this.endOffset,this.pos)}},{key:"atEnd",value:function(){return this.offset==this.endOffset}},{key:"next",value:function(){if(-1==this.pos){var start=this.init();if(start)return start}return this.offset==this.endOffset?iterEnd:this.advance()}},{key:"advance",value:function(){var node=this.frag.content[this.pos++],end=this.offset+node.width;return end>this.endOffset?(node=node.copy(node.text.slice(0,this.endOffset-this.offset)),this.offset=this.endOffset,node):(this.offset=end,node)}},{key:"init",value:function(){this.pos=0;for(var offset=0;offset<this.offset;){var node=this.frag.content[this.pos++],end=offset+node.width;if(end==this.offset)break;if(end>this.offset){var sliceEnd=node.width;return end>this.endOffset&&(sliceEnd=this.endOffset-offset,end=this.endOffset),node=node.copy(node.text.slice(this.offset-offset,sliceEnd)),this.offset=end,node}offset=end}}}]),TextIterator}(),ReverseTextIterator=function(_TextIterator){function ReverseTextIterator(){return _classCallCheck(this,ReverseTextIterator),_possibleConstructorReturn(this,Object.getPrototypeOf(ReverseTextIterator).apply(this,arguments))}return _inherits(ReverseTextIterator,_TextIterator),_createClass(ReverseTextIterator,[{key:"advance",value:function(){var node=this.frag.content[--this.pos],end=this.offset-node.width;return end<this.endOffset?(node=node.copy(node.text.slice(this.endOffset-end)),this.offset=this.endOffset,node):(this.offset=end,node)}},{key:"init",value:function(){this.pos=this.frag.content.length;for(var offset=this.frag.size;offset>this.offset;){var node=this.frag.content[--this.pos],end=offset-node.width;if(end==this.offset)break;if(end<this.offset)return end<this.endOffset?(node=node.copy(node.text.slice(this.endOffset-end,this.offset-end)),end=this.endOffset):node=node.copy(node.text.slice(0,this.offset-end)),this.offset=end,node;offset=end}}}]),ReverseTextIterator}(TextIterator),TextFragment=function(_Fragment2){function TextFragment(content,size){_classCallCheck(this,TextFragment);var _this4=_possibleConstructorReturn(this,Object.getPrototypeOf(TextFragment).call(this));if(_this4.content=content,_this4.size=size||0,null==size)for(var i=0;i<content.length;i++)_this4.size+=content[i].width;return _this4}return _inherits(TextFragment,_Fragment2),_createClass(TextFragment,[{key:"iter",value:function(){var from=arguments.length<=0||void 0===arguments[0]?0:arguments[0],to=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1];return new TextIterator(this,from,to)}},{key:"reverseIter",value:function(){var from=arguments.length<=0||void 0===arguments[0]?this.size:arguments[0],to=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return new ReverseTextIterator(this,from,to)}},{key:"child",value:function child(off){(0>off||off>=this.size)&&_error.ModelError.raise("Offset "+off+" out of range");for(var i=0,curOff=0;i<this.content.length;i++){var child=this.content[i];if(curOff+=child.width,curOff>off)return child}}},{key:"forEach",value:function(f){for(var i=0,off=0;i<this.content.length;i++){var child=this.content[i];f(child,off,off+=child.width)}}},{key:"chunkBefore",value:function(off){off||_error.ModelError.raise("No chunk before start of node");for(var i=0,curOff=0;i<this.content.length;i++){var child=this.content[i],end=curOff+child.width;if(end>=off)return{node:child,start:curOff};curOff=end}}},{key:"chunkAfter",value:function(off){off==this.size&&_error.ModelError.raise("No chunk after end of node");for(var i=0,curOff=0;i<this.content.length;i++){var child=this.content[i],end=curOff+child.width;if(end>off)return{node:child,start:curOff};curOff=end}}},{key:"slice",value:function(){var from=arguments.length<=0||void 0===arguments[0]?0:arguments[0],to=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1];return from==to?emptyFragment:new TextFragment(this.toArray(from,to))}},{key:"replace",value:function(off,node){node.isText&&_error.ModelError.raise("Argument to replace should be a non-text node");for(var curNode=void 0,index=void 0,curOff=0;off>curOff;index++)curNode=this.content[index],curOff+=curNode.width;curNode.isText&&_error.ModelError.raise("Can not replace text content with replace method");var copy=this.content.slice();return copy[index]=node,new TextFragment(copy)}},{key:"appendInner",value:function(other,joinLeft,joinRight){var last=this.content.length-1,content=this.content.slice(0,last),before=this.content[last],after=other.firstChild,same=before.sameMarkup(after);return same&&before.isText?content.push(before.copy(before.text+after.text)):same&&joinLeft>0&&joinRight>0?content.push(before.append(after.content,joinLeft-1,joinRight-1)):content.push(before.close(joinLeft-1,"end"),after.close(joinRight-1,"start")),Fragment.fromArray(content.concat(other.toArray(after.width)))}},{key:"toJSON",value:function(){return this.content.map(function(n){return n.toJSON()})}},{key:"firstChild",get:function(){return this.size?this.content[0]:null}},{key:"lastChild",get:function(){return this.size?this.content[this.content.length-1]:null}}]),TextFragment}(Fragment);"undefined"!=typeof Symbol&&(Fragment.prototype[Symbol.iterator]=function(){return this.iter()},FlatIterator.prototype[Symbol.iterator]=TextIterator.prototype[Symbol.iterator]=function(){return this})},{"./error":32}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _node=require("./node");Object.defineProperty(exports,"Node",{enumerable:!0,get:function(){return _node.Node}});var _fragment=require("./fragment");Object.defineProperty(exports,"Fragment",{enumerable:!0,get:function(){return _fragment.Fragment}}),Object.defineProperty(exports,"emptyFragment",{enumerable:!0,get:function(){return _fragment.emptyFragment}});var _mark=require("./mark");Object.defineProperty(exports,"Mark",{enumerable:!0,get:function(){return _mark.Mark}});var _schema=require("./schema");Object.defineProperty(exports,"SchemaSpec",{enumerable:!0,get:function(){return _schema.SchemaSpec}}),Object.defineProperty(exports,"Schema",{enumerable:!0,get:function(){return _schema.Schema}}),Object.defineProperty(exports,"SchemaError",{enumerable:!0,get:function(){return _schema.SchemaError}}),Object.defineProperty(exports,"NodeType",{enumerable:!0,get:function(){return _schema.NodeType}}),Object.defineProperty(exports,"Block",{enumerable:!0,get:function(){return _schema.Block}}),Object.defineProperty(exports,"Textblock",{enumerable:!0,get:function(){return _schema.Textblock}}),Object.defineProperty(exports,"Inline",{enumerable:!0,get:function(){return _schema.Inline}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return _schema.Text}}),Object.defineProperty(exports,"MarkType",{enumerable:!0,get:function(){return _schema.MarkType}}),Object.defineProperty(exports,"Attribute",{enumerable:!0,get:function(){return _schema.Attribute}});var _defaultschema=require("./defaultschema");Object.defineProperty(exports,"defaultSchema",{enumerable:!0,get:function(){return _defaultschema.defaultSchema}}),Object.defineProperty(exports,"Doc",{enumerable:!0,get:function(){return _defaultschema.Doc}}),Object.defineProperty(exports,"BlockQuote",{enumerable:!0,get:function(){return _defaultschema.BlockQuote}}),Object.defineProperty(exports,"OrderedList",{enumerable:!0,get:function(){return _defaultschema.OrderedList}}),Object.defineProperty(exports,"BulletList",{enumerable:!0,get:function(){return _defaultschema.BulletList}}),Object.defineProperty(exports,"ListItem",{enumerable:!0,get:function(){return _defaultschema.ListItem}}),Object.defineProperty(exports,"HorizontalRule",{enumerable:!0,get:function(){return _defaultschema.HorizontalRule}}),Object.defineProperty(exports,"Paragraph",{enumerable:!0,get:function(){return _defaultschema.Paragraph}}),Object.defineProperty(exports,"Heading",{enumerable:!0,get:function(){return _defaultschema.Heading}}),Object.defineProperty(exports,"CodeBlock",{enumerable:!0,get:function(){return _defaultschema.CodeBlock}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return _defaultschema.Image}}),Object.defineProperty(exports,"HardBreak",{enumerable:!0,get:function(){return _defaultschema.HardBreak}}),Object.defineProperty(exports,"CodeMark",{enumerable:!0,get:function(){return _defaultschema.CodeMark}}),Object.defineProperty(exports,"EmMark",{enumerable:!0,get:function(){return _defaultschema.EmMark}}),Object.defineProperty(exports,"StrongMark",{enumerable:!0,get:function(){return _defaultschema.StrongMark}}),Object.defineProperty(exports,"LinkMark",{enumerable:!0,get:function(){return _defaultschema.LinkMark}});var _pos=require("./pos");Object.defineProperty(exports,"Pos",{enumerable:!0,get:function(){return _pos.Pos}});var _diff=require("./diff");Object.defineProperty(exports,"findDiffStart",{enumerable:!0,get:function(){return _diff.findDiffStart}}),Object.defineProperty(exports,"findDiffEnd",{enumerable:!0,get:function(){return _diff.findDiffEnd}});var _error=require("./error");Object.defineProperty(exports,"ModelError",{enumerable:!0,get:function(){return _error.ModelError}})},{"./defaultschema":30,"./diff":31,"./error":32,"./fragment":33,"./mark":35,"./node":36,"./pos":37,"./schema":38}],35:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var empty=(exports.Mark=function(){function Mark(type,attrs){_classCallCheck(this,Mark),this.type=type,this.attrs=attrs}return _createClass(Mark,[{key:"toJSON",value:function(){var obj={_:this.type.name};for(var attr in this.attrs)obj[attr]=this.attrs[attr];return obj}},{key:"addToSet",value:function(set){for(var i=0;i<set.length;i++){var other=set[i];if(other.type==this.type)return this.eq(other)?set:set.slice(0,i).concat(this).concat(set.slice(i+1));if(other.type.rank>this.type.rank)return set.slice(0,i).concat(this).concat(set.slice(i))}return set.concat(this)}},{key:"removeFromSet",value:function(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return set.slice(0,i).concat(set.slice(i+1));return set}},{key:"isInSet",value:function(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return!0;return!1}},{key:"eq",value:function(other){if(this==other)return!0;if(this.type!=other.type)return!1;for(var attr in this.attrs)if(other.attrs[attr]!=this.attrs[attr])return!1;return!0}}],[{key:"sameSet",value:function(a,b){if(a==b)return!0;if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].eq(b[i]))return!1;return!0}},{key:"setFrom",value:function(marks){if(!marks||0==marks.length)return empty;if(marks instanceof Mark)return[marks];var copy=marks.slice();return copy.sort(function(a,b){return a.type.rank-b.type.rank}),copy}}]),Mark}(),[])},{}],36:[function(require,module,exports){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function wrapMarks(marks,str){for(var i=marks.length-1;i>=0;i--)str=marks[i].type.name+"("+str+")";return str}var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextNode=exports.Node=void 0;var _fragment=require("./fragment"),_mark=require("./mark"),_pos=require("./pos"),emptyArray=[],emptyAttrs=Object.create(null),Node=function(){function Node(type,attrs,content,marks){_classCallCheck(this,Node),this.type=type,this.attrs=attrs,this.content=content||_fragment.emptyFragment,this.marks=marks||emptyArray}return _createClass(Node,[{key:"child",value:function(off){return this.content.child(off)}},{key:"iter",value:function(start,end){return this.content.iter(start,end)}},{key:"reverseIter",value:function(start,end){return this.content.reverseIter(start,end)}},{key:"chunkBefore",value:function(off){return this.content.chunkBefore(off)}},{key:"chunkAfter",value:function(off){return this.content.chunkAfter(off);
}},{key:"forEach",value:function(f){this.content.forEach(f)}},{key:"sameMarkup",value:function(other){return this.hasMarkup(other.type,other.attrs,other.marks)}},{key:"hasMarkup",value:function(type,attrs,marks){return this.type==type&&Node.sameAttrs(this.attrs,attrs||emptyAttrs)&&_mark.Mark.sameSet(this.marks,marks||emptyArray)}},{key:"copy",value:function(){var content=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return new this.constructor(this.type,this.attrs,content,this.marks)}},{key:"mark",value:function(marks){return new this.constructor(this.type,this.attrs,this.content,marks)}},{key:"slice",value:function(from,to){return this.copy(this.content.slice(from,to))}},{key:"splice",value:function(from,to,replace){return this.copy(this.content.slice(0,from).append(replace).append(this.content.slice(to)))}},{key:"append",value:function(fragment){var joinLeft=arguments.length<=1||void 0===arguments[1]?0:arguments[1],joinRight=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return this.copy(this.content.append(fragment,joinLeft,joinRight))}},{key:"replace",value:function(pos,node){return this.copy(this.content.replace(pos,node))}},{key:"replaceDeep",value:function(path,node){var depth=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(depth==path.length)return node;var pos=path[depth];return this.replace(pos,this.child(pos).replaceDeep(path,node,depth+1))}},{key:"close",value:function(depth,side){if(0==depth&&0==this.size&&!this.type.canBeEmpty)return this.copy(this.type.defaultContent());var closedContent=void 0;return depth>0&&(closedContent=this.content.close(depth-1,side))!=this.content?this.copy(closedContent):this}},{key:"path",value:function(_path){for(var i=0,node=this;i<_path.length;node=node.child(_path[i]),i++);return node}},{key:"nodeAfter",value:function(pos){var parent=this.path(pos.path);return pos.offset<parent.size?parent.child(pos.offset):null}},{key:"pathNodes",value:function(path){for(var nodes=[],i=0,node=this;nodes.push(node),i!=path.length;i++)node=node.child(path[i]);return nodes}},{key:"siblingRange",value:function(from,to){for(var i=0,node=this;;i++){if(node.isTextblock){var path=from.path.slice(0,i-1),offset=from.path[i-1];return{from:new _pos.Pos(path,offset),to:new _pos.Pos(path,offset+1)}}var fromEnd=i==from.path.length,toEnd=i==to.path.length,left=fromEnd?from.offset:from.path[i],right=toEnd?to.offset:to.path[i];if(fromEnd||toEnd||left!=right){var path=from.path.slice(0,i);return{from:new _pos.Pos(path,left),to:new _pos.Pos(path,right+(toEnd?0:1))}}node=node.child(left)}}},{key:"nodesBetween",value:function(from,to,f){var path=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],parent=arguments.length<=4||void 0===arguments[4]?null:arguments[4];f(this,path,parent)!==!1&&this.content.nodesBetween(from,to,f,path,this)}},{key:"inlineNodesBetween",value:function(from,to,f){this.nodesBetween(from,to,function(node,path,parent){if(node.isInline){var last=path.length-1;f(node,path.slice(0,last),path[last],path[last]+node.width,parent)}})}},{key:"sliceBetween",value:function(from,to){var depth=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return this.copy(this.content.sliceBetween(from,to,depth))}},{key:"marksAt",value:function(pos){var parent=this.path(pos.path);return parent.isTextblock&&parent.size?parent.chunkBefore(pos.offset||1).node.marks:emptyArray}},{key:"rangeHasMark",value:function(from,to,type){var found=!1;return this.nodesBetween(from,to,function(node){type.isInSet(node.marks)&&(found=!0)}),found}},{key:"toString",value:function(){var name=this.type.name;return this.content.size&&(name+="("+this.content.toString()+")"),wrapMarks(this.marks,name)}},{key:"toJSON",value:function(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}return this.size&&(obj.content=this.content.toJSON()),this.marks.length&&(obj.marks=this.marks.map(function(n){return n.toJSON()})),obj}},{key:"size",get:function(){return this.content.size}},{key:"width",get:function(){return 1}},{key:"textContent",get:function(){return this.content.textContent}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"value",get:function(){return this}}],[{key:"sameAttrs",value:function(a,b){if(a==b)return!0;for(var prop in a)if(a[prop]!==b[prop])return!1;return!0}},{key:"fromJSON",value:function(schema,json){var type=schema.nodeType(json.type),content=null!=json.text?json.text:_fragment.Fragment.fromJSON(schema,json.content);return type.create(json.attrs,content,json.marks&&json.marks.map(schema.markFromJSON))}}]),Node}();exports.Node=Node,"undefined"!=typeof Symbol&&(Node.prototype[Symbol.iterator]=function(){return this.iter()});exports.TextNode=function(_Node){function TextNode(type,attrs,content,marks){_classCallCheck(this,TextNode);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(TextNode).call(this,type,attrs,null,marks));return _this.text=content,_this}return _inherits(TextNode,_Node),_createClass(TextNode,[{key:"toString",value:function(){return wrapMarks(this.marks,JSON.stringify(this.text))}},{key:"mark",value:function(marks){return new TextNode(this.type,this.attrs,this.text,marks)}},{key:"toJSON",value:function(){var base=_get(Object.getPrototypeOf(TextNode.prototype),"toJSON",this).call(this);return base.text=this.text,base}},{key:"textContent",get:function(){return this.text}},{key:"width",get:function(){return this.text.length}}]),TextNode}(Node)},{"./fragment":33,"./mark":35,"./pos":37}],37:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pos=void 0;var _error=require("./error");exports.Pos=function(){function Pos(path,offset){_classCallCheck(this,Pos),this.path=path,this.offset=offset}return _createClass(Pos,[{key:"toString",value:function(){return this.path.join("/")+":"+this.offset}},{key:"max",value:function(other){return this.cmp(other)>0?this:other}},{key:"min",value:function(other){return this.cmp(other)<0?this:other}},{key:"cmp",value:function(other){return other==this?0:Pos.cmp(this.path,this.offset,other.path,other.offset)}},{key:"shorten",value:function(){var to=arguments.length<=0||void 0===arguments[0]?null:arguments[0],offset=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(to>=this.depth){if(to==this.depth&&!offset)return new Pos(this.path,this.offset+offset);_error.ModelError.raise("Invalid shorten depth "+to+" for "+this)}return Pos.shorten(this.path,to,offset)}},{key:"move",value:function(by){return new Pos(this.path,this.offset+by)}},{key:"toPath",value:function(){var move=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this.path.concat(this.offset+move)}},{key:"extend",value:function(pos){for(var path=this.path.slice(),add=this.offset,i=0;i<pos.path.length;i++)path.push(pos.path[i]+add),add=0;return new Pos(path,pos.offset+add)}},{key:"isValid",value:function(doc,requireTextblock){for(var i=0,node=doc;;i++){if(i==this.path.length)return requireTextblock&&!node.isTextblock?!1:this.offset<=node.size;var n=this.path[i];if(n>=node.size)return!1;node=node.child(n)}}},{key:"toJSON",value:function(){return this}},{key:"depth",get:function(){return this.path.length}}],[{key:"cmp",value:function(pathA,offsetA,pathB,offsetB){for(var lenA=pathA.length,lenB=pathB.length,i=0,end=Math.min(lenA,lenB);end>i;i++){var diff=pathA[i]-pathB[i];if(0!=diff)return diff}return lenA>lenB?offsetB<=pathA[i]?1:-1:lenB>lenA?offsetA<=pathB[i]?-1:1:offsetA-offsetB}},{key:"samePath",value:function(pathA,pathB){if(pathA.length!=pathB.length)return!1;for(var i=0;i<pathA.length;i++)if(pathA[i]!==pathB[i])return!1;return!0}},{key:"shorten",value:function(path){var to=arguments.length<=1||void 0===arguments[1]?null:arguments[1],offset=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return null==to&&(to=path.length-1),new Pos(path.slice(0,to),path[to]+offset)}},{key:"from",value:function(array){var move=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return array.length||_error.ModelError.raise("Can't create a pos from an empty array"),new Pos(array.slice(0,array.length-1),array[array.length-1]+move)}},{key:"fromJSON",value:function(json){return new Pos(json.path,json.offset)}}]),Pos}()},{"./error":32}],38:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function overlayObj(base,update){var copy=(0,_obj.copyObj)(base);for(var name in update){var value=update[name];null==value?delete copy[name]:copy[name]=value}return copy}var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Schema=exports.SchemaSpec=exports.MarkType=exports.Attribute=exports.Text=exports.Inline=exports.Textblock=exports.Block=exports.NodeType=exports.SchemaError=void 0;var _node=require("./node"),_fragment=require("./fragment"),_mark=require("./mark"),_obj=require("../util/obj"),_error=require("../util/error"),SchemaError=exports.SchemaError=function(_ProseMirrorError){function SchemaError(){return _classCallCheck(this,SchemaError),_possibleConstructorReturn(this,Object.getPrototypeOf(SchemaError).apply(this,arguments))}return _inherits(SchemaError,_ProseMirrorError),SchemaError}(_error.ProseMirrorError),SchemaItem=function(){function SchemaItem(){_classCallCheck(this,SchemaItem)}return _createClass(SchemaItem,[{key:"getDefaultAttrs",value:function(){var defaults=Object.create(null);for(var attrName in this.attrs){var attr=this.attrs[attrName];if(null==attr["default"])return null;defaults[attrName]=attr["default"]}return defaults}},{key:"computeAttrs",value:function(attrs,arg){var built=Object.create(null);for(var name in this.attrs){var value=attrs&&attrs[name];if(null==value){var attr=this.attrs[name];null!=attr["default"]?value=attr["default"]:attr.compute?value=attr.compute(this,arg):SchemaError.raise("No value supplied for attribute "+name)}built[name]=value}return built}},{key:"freezeAttrs",value:function(){var frozen=Object.create(null);for(var name in this.attrs)frozen[name]=this.attrs[name];Object.defineProperty(this,"attrs",{value:frozen})}},{key:"attrs",get:function(){return{}}}],[{key:"updateAttrs",value:function(attrs){Object.defineProperty(this.prototype,"attrs",{value:overlayObj(this.prototype.attrs,attrs)})}},{key:"getRegistry",value:function(){return this==SchemaItem?null:(this.prototype.hasOwnProperty("registry")||(this.prototype.registry=Object.create(Object.getPrototypeOf(this).getRegistry())),this.prototype.registry)}},{key:"getNamespace",value:function(name){if(this==SchemaItem)return null;var reg=this.getRegistry();return Object.prototype.hasOwnProperty.call(reg,name)||(reg[name]=Object.create(Object.getPrototypeOf(this).getNamespace(name))),reg[name]}},{key:"register",value:function(namespace,name,value){this.getNamespace(namespace)[name]=function(){return value}}},{key:"registerComputed",value:function(namespace,name,f){this.getNamespace(namespace)[name]=f}},{key:"cleanNamespace",value:function(namespace){this.getNamespace(namespace).__proto__=null}}]),SchemaItem}(),NodeType=exports.NodeType=function(_SchemaItem){function NodeType(name,kind,schema){_classCallCheck(this,NodeType);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(NodeType).call(this));return _this2.name=name,_this2.kind=kind,_this2.freezeAttrs(),_this2.defaultAttrs=_this2.getDefaultAttrs(),_this2.schema=schema,_this2}return _inherits(NodeType,_SchemaItem),_createClass(NodeType,[{key:"canContainFragment",value:function(fragment){var _this3=this,ok=!0;return fragment.forEach(function(n){_this3.canContain(n)||(ok=!1)}),ok}},{key:"canContain",value:function(node){if(!this.canContainType(node.type))return!1;for(var i=0;i<node.marks.length;i++)if(!this.canContainMark(node.marks[i]))return!1;return!0}},{key:"canContainMark",value:function(mark){var contains=this.containsMarks;if(contains===!0)return!0;if(contains)for(var i=0;i<contains.length;i++)if(contains[i]==mark.name)return!0;return!1}},{key:"canContainType",value:function(type){return this.schema.subKind(type.kind,this.contains)}},{key:"canContainContent",value:function(type){return this.schema.subKind(type.contains,this.contains)}},{key:"findConnection",value:function(other){if(this.canContainType(other))return[];for(var seen=Object.create(null),active=[{from:this,via:[]}];active.length;){var current=active.shift();for(var name in this.schema.nodes){var type=this.schema.nodes[name];if(type.defaultAttrs&&!(type.contains in seen)&&current.from.canContainType(type)){var via=current.via.concat(type);if(type.canContainType(other))return via;active.push({from:type,via:via}),seen[type.contains]=!0}}}}},{key:"computeAttrs",value:function(attrs,content){return!attrs&&this.defaultAttrs?this.defaultAttrs:_get(Object.getPrototypeOf(NodeType.prototype),"computeAttrs",this).call(this,attrs,content)}},{key:"create",value:function(attrs,content,marks){return new _node.Node(this,this.computeAttrs(attrs,content),_fragment.Fragment.from(content),_mark.Mark.setFrom(marks))}},{key:"createAutoFill",value:function(attrs,content,marks){return content&&0!=content.length||this.canBeEmpty||(content=this.defaultContent()),this.create(attrs,content,marks)}},{key:"isBlock",get:function(){return!1}},{key:"isTextblock",get:function(){return!1}},{key:"isInline",get:function(){return!1}},{key:"isText",get:function(){return!1}},{key:"selectable",get:function(){return!0}},{key:"draggable",get:function(){return!1}},{key:"locked",get:function(){return!1}},{key:"contains",get:function(){return null}},{key:"canBeEmpty",get:function(){return!0}},{key:"containsMarks",get:function(){return!1}}],[{key:"compile",value:function(types,schema){var result=Object.create(null);for(var name in types){for(var type=types[name],kinds=type.kinds.split(" "),i=0;i<kinds.length;i++)schema.registerKind(kinds[i],i?kinds[i-1]:null);result[name]=new type(name,kinds[kinds.length-1],schema)}for(var name in result){var contains=result[name].contains;!contains||contains in schema.kinds||SchemaError.raise("Node type "+name+" is specified to contain non-existing kind "+contains)}return result.doc||SchemaError.raise("Every schema needs a 'doc' type"),result.text||SchemaError.raise("Every schema needs a 'text' type"),result}},{key:"kinds",get:function(){return"node"}}]),NodeType}(SchemaItem),Block=exports.Block=function(_NodeType){function Block(){return _classCallCheck(this,Block),_possibleConstructorReturn(this,Object.getPrototypeOf(Block).apply(this,arguments))}return _inherits(Block,_NodeType),_createClass(Block,[{key:"defaultContent",value:function(){var inner=this.schema.defaultTextblockType().create(),conn=this.findConnection(inner.type);conn||SchemaError.raise("Can't create default content for "+this.name);for(var i=conn.length-1;i>=0;i--)inner=conn[i].create(null,inner);return _fragment.Fragment.from(inner)}},{key:"contains",get:function(){return"block"}},{key:"isBlock",get:function(){return!0}},{key:"canBeEmpty",get:function(){return null==this.contains}}],[{key:"kinds",get:function(){return"block"}}]),Block}(NodeType),Inline=(exports.Textblock=function(_Block){function Textblock(){return _classCallCheck(this,Textblock),_possibleConstructorReturn(this,Object.getPrototypeOf(Textblock).apply(this,arguments))}return _inherits(Textblock,_Block),_createClass(Textblock,[{key:"contains",get:function(){return"inline"}},{key:"containsMarks",get:function(){return!0}},{key:"isTextblock",get:function(){return!0}},{key:"canBeEmpty",get:function(){return!0}}]),Textblock}(Block),exports.Inline=function(_NodeType2){function Inline(){return _classCallCheck(this,Inline),_possibleConstructorReturn(this,Object.getPrototypeOf(Inline).apply(this,arguments))}return _inherits(Inline,_NodeType2),_createClass(Inline,[{key:"isInline",get:function(){return!0}}],[{key:"kinds",get:function(){return"inline"}}]),Inline}(NodeType)),MarkType=(exports.Text=function(_Inline){function Text(){return _classCallCheck(this,Text),_possibleConstructorReturn(this,Object.getPrototypeOf(Text).apply(this,arguments))}return _inherits(Text,_Inline),_createClass(Text,[{key:"create",value:function(attrs,content,marks){return new _node.TextNode(this,this.computeAttrs(attrs,content),content,marks)}},{key:"selectable",get:function(){return!1}},{key:"isText",get:function(){return!0}}],[{key:"kinds",get:function(){return _get(Object.getPrototypeOf(Text),"kinds",this)+" text"}}]),Text}(Inline),exports.Attribute=function Attribute(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Attribute),this["default"]=options["default"],this.compute=options.compute,this.label=options.label},exports.MarkType=function(_SchemaItem2){function MarkType(name,rank,schema){_classCallCheck(this,MarkType);var _this8=_possibleConstructorReturn(this,Object.getPrototypeOf(MarkType).call(this));_this8.name=name,_this8.freezeAttrs(),_this8.rank=rank,_this8.schema=schema;var defaults=_this8.getDefaultAttrs();return _this8.instance=defaults&&new _mark.Mark(_this8,defaults),_this8}return _inherits(MarkType,_SchemaItem2),_createClass(MarkType,[{key:"create",value:function(attrs){return!attrs&&this.instance?this.instance:new _mark.Mark(this,this.computeAttrs(attrs))}},{key:"removeFromSet",value:function(set){for(var i=0;i<set.length;i++)if(set[i].type==this)return set.slice(0,i).concat(set.slice(i+1));return set}},{key:"isInSet",value:function(set){for(var i=0;i<set.length;i++)if(set[i].type==this)return set[i]}}],[{key:"getOrder",value:function(marks){var sorted=[];for(var name in marks)sorted.push({name:name,rank:marks[name].rank});sorted.sort(function(a,b){return a.rank-b.rank});for(var ranks=Object.create(null),i=0;i<sorted.length;i++)ranks[sorted[i].name]=i;return ranks}},{key:"compile",value:function(marks,schema){var order=this.getOrder(marks),result=Object.create(null);for(var name in marks)result[name]=new marks[name](name,order[name],schema);return result}},{key:"rank",get:function(){return 50}}]),MarkType}(SchemaItem)),Schema=(exports.SchemaSpec=function(){function SchemaSpec(nodes,marks){_classCallCheck(this,SchemaSpec),this.nodes=nodes||{},this.marks=marks||{}}return _createClass(SchemaSpec,[{key:"update",value:function(nodes,marks){return new SchemaSpec(nodes?overlayObj(this.nodes,nodes):this.nodes,marks?overlayObj(this.marks,marks):this.marks)}}]),SchemaSpec}(),function(){function Schema(spec){_classCallCheck(this,Schema),this.spec=spec,this.kinds=Object.create(null),this.nodes=NodeType.compile(spec.nodes,this),this.marks=MarkType.compile(spec.marks,this);for(var prop in this.nodes)prop in this.marks&&SchemaError.raise(prop+" can not be both a node and a mark");this.cached=Object.create(null),this.node=this.node.bind(this),this.text=this.text.bind(this),this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this)}return _createClass(Schema,[{key:"node",value:function(type,attrs,content,marks){return"string"==typeof type?type=this.nodeType(type):type instanceof NodeType?type.schema!=this&&SchemaError.raise("Node type from different schema used ("+type.name+")"):SchemaError.raise("Invalid node type: "+type),type.create(attrs,content,marks)}},{key:"text",value:function(_text,marks){return this.nodes.text.create(null,_text,_mark.Mark.setFrom(marks))}},{key:"defaultTextblockType",value:function(){var cached=this.cached.defaultTextblockType;if(void 0!==cached)return cached;for(var name in this.nodes)if(this.nodes[name].defaultTextblock)return this.cached.defaultTextblockType=this.nodes[name];return this.cached.defaultTextblockType=null}},{key:"mark",value:function(name,attrs){var spec=this.marks[name]||SchemaError.raise("No mark named "+name);return spec.create(attrs)}},{key:"nodeFromJSON",value:function(json){return _node.Node.fromJSON(this,json)}},{key:"markFromJSON",value:function(json){var type=this.marks[json._],attrs=null;for(var prop in json)"_"!=prop&&(attrs||(attrs=Object.create(null)),attrs[prop]=json[prop]);return attrs?type.create(attrs):type.instance}},{key:"nodeType",value:function(name){return this.nodes[name]||SchemaError.raise("Unknown node type: "+name)}},{key:"registerKind",value:function(kind,sup){if(kind in this.kinds){if(this.kinds[kind]==sup)return;SchemaError.raise("Inconsistent superkinds for kind "+kind+": "+sup+" and "+this.kinds[kind])}this.subKind(kind,sup)&&SchemaError.raise("Conflicting kind hierarchy through "+kind+" and "+sup),this.kinds[kind]=sup}},{key:"subKind",value:function(sub,sup){for(;;){if(sub==sup)return!0;if(sub=this.kinds[sub],!sub)return!1}}},{key:"registry",value:function registry(namespace,f){for(var i=0;2>i;i++){var obj=i?this.marks:this.nodes;for(var tname in obj){var type=obj[tname],registry=type.registry,ns=registry&&registry[namespace];if(ns)for(var prop in ns){var value=ns[prop](type);null!=value&&f(prop,value,type,tname)}}}}}]),Schema}());exports.Schema=Schema},{"../util/error":52,"../util/obj":55,"./fragment":33,"./mark":35,"./node":36}],39:[function(require,module,exports){"use strict";function canBeLifted(doc,range){for(var content=[doc.path(range.from.path)],unwrap=!1;;){for(var parentDepth=-1,_loop=function(_node,i){content.some(function(inner){return!_node.type.canContainContent(inner.type)})||(parentDepth=i),_node=_node.child(range.from.path[i]),node=_node},node=doc,i=0;i<range.from.path.length;i++)_loop(node,i);if(parentDepth>-1)return{path:range.from.path.slice(0,parentDepth),unwrap:unwrap};if(unwrap||!content[0].isBlock)return null;content=content[0].content.slice(range.from.offset,range.to.offset),unwrap=!0}}function canLift(doc,from,to){var range=doc.siblingRange(from,to||from),found=canBeLifted(doc,range);return found?{found:found,range:range}:void 0}function canWrap(doc,from,to,type){var range=doc.siblingRange(from,to||from);if(range.from.offset==range.to.offset)return null;var parent=doc.path(range.from.path),around=parent.type.findConnection(type),inside=type.findConnection(parent.child(range.from.offset).type);return around&&inside?{range:range,around:around,inside:inside}:void 0}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:!0}),exports.canLift=canLift,exports.canWrap=canWrap;var _model=require("../model"),_transform=require("./transform"),_step=require("./step"),_tree=require("./tree"),_map=require("./map");_step.Step.define("ancestor",{apply:function(doc,step){var from=step.from,to=step.to;if(!(0,_tree.isFlatRange)(from,to))return null;for(var toParent=from.path,start=from.offset,end=to.offset,_step$param=step.param,_step$param$depth=_step$param.depth,depth=void 0===_step$param$depth?0:_step$param$depth,_step$param$types=_step$param.types,types=void 0===_step$param$types?[]:_step$param$types,_step$param$attrs=_step$param.attrs,attrs=void 0===_step$param$attrs?[]:_step$param$attrs,inner=doc.path(from.path),i=0;depth>i;i++){if(start>0||end<doc.path(toParent).size||0==toParent.length)return null;start=toParent[toParent.length-1],end=start+1,toParent=toParent.slice(0,toParent.length-1)}if(0==depth&&0==types.length)return null;var parent=doc.path(toParent),parentSize=parent.size,newParent=void 0;if(parent.type.locked)return null;if(types.length){var _ret=function(){var lastWrapper=types[types.length-1],content=inner.content.slice(from.offset,to.offset);if(!parent.type.canContainType(types[0])||content.some(function(n){return!lastWrapper.canContain(n)})||!inner.size&&!lastWrapper.canBeEmpty||lastWrapper.locked)return{v:null};for(var node=null,i=types.length-1;i>=0;i--)node=types[i].create(attrs[i],node||content);newParent=parent.splice(start,end,_model.Fragment.from(node))}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v}else{if(!parent.type.canContainFragment(inner.content)||!inner.size&&0==start&&end==parent.size&&!parent.type.canBeEmpty)return null;newParent=parent.splice(start,end,inner.content)}for(var copy=doc.replaceDeep(toParent,newParent),toInner=toParent.slice(),i=0;i<types.length;i++)toInner.push(i?0:start);var startOfInner=new _model.Pos(toInner,types.length?0:start),replaced=null,insertedSize=types.length?1:to.offset-from.offset;if(depth!=types.length||depth>1||types.length>1){var posBefore=new _model.Pos(toParent,start),posAfter1=new _model.Pos(toParent,end),posAfter2=new _model.Pos(toParent,start+insertedSize),endOfInner=new _model.Pos(toInner,startOfInner.offset+(to.offset-from.offset));replaced=[new _map.ReplacedRange(posBefore,from,posBefore,startOfInner),new _map.ReplacedRange(to,posAfter1,endOfInner,posAfter2,posAfter1,posAfter2)]}var moved=[new _map.MovedRange(from,to.offset-from.offset,startOfInner)];return end-start!=insertedSize&&moved.push(new _map.MovedRange(new _model.Pos(toParent,end),parentSize-end,new _model.Pos(toParent,start+insertedSize))),new _step.StepResult(copy,new _map.PosMap(moved,replaced))},invert:function(step,oldDoc,map){var types=[],attrs=[];if(step.param.depth)for(var i=0;i<step.param.depth;i++){var parent=oldDoc.path(step.from.path.slice(0,step.from.path.length-i));types.unshift(parent.type),attrs.unshift(parent.attrs)}var newFrom=map.map(step.from).pos,newTo=step.from.cmp(step.to)?map.map(step.to,-1).pos:newFrom;return new _step.Step("ancestor",newFrom,newTo,null,{depth:step.param.types?step.param.types.length:0,types:types,attrs:attrs})},paramToJSON:function(param){return{depth:param.depth,types:param.types&&param.types.map(function(t){return t.name}),attrs:param.attrs}},paramFromJSON:function(schema,json){return{depth:json.depth,types:json.types&&json.types.map(function(n){return schema.nodeType(n)}),attrs:json.attrs}}}),_transform.Transform.prototype.lift=function(from){var to=arguments.length<=1||void 0===arguments[1]?from:arguments[1],can=canLift(this.doc,from,to);if(!can)return this;for(var found=can.found,range=can.range,depth=range.from.path.length-found.path.length,rangeNode=found.unwrap&&this.doc.path(range.from.path),d=0,pos=range.to;;d++){if(pos.offset<this.doc.path(pos.path).size){this.split(pos,depth-d);break}if(d==depth-1)break;pos=pos.shorten(null,1)}for(var d=0,pos=range.from;;d++){if(pos.offset>0){this.split(pos,depth-d);for(var cut=range.from.path.length-depth,path=pos.path.slice(0,cut).concat(pos.path[cut]+1);path.length<range.from.path.length;)path.push(0);range={from:new _model.Pos(path,0),to:new _model.Pos(path,range.to.offset-range.from.offset)};break}if(d==depth-1)break;pos=pos.shorten()}if(found.unwrap){for(var i=range.to.offset-1;i>range.from.offset;i--)this.join(new _model.Pos(range.from.path,i));for(var child,size=0,i=rangeNode.iter(range.from.offset,range.to.offset);child=i.next().value;)size+=child.size;var path=range.from.path.concat(range.from.offset);range={from:new _model.Pos(path,0),to:new _model.Pos(path,size)},++depth}return this.step("ancestor",range.from,range.to,null,{depth:depth}),this},_transform.Transform.prototype.wrap=function(from,to,type,wrapAttrs){var can=canWrap(this.doc,from,to,type);if(!can)return this;var range=can.range,around=can.around,inside=can.inside,types=around.concat(type).concat(inside),attrs=around.map(function(){return null}).concat(wrapAttrs).concat(inside.map(function(){return null}));if(this.step("ancestor",range.from,range.to,null,{types:types,attrs:attrs}),inside.length){for(var toInner=range.from.path.slice(),i=0;i<around.length+inside.length+1;i++)toInner.push(i?0:range.from.offset);for(var i=range.to.offset-1-range.from.offset;i>0;i--)this.split(new _model.Pos(toInner,i),inside.length)}return this},_transform.Transform.prototype.setBlockType=function(from,to,type,attrs){var _this=this;return this.doc.nodesBetween(from,to||from,function(node,path){return node.isTextblock&&!node.hasMarkup(type,attrs)?(path=path.slice(),_this.clearMarkup(new _model.Pos(path,0),new _model.Pos(path,node.size),type),_this.step("ancestor",new _model.Pos(path,0),new _model.Pos(path,_this.doc.path(path).size),null,{depth:1,types:[type],attrs:[attrs]}),!1):void 0}),this},_transform.Transform.prototype.setNodeType=function(pos,type,attrs){var node=this.doc.nodeAfter(pos),path=pos.toPath();return this.step("ancestor",new _model.Pos(path,0),new _model.Pos(path,node.size),null,{depth:1,types:[type],attrs:[attrs]}),this}},{"../model":34,"./map":42,"./step":46,"./transform":47,"./tree":48}],40:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Remapping=exports.MapResult=exports.PosMap=exports.joinableBlocks=exports.joinPoint=exports.canWrap=exports.canLift=exports.StepResult=exports.Step=exports.Transform=void 0;var _transform=require("./transform");Object.defineProperty(exports,"Transform",{enumerable:!0,get:function(){return _transform.Transform}});var _step=require("./step");Object.defineProperty(exports,"Step",{enumerable:!0,get:function(){return _step.Step}}),Object.defineProperty(exports,"StepResult",{enumerable:!0,get:function(){return _step.StepResult}});var _ancestor=require("./ancestor");Object.defineProperty(exports,"canLift",{enumerable:!0,get:function(){return _ancestor.canLift}}),Object.defineProperty(exports,"canWrap",{enumerable:!0,get:function(){return _ancestor.canWrap}});var _join=require("./join");Object.defineProperty(exports,"joinPoint",{enumerable:!0,get:function(){return _join.joinPoint}}),Object.defineProperty(exports,"joinableBlocks",{enumerable:!0,get:function(){return _join.joinableBlocks;
}});var _map=require("./map");Object.defineProperty(exports,"PosMap",{enumerable:!0,get:function(){return _map.PosMap}}),Object.defineProperty(exports,"MapResult",{enumerable:!0,get:function(){return _map.MapResult}}),Object.defineProperty(exports,"Remapping",{enumerable:!0,get:function(){return _map.Remapping}}),require("./mark"),require("./split"),require("./replace")},{"./ancestor":39,"./join":41,"./map":42,"./mark":43,"./replace":44,"./split":45,"./step":46,"./transform":47}],41:[function(require,module,exports){"use strict";function joinableBlocks(doc,pos){if(0==pos.offset)return!1;var parent=doc.path(pos.path);if(parent.isTextblock||pos.offset==parent.size)return!1;var type=parent.child(pos.offset-1).type;return!type.isTextblock&&type.contains&&type==parent.child(pos.offset).type}function joinPoint(doc,pos){for(var dir=arguments.length<=2||void 0===arguments[2]?-1:arguments[2];;){if(joinableBlocks(doc,pos))return pos;if(0==pos.depth)return null;pos=pos.shorten(null,0>dir?0:1)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.joinableBlocks=joinableBlocks,exports.joinPoint=joinPoint;var _model=require("../model"),_transform=require("./transform"),_step=require("./step"),_map=require("./map");_step.Step.define("join",{apply:function(doc,step){var before=doc.path(step.from.path),after=doc.path(step.to.path);if(step.from.offset<before.size||step.to.offset>0||!before.type.canContainFragment(after.content))return null;var pFrom=step.from.path,pTo=step.to.path,last=pFrom.length-1,offset=pFrom[last]+1;if(pFrom.length!=pTo.length||0==pFrom.length||offset!=pTo[last])return null;for(var i=0;last>i;i++)if(pFrom[i]!=pTo[i])return null;var targetPath=pFrom.slice(0,last),target=doc.path(targetPath),oldSize=target.size;if(target.type.locked)return null;var joined=before.append(after.content),copy=doc.replaceDeep(targetPath,target.splice(offset-1,offset+1,_model.Fragment.from(joined))),map=new _map.PosMap([new _map.MovedRange(step.to,after.size,step.from),new _map.MovedRange(new _model.Pos(targetPath,offset+1),oldSize-offset-1,new _model.Pos(targetPath,offset))],[new _map.ReplacedRange(step.from,step.to,step.from,step.from,step.to.shorten())]);return new _step.StepResult(copy,map)},invert:function(step,oldDoc){return new _step.Step("split",null,null,step.from,oldDoc.path(step.to.path).copy())}}),_transform.Transform.prototype.join=function(at){var parent=this.doc.path(at.path);return 0==at.offset||at.offset==parent.size||parent.isTextblock?this:(this.step("join",new _model.Pos(at.path.concat(at.offset-1),parent.child(at.offset-1).size),new _model.Pos(at.path.concat(at.offset),0)),this)}},{"../model":34,"./map":42,"./step":46,"./transform":47}],42:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function offsetFrom(base,pos){if(pos.path.length>base.path.length){for(var path=[pos.path[base.path.length]-base.offset],i=base.path.length+1;i<pos.path.length;i++)path.push(pos.path[i]);return new _model.Pos(path,pos.offset)}return new _model.Pos([],pos.offset-base.offset)}function mapThrough(map,pos){for(var bias=arguments.length<=2||void 0===arguments[2]?1:arguments[2],back=arguments[3],i=0;i<map.replaced.length;i++){var range=map.replaced[i],side=back?range.after:range.before,left=void 0,right=void 0;if((left=pos.cmp(side.from))>=0&&(right=pos.cmp(side.to))<=0){var other=back?range.before:range.after;return new MapResult(0>bias?other.from:other.to,!(!left||!right),{rangeID:i,offset:offsetFrom(side.ref,pos)})}}for(var i=0;i<map.moved.length;i++){var range=map.moved[i],start=back?range.dest:range.start;if(pos.cmp(start)>=0&&_model.Pos.cmp(pos.path,pos.offset,start.path,start.offset+range.size)<=0){var dest=back?range.start:range.dest,depth=start.depth;if(pos.depth>depth){var offset=dest.offset+(pos.path[depth]-start.offset);return new MapResult(new _model.Pos(dest.path.concat(offset).concat(pos.path.slice(depth+1)),pos.offset))}return new MapResult(new _model.Pos(dest.path,dest.offset+(pos.offset-start.offset)))}}return new MapResult(pos)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Remapping=exports.nullMap=exports.MapResult=exports.PosMap=exports.ReplacedRange=exports.MovedRange=void 0;var _model=require("../model"),Side=(exports.MovedRange=function(){function MovedRange(start,size){var dest=arguments.length<=2||void 0===arguments[2]?null:arguments[2];_classCallCheck(this,MovedRange),this.start=start,this.size=size,this.dest=dest}return _createClass(MovedRange,[{key:"toString",value:function(){return"[moved "+this.start+"+"+this.size+" to "+this.dest+"]"}},{key:"end",get:function(){return new _model.Pos(this.start.path,this.start.offset+this.size)}}]),MovedRange}(),function Side(from,to,ref){_classCallCheck(this,Side),this.from=from,this.to=to,this.ref=ref}),empty=(exports.ReplacedRange=function(){function ReplacedRange(from,to,newFrom,newTo){var ref=arguments.length<=4||void 0===arguments[4]?from:arguments[4],newRef=arguments.length<=5||void 0===arguments[5]?newFrom:arguments[5];_classCallCheck(this,ReplacedRange),this.before=new Side(from,to,ref),this.after=new Side(newFrom,newTo,newRef)}return _createClass(ReplacedRange,[{key:"toString",value:function(){return"[replaced "+this.before.from+"-"+this.before.to+" with "+this.after.from+"-"+this.after.to+"]"}}]),ReplacedRange}(),[]),PosMap=exports.PosMap=function(){function PosMap(moved,replaced){_classCallCheck(this,PosMap),this.moved=moved||empty,this.replaced=replaced||empty}return _createClass(PosMap,[{key:"recover",value:function(offset){return this.replaced[offset.rangeID].after.ref.extend(offset.offset)}},{key:"map",value:function(pos,bias){return mapThrough(this,pos,bias,!1)}},{key:"invert",value:function(){return new InvertedPosMap(this)}},{key:"toString",value:function(){return this.moved.concat(this.replaced).join(" ")}}]),PosMap}(),MapResult=exports.MapResult=function MapResult(pos){var deleted=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],recover=arguments.length<=2||void 0===arguments[2]?null:arguments[2];_classCallCheck(this,MapResult),this.pos=pos,this.deleted=deleted,this.recover=recover},InvertedPosMap=function(){function InvertedPosMap(map){_classCallCheck(this,InvertedPosMap),this.inner=map}return _createClass(InvertedPosMap,[{key:"recover",value:function(offset){return this.inner.replaced[offset.rangeID].before.ref.extend(offset.offset)}},{key:"map",value:function(pos,bias){return mapThrough(this.inner,pos,bias,!0)}},{key:"invert",value:function(){return this.inner}},{key:"toString",value:function(){return"-"+this.inner}}]),InvertedPosMap}();exports.nullMap=new PosMap,exports.Remapping=function(){function Remapping(){var head=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],tail=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],mirror=arguments.length<=2||void 0===arguments[2]?Object.create(null):arguments[2];_classCallCheck(this,Remapping),this.head=head,this.tail=tail,this.mirror=mirror}return _createClass(Remapping,[{key:"addToFront",value:function(map,corr){this.head.push(map);var id=-this.head.length;return null!=corr&&(this.mirror[id]=corr),id}},{key:"addToBack",value:function(map,corr){this.tail.push(map);var id=this.tail.length-1;return null!=corr&&(this.mirror[corr]=id),id}},{key:"get",value:function(id){return 0>id?this.head[-id-1]:this.tail[id]}},{key:"map",value:function map(pos,bias){for(var deleted=!1,i=-this.head.length;i<this.tail.length;i++){var map=this.get(i),result=map.map(pos,bias);if(result.recover){var corr=this.mirror[i];if(null!=corr){i=corr,pos=this.get(corr).recover(result.recover);continue}}result.deleted&&(deleted=!0),pos=result.pos}return new MapResult(pos,deleted)}}]),Remapping}()},{"../model":34}],43:[function(require,module,exports){"use strict";var _model=require("../model"),_transform=require("./transform"),_step=require("./step"),_tree=require("./tree");_step.Step.define("addMark",{apply:function(doc,step){return new _step.StepResult((0,_tree.copyStructure)(doc,step.from,step.to,function(node,from,to){return node.type.canContainMark(step.param)?(0,_tree.copyInline)(node,from,to,function(node){return node.mark(step.param.addToSet(node.marks))}):node}))},invert:function(step,_oldDoc,map){return new _step.Step("removeMark",step.from,map.map(step.to).pos,null,step.param)},paramToJSON:function(param){return param.toJSON()},paramFromJSON:function(schema,json){return schema.markFromJSON(json)}}),_transform.Transform.prototype.addMark=function(from,to,mark){var _this=this,removed=[],added=[],removing=null,adding=null;return this.doc.inlineNodesBetween(from,to,function(_ref,path,start,end,parent){var marks=_ref.marks;if(mark.isInSet(marks)||!parent.type.canContainMark(mark.type))adding=removing=null;else{var rm=mark.type.isInSet(marks);rm?removing&&removing.param.eq(rm)?removing.to=new _model.Pos(path,end):(removing=new _step.Step("removeMark",new _model.Pos(path,start),new _model.Pos(path,end),null,rm),removed.push(removing)):removing&&(removing=null),adding?adding.to=new _model.Pos(path,end):(adding=new _step.Step("addMark",new _model.Pos(path,start),new _model.Pos(path,end),null,mark),added.push(adding))}}),removed.forEach(function(s){return _this.step(s)}),added.forEach(function(s){return _this.step(s)}),this},_step.Step.define("removeMark",{apply:function(doc,step){return new _step.StepResult((0,_tree.copyStructure)(doc,step.from,step.to,function(node,from,to){return(0,_tree.copyInline)(node,from,to,function(node){return node.mark(step.param.removeFromSet(node.marks))})}))},invert:function(step,_oldDoc,map){return new _step.Step("addMark",step.from,map.map(step.to).pos,null,step.param)},paramToJSON:function(param){return param.toJSON()},paramFromJSON:function(schema,json){return schema.markFromJSON(json)}}),_transform.Transform.prototype.removeMark=function(from,to){var _this2=this,mark=arguments.length<=2||void 0===arguments[2]?null:arguments[2],matched=[],step=0;return this.doc.inlineNodesBetween(from,to,function(_ref2,path,start,end){var marks=_ref2.marks;step++;var toRemove=null;if(mark instanceof _model.MarkType){var found=mark.isInSet(marks);found&&(toRemove=[found])}else mark?mark.isInSet(marks)&&(toRemove=[mark]):toRemove=marks;if(toRemove&&toRemove.length){path=path.slice();for(var i=0;i<toRemove.length;i++){for(var rm=toRemove[i],found=void 0,j=0;j<matched.length;j++){var m=matched[j];m.step==step-1&&rm.eq(matched[j].style)&&(found=m)}found?(found.to=new _model.Pos(path,end),found.step=step):matched.push({style:rm,from:new _model.Pos(path,start),to:new _model.Pos(path,end),step:step})}}}),matched.forEach(function(m){return _this2.step("removeMark",m.from,m.to,null,m.style)}),this},_transform.Transform.prototype.clearMarkup=function(from,to,newParent){var _this3=this,delSteps=[];this.doc.inlineNodesBetween(from,to,function(_ref3,path,start,end){var marks=_ref3.marks,type=_ref3.type;if(newParent?!newParent.canContainType(type):!type.isText){path=path.slice();var _from=new _model.Pos(path,start);return void delSteps.push(new _step.Step("replace",_from,new _model.Pos(path,end),_from))}for(var i=0;i<marks.length;i++){var mark=marks[i];newParent&&newParent.canContainMark(mark.type)||(path=path.slice(),_this3.step("removeMark",new _model.Pos(path,start),new _model.Pos(path,end),null,mark))}});for(var i=delSteps.length-1;i>=0;i--)this.step(delSteps[i]);return this}},{"../model":34,"./step":46,"./transform":47,"./tree":48}],44:[function(require,module,exports){"use strict";function findMovedChunks(oldNode,oldPath,newNode,startDepth){for(var moved=[],newPath=oldPath.path.slice(0,startDepth),depth=startDepth;;depth++){var joined=depth==oldPath.depth?0:1,cut=depth==oldPath.depth?oldPath.offset:oldPath.path[depth],afterCut=oldNode.size-cut,newOffset=newNode.size-afterCut,from=oldPath.shorten(depth,joined),to=new _model.Pos(newPath,newOffset+joined);if(from.cmp(to)&&moved.push(new _map.MovedRange(from,afterCut-joined,to)),!joined)return moved;oldNode=oldNode.child(cut),newNode=newNode.child(newOffset),newPath=newPath.concat(newOffset)}}function replace(node,from,to,root,repl){var depth=arguments.length<=5||void 0===arguments[5]?0:arguments[5];if(depth==root.length){var before=node.sliceBetween(null,from,depth),after=node.sliceBetween(to,null,depth),result=void 0;return before.type.canContainFragment(repl.content)?(result=repl.content.size?before.append(repl.content,from.depth-depth,repl.openLeft).append(after.content,repl.openRight,to.depth-depth):before.append(after.content,from.depth-depth,to.depth-depth),result.size||result.type.canBeEmpty||(result=result.copy(result.type.defaultContent())),{doc:result,moved:findMovedChunks(node,to,result,depth)}):null}var pos=root[depth],result=replace(node.child(pos),from,to,root,repl,depth+1);return result?{doc:node.replace(pos,result.doc),moved:result.moved}:null}function shiftFromStack(stack,depth){for(var shifted=stack[depth]=stack[depth].slice(1),i=depth-1;i>=0;i--)shifted=stack[i]=stack[i].replace(0,shifted)}function buildInserted(nodesLeft,source,start,end){for(var sliced=source.sliceBetween(start,end),nodesRight=[],node=sliced,i=0;i<=start.path.length;i++,node=node.firstChild)nodesRight.push(node);var same=(0,_tree.samePathDepth)(start,end),searchLeft=nodesLeft.length-1,searchRight=nodesRight.length-1,result=null,inner=nodesRight[searchRight];for(inner.isTextblock&&inner.size&&nodesLeft[searchLeft].isTextblock&&(result=nodesLeft[searchLeft--].copy(inner.content),--searchRight,shiftFromStack(nodesRight,searchRight));;searchRight--){for(var node=nodesRight[searchRight],type=node.type,matched=null,outside=same>=searchRight,i=searchLeft;i>=0;i--){var left=nodesLeft[i];if(outside?left.type.canContainContent(node.type):left.type==type){matched=i;break}}if(null!=matched)if(result)for(;searchLeft>=matched;){var wrap=nodesLeft[searchLeft],content=_model.Fragment.from(result);result=wrap.copy(searchLeft==matched?content.append(node.content):content),searchLeft--}else result=nodesLeft[matched].copy(node.content),searchLeft=matched-1;if(null!=matched||0==node.size){if(outside)break;shiftFromStack(nodesRight,searchRight-1)}}var repl={content:result?result.content:_model.emptyFragment,openLeft:start.depth-searchRight,openRight:end.depth-searchRight};return{repl:repl,depth:searchLeft+1}}function moveText(tr,doc,before,after){for(var root=(0,_tree.samePathDepth)(before,after),cutAt=after.shorten(null,1);cutAt.path.length>root&&1==doc.path(cutAt.path).size;)cutAt=cutAt.shorten(null,1);tr.split(cutAt,cutAt.path.length-root);for(var start=after,end=new _model.Pos(start.path,doc.path(start.path).size),parent=doc.path(start.path.slice(0,root)),wanted=parent.pathNodes(before.path.slice(root)),existing=parent.pathNodes(start.path.slice(root));wanted.length&&existing.length&&wanted[0].sameMarkup(existing[0]);)wanted.shift(),existing.shift();(existing.length||wanted.length)&&tr.step("ancestor",start,end,null,{depth:existing.length,types:wanted.map(function(n){return n.type}),attrs:wanted.map(function(n){return n.attrs})});for(var i=root;i<before.path.length;i++)tr.join(before.shorten(i,1))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.replace=replace;var _model=require("../model"),_transform=require("./transform"),_step=require("./step"),_map=require("./map"),_tree=require("./tree"),nullRepl={content:_model.emptyFragment,openLeft:0,openRight:0};_step.Step.define("replace",{apply:function(doc,step){var rootPos=step.pos,root=rootPos.path;if(step.from.depth<root.length||step.to.depth<root.length)return null;for(var i=0;i<root.length;i++)if(step.from.path[i]!=root[i]||step.to.path[i]!=root[i])return null;var result=replace(doc,step.from,step.to,rootPos.path,step.param||nullRepl);if(!result)return null;var out=result.doc,moved=result.moved,end=moved.length?moved[moved.length-1].dest:step.to,replaced=new _map.ReplacedRange(step.from,step.to,step.from,end,rootPos,rootPos);return new _step.StepResult(out,new _map.PosMap(moved,[replaced]))},invert:function(step,oldDoc,map){var depth=step.pos.depth;return new _step.Step("replace",step.from,map.map(step.to).pos,step.from.shorten(depth),{content:oldDoc.path(step.pos.path).content.sliceBetween(step.from,step.to,depth),openLeft:step.from.depth-depth,openRight:step.to.depth-depth})},paramToJSON:function(param){return param&&{content:param.content.size&&param.content.toJSON(),openLeft:param.openLeft,openRight:param.openRight}},paramFromJSON:function(schema,json){return json&&{content:_model.Fragment.fromJSON(schema,json.content),openLeft:json.openLeft,openRight:json.openRight}}}),_transform.Transform.prototype["delete"]=function(from,to){return from.cmp(to)&&this.replace(from,to),this},_transform.Transform.prototype.replace=function(from,to,source,start,end){var repl=void 0,depth=void 0,doc=this.doc,maxDepth=(0,_tree.samePathDepth)(from,to);if(source){var _buildInserted=buildInserted(doc.pathNodes(from.path),source,start,end);for(repl=_buildInserted.repl,depth=_buildInserted.depth;depth>maxDepth;)repl.content.size&&(repl={content:_model.Fragment.from(doc.path(from.path.slice(0,depth)).copy(repl.content)),openLeft:repl.openLeft+1,openRight:repl.openRight+1}),depth--}else repl=nullRepl,depth=maxDepth;var root=from.shorten(depth),docAfter=doc,after=to;if(repl.content.size||(0,_tree.replaceHasEffect)(doc,from,to)){var result=this.step("replace",from,to,root,repl);docAfter=result.doc,after=result.map.map(to).pos}if(!doc.path(to.path).isTextblock)return this;if(!(repl.content.size?source.path(end.path).isTextblock:doc.path(from.path).isTextblock))return this;var nodesAfter=doc.path(root.path).pathNodes(to.path.slice(depth)).slice(1),nodesBefore=void 0;if(repl.content.size){var inserted=repl.content;nodesBefore=[];for(var i=0;i<repl.openRight;i++){var last=inserted.child(inserted.size-1);nodesBefore.push(last),inserted=last.content}}else nodesBefore=doc.path(root.path).pathNodes(from.path.slice(depth)).slice(1);if(nodesBefore.length&&(nodesAfter.length!=nodesBefore.length||!nodesAfter.every(function(n,i){return n.sameMarkup(nodesBefore[i])}))){for(var _after$shorten=after.shorten(root.depth),path=_after$shorten.path,offset=_after$shorten.offset,before=void 0,node=docAfter.path(path),i=0;;i++){if(i==nodesBefore.length){before=new _model.Pos(path,offset);break}path.push(offset-1),node=node.child(offset-1),offset=node.size}moveText(this,docAfter,before,after)}return this},_transform.Transform.prototype.replaceWith=function(from,to,content){return content instanceof _model.Fragment||(content=_model.Fragment.from(content)),_model.Pos.samePath(from.path,to.path)?this.step("replace",from,to,from,{content:content,openLeft:0,openRight:0}):this["delete"](from,to).step("replace",from,from,from,{content:content,openLeft:0,openRight:0}),this},_transform.Transform.prototype.insert=function(pos,content){return this.replaceWith(pos,pos,content)},_transform.Transform.prototype.insertText=function(pos,text){return this.insert(pos,this.doc.type.schema.text(text,this.doc.marksAt(pos)))},_transform.Transform.prototype.insertInline=function(pos,node){return this.insert(pos,node.mark(this.doc.marksAt(pos)))}},{"../model":34,"./map":42,"./step":46,"./transform":47,"./tree":48}],45:[function(require,module,exports){"use strict";var _model=require("../model"),_transform=require("./transform"),_step=require("./step"),_map=require("./map");_step.Step.define("split",{apply:function(doc,step){var pos=step.pos;if(0==pos.depth)return null;var _pos$shorten=pos.shorten(),parentPath=_pos$shorten.path,offset=_pos$shorten.offset,parent=doc.path(parentPath),target=parent.child(offset),targetSize=target.size,_ref=step.param||target,typeAfter=_ref.type,attrsAfter=_ref.attrs,splitAt=pos.offset;if(0==splitAt&&!target.type.canBeEmpty||target.type.locked||splitAt==target.size&&!typeAfter.canBeEmpty)return null;var newParent=parent.splice(offset,offset+1,_model.Fragment.from([target.slice(0,splitAt),typeAfter.create(attrsAfter,target.content.slice(splitAt))])),copy=doc.replaceDeep(parentPath,newParent),dest=new _model.Pos(parentPath.concat(offset+1),0),map=new _map.PosMap([new _map.MovedRange(pos,targetSize-pos.offset,dest),new _map.MovedRange(new _model.Pos(parentPath,offset+1),newParent.size-2-offset,new _model.Pos(parentPath,offset+2))],[new _map.ReplacedRange(pos,pos,pos,dest,pos,pos.shorten(null,1))]);return new _step.StepResult(copy,map)},invert:function(step,_oldDoc,map){return new _step.Step("join",step.pos,map.map(step.pos).pos)},paramToJSON:function(param){return param&&{type:param.type.name,attrs:param.attrs}},paramFromJSON:function(schema,json){return json&&{type:schema.nodeType(json.type),attrs:json.attrs}}}),_transform.Transform.prototype.split=function(pos){var depth=arguments.length<=1||void 0===arguments[1]?1:arguments[1],typeAfter=arguments[2],attrsAfter=arguments[3];if(0==depth)return this;for(var i=0;;i++){if(this.step("split",null,null,pos,typeAfter&&{type:typeAfter,attrs:attrsAfter}),i==depth-1)return this;typeAfter=null,pos=pos.shorten(null,1)}},_transform.Transform.prototype.splitIfNeeded=function(pos){for(var depth=arguments.length<=1||void 0===arguments[1]?1:arguments[1],off=0;depth>off;off++){var here=pos.shorten(pos.depth-off);here.offset&&here.offset<this.doc.path(here.path).size&&this.step("split",null,null,here)}return this}},{"../model":34,"./map":42,"./step":46,"./transform":47}],46:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.StepResult=exports.Step=void 0;var _model=require("../model"),_error=require("../util/error"),_map=require("./map"),steps=(exports.Step=function(){function Step(type,from,to,pos){var param=arguments.length<=4||void 0===arguments[4]?null:arguments[4];_classCallCheck(this,Step),type in steps||_error.NamespaceError.raise("Unknown step type: "+type),this.type=type,this.from=from,this.to=to,this.pos=pos,this.param=param}return _createClass(Step,[{key:"apply",value:function(doc){return steps[this.type].apply(doc,this)}},{key:"invert",value:function(oldDoc,map){return steps[this.type].invert(this,oldDoc,map)}},{key:"map",value:function(remapping){var allDeleted=!0,from=null,to=null,pos=null;if(this.from){var result=remapping.map(this.from,1);from=result.pos,result.deleted||(allDeleted=!1)}if(this.to)if(0==this.to.cmp(this.from))to=from;else{var result=remapping.map(this.to,-1);to=result.pos.max(from),result.deleted||(allDeleted=!1)}if(this.pos)if(from&&0==this.pos.cmp(this.from))pos=from;else if(to&&0==this.pos.cmp(this.to))pos=to;else{var result=remapping.map(this.pos,1);pos=result.pos,result.deleted||(allDeleted=!1)}return allDeleted?null:new Step(this.type,from,to,pos,this.param)}},{key:"toJSON",value:function(){var impl=steps[this.type];return{type:this.type,from:this.from,to:this.to,pos:this.pos,param:impl.paramToJSON?impl.paramToJSON(this.param):this.param}}}],[{key:"fromJSON",value:function(schema,json){var impl=steps[json.type];return new Step(json.type,json.from&&_model.Pos.fromJSON(json.from),json.to&&_model.Pos.fromJSON(json.to),json.pos&&_model.Pos.fromJSON(json.pos),impl.paramFromJSON?impl.paramFromJSON(schema,json.param):json.param)}},{key:"define",value:function(type,implementation){steps[type]=implementation}}]),Step}(),exports.StepResult=function StepResult(doc){var map=arguments.length<=1||void 0===arguments[1]?_map.nullMap:arguments[1];_classCallCheck(this,StepResult),this.doc=doc,this.map=map},Object.create(null))},{"../model":34,"../util/error":52,"./map":42}],47:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transform=void 0;var _step2=require("./step"),_map=require("./map"),Transform=function(){function Transform(doc){_classCallCheck(this,Transform),this.steps=[],this.docs=[doc],this.maps=[]}return _createClass(Transform,[{key:"step",value:function(_step,from,to,pos,param){"string"==typeof _step&&(_step=new _step2.Step(_step,from,to,pos,param));var result=_step.apply(this.doc);return result&&(this.steps.push(_step),this.maps.push(result.map),this.docs.push(result.doc)),result}},{key:"map",value:function(pos,bias){for(var deleted=!1,i=0;i<this.maps.length;i++){var result=this.maps[i].map(pos,bias);pos=result.pos,result.deleted&&(deleted=!0)}return new _map.MapResult(pos,deleted)}},{key:"doc",get:function(){return this.docs[this.docs.length-1]}},{key:"before",get:function(){return this.docs[0]}}]),Transform}();exports.Transform=Transform},{"./map":42,"./step":46}],48:[function(require,module,exports){"use strict";function copyStructure(node,from,to,f){var depth=arguments.length<=4||void 0===arguments[4]?0:arguments[4];if(node.isTextblock)return f(node,from?from.offset:0,to?to.offset:node.size);if(!node.size)return node;for(var child,start=from?from.path[depth]:0,end=to?to.path[depth]+1:node.size,content=node.content.toArray(0,start),iter=node.iter(start,end);child=iter.next().value;){var passFrom=iter.offset-child.width==start?from:null,passTo=iter.offset==end?to:null;content.push(copyStructure(child,passFrom,passTo,f,depth+1))}return node.copy(_model.Fragment.fromArray(content.concat(node.content.toArray(end))))}function copyInline(node,from,to,f){return node.splice(from,to,node.content.slice(from,to).map(f))}function isFlatRange(from,to){if(from.path.length!=to.path.length)return!1;for(var i=0;i<from.path.length;i++)if(from.path[i]!=to.path[i])return!1;return from.offset<=to.offset}function canBeJoined(node,offset,depth){if(!depth||0==offset||offset==node.size)return!1;var left=node.child(offset-1),right=node.child(offset);return left.sameMarkup(right)}function replaceHasEffect(doc,from,to){for(var depth=0,node=doc;;depth++){var fromEnd=depth==from.depth,toEnd=depth==to.depth;if(fromEnd||toEnd||from.path[depth]!=to.path[depth]){var gapStart=void 0,gapEnd=void 0;if(fromEnd)gapStart=from.offset;else{gapStart=from.path[depth]+1;for(var i=depth+1,n=node.child(gapStart-1);i<=from.path.length;i++)if(i==from.path.length){if(from.offset<n.size)return!0}else{if(from.path[i]+1<n.size)return!0;n=n.child(from.path[i])}}if(toEnd)gapEnd=to.offset;else{gapEnd=to.path[depth];for(var i=depth+1;i<=to.path.length;i++)if((i==to.path.length?to.offset:to.path[i])>0)return!0}return gapStart!=gapEnd?!0:canBeJoined(node,gapStart,Math.min(from.depth,to.depth)-depth)}node=node.child(from.path[depth])}}function samePathDepth(a,b){for(var i=0;;i++)if(i==a.path.length||i==b.path.length||a.path[i]!=b.path[i])return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyStructure=copyStructure,exports.copyInline=copyInline,exports.isFlatRange=isFlatRange,exports.replaceHasEffect=replaceHasEffect,exports.samePathDepth=samePathDepth;var _model=require("../model")},{"../model":34}],49:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function openPrompt(pm,content,options){var button=(0,_dom.elt)("button",{"class":"ProseMirror-prompt-close"}),wrapper=(0,_dom.elt)("div",{"class":"ProseMirror-prompt"},content,button),outerBox=pm.wrapper.getBoundingClientRect();if(pm.wrapper.appendChild(wrapper),options&&options.pos)wrapper.style.left=options.pos.left-outerBox.left+"px",wrapper.style.pos=options.pos.top-outerBox.top+"px";else{var blockBox=wrapper.getBoundingClientRect(),cX=Math.max(0,outerBox.left)+Math.min(window.innerWidth,outerBox.right)-blockBox.width,cY=Math.max(0,outerBox.top)+Math.min(window.innerHeight,outerBox.bottom)-blockBox.height;wrapper.style.left=cX/2-outerBox.left+"px",wrapper.style.top=cY/2-outerBox.top+"px"}var close=function close(){pm.off("interaction",close),wrapper.parentNode&&(wrapper.parentNode.removeChild(wrapper),options&&options.onClose&&options.onClose())};return button.addEventListener("click",close),pm.on("interaction",close),{close:close}}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParamPrompt=void 0,exports.openPrompt=openPrompt;var _error=require("../util/error"),_dom=require("../dom"),ParamPrompt=exports.ParamPrompt=function(){function ParamPrompt(pm,command){var _this=this;_classCallCheck(this,ParamPrompt),this.pm=pm,this.command=command,this.doClose=null,this.fields=command.params.map(function(param){return param.type in _this.paramTypes||_error.AssertionError.raise("Unsupported parameter type: "+param.type),_this.paramTypes[param.type].render.call(_this.pm,param,_this.defaultValue(param))}),this.form=(0,_dom.elt)("form",null,this.fields.map(function(f){return(0,_dom.elt)("div",null,f)}))}return _createClass(ParamPrompt,[{key:"close",value:function(){this.doClose&&(this.doClose(),this.doClose=null)}},{key:"open",value:function(){var _this2=this;this.close();var prompt=this.prompt(),hadFocus=this.pm.hasFocus();this.doClose=function(){prompt.close(),hadFocus&&setTimeout(function(){return _this2.pm.focus()},50)};var submit=function(){var params=_this2.values();params&&(_this2.close(),_this2.command.exec(_this2.pm,params))};this.form.addEventListener("submit",function(e){e.preventDefault(),submit()}),this.form.addEventListener("keydown",function(e){27==e.keyCode?prompt.close():13!=e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey||submit()});var input=this.form.querySelector("input, textarea");input&&input.focus()}},{key:"values",value:function(){for(var result=[],i=0;i<this.command.params.length;i++){var param=this.command.params[i],dom=this.fields[i],type=this.paramTypes[param.type],value=void 0,bad=void 0;if(type.validate&&(bad=type.validate(dom)),bad||(value=type.read.call(this.pm,dom),param.validate?bad=param.validate(value):value||null!=param["default"]||(bad="No default value available")),bad)return type.reportInvalid?type.reportInvalid.call(this.pm,dom,bad):this.reportInvalid(dom,bad),
null;result.push(value)}return result}},{key:"defaultValue",value:function(param){if(param.prefill){var prefill=param.prefill.call(this.command.self,this.pm);if(null!=prefill)return prefill}return param["default"]}},{key:"prompt",value:function(){var _this3=this;return openPrompt(this.pm,this.form,{onClose:function(){return _this3.close()}})}},{key:"reportInvalid",value:function(dom,message){var parent=dom.parentNode,style="left: "+(dom.offsetLeft+dom.offsetWidth+2)+"px; top: "+(dom.offsetTop-5)+"px",msg=parent.appendChild((0,_dom.elt)("div",{"class":"ProseMirror-invalid",style:style},message));setTimeout(function(){return parent.removeChild(msg)},1500)}}]),ParamPrompt}();ParamPrompt.prototype.paramTypes=Object.create(null),ParamPrompt.prototype.paramTypes.text={render:function(param,value){return(0,_dom.elt)("input",{type:"text",placeholder:param.label,value:value,autocomplete:"off"})},read:function(dom){return dom.value}},ParamPrompt.prototype.paramTypes.select={render:function(param,value){var options=param.options.call?param.options(this):param.options;return(0,_dom.elt)("select",null,options.map(function(o){return(0,_dom.elt)("option",{value:o.value,selected:o.value==value?"true":null},o.label)}))},read:function(dom){return dom.value}},(0,_dom.insertCSS)('\n.ProseMirror-prompt {\n  background: white;\n  padding: 2px 6px 2px 15px;\n  border: 1px solid silver;\n  position: absolute;\n  border-radius: 3px;\n  z-index: 11;\n}\n\n.ProseMirror-prompt input[type="text"],\n.ProseMirror-prompt textarea {\n  background: #eee;\n  border: none;\n  outline: none;\n}\n\n.ProseMirror-prompt input[type="text"] {\n  padding: 0 4px;\n}\n\n.ProseMirror-prompt-close {\n  position: absolute;\n  left: 2px; top: 1px;\n  color: #666;\n  border: none; background: transparent; padding: 0;\n}\n\n.ProseMirror-prompt-close:after {\n  content: "✕";\n  font-size: 12px;\n}\n\n.ProseMirror-invalid {\n  background: #ffc;\n  border: 1px solid #cc7;\n  border-radius: 4px;\n  padding: 5px 10px;\n  position: absolute;\n  min-width: 10em;\n}\n')},{"../dom":1,"../util/error":52}],50:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tooltip=void 0;var _dom=require("../dom"),prefix="ProseMirror-tooltip";exports.Tooltip=function(){function Tooltip(wrapper,dir){var _this=this;_classCallCheck(this,Tooltip),this.wrapper=wrapper,this.dir=dir||"above",this.pointer=wrapper.appendChild((0,_dom.elt)("div",{"class":prefix+"-pointer-"+this.dir+" "+prefix+"-pointer"})),this.pointerWidth=this.pointerHeight=null,this.dom=wrapper.appendChild((0,_dom.elt)("div",{"class":prefix})),this.dom.addEventListener("transitionend",function(){"0"==_this.dom.style.opacity&&(_this.dom.style.display=_this.pointer.style.display="")}),this.isOpen=!1,this.lastLeft=this.lastTop=null}return _createClass(Tooltip,[{key:"detach",value:function(){this.dom.parentNode.removeChild(this.dom),this.pointer.parentNode.removeChild(this.pointer)}},{key:"getSize",value:function(node){var wrap=this.wrapper.appendChild((0,_dom.elt)("div",{"class":prefix,style:"display: block; position: absolute"},node)),size={width:wrap.offsetWidth+1,height:wrap.offsetHeight};return wrap.parentNode.removeChild(wrap),size}},{key:"open",value:function(node,pos){for(var next,left=this.lastLeft=pos?pos.left:this.lastLeft,top=this.lastTop=pos?pos.top:this.lastTop,size=this.getSize(node),around=this.wrapper.getBoundingClientRect(),child=this.dom.firstChild;child;child=next)next=child.nextSibling,child!=this.pointer&&this.dom.removeChild(child);this.dom.appendChild(node),this.dom.style.display=this.pointer.style.display="block",null==this.pointerWidth&&(this.pointerWidth=this.pointer.offsetWidth-1,this.pointerHeight=this.pointer.offsetHeight-1),this.dom.style.width=size.width+"px",this.dom.style.height=size.height+"px";var margin=5;if("above"==this.dir||"below"==this.dir){var tipLeft=Math.max(0,Math.min(left-size.width/2,window.innerWidth-size.width));if(this.dom.style.left=tipLeft-around.left+"px",this.pointer.style.left=left-around.left-this.pointerWidth/2+"px","above"==this.dir){var tipTop=top-around.top-margin-this.pointerHeight-size.height;this.dom.style.top=tipTop+"px",this.pointer.style.top=tipTop+size.height+"px"}else{var tipTop=top-around.top+margin;this.pointer.style.top=tipTop+"px",this.dom.style.top=tipTop+this.pointerHeight+"px"}}else if("left"==this.dir||"right"==this.dir)if(this.dom.style.top=top-around.top-size.height/2+"px",this.pointer.style.top=top-this.pointerHeight/2-around.top+"px","left"==this.dir){var pointerLeft=left-around.left-margin-this.pointerWidth;this.dom.style.left=pointerLeft-size.width+"px",this.pointer.style.left=pointerLeft+"px"}else{var pointerLeft=left-around.left+margin;this.dom.style.left=pointerLeft+this.pointerWidth+"px",this.pointer.style.left=pointerLeft+"px"}else if("center"==this.dir){var _top=Math.max(around.top,0),bottom=Math.min(around.bottom,window.innerHeight),fromTop=(bottom-_top-size.height)/2;this.dom.style.left=(around.width-size.width)/2+"px",this.dom.style.top=_top-around.top+fromTop+"px"}getComputedStyle(this.dom).opacity,getComputedStyle(this.pointer).opacity,this.dom.style.opacity=this.pointer.style.opacity=1,this.isOpen=!0}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.dom.style.opacity=this.pointer.style.opacity=0)}}]),Tooltip}();(0,_dom.insertCSS)("\n\n."+prefix+" {\n  position: absolute;\n  display: none;\n  box-sizing: border-box;\n  -moz-box-sizing: border- box;\n  overflow: hidden;\n\n  -webkit-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  border-radius: 5px;\n  padding: 3px 7px;\n  margin: 0;\n  background: white;\n  border: 1px solid #777;\n  color: #555;\n\n  z-index: 11;\n}\n\n."+prefix+"-pointer {\n  position: absolute;\n  display: none;\n  width: 0; height: 0;\n\n  -webkit-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  z-index: 12;\n}\n\n."+prefix+'-pointer:after {\n  content: "";\n  position: absolute;\n  display: block;\n}\n\n.'+prefix+"-pointer-above {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 6px solid #777;\n}\n\n."+prefix+"-pointer-above:after {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 6px solid white;\n  left: -6px; top: -7px;\n}\n\n."+prefix+"-pointer-below {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #777;\n}\n\n."+prefix+"-pointer-below:after {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid white;\n  left: -6px; top: 1px;\n}\n\n."+prefix+"-pointer-right {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid #777;\n}\n\n."+prefix+"-pointer-right:after {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid white;\n  left: 1px; top: -6px;\n}\n\n."+prefix+"-pointer-left {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-left: 6px solid #777;\n}\n\n."+prefix+"-pointer-left:after {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-left: 6px solid white;\n  left: -7px; top: -6px;\n}\n\n."+prefix+' input[type="text"],\n.'+prefix+" textarea {\n  background: #eee;\n  border: none;\n  outline: none;\n}\n\n."+prefix+' input[type="text"] {\n  padding: 0 4px;\n}\n\n')},{"../dom":1}],51:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function scheduleDOMUpdate(pm,f){CentralScheduler.get(pm).set(f)}function unscheduleDOMUpdate(pm,f){CentralScheduler.get(pm).unset(f)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.scheduleDOMUpdate=scheduleDOMUpdate,exports.unscheduleDOMUpdate=unscheduleDOMUpdate;var UPDATE_TIMEOUT=50,MIN_FLUSH_DELAY=100,CentralScheduler=function(){function CentralScheduler(pm){_classCallCheck(this,CentralScheduler),this.waiting=[],this.timeout=null,this.lastForce=0,this.pm=pm,this.force=this.force.bind(this),pm.on("flush",this.onFlush.bind(this))}return _createClass(CentralScheduler,[{key:"set",value:function(f){0==this.waiting.length&&(this.timeout=setTimeout(this.force,UPDATE_TIMEOUT)),-1==this.waiting.indexOf(f)&&this.waiting.push(f)}},{key:"unset",value:function(f){var index=this.waiting.indexOf(f);index>-1&&this.waiting.splice(index,1)}},{key:"force",value:function(){for(clearTimeout(this.timeout),this.lastForce=Date.now();this.waiting.length;)for(var i=0;i<this.waiting.length;i++){var result=this.waiting[i]();result?this.waiting[i]=result:this.waiting.splice(i--,1)}}},{key:"onFlush",value:function(){this.waiting.length&&Date.now()-this.lastForce>MIN_FLUSH_DELAY&&this.force()}}],[{key:"get",value:function(pm){return pm.mod.centralScheduler||(pm.mod.centralScheduler=new this(pm))}}]),CentralScheduler}();exports.UpdateScheduler=function(){function UpdateScheduler(pm,events,start){var _this=this;_classCallCheck(this,UpdateScheduler),this.pm=pm,this.start=start,this.events=events.split(" "),this.onEvent=this.onEvent.bind(this),this.events.forEach(function(event){return pm.on(event,_this.onEvent)})}return _createClass(UpdateScheduler,[{key:"detach",value:function(){var _this2=this;unscheduleDOMUpdate(this.pm,this.start),this.events.forEach(function(event){return _this2.pm.off(event,_this2.onEvent)})}},{key:"onEvent",value:function(){scheduleDOMUpdate(this.pm,this.start)}},{key:"force",value:function(){if(this.pm.operation)this.onEvent();else{unscheduleDOMUpdate(this.pm,this.start);for(var run=this.start;run;run=run());}}}]),UpdateScheduler}()},{}],52:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function functionName(f){var match=/^function (\w+)/.exec(f.toString());return match&&match[1]}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var ProseMirrorError=exports.ProseMirrorError=function(_Error){function ProseMirrorError(message){_classCallCheck(this,ProseMirrorError);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ProseMirrorError).call(this,message));return _this.message!=message&&(_this.message=message,Error.captureStackTrace?Error.captureStackTrace(_this,_this.name):_this.stack=new Error(message).stack),_this}return _inherits(ProseMirrorError,_Error),_createClass(ProseMirrorError,[{key:"name",get:function(){return this.constructor.name||functionName(this.constructor)||"ProseMirrorError"}}],[{key:"raise",value:function(message){throw new this(message)}}]),ProseMirrorError}(Error);exports.AssertionError=function(_ProseMirrorError){function AssertionError(){return _classCallCheck(this,AssertionError),_possibleConstructorReturn(this,Object.getPrototypeOf(AssertionError).apply(this,arguments))}return _inherits(AssertionError,_ProseMirrorError),AssertionError}(ProseMirrorError),exports.NamespaceError=function(_ProseMirrorError2){function NamespaceError(){return _classCallCheck(this,NamespaceError),_possibleConstructorReturn(this,Object.getPrototypeOf(NamespaceError).apply(this,arguments))}return _inherits(NamespaceError,_ProseMirrorError2),NamespaceError}(ProseMirrorError)},{}],53:[function(require,module,exports){"use strict";function eventMixin(ctor){var proto=ctor.prototype;for(var prop in methods)methods.hasOwnProperty(prop)&&(proto[prop]=methods[prop])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.eventMixin=eventMixin;var methods={on:function(type,handler){var map=this._handlers||(this._handlers={}),arr=map[type]||(map[type]=[]);arr.push(handler)},off:function(type,handler){var arr=this._handlers&&this._handlers[type];if(arr)for(var i=0;i<arr.length;++i)if(arr[i]==handler){arr.splice(i,1);break}},signal:function(type){for(var arr=this._handlers&&this._handlers[type],_len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)args[_key-1]=arguments[_key];if(arr)for(var i=0;i<arr.length;++i)arr[i].apply(arr,args)},signalHandleable:function(type){var arr=this._handlers&&this._handlers[type];if(arr){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_len2>_key2;_key2++)args[_key2-1]=arguments[_key2];for(var i=0;i<arr.length;++i){var result=arr[i].apply(arr,args);if(result!==!1)return result}}return!1},signalPipelined:function(type,value){var arr=this._handlers&&this._handlers[type];if(arr)for(var i=0;i<arr.length;++i)value=arr[i](value);return value},signalDOM:function(event,type){var arr=this._handlers&&this._handlers[type||event.type];if(arr)for(var i=0;i<arr.length;++i)if(arr[i](event)||event.defaultPrevented)return!0;return!1},hasHandler:function(type){var arr=this._handlers&&this._handlers[type];return arr&&arr.length>0}}},{}],54:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});exports.Map=window.Map||function(){function _class(){_classCallCheck(this,_class),this.content=[]}return _createClass(_class,[{key:"set",value:function(key,value){var found=this.find(key);found>-1?this.content[found+1]=value:this.content.push(key,value)}},{key:"get",value:function(key){var found=this.find(key);return-1==found?void 0:this.content[found+1]}},{key:"has",value:function(key){return this.find(key)>-1}},{key:"find",value:function(key){for(var i=0;i<this.content.length;i+=2)if(this.content[i]===key)return i}},{key:"clear",value:function(){this.content.length=0}},{key:"size",get:function(){return this.content.length/2}}]),_class}()},{}],55:[function(require,module,exports){"use strict";function copyObj(obj,base){var copy=base||Object.create(null);for(var prop in obj)copy[prop]=obj[prop];return copy}Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyObj=copyObj},{}],56:[function(require,module,exports){"use strict";function sortedInsert(array,elt,compare){for(var i=0;i<array.length&&!(compare(array[i],elt)>0);i++);array.splice(i,0,elt)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=sortedInsert},{}],57:[function(require,module,exports){!function(){var d;window.AmCharts?d=window.AmCharts:(d={},window.AmCharts=d,d.themes={},d.maps={},d.inheriting={},d.charts=[],d.onReadyArray=[],d.useUTC=!1,d.updateRate=60,d.uid=0,d.lang={},d.translations={},d.mapTranslations={},d.windows={},d.initHandlers=[]),d.Class=function(a){var b=function(){arguments[0]!==d.inheriting&&(this.events={},this.construct.apply(this,arguments))};a.inherits?(b.prototype=new a.inherits(d.inheriting),b.base=a.inherits.prototype,delete a.inherits):(b.prototype.createEvents=function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},b.prototype.listenTo=function(a,b,c){this.removeListener(a,b,c),a.events[b].push({handler:c,scope:this})},b.prototype.addListener=function(a,b,c){this.removeListener(this,a,b),a&&this.events[a]&&this.events[a].push({handler:b,scope:c})},b.prototype.removeListener=function(a,b,c){if(a&&a.events&&(a=a.events[b]))for(b=a.length-1;b>=0;b--)a[b].handler===c&&a.splice(b,1)},b.prototype.fire=function(a){for(var b=this.events[a.type],c=0;c<b.length;c++){var d=b[c];d.handler.call(d.scope,a)}});for(var c in a)b.prototype[c]=a[c];return b},d.addChart=function(a){window.requestAnimationFrame?d.animationRequested||(d.animationRequested=!0,window.requestAnimationFrame(d.update)):d.updateInt||(d.updateInt=setInterval(function(){d.update()},Math.round(1e3/d.updateRate))),d.charts.push(a)},d.removeChart=function(a){for(var b=d.charts,c=b.length-1;c>=0;c--)b[c]==a&&b.splice(c,1);0===b.length&&d.updateInt&&(clearInterval(d.updateInt),d.updateInt=NaN)},d.isModern=!0,d.getIEVersion=function(){var b,c,a=0;return"Microsoft Internet Explorer"==navigator.appName&&(b=navigator.userAgent,c=/MSIE ([0-9]{1,}[.0-9]{0,})/,null!==c.exec(b)&&(a=parseFloat(RegExp.$1))),a},d.applyLang=function(a,b){var c=d.translations;b.dayNames=d.extend({},d.dayNames),b.shortDayNames=d.extend({},d.shortDayNames),b.monthNames=d.extend({},d.monthNames),b.shortMonthNames=d.extend({},d.shortMonthNames),b.amString="am",b.pmString="pm",c&&(c=c[a])&&(d.lang=c,c.monthNames&&(b.dayNames=d.extend({},c.dayNames),b.shortDayNames=d.extend({},c.shortDayNames),b.monthNames=d.extend({},c.monthNames),b.shortMonthNames=d.extend({},c.shortMonthNames)),c.am&&(b.amString=c.am),c.pm&&(b.pmString=c.pm))},d.IEversion=d.getIEVersion(),9>d.IEversion&&0<d.IEversion&&(d.isModern=!1,d.isIE=!0),d.dx=0,d.dy=0,(document.addEventListener||window.opera)&&(d.isNN=!0,d.isIE=!1,d.dx=.5,d.dy=.5),document.attachEvent&&(d.isNN=!1,d.isIE=!0,d.isModern||(d.dx=0,d.dy=0)),window.chrome&&(d.chrome=!0),d.handleMouseUp=function(a){for(var b=d.charts,c=0;c<b.length;c++){var e=b[c];e&&e.handleReleaseOutside&&e.handleReleaseOutside(a)}},d.handleMouseMove=function(a){for(var b=d.charts,c=0;c<b.length;c++){var e=b[c];e&&e.handleMouseMove&&e.handleMouseMove(a)}},d.handleWheel=function(a){for(var b=d.charts,c=0;c<b.length;c++){var e=b[c];if(e&&e.mouseIsOver){e.mouseWheelScrollEnabled||e.mouseWheelZoomEnabled?e.handleWheel&&e.handleWheel(a):a.stopPropagation&&a.stopPropagation();break}}},d.resetMouseOver=function(){for(var a=d.charts,b=0;b<a.length;b++){var c=a[b];c&&(c.mouseIsOver=!1)}},d.ready=function(a){d.onReadyArray.push(a)},d.handleLoad=function(){d.isReady=!0;for(var a=d.onReadyArray,b=0;b<a.length;b++){var c=a[b];isNaN(d.processDelay)?c():setTimeout(c,d.processDelay*b)}},d.addInitHandler=function(a,b){d.initHandlers.push({method:a,types:b})},d.callInitHandler=function(a){var b=d.initHandlers;if(d.initHandlers)for(var c=0;c<b.length;c++){var e=b[c];e.types?d.isInArray(e.types,a.type)&&e.method(a):e.method(a)}},d.getUniqueId=function(){return d.uid++,"AmChartsEl-"+d.uid},d.isNN&&(document.addEventListener("mousemove",d.handleMouseMove),document.addEventListener("mouseup",d.handleMouseUp,!0),window.addEventListener("load",d.handleLoad,!0),window.addEventListener("DOMMouseScroll",d.handleWheel,!0),document.addEventListener("mousewheel",d.handleWheel,!0)),d.isIE&&(document.attachEvent("onmousemove",d.handleMouseMove),document.attachEvent("onmouseup",d.handleMouseUp),window.attachEvent("onload",d.handleLoad),document.attachEvent("onmousewheel",d.handleWheel)),d.clear=function(){var a=d.charts;if(a)for(var b=a.length-1;b>=0;b--)a[b].clear();d.updateInt&&clearInterval(d.updateInt),d.charts=[],d.isNN&&(document.removeEventListener("mousemove",d.handleMouseMove,!0),document.removeEventListener("mouseup",d.handleMouseUp,!0),window.removeEventListener("load",d.handleLoad,!0),window.removeEventListener("DOMMouseScroll",d.handleWheel,!0),document.removeEventListener("mousewheel",d.handleWheel,!0)),d.isIE&&(document.detachEvent("onmousemove",d.handleMouseMove),document.detachEvent("onmouseup",d.handleMouseUp),window.detachEvent("onload",d.handleLoad))},d.makeChart=function(a,b,c){var e=b.type,h=b.theme;d.isString(h)&&(h=d.themes[h],b.theme=h);var f;switch(e){case"serial":f=new d.AmSerialChart(h);break;case"xy":f=new d.AmXYChart(h);break;case"pie":f=new d.AmPieChart(h);break;case"radar":f=new d.AmRadarChart(h);break;case"gauge":f=new d.AmAngularGauge(h);break;case"funnel":f=new d.AmFunnelChart(h);break;case"map":f=new d.AmMap(h);break;case"stock":f=new d.AmStockChart(h);break;case"gantt":f=new d.AmGanttChart(h)}return d.extend(f,b),d.isReady?isNaN(c)?f.write(a):setTimeout(function(){d.realWrite(f,a)},c):d.ready(function(){isNaN(c)?f.write(a):setTimeout(function(){d.realWrite(f,a)},c)}),f},d.realWrite=function(a,b){a.write(b)},d.updateCount=0,d.validateAt=Math.round(d.updateRate/10),d.update=function(){var a=d.charts;d.updateCount++;var b=!1;if(d.updateCount==d.validateAt&&(b=!0,d.updateCount=0),a)for(var c=a.length-1;c>=0;c--)a[c].update&&a[c].update(),b&&(a[c].autoResize?a[c].validateSize&&a[c].validateSize():a[c].premeasure&&a[c].premeasure());window.requestAnimationFrame&&window.requestAnimationFrame(d.update)},d.bezierX=3,d.bezierY=6,"complete"==document.readyState&&d.handleLoad()}(),function(){var d=window.AmCharts;d.toBoolean=function(a,b){if(void 0===a)return b;switch(String(a).toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return!!a}},d.removeFromArray=function(a,b){var c;if(void 0!==b&&void 0!==a)for(c=a.length-1;c>=0;c--)a[c]==b&&a.splice(c,1)},d.getPath=function(){var a=document.getElementsByTagName("script");if(a)for(var b=0;b<a.length;b++){var c=a[b].src;if(-1!==c.search(/\/(amcharts|ammap)\.js/))return c.replace(/\/(amcharts|ammap)\.js.*/,"/")}},d.normalizeUrl=function(a){return""!==a&&-1===a.search(/\/$/)?a+"/":a},d.isAbsolute=function(a){return 0===a.search(/^http[s]?:|^\//)},d.isInArray=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1},d.getDecimals=function(a){var b=0;return isNaN(a)||(a=String(a),-1!=a.indexOf("e-")?b=Number(a.split("-")[1]):-1!=a.indexOf(".")&&(b=a.split(".")[1].length)),b},d.wordwrap=function(a,b,c,e){var h,f,g,k;if(a+="",1>b)return a;for(h=-1,a=(k=a.split(/\r\n|\n|\r/)).length;++h<a;k[h]+=g){for(g=k[h],k[h]="";g.length>b;k[h]+=d.trim(g.slice(0,f))+((g=g.slice(f)).length?c:""))f=2==e||(f=g.slice(0,b+1).match(/\S*(\s)?$/))[1]?b:f.input.length-f[0].length||1==e&&b||f.input.length+(f=g.slice(b).match(/^\S*/))[0].length;g=d.trim(g)}return k.join(c)},d.trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},d.wrappedText=function(a,b,c,e,h,f,g,k){var l=d.text(a,b,c,e,h,f,g);if(l){var m=l.getBBox();if(m.width>k){var n="\n";d.isModern||(n="<br>"),k=Math.floor(k/(m.width/b.length)),k>2&&(k-=2),b=d.wordwrap(b,k,n,!0),l.remove(),l=d.text(a,b,c,e,h,f,g)}}return l},d.getStyle=function(a,b){var c="";return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),c=a.currentStyle[b]),c},d.removePx=function(a){return void 0!==a?Number(a.substring(0,a.length-2)):void 0},d.getURL=function(a,b){if(a)if("_self"!=b&&b)if("_top"==b&&window.top)window.top.location.href=a;else if("_parent"==b&&window.parent)window.parent.location.href=a;else if("_blank"==b)window.open(a);else{var c=document.getElementsByName(b)[0];c?c.src=a:(c=d.windows[b])&&c.opener&&!c.opener.closed?c.location.href=a:d.windows[b]=window.open(a)}else window.location.href=a},d.ifArray=function(a){return a&&"object"==typeof a&&0<a.length?!0:!1},d.callMethod=function(a,b){var c;for(c=0;c<b.length;c++){var e=b[c];if(e){e[a]&&e[a]();var d=e.length;if(d>0){var f;for(f=0;d>f;f++){var g=e[f];g&&g[a]&&g[a]()}}}}},d.toNumber=function(a){return"number"==typeof a?a:Number(String(a).replace(/[^0-9\-.]+/g,""))},d.toColor=function(a){if(""!==a&&void 0!==a)if(-1!=a.indexOf(",")){a=a.split(",");var b;for(b=0;b<a.length;b++){var c=a[b].substring(a[b].length-6,a[b].length);a[b]="#"+c}}else a=a.substring(a.length-6,a.length),a="#"+a;return a},d.toCoordinate=function(a,b,c){var e;return void 0!==a&&(a=String(a),c&&b>c&&(b=c),e=Number(a),-1!=a.indexOf("!")&&(e=b-Number(a.substr(1))),-1!=a.indexOf("%")&&(e=b*Number(a.substr(0,a.length-1))/100)),e},d.fitToBounds=function(a,b,c){return b>a&&(a=b),a>c&&(a=c),a},d.isDefined=function(a){return void 0===a?!1:!0},d.stripNumbers=function(a){return a.replace(/[0-9]+/g,"")},d.roundTo=function(a,b){if(0>b)return a;var c=Math.pow(10,b);return Math.round(a*c)/c},d.toFixed=function(a,b){var c=String(Math.round(a*Math.pow(10,b)));if(b>0){var e=c.length;if(b>e){var d;for(d=0;b-e>d;d++)c="0"+c}return e=c.substring(0,c.length-b),""===e&&(e=0),e+"."+c.substring(c.length-b,c.length)}return String(c)},d.formatDuration=function(a,b,c,e,h,f){var g=d.intervals,k=f.decimalSeparator;if(a>=g[b].contains){var l=a-Math.floor(a/g[b].contains)*g[b].contains;return"ss"==b?(l=d.formatNumber(l,f),1==l.split(k)[0].length&&(l="0"+l)):l=d.roundTo(l,f.precision),("mm"==b||"hh"==b)&&10>l&&(l="0"+l),c=l+""+e[b]+c,a=Math.floor(a/g[b].contains),b=g[b].nextInterval,d.formatDuration(a,b,c,e,h,f)}if("ss"==b&&(a=d.formatNumber(a,f),1==a.split(k)[0].length&&(a="0"+a)),("mm"==b||"hh"==b)&&10>a&&(a="0"+a),c=a+""+e[b]+c,g[h].count>g[b].count)for(a=g[b].count;a<g[h].count;a++)b=g[b].nextInterval,"ss"==b||"mm"==b||"hh"==b?c="00"+e[b]+c:"DD"==b&&(c="0"+e[b]+c);return":"==c.charAt(c.length-1)&&(c=c.substring(0,c.length-1)),c},d.formatNumber=function(a,b,c,e,h){a=d.roundTo(a,b.precision),isNaN(c)&&(c=b.precision);var f=b.decimalSeparator;b=b.thousandsSeparator;var g;g=0>a?"-":"",a=Math.abs(a);var k=String(a),l=!1;-1!=k.indexOf("e")&&(l=!0),c>=0&&!l&&(k=d.toFixed(a,c));var m="";if(l)m=k;else{var n,k=k.split("."),l=String(k[0]);for(n=l.length;n>=0;n-=3)m=n!=l.length?0!==n?l.substring(n-3,n)+b+m:l.substring(n-3,n)+m:l.substring(n-3,n);void 0!==k[1]&&(m=m+f+k[1]),void 0!==c&&c>0&&"0"!=m&&(m=d.addZeroes(m,f,c))}return m=g+m,""===g&&!0===e&&0!==a&&(m="+"+m),!0===h&&(m+="%"),m},d.addZeroes=function(a,b,c){return a=a.split(b),void 0===a[1]&&c>0&&(a[1]="0"),a[1].length<c?(a[1]+="0",d.addZeroes(a[0]+b+a[1],b,c)):void 0!==a[1]?a[0]+b+a[1]:a[0]},d.scientificToNormal=function(a){var b;a=String(a).split("e");var c;if("-"==a[1].substr(0,1)){for(b="0.",c=0;c<Math.abs(Number(a[1]))-1;c++)b+="0";b+=a[0].split(".").join("")}else{var e=0;for(b=a[0].split("."),b[1]&&(e=b[1].length),b=a[0].split(".").join(""),c=0;c<Math.abs(Number(a[1]))-e;c++)b+="0"}return b},d.toScientific=function(a,b){if(0===a)return"0";var c=Math.floor(Math.log(Math.abs(a))*Math.LOG10E),e=String(e).split(".").join(b);return String(e)+"e"+c},d.randomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},d.hitTest=function(a,b,c){var e=!1,h=a.x,f=a.x+a.width,g=a.y,k=a.y+a.height,l=d.isInRectangle;return e||(e=l(h,g,b)),e||(e=l(h,k,b)),e||(e=l(f,g,b)),e||(e=l(f,k,b)),e||!0===c||(e=d.hitTest(b,a,!0)),e},d.isInRectangle=function(a,b,c){return a>=c.x-5&&a<=c.x+c.width+5&&b>=c.y-5&&b<=c.y+c.height+5?!0:!1},d.isPercents=function(a){return-1!=String(a).indexOf("%")?!0:void 0},d.formatValue=function(a,b,c,e,h,f,g,k){if(b){void 0===h&&(h="");var l;for(l=0;l<c.length;l++){var m=c[l],n=b[m];void 0!==n&&(n=f?d.addPrefix(n,k,g,e):d.formatNumber(n,e),a=a.replace(new RegExp("\\[\\["+h+m+"\\]\\]","g"),n))}}return a},d.formatDataContextValue=function(a,b){if(a){var e,c=a.match(/\[\[.*?\]\]/g);for(e=0;e<c.length;e++){var d=c[e],d=d.substr(2,d.length-4);void 0!==b[d]&&(a=a.replace(new RegExp("\\[\\["+d+"\\]\\]","g"),b[d]))}}return a},d.massReplace=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var e=b[c];void 0===e&&(e=""),a=a.replace(c,e)}return a},d.cleanFromEmpty=function(a){return a.replace(/\[\[[^\]]*\]\]/g,"")},d.addPrefix=function(a,b,c,e,h){var k,l,m,f=d.formatNumber(a,e),g="";if(0===a)return"0";if(0>a&&(g="-"),a=Math.abs(a),a>1){for(k=b.length-1;k>-1;k--)if(a>=b[k].number&&(l=a/b[k].number,m=Number(e.precision),1>m&&(m=1),c=d.roundTo(l,m),m=d.formatNumber(c,{precision:-1,decimalSeparator:e.decimalSeparator,thousandsSeparator:e.thousandsSeparator}),!h||l==c)){f=g+""+m+b[k].prefix;break}}else for(k=0;k<c.length;k++)if(a<=c[k].number){l=a/c[k].number,m=Math.abs(Math.floor(Math.log(l)*Math.LOG10E)),l=d.roundTo(l,m),f=g+""+l+c[k].prefix;break}return f},d.remove=function(a){a&&a.remove()},d.getEffect=function(a){return">"==a&&(a="easeOutSine"),"<"==a&&(a="easeInSine"),"elastic"==a&&(a="easeOutElastic"),a},d.getObjById=function(a,b){var c,e;for(e=0;e<a.length;e++){var d=a[e];if(d.id==b){c=d;break}}return c},d.applyTheme=function(a,b,c){b||(b=d.theme),b&&b[c]&&d.extend(a,b[c])},d.isString=function(a){return"string"==typeof a?!0:!1},d.extend=function(a,b,c){var e;a||(a={});for(e in b)c?a.hasOwnProperty(e)||(a[e]=b[e]):a[e]=b[e];return a},d.copyProperties=function(a,b){for(var c in a)a.hasOwnProperty(c)&&"events"!=c&&void 0!==a[c]&&"function"!=typeof a[c]&&"cname"!=c&&(b[c]=a[c])},d.processObject=function(a,b,c,e){if(!1==a instanceof b&&(a=e?d.extend(new b(c),a):d.extend(a,new b(c),!0),a.listeners))for(var h in a.listeners)b=a.listeners[h],a.addListener(b.event,b.method);return a},d.fixNewLines=function(a){var b=RegExp("\\n","g");return a&&(a=a.replace(b,"<br />")),a},d.fixBrakes=function(a){if(d.isModern){var b=RegExp("<br>","g");a&&(a=a.replace(b,"\n"))}else a=d.fixNewLines(a);return a},d.deleteObject=function(a,b){if(a&&((void 0===b||null===b)&&(b=20),0!==b))if("[object Array]"===Object.prototype.toString.call(a))for(var c=0;c<a.length;c++)d.deleteObject(a[c],b-1),a[c]=null;else if(a&&!a.tagName)try{for(c in a)a[c]&&("object"==typeof a[c]&&d.deleteObject(a[c],b-1),"function"!=typeof a[c]&&(a[c]=null));
}catch(e){}},d.bounce=function(a,b,c,e,d){return(b/=d)<1/2.75?7.5625*e*b*b+c:2/2.75>b?e*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?e*(7.5625*(b-=2.25/2.75)*b+.9375)+c:e*(7.5625*(b-=2.625/2.75)*b+.984375)+c},d.easeInOutQuad=function(a,b,c,e,d){return b/=d/2,1>b?e/2*b*b+c:(b--,-e/2*(b*(b-2)-1)+c)},d.easeInSine=function(a,b,c,e,d){return-e*Math.cos(b/d*(Math.PI/2))+e+c},d.easeOutSine=function(a,b,c,e,d){return e*Math.sin(b/d*(Math.PI/2))+c},d.easeOutElastic=function(a,b,c,e,d){a=1.70158;var f=0,g=e;return 0===b?c:1==(b/=d)?c+e:(f||(f=.3*d),g<Math.abs(e)?(g=e,a=f/4):a=f/(2*Math.PI)*Math.asin(e/g),g*Math.pow(2,-10*b)*Math.sin(2*(b*d-a)*Math.PI/f)+e+c)},d.fixStepE=function(a){a=a.toExponential(0).split("e");var b=Number(a[1]);return 9==Number(a[0])&&b++,d.generateNumber(1,b)},d.generateNumber=function(a,b){var e,c="";e=0>b?Math.abs(b)-1:Math.abs(b);var d;for(d=0;e>d;d++)c+="0";return 0>b?Number("0."+c+String(a)):Number(String(a)+c)},d.setCN=function(a,b,c,e){if(a.addClassNames&&b&&(b=b.node)&&c){var d=b.getAttribute("class");a=a.classNamePrefix+"-",e&&(a=""),d?b.setAttribute("class",d+" "+a+c):b.setAttribute("class",a+c)}},d.parseDefs=function(a,b){for(var c in a){var e=typeof a[c];if(0<a[c].length&&"object"==e)for(var h=0;h<a[c].length;h++)e=document.createElementNS(d.SVG_NS,c),b.appendChild(e),d.parseDefs(a[c][h],e);else"object"==e?(e=document.createElementNS(d.SVG_NS,c),b.appendChild(e),d.parseDefs(a[c],e)):b.setAttribute(c,a[c])}}}(),function(){var d=window.AmCharts;d.AxisBase=d.Class({construct:function(a){this.createEvents("clickItem","rollOverItem","rollOutItem"),this.titleDY=this.y=this.x=this.dy=this.dx=0,this.axisThickness=1,this.axisColor="#000000",this.axisAlpha=1,this.gridCount=this.tickLength=5,this.gridAlpha=.15,this.gridThickness=1,this.gridColor="#000000",this.dashLength=0,this.labelFrequency=1,this.showLastLabel=this.showFirstLabel=!0,this.fillColor="#FFFFFF",this.fillAlpha=0,this.labelsEnabled=!0,this.labelRotation=0,this.autoGridCount=!0,this.offset=0,this.guides=[],this.visible=!0,this.counter=0,this.guides=[],this.ignoreAxisWidth=this.inside=!1,this.minHorizontalGap=75,this.minVerticalGap=35,this.titleBold=!0,this.minorGridEnabled=!1,this.minorGridAlpha=.07,this.autoWrap=!1,this.titleAlign="middle",this.labelOffset=0,this.bcn="axis-",this.centerLabels=!1,this.firstDayOfWeek=1,this.centerLabelOnFullPeriod=this.markPeriodChange=this.boldPeriodBeginning=!0,this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}],this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}],this.nextPeriod={fff:"ss",ss:"mm",mm:"hh",hh:"DD",DD:"MM",MM:"YYYY"},d.applyTheme(this,a,"AxisBase")},zoom:function(a,b){this.start=a,this.end=b,this.dataChanged=!0,this.draw()},fixAxisPosition:function(){var a=this.position;"H"==this.orientation?("left"==a&&(a="bottom"),"right"==a&&(a="top")):("bottom"==a&&(a="left"),"top"==a&&(a="right")),this.position=a},init:function(){this.createBalloon()},draw:function(){var a=this.chart;this.prevBY=this.prevBX=NaN,this.allLabels=[],this.counter=0,this.destroy(),this.fixAxisPosition(),this.setBalloonBounds(),this.labels=[];var b=a.container,c=b.set();a.gridSet.push(c),this.set=c,b=b.set(),a.axesLabelsSet.push(b),this.labelsSet=b,this.axisLine=new this.axisRenderer(this),this.autoGridCount?("V"==this.orientation?(a=this.height/this.minVerticalGap,3>a&&(a=3)):a=this.width/this.minHorizontalGap,this.gridCountR=Math.max(a,1)):this.gridCountR=this.gridCount,this.axisWidth=this.axisLine.axisWidth,this.addTitle()},setOrientation:function(a){this.orientation=a?"H":"V"},addTitle:function(){var a=this.title;if(this.titleLabel=null,a){var b=this.chart,c=this.titleColor;void 0===c&&(c=b.color);var e=this.titleFontSize;isNaN(e)&&(e=b.fontSize+1),a=d.text(b.container,a,c,b.fontFamily,e,this.titleAlign,this.titleBold),d.setCN(b,a,this.bcn+"title"),this.titleLabel=a}},positionTitle:function(){var a=this.titleLabel;if(a){var b,c,e=this.labelsSet,h={};0<e.length()?h=e.getBBox():(h.x=0,h.y=0,h.width=this.width,h.height=this.height,d.VML&&(h.y+=this.y,h.x+=this.x)),e.push(a);var e=h.x,f=h.y;d.VML&&(this.rotate?e-=this.x:f-=this.y);var g=h.width,h=h.height,k=this.width,l=this.height,m=0,n=a.getBBox().height/2,q=this.inside,p=this.titleAlign;switch(this.position){case"top":b="left"==p?-1:"right"==p?k:k/2,c=f-10-n;break;case"bottom":b="left"==p?-1:"right"==p?k:k/2,c=f+h+10+n;break;case"left":b=e-10-n,q&&(b-=5),m=-90,c=("left"==p?l+1:"right"==p?-1:l/2)+this.titleDY;break;case"right":b=e+g+10+n,q&&(b+=7),c=("left"==p?l+2:"right"==p?-2:l/2)+this.titleDY,m=-90}this.marginsChanged?(a.translate(b,c),this.tx=b,this.ty=c):a.translate(this.tx,this.ty),this.marginsChanged=!1,isNaN(this.titleRotation)||(m=this.titleRotation),0!==m&&a.rotate(m)}},pushAxisItem:function(a,b){var c=this,e=a.graphics();0<e.length()&&(b?c.labelsSet.push(e):c.set.push(e)),(e=a.getLabel())&&(this.labelsSet.push(e),e.click(function(b){c.handleMouse(b,a,"clickItem")}).mouseover(function(b){c.handleMouse(b,a,"rollOverItem")}).mouseout(function(b){c.handleMouse(b,a,"rollOutItem")}))},handleMouse:function(a,b,c){this.fire({type:c,value:b.value,serialDataItem:b.serialDataItem,axis:this,target:b.label,chart:this.chart,event:a})},addGuide:function(a){for(var b=this.guides,c=!1,e=b.length,h=0;h<b.length;h++)b[h]==a&&(c=!0,e=h);a=d.processObject(a,d.Guide,this.theme),a.id||(a.id="guideAuto"+e+"_"+(new Date).getTime()),c||b.push(a)},removeGuide:function(a){var c,b=this.guides;for(c=0;c<b.length;c++)b[c]==a&&b.splice(c,1)},handleGuideOver:function(a){clearTimeout(this.chart.hoverInt);var b=a.graphics.getBBox(),c=this.x+b.x+b.width/2,b=this.y+b.y+b.height/2,e=a.fillColor;void 0===e&&(e=a.lineColor),this.chart.showBalloon(a.balloonText,e,!0,c,b)},handleGuideOut:function(){this.chart.hideBalloon()},addEventListeners:function(a,b){var c=this;a.mouseover(function(){c.handleGuideOver(b)}),a.touchstart(function(){c.handleGuideOver(b)}),a.mouseout(function(){c.handleGuideOut(b)})},getBBox:function(){var a;return this.labelsSet&&(a=this.labelsSet.getBBox()),a?d.VML||(a={x:a.x+this.x,y:a.y+this.y,width:a.width,height:a.height}):a={x:0,y:0,width:0,height:0},a},destroy:function(){d.remove(this.set),d.remove(this.labelsSet);var a=this.axisLine;a&&d.remove(a.axisSet),d.remove(this.grid0)},chooseMinorFrequency:function(a){for(var b=10;b>0;b--)if(a/b==Math.round(a/b))return a/b},parseDatesDraw:function(){var a,h,l,m,n,q,p,b=this.chart,c=this.showFirstLabel,e=this.showLastLabel,f="",g=d.extractPeriod(this.minPeriod),k=d.getPeriodDuration(g.period,g.count),t=this.firstDayOfWeek,r=this.boldPeriodBeginning;a=this.minorGridEnabled;var u,y,w=this.gridAlpha,x=this.choosePeriod(0),A=x.period,x=x.count,z=d.getPeriodDuration(A,x);k>z&&(A=g.period,x=g.count,z=k),g=A,"WW"==g&&(g="DD"),this.stepWidth=this.getStepWidth(this.timeDifference);var B=Math.ceil(this.timeDifference/z)+5,C=l=d.resetDateToMin(new Date(this.startTime-z),A,x,t).getTime();(g==A&&1==x&&this.centerLabelOnFullPeriod||this.autoWrap||this.centerLabels)&&(n=z*this.stepWidth,this.autoWrap&&!this.centerLabels&&(n=-n)),this.cellWidth=k*this.stepWidth,q=Math.round(l/z),k=-1,q/2==Math.round(q/2)&&(k=-2,l-=z),q=this.firstTime;var D=0,L=0;if(a&&x>1&&(u=this.chooseMinorFrequency(x),y=d.getPeriodDuration(A,u),"DD"==A&&(y+=d.getPeriodDuration("hh"))),0<this.gridCountR)for(B-5-k>this.autoRotateCount&&!isNaN(this.autoRotateAngle)&&(this.labelRotationR=this.autoRotateAngle),a=k;B>=a;a++){if(p=q+z*(a+Math.floor((C-q)/z))-D,"DD"==A&&(p+=36e5),p=d.resetDateToMin(new Date(p),A,x,t).getTime(),"MM"==A&&(h=(p-l)/z,(p-l)/z>=1.5&&(p=p-(h-1)*z+d.getPeriodDuration("DD",3),p=d.resetDateToMin(new Date(p),A,1).getTime(),D+=z)),h=(p-this.startTime)*this.stepWidth,"radar"==b.type){if(h=this.axisWidth-h,0>h||h>this.axisWidth)continue}else this.rotate?"date"==this.type&&"middle"==this.gridPosition&&(L=-z*this.stepWidth/2):"date"==this.type&&(h=this.axisWidth-h);if(f=!1,this.nextPeriod[g]&&(f=this.checkPeriodChange(this.nextPeriod[g],1,p,l,g)),l=!1,f&&this.markPeriodChange?(f=this.dateFormatsObject[this.nextPeriod[g]],this.twoLineMode&&(f=this.dateFormatsObject[g]+"\n"+f,f=d.fixBrakes(f)),l=!0):f=this.dateFormatsObject[g],r||(l=!1),this.currentDateFormat=f,f=d.formatDate(new Date(p),f,b),(a==k&&!c||a==B&&!e)&&(f=" "),this.labelFunction&&(f=this.labelFunction(f,new Date(p),this,A,x,m).toString()),this.boldLabels&&(l=!0),m=new this.axisItemRenderer(this,h,f,!1,n,L,!1,l),this.pushAxisItem(m),m=l=p,!isNaN(u))for(h=1;x>h;h+=u)this.gridAlpha=this.minorGridAlpha,f=p+y*h,f=d.resetDateToMin(new Date(f),A,u,t).getTime(),f=new this.axisItemRenderer(this,(f-this.startTime)*this.stepWidth,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0),this.pushAxisItem(f);this.gridAlpha=w}},choosePeriod:function(a){var b=d.getPeriodDuration(this.periods[a].period,this.periods[a].count),c=this.periods;return this.timeDifference<b&&a>0?c[a-1]:Math.ceil(this.timeDifference/b)<=this.gridCountR?c[a]:a+1<c.length?this.choosePeriod(a+1):c[a]},getStepWidth:function(a){var b;return this.startOnAxis?(b=this.axisWidth/(a-1),1==a&&(b=this.axisWidth)):b=this.axisWidth/a,b},timeZoom:function(a,b){this.startTime=a,this.endTime=b},minDuration:function(){var a=d.extractPeriod(this.minPeriod);return d.getPeriodDuration(a.period,a.count)},checkPeriodChange:function(a,b,c,e,h){c=new Date(c);var f=new Date(e),g=this.firstDayOfWeek;return e=b,"DD"==a&&(b=1),c=d.resetDateToMin(c,a,b,g).getTime(),b=d.resetDateToMin(f,a,b,g).getTime(),"DD"==a&&"hh"!=h&&c-b<d.getPeriodDuration(a,e)?!1:c!=b?!0:!1},generateDFObject:function(){this.dateFormatsObject={};var a;for(a=0;a<this.dateFormats.length;a++){var b=this.dateFormats[a];this.dateFormatsObject[b.period]=b.format}},hideBalloon:function(){this.balloon&&this.balloon.hide&&this.balloon.hide(),this.prevBY=this.prevBX=NaN},formatBalloonText:function(a){return a},showBalloon:function(a,b,c,e){var d=this.offset;switch(this.position){case"bottom":b=this.height+d;break;case"top":b=-d;break;case"left":a=-d;break;case"right":a=this.width+d}if(c||(c=this.currentDateFormat),"V"==this.orientation){if(0>b||b>this.height)return;if(isNaN(b))return void this.hideBalloon();b=this.adjustBalloonCoordinate(b,e),e=this.coordinateToValue(b)}else{if(0>a||a>this.width)return;if(isNaN(a))return void this.hideBalloon();a=this.adjustBalloonCoordinate(a,e),e=this.coordinateToValue(a)}var f;(d=this.chart.chartCursor)&&(f=d.index),this.balloon&&void 0!==e&&this.balloon.enabled&&(this.balloonTextFunction?(("date"==this.type||!0===this.parseDates)&&(e=new Date(e)),e=this.balloonTextFunction(e)):this.balloonText?e=this.formatBalloonText(this.balloonText,f,c):isNaN(e)||(e=this.formatValue(e,c)),(a!=this.prevBX||b!=this.prevBY)&&(this.balloon.setPosition(a,b),this.prevBX=a,this.prevBY=b,e&&this.balloon.showBalloon(e)))},adjustBalloonCoordinate:function(a){return a},createBalloon:function(){var a=this.chart,b=a.chartCursor;b&&(b=b.cursorPosition,"mouse"!=b&&(this.stickBalloonToCategory=!0),"start"==b&&(this.stickBalloonToStart=!0),"ValueAxis"==this.cname&&(this.stickBalloonToCategory=!1)),this.balloon&&(this.balloon.destroy&&this.balloon.destroy(),d.extend(this.balloon,a.balloon,!0))},setBalloonBounds:function(){var a=this.balloon;if(a){var b=this.chart;a.cornerRadius=0,a.shadowAlpha=0,a.borderThickness=1,a.borderAlpha=1,a.adjustBorderColor=!1,a.showBullet=!1,this.balloon=a,a.chart=b,a.mainSet=b.plotBalloonsSet,a.pointerWidth=this.tickLength,(this.parseDates||"date"==this.type)&&(a.pointerWidth=0),b="V","V"==this.orientation&&(b="H"),this.stickBalloonToCategory||(a.animationDuration=0);var c,e,d,f,g=this.inside,k=this.width,l=this.height;switch(this.position){case"bottom":c=0,e=k,g?(d=0,f=l):(d=l,f=l+1e3);break;case"top":c=0,e=k,g?(d=0,f=l):(d=-1e3,f=0);break;case"left":d=0,f=l,g?(c=0,e=k):(c=-1e3,e=0);break;case"right":d=0,f=l,g?(c=0,e=k):(c=k,e=k+1e3)}a.drop||(a.pointerOrientation=b),a.setBounds(c,d,e,f)}}})}(),function(){var d=window.AmCharts;d.ValueAxis=d.Class({inherits:d.AxisBase,construct:function(a){this.cname="ValueAxis",this.createEvents("axisChanged","logarithmicAxisFailed","axisZoomed","axisIntZoomed"),d.ValueAxis.base.construct.call(this,a),this.dataChanged=!0,this.stackType="none",this.position="left",this.unitPosition="right",this.includeAllValues=this.recalculateToPercents=this.includeHidden=this.includeGuidesInMinMax=this.integersOnly=!1,this.durationUnits={DD:"d. ",hh:":",mm:":",ss:""},this.scrollbar=!1,this.baseValue=0,this.radarCategoriesEnabled=!0,this.gridType="polygons",this.useScientificNotation=!1,this.axisTitleOffset=10,this.pointPosition="axis",this.minMaxMultiplier=1,this.logGridLimit=2,this.totalTextOffset=this.treatZeroAs=0,this.minPeriod="ss",this.relativeStart=0,this.relativeEnd=1,d.applyTheme(this,a,this.cname)},updateData:function(){0>=this.gridCountR&&(this.gridCountR=1),this.totals=[],this.data=this.chart.chartData;var a=this.chart;"xy"!=a.type&&(this.stackGraphs("smoothedLine"),this.stackGraphs("line"),this.stackGraphs("column"),this.stackGraphs("step")),this.recalculateToPercents&&this.recalculate(),this.synchronizationMultiplier&&this.synchronizeWith?(d.isString(this.synchronizeWith)&&(this.synchronizeWith=a.getValueAxisById(this.synchronizeWith)),this.synchronizeWith&&(this.synchronizeWithAxis(this.synchronizeWith),this.foundGraphs=!0)):(this.foundGraphs=!1,this.getMinMax(),0===this.start&&this.end==this.data.length-1&&isNaN(this.minZoom)&&isNaN(this.maxZoom)&&(this.fullMin=this.min,this.fullMax=this.max,"date"!=this.type&&(isNaN(this.minimum)||(this.fullMin=this.minimum),isNaN(this.maximum)||(this.fullMax=this.maximum)),this.logarithmic&&(this.fullMin=this.logMin,0===this.fullMin&&(this.fullMin=this.treatZeroAs)),"date"==this.type&&(this.minimumDate||(this.fullMin=this.minRR),this.maximumDate||(this.fullMax=this.maxRR))))},draw:function(){d.ValueAxis.base.draw.call(this);var a=this.chart,b=this.set;this.labelRotationR=this.labelRotation,d.setCN(a,this.set,"value-axis value-axis-"+this.id),d.setCN(a,this.labelsSet,"value-axis value-axis-"+this.id),d.setCN(a,this.axisLine.axisSet,"value-axis value-axis-"+this.id);var c=this.type;if("duration"==c&&(this.duration="ss"),!0===this.dataChanged&&(this.updateData(),this.dataChanged=!1),"date"==c&&(this.logarithmic=!1,this.min=this.minRR,this.max=this.maxRR,this.reversed=!1,this.getDateMinMax()),this.logarithmic){var e=this.treatZeroAs,h=this.getExtremes(0,this.data.length-1).min;if(this.logMin=h,this.minReal<h&&(this.minReal=h),isNaN(this.minReal)&&(this.minReal=h),e>0&&0===h&&(this.minReal=h=e),0>=h||0>=this.minimum)return void this.fire({type:"logarithmicAxisFailed",chart:a})}this.grid0=null;var f,g,k=a.dx,l=a.dy,e=!1,h=this.logarithmic;if(isNaN(this.min)||isNaN(this.max)||!this.foundGraphs||1/0==this.min||-(1/0)==this.max)e=!0;else{"date"==this.type&&this.min==this.max&&(this.max+=this.minDuration(),this.min-=this.minDuration());var m=this.labelFrequency,n=this.showFirstLabel,q=this.showLastLabel,p=1,t=0;if(this.minCalc=this.min,this.maxCalc=this.max,this.strictMinMax&&(isNaN(this.minimum)||(this.min=this.minimum),isNaN(this.maximum)||(this.max=this.maximum)),isNaN(this.minZoom)||(this.minReal=this.min=this.minZoom),isNaN(this.maxZoom)||(this.max=this.maxZoom),this.logarithmic){g=Math.log(this.fullMax)*Math.LOG10E-Math.log(this.fullMin)*Math.LOG10E;var r=Math.log(this.max)/Math.LN10-Math.log(this.fullMin)*Math.LOG10E;this.relativeStart=(Math.log(this.minReal)/Math.LN10-Math.log(this.fullMin)*Math.LOG10E)/g,this.relativeEnd=r/g}else this.relativeStart=d.fitToBounds((this.min-this.fullMin)/(this.fullMax-this.fullMin),0,1),this.relativeEnd=d.fitToBounds((this.max-this.fullMin)/(this.fullMax-this.fullMin),0,1);var u,r=Math.round((this.maxCalc-this.minCalc)/this.step)+1;!0===h?(u=Math.log(this.max)*Math.LOG10E-Math.log(this.minReal)*Math.LOG10E,this.stepWidth=this.axisWidth/u,u>this.logGridLimit&&(r=Math.ceil(Math.log(this.max)*Math.LOG10E)+1,t=Math.round(Math.log(this.minReal)*Math.LOG10E),r>this.gridCountR&&(p=Math.ceil(r/this.gridCountR)))):this.stepWidth=this.axisWidth/(this.max-this.min);var w=0;1>this.step&&-1<this.step&&(w=d.getDecimals(this.step)),this.integersOnly&&(w=0),w>this.maxDecCount&&(w=this.maxDecCount);var y=this.precision;for(isNaN(y)||(w=y),isNaN(this.maxZoom)&&(this.max=d.roundTo(this.max,this.maxDecCount),this.min=d.roundTo(this.min,this.maxDecCount)),g={},g.precision=w,g.decimalSeparator=a.nf.decimalSeparator,g.thousandsSeparator=a.nf.thousandsSeparator,this.numberFormatter=g,this.exponential=!1,g=t;r>g;g+=p){var x=d.roundTo(this.step*g+this.min,w);-1!=String(x).indexOf("e")&&(this.exponential=!0)}this.duration&&(this.maxInterval=d.getMaxInterval(this.max,this.duration));var A,w=this.step,x=this.minorGridAlpha;if(this.minorGridEnabled&&(A=this.getMinorGridStep(w,this.stepWidth*w)),this.autoGridCount||0!==this.gridCount)if("date"==c)this.generateDFObject(),this.timeDifference=this.max-this.min,this.maxTime=this.lastTime=this.max,this.startTime=this.firstTime=this.min,this.parseDatesDraw();else for(r>=this.autoRotateCount&&!isNaN(this.autoRotateAngle)&&(this.labelRotationR=this.autoRotateAngle),h&&r++,g=t;r>g;g+=p)if(c=w*g+this.minCalc,c=d.roundTo(c,this.maxDecCount+1),(!this.integersOnly||Math.round(c)==c)&&(isNaN(y)||Number(d.toFixed(c,y))==c)){!0===h&&(0===c&&(c=this.minReal),u>this.logGridLimit&&(c=Math.pow(10,g))),t=this.formatValue(c,!1,g),Math.round(g/m)!=g/m&&(t=void 0),(0===g&&!n||g==r-1&&!q)&&(t=" "),f=this.getCoordinate(c);var z;if(this.rotate&&this.autoWrap&&(z=this.stepWidth*w-10),t=new this.axisItemRenderer(this,f,t,void 0,z,void 0,void 0,this.boldLabels),this.pushAxisItem(t),c==this.baseValue&&"radar"!=a.type){var B,C,t=this.width,D=this.height;"H"==this.orientation?f>=0&&t+1>=f&&(B=[f,f,f+k],C=[D,0,l]):f>=0&&D+1>=f&&(B=[0,t,t+k],C=[f,f,f+l]),B&&(t=d.fitToBounds(2*this.gridAlpha,0,1),isNaN(this.zeroGridAlpha)||(t=this.zeroGridAlpha),t=d.line(a.container,B,C,this.gridColor,t,1,this.dashLength),t.translate(this.x,this.y),this.grid0=t,a.axesSet.push(t),t.toBack(),d.setCN(a,t,this.bcn+"zero-grid-"+this.id),d.setCN(a,t,this.bcn+"zero-grid"))}if(!isNaN(A)&&x>0&&r-1>g){for(t=w/A,h&&(A=w*(g+p)+this.minCalc,A=d.roundTo(A,this.maxDecCount+1),u>this.logGridLimit&&(A=Math.pow(10,g+p)),t=10,A=(A-c)/t),f=this.gridAlpha,this.gridAlpha=this.minorGridAlpha,D=1;t>D;D++){var L=this.getCoordinate(c+A*D),L=new this.axisItemRenderer(this,L,"",!1,0,0,!1,!1,0,!0);this.pushAxisItem(L)}this.gridAlpha=f}}if(u=this.guides,z=u.length,z>0){for(B=this.fillAlpha,g=this.fillAlpha=0;z>g;g++)C=u[g],k=NaN,A=C.above,isNaN(C.toValue)||(k=this.getCoordinate(C.toValue),t=new this.axisItemRenderer(this,k,"",!0,NaN,NaN,C),this.pushAxisItem(t,A)),l=NaN,isNaN(C.value)||(l=this.getCoordinate(C.value),t=new this.axisItemRenderer(this,l,C.label,!0,NaN,(k-l)/2,C),this.pushAxisItem(t,A)),isNaN(k)&&(l-=3,k=l+3),isNaN(k-l)||(k=new this.guideFillRenderer(this,l,k,C),this.pushAxisItem(k,A),A=k.graphics(),C.graphics=A,C.balloonText&&this.addEventListeners(A,C));this.fillAlpha=B}g=this.baseValue,this.min>this.baseValue&&this.max>this.baseValue&&(g=this.min),this.min<this.baseValue&&this.max<this.baseValue&&(g=this.max),h&&g<this.minReal&&(g=this.minReal),this.baseCoord=this.getCoordinate(g,!0),g={type:"axisChanged",target:this,chart:a},g.min=h?this.minReal:this.min,g.max=this.max,this.fire(g),this.axisCreated=!0}h=this.axisLine.set,g=this.labelsSet,b.translate(this.x,this.y),g.translate(this.x,this.y),this.positionTitle(),"radar"!=a.type&&h.toFront(),!this.visible||e?(b.hide(),h.hide(),g.hide()):(b.show(),h.show(),g.show()),this.axisY=this.y,this.axisX=this.x},getDateMinMax:function(){this.minimumDate&&(this.minimumDate instanceof Date||(this.minimumDate=d.getDate(this.minimumDate,this.chart.dataDateFormat,"fff")),this.min=this.minimumDate.getTime()),this.maximumDate&&(this.maximumDate instanceof Date||(this.maximumDate=d.getDate(this.maximumDate,this.chart.dataDateFormat,"fff")),this.max=this.maximumDate.getTime())},formatValue:function(a,b,c){var e=this.exponential,h=this.logarithmic,f=this.numberFormatter,g=this.chart;return f?(!0===this.logarithmic&&(e=-1!=String(a).indexOf("e")?!0:!1),this.useScientificNotation&&(e=!0),this.usePrefixes&&(e=!1),e?(c=-1==String(a).indexOf("e")?a.toExponential(15):String(a),e=c.split("e"),c=Number(e[0]),e=Number(e[1]),c=d.roundTo(c,14),10==c&&(c=1,e+=1),c=c+"e"+e,0===a&&(c="0"),1==a&&(c="1")):(h&&(e=String(a).split("."),e[1]?(f.precision=e[1].length,0>c&&(f.precision=Math.abs(c)),b&&a>1&&(f.precision=0)):f.precision=-1),c=this.usePrefixes?d.addPrefix(a,g.prefixesOfBigNumbers,g.prefixesOfSmallNumbers,f,!b):d.formatNumber(a,f,f.precision)),this.duration&&(b&&(f.precision=0),c=d.formatDuration(a,this.duration,"",this.durationUnits,this.maxInterval,f)),"date"==this.type&&(c=d.formatDate(new Date(a),this.currentDateFormat,g)),this.recalculateToPercents?c+="%":(b=this.unit)&&(c="left"==this.unitPosition?b+c:c+b),this.labelFunction&&(c="date"==this.type?this.labelFunction(c,new Date(a),this).toString():this.labelFunction(a,c,this).toString()),c):void 0},getMinorGridStep:function(a,b){var c=[5,4,2];60>b&&c.shift();for(var e=Math.floor(Math.log(Math.abs(a))*Math.LOG10E),d=0;d<c.length;d++){var f=a/c[d],g=Math.floor(Math.log(Math.abs(f))*Math.LOG10E);if(!(1<Math.abs(e-g)))if(1>a){if(g=Math.pow(10,-g)*f,g==Math.round(g))return f}else if(f==Math.round(f))return f}},stackGraphs:function(a){var b=this.stackType;"stacked"==b&&(b="regular"),"line"==b&&(b="none"),"100% stacked"==b&&(b="100%"),this.stackType=b;var g,l,m,n,q,p,c=[],e=[],h=[],f=[],k=this.chart.graphs,t=this.baseValue,r=!1;if(("line"==a||"step"==a||"smoothedLine"==a)&&(r=!0),r&&("regular"==b||"100%"==b))for(q=0;q<k.length;q++)n=k[q],n.stackGraph=null,n.hidden||(m=n.type,n.chart==this.chart&&n.valueAxis==this&&a==m&&n.stackable&&(l&&(n.stackGraph=l),l=n));for(n=this.start-10,l=this.end+10,q=this.data.length-1,n=d.fitToBounds(n,0,q),l=d.fitToBounds(l,0,q),p=n;l>=p;p++){var u=0;for(q=0;q<k.length;q++)if(n=k[q],n.hidden)n.newStack&&(h[p]=NaN,e[p]=NaN);else if(m=n.type,n.chart==this.chart&&n.valueAxis==this&&a==m&&n.stackable)if(m=this.data[p].axes[this.id].graphs[n.id],g=m.values.value,isNaN(g))n.newStack&&(h[p]=NaN,e[p]=NaN);else{var w=d.getDecimals(g);w>u&&(u=w),isNaN(f[p])?f[p]=Math.abs(g):f[p]+=Math.abs(g),f[p]=d.roundTo(f[p],u),w=n.fillToGraph,r&&w&&(w=this.data[p].axes[this.id].graphs[w.id])&&(m.values.open=w.values.value),"regular"==b&&(r&&(isNaN(c[p])?(c[p]=g,m.values.close=g,m.values.open=this.baseValue):(isNaN(g)?m.values.close=c[p]:m.values.close=g+c[p],m.values.open=c[p],c[p]=m.values.close)),"column"==a&&(n.newStack&&(h[p]=NaN,e[p]=NaN),m.values.close=g,0>g?(m.values.close=g,isNaN(e[p])?m.values.open=t:(m.values.close+=e[p],m.values.open=e[p]),e[p]=m.values.close):(m.values.close=g,isNaN(h[p])?m.values.open=t:(m.values.close+=h[p],m.values.open=h[p]),h[p]=m.values.close)))}}for(p=this.start;p<=this.end;p++)for(q=0;q<k.length;q++)n=k[q],n.hidden?n.newStack&&(h[p]=NaN,e[p]=NaN):(m=n.type,n.chart==this.chart&&n.valueAxis==this&&a==m&&n.stackable&&(m=this.data[p].axes[this.id].graphs[n.id],g=m.values.value,isNaN(g)||(c=g/f[p]*100,m.values.percents=c,m.values.total=f[p],n.newStack&&(h[p]=NaN,e[p]=NaN),"100%"==b&&(isNaN(e[p])&&(e[p]=0),isNaN(h[p])&&(h[p]=0),0>c?(m.values.close=d.fitToBounds(c+e[p],-100,100),m.values.open=e[p],e[p]=m.values.close):(m.values.close=d.fitToBounds(c+h[p],-100,100),m.values.open=h[p],h[p]=m.values.close)))))},recalculate:function(){var c,a=this.chart,b=a.graphs;for(c=0;c<b.length;c++){var e=b[c];if(e.valueAxis==this){var h="value";("candlestick"==e.type||"ohlc"==e.type)&&(h="open");var f,g,k=this.end+2,k=d.fitToBounds(this.end+1,0,this.data.length-1),l=this.start;l>0&&l--;var m;if(g=this.start,e.compareFromStart&&(g=0),!isNaN(a.startTime)&&(m=a.categoryAxis)){var n=m.minDuration(),n=new Date(a.startTime+n/2),q=d.resetDateToMin(new Date(a.startTime),m.minPeriod).getTime();d.resetDateToMin(new Date(n),m.minPeriod).getTime()>q&&g++}for((m=a.recalculateFromDate)&&(m=d.getDate(m,a.dataDateFormat,"fff"),g=a.getClosestIndex(a.chartData,"time",m.getTime(),!0,0,a.chartData.length),k=a.chartData.length-1),m=g;k>=m&&(g=this.data[m].axes[this.id].graphs[e.id],f=g.values[h],e.recalculateValue&&(f=g.dataContext[e.valueField+e.recalculateValue]),isNaN(f));m++);for(this.recBaseValue=f,h=l;k>=h;h++){g=this.data[h].axes[this.id].graphs[e.id],g.percents={};var p,l=g.values;for(p in l)g.percents[p]="percents"!=p?l[p]/f*100-100:l[p]}}}},getMinMax:function(){var e,a=!1,b=this.chart,c=b.graphs;for(e=0;e<c.length;e++){var h=c[e].type;("line"==h||"step"==h||"smoothedLine"==h)&&this.expandMinMax&&(a=!0)}if(a&&(0<this.start&&this.start--,this.end<this.data.length-1&&this.end++),"serial"==b.type&&(!0!==b.categoryAxis.parseDates||a||this.end<this.data.length-1&&this.end++),this.includeAllValues&&(this.start=0,this.end=this.data.length-1),a=this.minMaxMultiplier,b=this.getExtremes(this.start,this.end),this.min=b.min,this.max=b.max,this.minRR=this.min,this.maxRR=this.max,a=(this.max-this.min)*(a-1),this.min-=a,this.max+=a,a=this.guides.length,this.includeGuidesInMinMax&&a>0)for(b=0;a>b;b++)c=this.guides[b],c.toValue<this.min&&(this.min=c.toValue),c.value<this.min&&(this.min=c.value),c.toValue>this.max&&(this.max=c.toValue),c.value>this.max&&(this.max=c.value);isNaN(this.minimum)||(this.min=this.minimum),isNaN(this.maximum)||(this.max=this.maximum),"date"==this.type&&this.getDateMinMax(),this.min>this.max&&(a=this.max,this.max=this.min,this.min=a),isNaN(this.minZoom)||(this.min=this.minZoom),isNaN(this.maxZoom)||(this.max=this.maxZoom),this.minCalc=this.min,this.maxCalc=this.max,this.minReal=this.min,this.maxReal=this.max,0===this.min&&0===this.max&&(this.max=9),this.min>this.max&&(this.min=this.max-1),a=this.min,b=this.max,c=this.max-this.min,e=0===c?Math.pow(10,Math.floor(Math.log(Math.abs(this.max))*Math.LOG10E))/10:Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E))/10,isNaN(this.maximum)&&(this.max=Math.ceil(this.max/e)*e+e),isNaN(this.minimum)&&(this.min=Math.floor(this.min/e)*e-e),0>this.min&&a>=0&&(this.min=0),0<this.max&&0>=b&&(this.max=0),"100%"==this.stackType&&(this.min=0>this.min?-100:0,this.max=0>this.max?0:100),c=this.max-this.min,e=Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E))/10,this.step=Math.ceil(c/this.gridCountR/e)*e,c=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),c=d.fixStepE(c),e=Math.ceil(this.step/c),e>5&&(e=10),5>=e&&e>2&&(e=5),this.step=Math.ceil(this.step/(c*e))*c*e,1>c?(this.maxDecCount=Math.abs(Math.log(Math.abs(c))*Math.LOG10E),this.maxDecCount=Math.round(this.maxDecCount),this.step=d.roundTo(this.step,this.maxDecCount+1)):this.maxDecCount=0,this.min=this.step*Math.floor(this.min/this.step),this.max=this.step*Math.ceil(this.max/this.step),0>this.min&&a>=0&&(this.min=0),0<this.max&&0>=b&&(this.max=0),1<this.minReal&&1<this.max-this.minReal&&(this.minReal=Math.floor(this.minReal)),c=Math.pow(10,Math.floor(Math.log(Math.abs(this.minReal))*Math.LOG10E)),0===this.min&&(this.minReal=c),0===this.min&&1<this.minReal&&(this.minReal=1),0<this.min&&0<this.minReal-this.step&&(this.minReal=this.min+this.step<this.minReal?this.min+this.step:this.min),this.logarithmic&&(2<Math.log(b)*Math.LOG10E-Math.log(a)*Math.LOG10E?(this.minReal=this.min=Math.pow(10,Math.floor(Math.log(Math.abs(a))*Math.LOG10E)),this.max=Math.pow(10,Math.ceil(Math.log(Math.abs(b))*Math.LOG10E))):(a=Math.pow(10,Math.floor(Math.log(Math.abs(a))*Math.LOG10E))/10,Math.pow(10,Math.floor(Math.log(Math.abs(this.min))*Math.LOG10E))/10<a&&(this.minReal=this.min=10*a)))},getExtremes:function(a,b){var c,e,d;for(d=a;b>=d;d++){var g,f=this.data[d].axes[this.id].graphs;for(g in f)if(f.hasOwnProperty(g)){var k=this.chart.graphsById[g];if(k.includeInMinMax&&(!k.hidden||this.includeHidden)){isNaN(c)&&(c=1/0),isNaN(e)&&(e=-(1/0)),this.foundGraphs=!0,k=f[g].values,this.recalculateToPercents&&(k=f[g].percents);var l;if(this.minMaxField)l=k[this.minMaxField],c>l&&(c=l),l>e&&(e=l);else for(var m in k)k.hasOwnProperty(m)&&"percents"!=m&&"total"!=m&&(l=k[m],c>l&&(c=l),l>e&&(e=l))}}}return{min:c,max:e}},zoomOut:function(){this.maxZoom=this.minZoom=NaN,this.zoomToRelativeValues(0,1)},zoomToRelativeValues:function(a,b,c){if(this.reversed){var e=a;a=1-b,b=1-e}var d=this.fullMax,e=this.fullMin,f=e+(d-e)*a,g=e+(d-e)*b;return this.logarithmic&&(d=Math.log(d)*Math.LOG10E-Math.log(e)*Math.LOG10E,f=Math.pow(10,d*a+Math.log(e)*Math.LOG10E),g=Math.pow(10,d*b+Math.log(e)*Math.LOG10E)),this.zoomToValues(f,g,c)},zoomToValues:function(a,b,c){if(a>b){var e=b;b=a,a=e}var h=this.fullMax,e=this.fullMin;if(this.relativeStart=(a-e)/(h-e),this.relativeEnd=(b-e)/(h-e),this.logarithmic){var h=Math.log(h)*Math.LOG10E-Math.log(e)*Math.LOG10E,f=Math.log(b)/Math.LN10-Math.log(e)*Math.LOG10E;this.relativeStart=(Math.log(a)/Math.LN10-Math.log(e)*Math.LOG10E)/h,this.relativeEnd=f/h}return this.minZoom!=a||this.maxZoom!=b?((0!==this.relativeStart||1!=this.relativeEnd)&&(this.minZoom=a,this.maxZoom=b),e={type:"axisZoomed"},e.chart=this.chart,e.valueAxis=this,e.startValue=a,e.endValue=b,e.relativeStart=this.relativeStart,e.relativeEnd=this.relativeEnd,this.prevStartValue==a&&this.prevEndValue==b||this.fire(e),this.prevStartValue=a,this.prevEndValue=b,c||(a={},d.copyProperties(e,a),a.type="axisIntZoomed",this.fire(a)),!0):void 0},coordinateToValue:function(a){if(isNaN(a))return NaN;var b=this.axisWidth,c=this.stepWidth,e=this.reversed,d=this.rotate,f=this.min,g=this.minReal;return!0===this.logarithmic?Math.pow(10,(d?!0===e?(b-a)/c:a/c:!0===e?a/c:(b-a)/c)+Math.log(g)*Math.LOG10E):!0===e?d?f-(a-b)/c:a/c+f:d?a/c+f:f-(a-b)/c},getCoordinate:function(a,b){if(isNaN(a))return NaN;var c=this.rotate,e=this.reversed,d=this.axisWidth,f=this.stepWidth,g=this.min,k=this.minReal;return!0===this.logarithmic?(0===a&&(a=this.treatZeroAs),g=Math.log(a)*Math.LOG10E-Math.log(k)*Math.LOG10E,c=c?!0===e?d-f*g:f*g:!0===e?f*g:d-f*g):c=!0===e?c?d-f*(a-g):f*(a-g):c?f*(a-g):d-f*(a-g),1e7<Math.abs(c)&&(c=c/Math.abs(c)*1e7),b||(c=Math.round(c)),c},synchronizeWithAxis:function(a){this.synchronizeWith=a,this.listenTo(this.synchronizeWith,"axisChanged",this.handleSynchronization)},handleSynchronization:function(){if(this.synchronizeWith){d.isString(this.synchronizeWith)&&(this.synchronizeWith=this.chart.getValueAxisById(this.synchronizeWith));var a=this.synchronizeWith,b=a.min,c=a.max,a=a.step,e=this.synchronizationMultiplier;e&&(this.min=b*e,this.max=c*e,this.step=a*e,b=Math.abs(Math.log(Math.abs(Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E))))*Math.LOG10E),this.maxDecCount=b=Math.round(b),this.draw())}}})}(),function(){var d=window.AmCharts;d.RecAxis=d.Class({construct:function(a){var b=a.chart,c=a.axisThickness,e=a.axisColor,h=a.axisAlpha,f=a.offset,g=a.dx,k=a.dy,l=a.x,m=a.y,n=a.height,q=a.width,p=b.container;"H"==a.orientation?(e=d.line(p,[0,q],[0,0],e,h,c),this.axisWidth=a.width,"bottom"==a.position?(k=c/2+f+n+m-1,c=l):(k=-c/2-f+m+k,c=g+l)):(this.axisWidth=a.height,"right"==a.position?(e=d.line(p,[0,0,-g],[0,n,n-k],e,h,c),k=m+k,c=c/2+f+g+q+l-1):(e=d.line(p,[0,0],[0,n],e,h,c),k=m,c=-c/2-f+l)),e.translate(c,k),c=b.container.set(),c.push(e),b.axesSet.push(c),d.setCN(b,e,a.bcn+"line"),this.axisSet=c,this.set=e}})}(),function(){var d=window.AmCharts;d.RecItem=d.Class({construct:function(a,b,c,e,h,f,g,k,l,m,n,q){
b=Math.round(b);var p=a.chart;this.value=c,void 0==c&&(c=""),l||(l=0),void 0==e&&(e=!0);var t=p.fontFamily,r=a.fontSize;void 0==r&&(r=p.fontSize);var u=a.color;void 0==u&&(u=p.color),void 0!==n&&(u=n);var w=a.chart.container,y=w.set();this.set=y;var x=a.axisThickness,A=a.axisColor,z=a.axisAlpha,B=a.tickLength,C=a.gridAlpha,D=a.gridThickness,L=a.gridColor,I=a.dashLength,S=a.fillColor,O=a.fillAlpha,Q=a.labelsEnabled;n=a.labelRotationR;var fa,za,ia=a.counter,H=a.inside,Z=a.labelOffset,va=a.dx,ma=a.dy,Oa=a.orientation,ea=a.position,ca=a.previousCoord,X=a.height,ya=a.width,da=a.offset;g?(void 0!==g.id&&(q=p.classNamePrefix+"-guide-"+g.id),Q=!0,isNaN(g.tickLength)||(B=g.tickLength),void 0!=g.lineColor&&(L=g.lineColor),void 0!=g.color&&(u=g.color),isNaN(g.lineAlpha)||(C=g.lineAlpha),isNaN(g.dashLength)||(I=g.dashLength),isNaN(g.lineThickness)||(D=g.lineThickness),!0===g.inside&&(H=!0,da>0&&(da=0)),isNaN(g.labelRotation)||(n=g.labelRotation),isNaN(g.fontSize)||(r=g.fontSize),g.position&&(ea=g.position),void 0!==g.boldLabel&&(k=g.boldLabel),isNaN(g.labelOffset)||(Z=g.labelOffset)):""===c&&(B=0),m&&!isNaN(a.minorTickLength)&&(B=a.minorTickLength);var ga="start";h>0&&(ga="middle"),a.centerLabels&&(ga="middle");var Y,Ca,T=n*Math.PI/180,G=0,v=0,na=0,ha=Y=0,Pa=0;"V"==Oa&&(n=0);var ba;Q&&""!==c&&(ba=a.autoWrap&&0===n?d.wrappedText(w,c,u,t,r,ga,k,Math.abs(h),0):d.text(w,c,u,t,r,ga,k),ga=ba.getBBox(),ha=ga.width,Pa=ga.height),"H"==Oa?(b>=0&&ya+1>=b&&(B>0&&z>0&&ya+1>=b+l&&(fa=d.line(w,[b+l,b+l],[0,B],A,z,D),y.push(fa)),C>0&&(za=d.line(w,[b,b+va,b+va],[X,X+ma,ma],L,C,D,I),y.push(za))),v=0,G=b,g&&90==n&&H&&(G-=r),!1===e?(ga="start",v="bottom"==ea?H?v+B:v-B:H?v-B:v+B,G+=3,h>0&&(G+=h/2-3,ga="middle"),n>0&&(ga="middle")):ga="middle",1==ia&&O>0&&!g&&!m&&ya>ca&&(e=d.fitToBounds(b,0,ya),ca=d.fitToBounds(ca,0,ya),Y=e-ca,Y>0&&(Ca=d.rect(w,Y,a.height,S,O),Ca.translate(e-Y+va,ma),y.push(Ca))),"bottom"==ea?(v+=X+r/2+da,H?(n>0?(v=X-ha/2*Math.sin(T)-B-3,G+=ha/2*Math.cos(T)-4+2):0>n?(v=X+ha*Math.sin(T)-B-3+2,G+=-ha*Math.cos(T)-Pa*Math.sin(T)-4):v-=B+r+3+3,v-=Z):(n>0?(v=X+ha/2*Math.sin(T)+B+3,G-=ha/2*Math.cos(T)):0>n?(v=X+B+3-ha/2*Math.sin(T)+2,G+=ha/2*Math.cos(T)):v+=B+x+3+3,v+=Z)):(v+=ma+r/2-da,G+=va,H?(n>0?(v=ha/2*Math.sin(T)+B+3,G-=ha/2*Math.cos(T)):v+=B+3,v+=Z):(n>0?(v=-(ha/2)*Math.sin(T)-B-6,G+=ha/2*Math.cos(T)):v-=B+r+3+x+3,v-=Z)),"bottom"==ea?Y=(H?X-B-1:X+x-1)+da:(na=va,Y=(H?ma:ma-B-x+1)-da),f&&(G+=f),f=G,n>0&&(f+=ha/2*Math.cos(T)),ba&&(r=0,H&&(r=ha/2*Math.cos(T)),f+r>ya+2||0>f)&&(ba.remove(),ba=null)):(b>=0&&X+1>=b&&(B>0&&z>0&&X+1>=b+l&&(fa=d.line(w,[0,B+1],[b+l,b+l],A,z,D),y.push(fa)),C>0&&(za=d.line(w,[0,va,ya+va],[b,b+ma,b+ma],L,C,D,I),y.push(za))),ga="end",(!0===H&&"left"==ea||!1===H&&"right"==ea)&&(ga="start"),v=b-Pa/2+2,1==ia&&O>0&&!g&&!m&&(e=d.fitToBounds(b,0,X),ca=d.fitToBounds(ca,0,X),T=e-ca,Ca=d.polygon(w,[0,a.width,a.width,0],[0,0,T,T],S,O),Ca.translate(va,e-T+ma),y.push(Ca)),v+=r/2,"right"==ea?(G+=va+ya+da,v+=ma,H?(f||(v-=r/2+3),G=G-(B+4)-Z):(G+=B+4+x,v-=2,G+=Z)):H?(G+=B+4-da,f||(v-=r/2+3),g&&(G+=va,v+=ma),G+=Z):(G+=-B-x-4-2-da,v-=2,G-=Z),fa&&("right"==ea?(na+=va+da+ya-1,Y+=ma,na=H?na-x:na+x):(na-=da,H||(na-=B+x))),f&&(v+=f),H=-3,"right"==ea&&(H+=ma),ba&&(v>X+1||H>v)&&(ba.remove(),ba=null)),fa&&(fa.translate(na,Y),d.setCN(p,fa,a.bcn+"tick"),d.setCN(p,fa,q,!0),g&&d.setCN(p,fa,"guide")),!1===a.visible&&(fa&&fa.remove(),ba&&(ba.remove(),ba=null)),ba&&(ba.attr({"text-anchor":ga}),ba.translate(G,v,NaN,!0),0!==n&&ba.rotate(-n,a.chart.backgroundColor),a.allLabels.push(ba),this.label=ba,d.setCN(p,ba,a.bcn+"label"),d.setCN(p,ba,q,!0),g&&d.setCN(p,ba,"guide")),za&&(d.setCN(p,za,a.bcn+"grid"),d.setCN(p,za,q,!0),g&&d.setCN(p,za,"guide")),Ca&&(d.setCN(p,Ca,a.bcn+"fill"),d.setCN(p,Ca,q,!0)),m?za&&d.setCN(p,za,a.bcn+"grid-minor"):(a.counter=0===ia?1:0,a.previousCoord=b),0===this.set.node.childNodes.length&&this.set.remove()},graphics:function(){return this.set},getLabel:function(){return this.label}})}(),function(){var d=window.AmCharts;d.RecFill=d.Class({construct:function(a,b,c,e){var h=a.dx,f=a.dy,g=a.orientation,k=0;if(b>c){var l=b;b=c,c=l}var m=e.fillAlpha;isNaN(m)&&(m=0);var l=a.chart.container,n=e.fillColor;"V"==g?(b=d.fitToBounds(b,0,a.height),c=d.fitToBounds(c,0,a.height)):(b=d.fitToBounds(b,0,a.width),c=d.fitToBounds(c,0,a.width)),c-=b,isNaN(c)&&(c=4,k=2,m=0),0>c&&"object"==typeof n&&(n=n.join(",").split(",").reverse()),"V"==g?(g=d.rect(l,a.width,c,n,m),g.translate(h,b-k+f)):(g=d.rect(l,c,a.height,n,m),g.translate(b-k+h,f)),d.setCN(a.chart,g,"guide-fill"),e.id&&d.setCN(a.chart,g,"guide-fill-"+e.id),this.set=l.set([g])},graphics:function(){return this.set},getLabel:function(){}})}(),function(){var d=window.AmCharts;d.AmChart=d.Class({construct:function(a){this.svgIcons=this.tapToActivate=!0,this.theme=a,this.classNamePrefix="amcharts",this.addClassNames=!1,this.version="3.19.2",d.addChart(this),this.createEvents("buildStarted","dataUpdated","init","rendered","drawn","failed","resized","animationFinished"),this.height=this.width="100%",this.dataChanged=!0,this.chartCreated=!1,this.previousWidth=this.previousHeight=0,this.backgroundColor="#FFFFFF",this.borderAlpha=this.backgroundAlpha=0,this.color=this.borderColor="#000000",this.fontFamily="Verdana",this.fontSize=11,this.usePrefixes=!1,this.autoResize=!0,this.autoDisplay=!1,this.addCodeCredits=!0,this.precision=-1,this.percentPrecision=2,this.decimalSeparator=".",this.thousandsSeparator=",",this.labels=[],this.allLabels=[],this.titles=[],this.marginRight=this.marginLeft=this.autoMarginOffset=0,this.timeOuts=[],this.creditsPosition="top-left";var b=document.createElement("div"),c=b.style;c.overflow="hidden",c.position="relative",c.textAlign="left",this.chartDiv=b,b=document.createElement("div"),c=b.style,c.overflow="hidden",c.position="relative",c.textAlign="left",this.legendDiv=b,this.titleHeight=0,this.hideBalloonTime=150,this.handDrawScatter=2,this.handDrawThickness=1,this.prefixesOfBigNumbers=[{number:1e3,prefix:"k"},{number:1e6,prefix:"M"},{number:1e9,prefix:"G"},{number:1e12,prefix:"T"},{number:1e15,prefix:"P"},{number:1e18,prefix:"E"},{number:1e21,prefix:"Z"},{number:1e24,prefix:"Y"}],this.prefixesOfSmallNumbers=[{number:1e-24,prefix:"y"},{number:1e-21,prefix:"z"},{number:1e-18,prefix:"a"},{number:1e-15,prefix:"f"},{number:1e-12,prefix:"p"},{number:1e-9,prefix:"n"},{number:1e-6,prefix:"μ"},{number:.001,prefix:"m"}],this.panEventsEnabled=!0,this.product="amcharts",this.animations=[],this.balloon=new d.AmBalloon(this.theme),this.balloon.chart=this,this.processTimeout=0,this.processCount=1e3,this.animatable=[],d.applyTheme(this,a,"AmChart")},drawChart:function(){0<this.realWidth&&0<this.realHeight&&(this.drawBackground(),this.redrawLabels(),this.drawTitles(),this.brr(),this.renderFix(),this.chartDiv&&(this.boundingRect=this.chartDiv.getBoundingClientRect()))},drawBackground:function(){d.remove(this.background);var a=this.container,b=this.backgroundColor,c=this.backgroundAlpha,e=this.set;d.isModern||0!==c||(c=.001);var h=this.updateWidth();this.realWidth=h;var f=this.updateHeight();this.realHeight=f,b=d.polygon(a,[0,h-1,h-1,0],[0,0,f-1,f-1],b,c,1,this.borderColor,this.borderAlpha),d.setCN(this,b,"bg"),this.background=b,e.push(b),(b=this.backgroundImage)&&(a=a.image(b,0,0,h,f),d.setCN(this,b,"bg-image"),this.bgImg=a,e.push(a))},drawTitles:function(a){var b=this.titles;if(this.titleHeight=0,d.ifArray(b)){var e,c=20;for(e=0;e<b.length;e++){var h=b[e],h=d.processObject(h,d.Title,this.theme);if(!1!==h.enabled){var f=h.color;void 0===f&&(f=this.color);var g=h.size;isNaN(g)&&(g=this.fontSize+2),isNaN(h.alpha);var k=this.marginLeft,l=!0;void 0!==h.bold&&(l=h.bold),f=d.wrappedText(this.container,h.text,f,this.fontFamily,g,"middle",l,this.realWidth-35),f.translate(k+(this.realWidth-this.marginRight-k)/2,c),f.node.style.pointerEvents="none",h.sprite=f,d.setCN(this,f,"title"),h.id&&d.setCN(this,f,"title-"+h.id),f.attr({opacity:h.alpha}),c+=f.getBBox().height+5,a?f.remove():this.freeLabelsSet.push(f)}}this.titleHeight=c-10}},write:function(a){var b=this;if(b.listeners)for(var c=0;c<b.listeners.length;c++){var e=b.listeners[c];b.addListener(e.event,e.method)}b.fire({type:"buildStarted",chart:b}),b.afterWriteTO&&clearTimeout(b.afterWriteTO),0<b.processTimeout?b.afterWriteTO=setTimeout(function(){b.afterWrite.call(b,a)},b.processTimeout):b.afterWrite(a)},afterWrite:function(a){if(a="object"!=typeof a?document.getElementById(a):a){for(;a.firstChild;)a.removeChild(a.firstChild);this.div=a,a.style.overflow="hidden",a.style.textAlign="left";var b=this.chartDiv,c=this.legendDiv,e=this.legend,h=c.style,f=b.style;this.measure(),this.previousHeight=this.divRealHeight,this.previousWidth=this.divRealWidth;var g,k=document.createElement("div");g=k.style,g.position="relative",this.containerDiv=k,k.className=this.classNamePrefix+"-main-div",b.className=this.classNamePrefix+"-chart-div",a.appendChild(k);var l=this.exportConfig;if(l&&d.AmExport&&!this.AmExport&&(this.AmExport=new d.AmExport(this,l)),this.amExport&&d.AmExport&&(this.AmExport=d.extend(this.amExport,new d.AmExport(this),!0)),this.AmExport&&this.AmExport.init&&this.AmExport.init(),e){if(e=this.addLegend(e,e.divId),e.enabled)switch(h.left=null,h.top=null,h.right=null,f.left=null,f.right=null,f.top=null,h.position="relative",f.position="relative",e.position){case"bottom":k.appendChild(b),k.appendChild(c);break;case"top":k.appendChild(c),k.appendChild(b);break;case"absolute":g.width=a.style.width,g.height=a.style.height,h.position="absolute",f.position="absolute",void 0!==e.left&&(h.left=e.left+"px"),void 0!==e.right&&(h.right=e.right+"px"),void 0!==e.top&&(h.top=e.top+"px"),void 0!==e.bottom&&(h.bottom=e.bottom+"px"),e.marginLeft=0,e.marginRight=0,k.appendChild(b),k.appendChild(c);break;case"right":g.width=a.style.width,g.height=a.style.height,h.position="relative",f.position="absolute",k.appendChild(b),k.appendChild(c);break;case"left":g.width=a.style.width,g.height=a.style.height,h.position="absolute",f.position="relative",k.appendChild(b),k.appendChild(c);break;case"outside":k.appendChild(b)}else k.appendChild(b);this.prevLegendPosition=e.position}else k.appendChild(b);this.listenersAdded||(this.addListeners(),this.listenersAdded=!0),this.initChart()}},createLabelsSet:function(){d.remove(this.labelsSet),this.labelsSet=this.container.set(),this.freeLabelsSet.push(this.labelsSet)},initChart:function(){this.balloon=d.processObject(this.balloon,d.AmBalloon,this.theme),window.AmCharts_path&&(this.path=window.AmCharts_path),void 0===this.path&&(this.path=d.getPath()),void 0===this.path&&(this.path="amcharts/"),this.path=d.normalizeUrl(this.path),void 0===this.pathToImages&&(this.pathToImages=this.path+"images/"),this.initHC||(d.callInitHandler(this),this.initHC=!0),d.applyLang(this.language,this);var a=this.numberFormatter;a&&(isNaN(a.precision)||(this.precision=a.precision),void 0!==a.thousandsSeparator&&(this.thousandsSeparator=a.thousandsSeparator),void 0!==a.decimalSeparator&&(this.decimalSeparator=a.decimalSeparator)),(a=this.percentFormatter)&&!isNaN(a.precision)&&(this.percentPrecision=a.precision),this.nf={precision:this.precision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator},this.pf={precision:this.percentPrecision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator},this.destroy(),(a=this.container)?(a.container.innerHTML="",a.width=this.realWidth,a.height=this.realHeight,a.addDefs(this),this.chartDiv.appendChild(a.container)):a=new d.AmDraw(this.chartDiv,this.realWidth,this.realHeight,this),this.container=a,this.extension=".png",this.svgIcons&&d.SVG&&(this.extension=".svg"),this.checkDisplay(),a.chart=this,d.VML||d.SVG?(a.handDrawn=this.handDrawn,a.handDrawScatter=this.handDrawScatter,a.handDrawThickness=this.handDrawThickness,d.remove(this.set),this.set=a.set(),d.remove(this.gridSet),this.gridSet=a.set(),d.remove(this.cursorLineSet),this.cursorLineSet=a.set(),d.remove(this.graphsBehindSet),this.graphsBehindSet=a.set(),d.remove(this.bulletBehindSet),this.bulletBehindSet=a.set(),d.remove(this.columnSet),this.columnSet=a.set(),d.remove(this.graphsSet),this.graphsSet=a.set(),d.remove(this.trendLinesSet),this.trendLinesSet=a.set(),d.remove(this.axesSet),this.axesSet=a.set(),d.remove(this.cursorSet),this.cursorSet=a.set(),d.remove(this.scrollbarsSet),this.scrollbarsSet=a.set(),d.remove(this.bulletSet),this.bulletSet=a.set(),d.remove(this.freeLabelsSet),this.freeLabelsSet=a.set(),d.remove(this.axesLabelsSet),this.axesLabelsSet=a.set(),d.remove(this.balloonsSet),this.balloonsSet=a.set(),d.remove(this.plotBalloonsSet),this.plotBalloonsSet=a.set(),d.remove(this.zoomButtonSet),this.zoomButtonSet=a.set(),d.remove(this.zbSet),this.zbSet=null,d.remove(this.linkSet),this.linkSet=a.set()):this.fire({type:"failed",chart:this})},premeasure:function(){var a=this.div;if(a){try{this.boundingRect=this.chartDiv.getBoundingClientRect()}catch(e){}var b=a.offsetWidth,c=a.offsetHeight;a.clientHeight&&(b=a.clientWidth,c=a.clientHeight),(b!=this.mw||c!=this.mh)&&(this.mw=b,this.mh=c,this.measure())}},measure:function(){var a=this.div;if(a){var b=this.chartDiv,c=a.offsetWidth,e=a.offsetHeight,h=this.container;a.clientHeight&&(c=a.clientWidth,e=a.clientHeight);var f=d.removePx(d.getStyle(a,"padding-left")),g=d.removePx(d.getStyle(a,"padding-right")),k=d.removePx(d.getStyle(a,"padding-top")),l=d.removePx(d.getStyle(a,"padding-bottom"));isNaN(f)||(c-=f),isNaN(g)||(c-=g),isNaN(k)||(e-=k),isNaN(l)||(e-=l),f=a.style,a=f.width,f=f.height,-1!=a.indexOf("px")&&(c=d.removePx(a)),-1!=f.indexOf("px")&&(e=d.removePx(f)),e=Math.round(e),c=Math.round(c),a=Math.round(d.toCoordinate(this.width,c)),f=Math.round(d.toCoordinate(this.height,e)),(c!=this.previousWidth||e!=this.previousHeight)&&a>0&&f>0&&(b.style.width=a+"px",b.style.height=f+"px",b.style.padding=0,h&&h.setSize(a,f),this.balloon=d.processObject(this.balloon,d.AmBalloon,this.theme)),this.balloon.setBounds&&this.balloon.setBounds(2,2,a-2,f),this.balloon.chart=this,this.realWidth=a,this.realHeight=f,this.divRealWidth=c,this.divRealHeight=e}},checkDisplay:function(){if(this.autoDisplay&&this.container){var a=d.rect(this.container,10,10),b=a.getBBox();0===b.width&&0===b.height&&(this.divRealHeight=this.divRealWidth=this.realHeight=this.realWidth=0,this.previousWidth=this.previousHeight=NaN),a.remove()}},destroy:function(){this.chartDiv.innerHTML="",this.clearTimeOuts(),this.legend&&this.legend.destroy()},clearTimeOuts:function(){var a=this.timeOuts;if(a){var b;for(b=0;b<a.length;b++)clearTimeout(a[b])}this.timeOuts=[]},clear:function(a){if(d.callMethod("clear",[this.chartScrollbar,this.scrollbarV,this.scrollbarH,this.chartCursor]),this.chartCursor=this.scrollbarH=this.scrollbarV=this.chartScrollbar=null,this.clearTimeOuts(),this.container&&(this.container.remove(this.chartDiv),this.container.remove(this.legendDiv)),a||d.removeChart(this),a=this.div)for(;a.firstChild;)a.removeChild(a.firstChild);this.legend&&this.legend.destroy()},setMouseCursor:function(a){"auto"==a&&d.isNN&&(a="default"),this.chartDiv.style.cursor=a,this.legendDiv.style.cursor=a},redrawLabels:function(){this.labels=[];var a=this.allLabels;this.createLabelsSet();var b;for(b=0;b<a.length;b++)this.drawLabel(a[b])},drawLabel:function(a){var b=this;if(b.container&&!1!==a.enabled){a=d.processObject(a,d.Label,b.theme);var c=a.y,e=a.text,h=a.align,f=a.size,g=a.color,k=a.rotation,l=a.alpha,m=a.bold,n=d.toCoordinate(a.x,b.realWidth),c=d.toCoordinate(c,b.realHeight);n||(n=0),c||(c=0),void 0===g&&(g=b.color),isNaN(f)&&(f=b.fontSize),h||(h="start"),"left"==h&&(h="start"),"right"==h&&(h="end"),"center"==h&&(h="middle",k?c=b.realHeight-c+c/2:n=b.realWidth/2-n),void 0===l&&(l=1),void 0===k&&(k=0),c+=f/2,e=d.text(b.container,e,g,b.fontFamily,f,h,m,l),e.translate(n,c),d.setCN(b,e,"label"),a.id&&d.setCN(b,e,"label-"+a.id),0!==k&&e.rotate(k),a.url?(e.setAttr("cursor","pointer"),e.click(function(){d.getURL(a.url,b.urlTarget)})):e.node.style.pointerEvents="none",b.labelsSet.push(e),b.labels.push(e)}},addLabel:function(a,b,c,e,d,f,g,k,l,m){a={x:a,y:b,text:c,align:e,size:d,color:f,alpha:k,rotation:g,bold:l,url:m,enabled:!0},this.container&&this.drawLabel(a),this.allLabels.push(a)},clearLabels:function(){var b,a=this.labels;for(b=a.length-1;b>=0;b--)a[b].remove();this.labels=[],this.allLabels=[]},updateHeight:function(){var a=this.divRealHeight,b=this.legend;if(b){var c=this.legendDiv.offsetHeight,b=b.position;("top"==b||"bottom"==b)&&(a-=c,(0>a||isNaN(a))&&(a=0),this.chartDiv.style.height=a+"px")}return a},updateWidth:function(){var a=this.divRealWidth,b=this.divRealHeight,c=this.legend;if(c){var e=this.legendDiv,d=e.offsetWidth;isNaN(c.width)||(d=c.width),c.ieW&&(d=c.ieW);var f=e.offsetHeight,e=e.style,g=this.chartDiv.style,c=c.position;("right"==c||"left"==c)&&(a-=d,(0>a||isNaN(a))&&(a=0),g.width=a+"px",this.balloon.setBounds(2,2,a-2,this.realHeight),"left"==c?(g.left=d+"px",e.left="0px"):(g.left="0px",e.left=a+"px"),b>f&&(e.top=(b-f)/2+"px"))}return a},getTitleHeight:function(){return this.drawTitles(!0),this.titleHeight},addTitle:function(a,b,c,e,d){return isNaN(b)&&(b=this.fontSize+2),a={text:a,size:b,color:c,alpha:e,bold:d,enabled:!0},this.titles.push(a),a},handleWheel:function(a){var b=0;a||(a=window.event),a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3),b&&this.handleWheelReal(b,a.shiftKey),a.preventDefault&&a.preventDefault()},handleWheelReal:function(){},handleDocTouchStart:function(){this.hideBalloonReal(),this.handleMouseMove(),this.tmx=this.mouseX,this.tmy=this.mouseY},handleDocTouchEnd:function(){-.5<this.tmx&&this.tmx<this.divRealWidth+1&&0<this.tmy&&this.tmy<this.divRealHeight?(this.handleMouseMove(),4>Math.abs(this.mouseX-this.tmx)&&4>Math.abs(this.mouseY-this.tmy)&&(this.tapped=!0)):this.tapped=!1},addListeners:function(){var a=this,b=a.chartDiv;document.addEventListener?(a.panEventsEnabled&&(b.style.msTouchAction="none",b.style.touchAction="none"),"ontouchstart"in document.documentElement&&(b.addEventListener("touchstart",function(b){a.handleTouchStart.call(a,b)},!0),b.addEventListener("touchmove",function(b){a.handleMouseMove.call(a,b)},!0),b.addEventListener("touchend",function(b){a.handleTouchEnd.call(a,b)},!0),document.addEventListener("touchstart",function(b){a.handleDocTouchStart.call(a,b)}),document.addEventListener("touchend",function(b){a.handleDocTouchEnd.call(a,b)})),b.addEventListener("mousedown",function(b){a.mouseIsOver=!0,a.handleMouseMove.call(a,b),a.handleMouseDown.call(a,b)},!0),b.addEventListener("mouseover",function(b){a.handleMouseOver.call(a,b)},!0),b.addEventListener("mouseout",function(b){a.handleMouseOut.call(a,b)},!0)):(b.attachEvent("onmousedown",function(b){a.handleMouseDown.call(a,b)}),b.attachEvent("onmouseover",function(b){a.handleMouseOver.call(a,b)}),b.attachEvent("onmouseout",function(b){a.handleMouseOut.call(a,b)}))},dispDUpd:function(){this.skipEvents||(this.dispatchDataUpdated&&(this.dispatchDataUpdated=!1,this.fire({type:"dataUpdated",chart:this})),this.chartCreated||(this.chartCreated=!0,this.fire({type:"init",chart:this})),this.chartRendered||(this.fire({type:"rendered",chart:this}),this.chartRendered=!0),this.fire({type:"drawn",chart:this})),this.skipEvents=!1},validateSize:function(){var a=this;if(a.premeasure(),a.checkDisplay(),a.divRealWidth!=a.previousWidth||a.divRealHeight!=a.previousHeight){var b=a.legend;if(0<a.realWidth&&0<a.realHeight){if(a.sizeChanged=!0,b){a.legendInitTO&&clearTimeout(a.legendInitTO);var c=setTimeout(function(){b.invalidateSize()},10);a.timeOuts.push(c),a.legendInitTO=c}a.marginsUpdated=!1,clearTimeout(a.initTO),c=setTimeout(function(){a.initChart()},10),a.timeOuts.push(c),a.initTO=c}a.renderFix(),b&&b.renderFix&&b.renderFix(),clearTimeout(a.resizedTO),a.resizedTO=setTimeout(function(){a.fire({type:"resized",chart:a})},10),a.previousHeight=a.divRealHeight,a.previousWidth=a.divRealWidth}},invalidateSize:function(){this.previousHeight=this.previousWidth=NaN,this.invalidateSizeReal()},invalidateSizeReal:function(){var a=this;a.marginsUpdated=!1,clearTimeout(a.validateTO);var b=setTimeout(function(){a.validateSize()},5);a.timeOuts.push(b),a.validateTO=b},validateData:function(a){this.chartCreated&&(this.dataChanged=!0,this.marginsUpdated=!1,this.initChart(a))},validateNow:function(a,b){this.initTO&&clearTimeout(this.initTO),a&&(this.dataChanged=!0,this.marginsUpdated=!1),this.skipEvents=b,this.chartRendered=!1;var c=this.legend;c&&c.position!=this.prevLegendPosition&&(this.previousWidth=this.mw=0,c.invalidateSize&&(c.invalidateSize(),this.validateSize())),this.write(this.div)},showItem:function(a){a.hidden=!1,this.initChart()},hideItem:function(a){a.hidden=!0,this.initChart()},hideBalloon:function(){var a=this;clearTimeout(a.hoverInt),clearTimeout(a.balloonTO),a.hoverInt=setTimeout(function(){a.hideBalloonReal.call(a)},a.hideBalloonTime)},cleanChart:function(){},hideBalloonReal:function(){var a=this.balloon;a&&a.hide&&a.hide()},showBalloon:function(a,b,c,e,d){var f=this;clearTimeout(f.balloonTO),clearTimeout(f.hoverInt),f.balloonTO=setTimeout(function(){f.showBalloonReal.call(f,a,b,c,e,d)},1)},showBalloonReal:function(a,b,c,e,d){this.handleMouseMove();var f=this.balloon;f.enabled&&(f.followCursor(!1),f.changeColor(b),!c||f.fixedPosition?(f.setPosition(e,d),isNaN(e)||isNaN(d)?f.followCursor(!0):f.followCursor(!1)):f.followCursor(!0),a&&f.showBalloon(a))},handleMouseOver:function(){this.outTO&&clearTimeout(this.outTO),d.resetMouseOver(),this.mouseIsOver=!0},handleMouseOut:function(){var a=this;d.resetMouseOver(),a.outTO&&clearTimeout(a.outTO),a.outTO=setTimeout(function(){a.handleMouseOutReal()},10)},handleMouseOutReal:function(){this.mouseIsOver=!1},handleMouseMove:function(a){a||(a=window.event),this.mouse2Y=this.mouse2X=NaN;var b,c,e,d;if(a){if(a.touches){var f=a.touches.item(1);if(f&&this.panEventsEnabled&&this.boundingRect&&(e=f.clientX-this.boundingRect.left,d=f.clientY-this.boundingRect.top),a=a.touches.item(0),!a)return}else this.wasTouched=!1;this.boundingRect&&a.clientX&&(b=a.clientX-this.boundingRect.left,c=a.clientY-this.boundingRect.top),isNaN(e)?this.mouseX=b:(this.mouseX=Math.min(b,e),this.mouse2X=Math.max(b,e)),isNaN(d)?this.mouseY=c:(this.mouseY=Math.min(c,d),this.mouse2Y=Math.max(c,d))}},handleTouchStart:function(a){this.hideBalloonReal(),a&&(a.touches&&this.tapToActivate&&!this.tapped||!this.panRequired)||(this.handleMouseMove(a),this.handleMouseDown(a))},handleTouchEnd:function(a){this.wasTouched=!0,this.handleMouseMove(a),d.resetMouseOver(),this.handleReleaseOutside(a)},handleReleaseOutside:function(){},handleMouseDown:function(a){d.resetMouseOver(),this.mouseIsOver=!0,a&&a.preventDefault&&(this.panEventsEnabled?a.preventDefault():a.touches||a.preventDefault())},addLegend:function(a,b){a=d.processObject(a,d.AmLegend,this.theme),a.divId=b,a.ieW=0;var c;return c="object"!=typeof b&&b?document.getElementById(b):b,this.legend=a,a.chart=this,c?(a.div=c,a.position="outside",a.autoMargins=!1):a.div=this.legendDiv,a},removeLegend:function(){this.legend=void 0,this.legendDiv.innerHTML=""},handleResize:function(){(d.isPercents(this.width)||d.isPercents(this.height))&&this.invalidateSizeReal(),this.renderFix()},renderFix:function(){if(!d.VML){var a=this.container;a&&a.renderFix()}},getSVG:function(){return d.hasSVG?this.container:void 0},animate:function(a,b,c,e,h,f,g){return a["an_"+b]&&d.removeFromArray(this.animations,a["an_"+b]),c={obj:a,frame:0,attribute:b,from:c,to:e,time:h,effect:f,suffix:g},a["an_"+b]=c,this.animations.push(c),c},setLegendData:function(a){var b=this.legend;b&&b.setData(a)},stopAnim:function(a){d.removeFromArray(this.animations,a)},updateAnimations:function(){var a;if(this.container&&this.container.update(),this.animations)for(a=this.animations.length-1;a>=0;a--){var b=this.animations[a],c=d.updateRate*b.time,e=b.frame+1,h=b.obj,f=b.attribute;if(c>=e){b.frame++;var g=Number(b.from),k=Number(b.to)-g,c=d[b.effect](0,e,g,k,c);0===k?(this.animations.splice(a,1),h.node.style[f]=Number(b.to)+b.suffix):h.node.style[f]=c+b.suffix}else h.node.style[f]=Number(b.to)+b.suffix,h.animationFinished=!0,this.animations.splice(a,1)}},update:function(){this.updateAnimations();var a=this.animatable;if(0<a.length){for(var b=!0,c=a.length-1;c>=0;c--){var e=a[c];e&&(e.animationFinished?a.splice(c,1):b=!1)}b&&(this.fire({type:"animationFinished",chart:this}),this.animatable=[])}},inIframe:function(){try{return window.self!==window.top}catch(a){return!0}},brr:function(){if(!this.hideCredits){var c,a="amcharts.com",b=window.location.hostname.split(".");if(2<=b.length&&(c=b[b.length-2]+"."+b[b.length-1]),this.amLink&&(b=this.amLink.parentNode)&&b.removeChild(this.amLink),b=this.creditsPosition,c!=a||!0===this.inIframe()){var a="http://www."+a,e=c=0,d=this.realWidth,f=this.realHeight,g=this.type;("serial"==g||"xy"==g||"gantt"==g)&&(c=this.marginLeftReal,e=this.marginTopReal,d=c+this.plotAreaWidth,f=e+this.plotAreaHeight);var g=a+"/javascript-charts/",k="JavaScript charts",l="JS chart by amCharts";"ammap"==this.product&&(g=a+"/javascript-maps/",k="Interactive JavaScript maps",l="JS map by amCharts"),a=document.createElement("a"),l=document.createTextNode(l),a.setAttribute("href",g),a.setAttribute("title",k),a.appendChild(l),this.chartDiv.appendChild(a),this.amLink=a,g=a.style,g.position="absolute",g.textDecoration="none",g.color=this.color,g.fontFamily=this.fontFamily,g.fontSize="11px",g.opacity=.7,g.display="block";var k=a.offsetWidth,a=a.offsetHeight,l=5+c,m=e+5;"bottom-left"==b&&(l=5+c,m=f-a-3),"bottom-right"==b&&(l=d-k-5,m=f-a-3),"top-right"==b&&(l=d-k-5,m=e+5),g.left=l+"px",g.top=m+"px"}}}}),d.Slice=d.Class({construct:function(){}}),d.SerialDataItem=d.Class({construct:function(){}}),d.GraphDataItem=d.Class({construct:function(){}}),d.Guide=d.Class({construct:function(a){this.cname="Guide",d.applyTheme(this,a,this.cname)}}),d.Title=d.Class({construct:function(a){this.cname="Title",d.applyTheme(this,a,this.cname)}}),d.Label=d.Class({construct:function(a){this.cname="Label",d.applyTheme(this,a,this.cname)}})}(),function(){var d=window.AmCharts;d.AmGraph=d.Class({construct:function(a){this.cname="AmGraph",this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph"),this.type="line",this.stackable=!0,this.columnCount=1,this.columnIndex=0,this.centerCustomBullets=this.showBalloon=!0,this.maxBulletSize=50,this.minBulletSize=4,this.balloonText="[[value]]",this.hidden=this.scrollbar=this.animationPlayed=!1,this.pointPosition="middle",this.depthCount=1,this.includeInMinMax=!0,this.negativeBase=0,this.visibleInLegend=!0,this.showAllValueLabels=!1,this.showBulletsAt=this.showBalloonAt="close",this.lineThickness=1,this.dashLength=0,this.connect=!0,this.lineAlpha=1,this.bullet="none",this.bulletBorderThickness=2,this.bulletBorderAlpha=0,this.bulletAlpha=1,this.bulletSize=8,this.cornerRadiusTop=this.hideBulletsCount=this.bulletOffset=0,this.cursorBulletAlpha=1,this.gradientOrientation="vertical",this.dy=this.dx=0,this.periodValue="",this.clustered=!0,this.periodSpan=1,this.y=this.x=0,this.switchable=!0,this.tcc=this.minDistance=1,this.labelRotation=0,this.labelAnchor="auto",this.labelOffset=3,this.bcn="graph-",this.dateFormat="MMM DD, YYYY",this.noRounding=!0,d.applyTheme(this,a,this.cname)},init:function(){this.createBalloon()},draw:function(){var a=this.chart,b=a.type;if(a.drawGraphs){isNaN(this.precision)||(this.numberFormatter?this.numberFormatter.precision=this.precision:this.numberFormatter={precision:this.precision,decimalSeparator:a.decimalSeparator,thousandsSeparator:a.thousandsSeparator});var c=a.container;this.container=c,this.destroy();var e=c.set();this.set=e,e.translate(this.x,this.y);var h=c.set();this.bulletSet=h,h.translate(this.x,this.y),this.behindColumns?(a.graphsBehindSet.push(e),a.bulletBehindSet.push(h)):(a.graphsSet.push(e),a.bulletSet.push(h));var f=this.bulletAxis;d.isString(f)&&(this.bulletAxis=a.getValueAxisById(f)),c=c.set(),d.remove(this.columnsSet),this.columnsSet=c,d.setCN(a,e,"graph-"+this.type),d.setCN(a,e,"graph-"+this.id),d.setCN(a,h,"graph-"+this.type),d.setCN(a,h,"graph-"+this.id),this.columnsArray=[],this.ownColumns=[],this.allBullets=[],this.animationArray=[],h=this.labelPosition,h||(f=this.valueAxis.stackType,h="top","column"==this.type&&(a.rotate&&(h="right"),"100%"==f||"regular"==f)&&(h="middle"),this.labelPosition=h),d.ifArray(this.data)&&(a=!1,"xy"==b?this.xAxis.axisCreated&&this.yAxis.axisCreated&&(a=!0):this.valueAxis.axisCreated&&(a=!0),!this.hidden&&a&&this.createGraph()),e.push(c)}},createGraph:function(){var a=this,b=a.chart;a.startAlpha=b.startAlpha,a.seqAn=b.sequencedAnimation,a.baseCoord=a.valueAxis.baseCoord,void 0===a.fillAlphas&&(a.fillAlphas=0),a.bulletColorR=a.bulletColor,void 0===a.bulletColorR&&(a.bulletColorR=a.lineColorR,a.bulletColorNegative=a.negativeLineColor),void 0===a.bulletAlpha&&(a.bulletAlpha=a.lineAlpha),("step"==c||d.VML)&&(a.noRounding=!1);var c=b.type;if("gantt"==c&&(c="serial"),clearTimeout(a.playedTO),!isNaN(a.valueAxis.min)&&!isNaN(a.valueAxis.max)){switch(c){case"serial":a.categoryAxis&&(a.createSerialGraph(),"candlestick"==a.type&&1>a.valueAxis.minMaxMultiplier&&a.positiveClip(a.set));break;case"radar":a.createRadarGraph();break;case"xy":a.createXYGraph()}a.playedTO=setTimeout(function(){a.setAnimationPlayed.call(a)},500*a.chart.startDuration)}},setAnimationPlayed:function(){this.animationPlayed=!0},createXYGraph:function(){var a=[],b=[],c=this.xAxis,e=this.yAxis;this.pmh=e.height,this.pmw=c.width,this.pmy=this.pmx=0;var d;for(d=this.start;d<=this.end;d++){var f=this.data[d].axes[c.id].graphs[this.id],g=f.values,k=g.x,l=g.y,g=c.getCoordinate(k,this.noRounding),m=e.getCoordinate(l,this.noRounding);if(!isNaN(k)&&!isNaN(l)&&(a.push(g),b.push(m),f.x=g,f.y=m,k=this.createBullet(f,g,m,d),l=this.labelText)){var l=this.createLabel(f,l),n=0;k&&(n=k.size),this.positionLabel(f,g,m,l,n)}}this.drawLineGraph(a,b),this.launchAnimation()},createRadarGraph:function(){var f,g,k,l,m,a=this.valueAxis.stackType,b=[],c=[],e=[],d=[];for(m=this.start;m<=this.end;m++){var q,p,n=this.data[m].axes[this.valueAxis.id].graphs[this.id];if("none"==a||"3d"==a?q=n.values.value:(q=n.values.close,p=n.values.open),isNaN(q))this.connect||(this.drawLineGraph(b,c,e,d),b=[],c=[],e=[],d=[]);else{var t=this.valueAxis.getCoordinate(q,this.noRounding)-this.height,t=t*this.valueAxis.rMultiplier,r=-360/(this.end-this.start+1)*m;if("middle"==this.valueAxis.pointPosition&&(r-=180/(this.end-this.start+1)),q=t*Math.sin(r/180*Math.PI),t*=Math.cos(r/180*Math.PI),b.push(q),c.push(t),!isNaN(p)){var u=this.valueAxis.getCoordinate(p,this.noRounding)-this.height,u=u*this.valueAxis.rMultiplier,w=u*Math.sin(r/180*Math.PI),r=u*Math.cos(r/180*Math.PI);e.push(w),d.push(r),isNaN(k)&&(k=w),isNaN(l)&&(l=r)}r=this.createBullet(n,q,t,m),n.x=q,n.y=t,(w=this.labelText)&&(w=this.createLabel(n,w),u=0,r&&(u=r.size),this.positionLabel(n,q,t,w,u)),isNaN(f)&&(f=q),isNaN(g)&&(g=t)}}b.push(f),c.push(g),isNaN(k)||(e.push(k),d.push(l)),this.drawLineGraph(b,c,e,d),this.launchAnimation()},positionLabel:function(a,b,c,e,d){if(e){var f=this.chart,g=this.valueAxis,k="middle",l=!1,m=this.labelPosition,n=e.getBBox(),q=this.chart.rotate,p=a.isNegative;switch(c-=n.height/4/2,void 0!==a.labelIsNegative&&(p=a.labelIsNegative),m){case"right":m=q&&p?"left":"right";break;case"top":m=q?"top":p?"bottom":"top";break;case"bottom":m=q?"bottom":p?"top":"bottom";break;case"left":m=q&&p?"right":"left"}var t=a.columnGraphics,r=0,u=0;t&&(r=t.x,u=t.y);var w=this.labelOffset;switch(m){case"right":k="start",b+=d/2+w;break;case"top":c=g.reversed?c+(d/2+n.height/2+w):c-(d/2+n.height/2+w);break;case"bottom":c=g.reversed?c-(d/2+n.height/2+w):c+(d/2+n.height/2+w);break;case"left":k="end",b-=d/2+w;break;case"inside":"column"==this.type&&(l=!0,q?p?(k="end",b=r-3-w):(k="start",b=r+3+w):c=p?u+7+w:u-10-w);break;case"middle":"column"==this.type&&(l=!0,q?b-=(b-r)/2+w-3:c-=(c-u)/2+w-3)}return"auto"!=this.labelAnchor&&(k=this.labelAnchor),e.attr({
"text-anchor":k}),this.labelRotation&&e.rotate(this.labelRotation),e.translate(b,c),!this.showAllValueLabels&&t&&l&&(n=e.getBBox(),n.height>a.columnHeight||n.width>a.columnWidth)&&(e.remove(),e=null),e&&(0>b||b>this.width||0>c||c>this.height)&&(e.remove(),e=null),!e||"serial"!=f.type&&"gantt"!=f.type||(q?(0>c||c>this.height)&&(e.remove(),e=null):(0>b||b>this.width)&&(e.remove(),e=null)),e&&this.allBullets.push(e),e}},getGradRotation:function(){var a=270;return"horizontal"==this.gradientOrientation&&(a=0),this.gradientRotation=a},createSerialGraph:function(){this.dashLengthSwitched=this.fillColorsSwitched=this.lineColorSwitched=void 0;var a=this.chart,b=this.id,c=this.index,e=this.data,h=this.chart.container,f=this.valueAxis,g=this.type,k=this.columnWidthReal,l=this.showBulletsAt;isNaN(this.columnWidth)||(k=this.columnWidth),isNaN(k)&&(k=.8);var A,z,B,C,L,m=this.useNegativeColorIfDown,n=this.width,q=this.height,p=this.y,t=this.rotate,r=this.columnCount,u=d.toCoordinate(this.cornerRadiusTop,k/2),w=this.connect,y=[],x=[],D=this.chart.graphs.length,I=this.dx/this.tcc,S=this.dy/this.tcc,O=f.stackType,Q=this.start,ia=this.end,H=this.scrollbar,Z="graph-column-";H&&(Z="scrollbar-graph-column-");var za,va=this.categoryAxis,ma=this.baseCoord,Oa=this.negativeBase,ea=this.columnIndex,ca=this.lineThickness,X=this.lineAlpha,ya=this.lineColorR,da=this.dashLength,fa=this.set,ga=this.getGradRotation(),T=this.chart.columnSpacing,Y=va.cellWidth,Ca=(Y*k-r)/r;T>Ca&&(T=Ca);var G,v,na,ub,vb,gb,hb,ha=q,Pa=n,ba=0,tb=0,wb=this.fillColorsR,Qa=this.negativeFillColors,Ja=this.negativeLineColor,Ya=this.fillAlphas,Za=this.negativeFillAlphas;"object"==typeof Ya&&(Ya=Ya[0]),"object"==typeof Za&&(Za=Za[0]);var xb=this.noRounding;"step"==g&&(xb=!1);var ib=f.getCoordinate(f.min);if(f.logarithmic&&(ib=f.getCoordinate(f.minReal)),this.minCoord=ib,this.resetBullet&&(this.bullet="none"),!(H||"line"!=g&&"smoothedLine"!=g&&"step"!=g||(1==e.length&&"step"!=g&&"none"==this.bullet&&(this.bullet="round",this.resetBullet=!0),!Qa&&void 0==Ja||m))){var Ua=Oa;Ua>f.max&&(Ua=f.max),Ua<f.min&&(Ua=f.min),f.logarithmic&&(Ua=f.minReal);var Ka=f.getCoordinate(Ua),Lb=f.getCoordinate(f.max);t?(ha=q,Pa=Math.abs(Lb-Ka),ub=q,vb=Math.abs(ib-Ka),hb=tb=0,f.reversed?(ba=0,gb=Ka):(ba=Ka,gb=0)):(Pa=n,ha=Math.abs(Lb-Ka),vb=n,ub=Math.abs(ib-Ka),gb=ba=0,f.reversed?(hb=p,tb=Ka):hb=Ka)}var La=Math.round;this.pmx=La(ba),this.pmy=La(tb),this.pmh=La(ha),this.pmw=La(Pa),this.nmx=La(gb),this.nmy=La(hb),this.nmh=La(ub),this.nmw=La(vb),d.isModern||(this.nmy=this.nmx=0,this.nmh=this.height),this.clustered||(r=1),k="column"==g?(Y*k-T*(r-1))/r:Y*k,1>k&&(k=1);var Mb=this.fixedColumnWidth;isNaN(Mb)||(k=Mb);var K;if("line"==g||"step"==g||"smoothedLine"==g){if(Q>0){for(K=Q-1;K>-1;K--)if(G=e[K],v=G.axes[f.id].graphs[b],na=v.values.value,!isNaN(na)){Q=K;break}if(this.lineColorField)for(K=Q;K>-1;K--)if(G=e[K],v=G.axes[f.id].graphs[b],v.lineColor){this.bulletColorSwitched=this.lineColorSwitched=v.lineColor;break}if(this.fillColorsField)for(K=Q;K>-1;K--)if(G=e[K],v=G.axes[f.id].graphs[b],v.fillColors){this.fillColorsSwitched=v.fillColors;break}if(this.dashLengthField)for(K=Q;K>-1;K--)if(G=e[K],v=G.axes[f.id].graphs[b],!isNaN(v.dashLength)){this.dashLengthSwitched=v.dashLength;break}}if(ia<e.length-1)for(K=ia+1;K<e.length;K++)if(G=e[K],v=G.axes[f.id].graphs[b],na=v.values.value,!isNaN(na)){ia=K;break}}ia<e.length-1&&ia++;var U=[],V=[],Ra=!1;("line"==g||"step"==g||"smoothedLine"==g)&&(this.stackable&&"regular"==O||"100%"==O||this.fillToGraph)&&(Ra=!0);var Nb=this.noStepRisers,jb=-1e3,kb=-1e3,lb=this.minDistance,Sa=!0,$a=!1;for(K=Q;ia>=K;K++){G=e[K],v=G.axes[f.id].graphs[b],v.index=K;var ab,Ta=NaN;if(m&&void 0==this.openField)for(var yb=K+1;yb<e.length&&(!e[yb]||!(ab=e[K+1].axes[f.id].graphs[b])||!ab.values||(Ta=ab.values.value,isNaN(Ta)));yb++);var R,P,J,aa,Aa,Ea,ja=NaN,E=NaN,F=NaN,N=NaN,M=NaN,pa=NaN,qa=NaN,ra=NaN,sa=NaN,wa=NaN,Da=NaN,ka=NaN,la=NaN,W=NaN,zb=NaN,Ab=NaN,ta=NaN,ua=void 0,Ma=wb,Va=Ya,Ha=ya,Bb=this.proCandlesticks,mb=this.topRadius,Fa=q-1,oa=n-1,bb=this.pattern;void 0!=v.pattern&&(bb=v.pattern),isNaN(v.alpha)||(Va=v.alpha),isNaN(v.dashLength)||(da=v.dashLength);var Ia=v.values;if(f.recalculateToPercents&&(Ia=v.percents),Ia){if(W=this.stackable&&"none"!=O&&"3d"!=O?Ia.close:Ia.value,("candlestick"==g||"ohlc"==g)&&(W=Ia.close,Ab=Ia.low,qa=f.getCoordinate(Ab),zb=Ia.high,sa=f.getCoordinate(zb)),ta=Ia.open,F=f.getCoordinate(W,xb),isNaN(ta)||(M=f.getCoordinate(ta,xb),m&&"regular"!=O&&"100%"!=O&&(Ta=ta,ta=M=NaN)),m&&(void 0==this.openField?ab&&(ab.isNegative=W>Ta?!0:!1,isNaN(Ta)&&(v.isNegative=!Sa)):v.isNegative=Ta>W?!0:!1),!H)switch(this.showBalloonAt){case"close":v.y=F;break;case"open":v.y=M;break;case"high":v.y=sa;break;case"low":v.y=qa}var ja=G.x[va.id],Wa=this.periodSpan-1;"step"!=g||isNaN(G.cellWidth)||(Y=G.cellWidth);var xa=Math.floor(Y/2)+Math.floor(Wa*Y/2),Ga=xa,nb=0;if("left"==this.stepDirection&&(nb=(2*Y+Wa*Y)/2,ja-=nb),"center"==this.stepDirection&&(nb=Y/2,ja-=nb),"start"==this.pointPosition&&(ja-=Y/2+Math.floor(Wa*Y/2),xa=0,Ga=Math.floor(Y)+Math.floor(Wa*Y)),"end"==this.pointPosition&&(ja+=Y/2+Math.floor(Wa*Y/2),xa=Math.floor(Y)+Math.floor(Wa*Y),Ga=0),Nb){var Cb=this.columnWidth;isNaN(Cb)||(xa*=Cb,Ga*=Cb)}H||(v.x=ja),-1e5>ja&&(ja=-1e5),ja>n+1e5&&(ja=n+1e5),t?(E=F,N=M,M=F=ja,isNaN(ta)&&!this.fillToGraph&&(N=ma),pa=qa,ra=sa):(N=E=ja,isNaN(ta)&&!this.fillToGraph&&(M=ma)),(!Bb&&ta>W||Bb&&za>W)&&(v.isNegative=!0,Qa&&(Ma=Qa),Za&&(Va=Za),void 0!=Ja&&(Ha=Ja)),$a=!1,isNaN(W)||(m?W>Ta?(Sa&&($a=!0),Sa=!1):(Sa||($a=!0),Sa=!0):v.isNegative=Oa>W?!0:!1,za=W);var Ob=!1;switch(H&&a.chartScrollbar.ignoreCustomColors&&(Ob=!0),Ob||(void 0!=v.color&&(Ma=v.color),v.fillColors&&(Ma=v.fillColors)),g){case"line":isNaN(W)?w||(this.drawLineGraph(y,x,U,V),y=[],x=[],U=[],V=[]):((Math.abs(E-jb)>=lb||Math.abs(F-kb)>=lb)&&(y.push(E),x.push(F),jb=E,kb=F),wa=E,Da=F,ka=E,la=F,!Ra||isNaN(M)||isNaN(N)||(U.push(N),V.push(M)),($a||void 0!=v.lineColor&&v.lineColor!=this.lineColorSwitched||void 0!=v.fillColors&&v.fillColors!=this.fillColorsSwitched||!isNaN(v.dashLength))&&(this.drawLineGraph(y,x,U,V),y=[E],x=[F],U=[],V=[],!Ra||isNaN(M)||isNaN(N)||(U.push(N),V.push(M)),m?Sa?(this.lineColorSwitched=ya,this.fillColorsSwitched=wb):(this.lineColorSwitched=Ja,this.fillColorsSwitched=Qa):(this.lineColorSwitched=v.lineColor,this.fillColorsSwitched=v.fillColors),this.dashLengthSwitched=v.dashLength),v.gap&&(this.drawLineGraph(y,x,U,V),y=[],x=[],U=[],V=[]));break;case"smoothedLine":isNaN(W)?w||(this.drawSmoothedGraph(y,x,U,V),y=[],x=[],U=[],V=[]):((Math.abs(E-jb)>=lb||Math.abs(F-kb)>=lb)&&(y.push(E),x.push(F),jb=E,kb=F),wa=E,Da=F,ka=E,la=F,!Ra||isNaN(M)||isNaN(N)||(U.push(N),V.push(M)),void 0==v.lineColor&&void 0==v.fillColors&&isNaN(v.dashLength)||(this.drawSmoothedGraph(y,x,U,V),y=[E],x=[F],U=[],V=[],!Ra||isNaN(M)||isNaN(N)||(U.push(N),V.push(M)),this.lineColorSwitched=v.lineColor,this.fillColorsSwitched=v.fillColors,this.dashLengthSwitched=v.dashLength),v.gap&&(this.drawSmoothedGraph(y,x,U,V),y=[],x=[],U=[],V=[]));break;case"step":if(isNaN(W))w||((1>=this.periodSpan||1<this.periodSpan&&E-A>xa+Ga)&&(A=z=NaN),this.drawLineGraph(y,x,U,V),y=[],x=[],U=[],V=[]);else{if(t?(isNaN(A)||(y.push(A),x.push(F-xa)),x.push(F-xa),y.push(E),x.push(F+Ga),y.push(E),!Ra||isNaN(M)||isNaN(N)||(isNaN(B)||(U.push(B),V.push(M-xa)),U.push(N),V.push(M-xa),U.push(N),V.push(M+Ga))):(isNaN(z)||(x.push(z),y.push(E-xa)),y.push(E-xa),x.push(F),y.push(E+Ga),x.push(F),!Ra||isNaN(M)||isNaN(N)||(isNaN(C)||(U.push(N-xa),V.push(C)),U.push(N-xa),V.push(M),U.push(N+Ga),V.push(M))),A=E,z=F,B=N,C=M,wa=E,Da=F,ka=E,la=F,$a||void 0!=v.lineColor||void 0!=v.fillColors||!isNaN(v.dashLength)){var cc=y[y.length-2],dc=x[x.length-2];y.pop(),x.pop(),this.drawLineGraph(y,x,U,V),y=[cc],x=[dc],t?(x.push(F+Ga),y.push(E)):(y.push(E+Ga),x.push(F)),U=[],V=[],this.lineColorSwitched=v.lineColor,this.fillColorsSwitched=v.fillColors,this.dashLengthSwitched=v.dashLength,m&&(Sa?(this.lineColorSwitched=ya,this.fillColorsSwitched=wb):(this.lineColorSwitched=Ja,this.fillColorsSwitched=Qa))}(Nb||v.gap)&&(A=z=NaN,this.drawLineGraph(y,x,U,V),y=[],x=[],U=[],V=[])}break;case"column":if(Aa=Ha,void 0!=v.lineColor&&(Aa=v.lineColor),!isNaN(W)){m||(v.isNegative=Oa>W?!0:!1),v.isNegative&&(Qa&&(Ma=Qa),void 0!=Ja&&(Aa=Ja));var Pb=f.min,Qb=f.max,ob=ta;if(isNaN(ob)&&(ob=Oa),!(Pb>W&&Pb>ob||W>Qb&&ob>Qb)){var Ba;if(t){"3d"==O?(P=F-(r/2-this.depthCount+1)*(k+T)+T/2+S*ea,R=N+I*ea,Ba=ea):(P=Math.floor(F-(r/2-ea)*(k+T)+T/2),R=N,Ba=0),J=k,wa=E,Da=P+k/2,ka=E,la=P+k/2,P+J>q+Ba*S&&(J=q-P+Ba*S),Ba*S>P&&(J+=P,P=Ba*S),aa=E-N;var ec=R;R=d.fitToBounds(R,0,n),aa+=ec-R,aa=d.fitToBounds(aa,-R,n-R+I*ea),v.labelIsNegative=0>aa?!0:!1,0===aa&&1/W===1/-0&&(v.labelIsNegative=!0),isNaN(G.percentWidthValue)||(J=this.height*G.percentWidthValue/100,P=ja-J/2,Da=P+J/2),J=d.roundTo(J,2),aa=d.roundTo(aa,2),q>P&&J>0&&(ua=new d.Cuboid(h,aa,J,I-a.d3x,S-a.d3y,Ma,Va,ca,Aa,X,ga,u,t,da,bb,mb,Z),v.columnWidth=Math.abs(aa),v.columnHeight=Math.abs(J))}else{"3d"==O?(R=E-(r/2-this.depthCount+1)*(k+T)+T/2+I*ea,P=M+S*ea,Ba=ea):(R=E-(r/2-ea)*(k+T)+T/2,P=M,Ba=0),J=k,wa=R+k/2,Da=F,ka=R+k/2,la=F,R+J>n+Ba*I&&(J=n-R+Ba*I),Ba*I>R&&(J+=R-Ba*I,R=Ba*I),aa=F-M,v.labelIsNegative=aa>0?!0:!1,0===aa&&-0===W&&(v.labelIsNegative=!0);var fc=P;P=d.fitToBounds(P,this.dy,q),aa+=fc-P,aa=d.fitToBounds(aa,-P+S*ea,q-P),isNaN(G.percentWidthValue)||(J=this.width*G.percentWidthValue/100,R=ja-J/2,wa=R+J/2),J=d.roundTo(J,2),aa=d.roundTo(aa,2),n+ea*I>R&&J>0&&(this.showOnAxis&&(P-=S/2),ua=new d.Cuboid(h,J,aa,I-a.d3x,S-a.d3y,Ma,Va,ca,Aa,this.lineAlpha,ga,u,t,da,bb,mb,Z),v.columnHeight=Math.abs(aa),v.columnWidth=Math.abs(J))}}ua&&(Ea=ua.set,d.setCN(a,ua.set,"graph-"+this.type),d.setCN(a,ua.set,"graph-"+this.id),v.className&&d.setCN(a,ua.set,v.className,!0),v.columnGraphics=Ea,R=d.roundTo(R,2),P=d.roundTo(P,2),Ea.translate(R,P),(v.url||this.showHandOnHover)&&Ea.setAttr("cursor","pointer"),H||("none"==O&&(L=t?(this.end+1-K)*D-c:D*K+c),"3d"==O&&(t?(L=(this.end+1-K)*D-c-1e3*this.depthCount,wa+=I*this.columnIndex,ka+=I*this.columnIndex,v.y+=I*this.columnIndex):(L=(D-c)*(K+1)+1e3*this.depthCount,Da+=S*this.columnIndex,la+=S*this.columnIndex,v.y+=S*this.columnIndex)),("regular"==O||"100%"==O)&&(L=t?0<Ia.value?(this.end+1-K)*D+c:(this.end+1-K)*D-c:0<Ia.value?D*K+c:D*K-c),this.columnsArray.push({column:ua,depth:L}),v.x=t?P+J/2:R+J/2,this.ownColumns.push(ua),this.animateColumns(ua,K,E,N,F,M),this.addListeners(Ea,v)),this.columnsSet.push(Ea))}break;case"candlestick":if(!isNaN(ta)&&!isNaN(W)){var Xa,cb;if(Aa=Ha,void 0!=v.lineColor&&(Aa=v.lineColor),wa=E,la=Da=F,ka=E,t){if("open"==l&&(ka=N),"high"==l&&(ka=ra),"low"==l&&(ka=pa),E=d.fitToBounds(E,0,oa),N=d.fitToBounds(N,0,oa),pa=d.fitToBounds(pa,0,oa),ra=d.fitToBounds(ra,0,oa),0===E&&0===N&&0===pa&&0===ra)continue;if(E==oa&&N==oa&&pa==oa&&ra==oa)continue;if(P=F-k/2,R=N,J=k,P+J>q&&(J=q-P),0>P&&(J+=P,P=0),q>P&&J>0){var Db,Eb;W>ta?(Db=[E,ra],Eb=[N,pa]):(Db=[N,ra],Eb=[E,pa]),!isNaN(ra)&&!isNaN(pa)&&q>F&&F>0&&(Xa=d.line(h,Db,[F,F],Aa,X,ca),cb=d.line(h,Eb,[F,F],Aa,X,ca)),aa=E-N,ua=new d.Cuboid(h,aa,J,I,S,Ma,Ya,ca,Aa,X,ga,u,t,da,bb,mb,Z)}}else{if("open"==l&&(la=M),"high"==l&&(la=sa),"low"==l&&(la=qa),F=d.fitToBounds(F,0,Fa),M=d.fitToBounds(M,0,Fa),qa=d.fitToBounds(qa,0,Fa),sa=d.fitToBounds(sa,0,Fa),0===F&&0===M&&0===qa&&0===sa)continue;if(F==Fa&&M==Fa&&qa==Fa&&sa==Fa)continue;if(R=E-k/2,P=M+ca/2,J=k,R+J>n&&(J=n-R),0>R&&(J+=R,R=0),aa=F-M,n>R&&J>0){Bb&&W>=ta&&(Va=0);var Fb,Gb,ua=new d.Cuboid(h,J,aa,I,S,Ma,Va,ca,Aa,X,ga,u,t,da,bb,mb,Z);W>ta?(Fb=[F,sa],Gb=[M,qa]):(Fb=[M,sa],Gb=[F,qa]),!isNaN(sa)&&!isNaN(qa)&&n>E&&E>0&&(Xa=d.line(h,[E,E],Fb,Aa,X,ca),cb=d.line(h,[E,E],Gb,Aa,X,ca),d.setCN(a,Xa,this.bcn+"line-high"),v.className&&d.setCN(a,Xa,v.className,!0),d.setCN(a,cb,this.bcn+"line-low"),v.className&&d.setCN(a,cb,v.className,!0))}}ua&&(Ea=ua.set,v.columnGraphics=Ea,fa.push(Ea),Ea.translate(R,P-ca/2),(v.url||this.showHandOnHover)&&Ea.setAttr("cursor","pointer"),Xa&&(fa.push(Xa),fa.push(cb)),H||(v.x=t?P+J/2:R+J/2,this.animateColumns(ua,K,E,N,F,M),this.addListeners(Ea,v)))}break;case"ohlc":if(!(isNaN(ta)||isNaN(zb)||isNaN(Ab)||isNaN(W))){var Rb=h.set();fa.push(Rb),ta>W&&(v.isNegative=!0,void 0!=Ja&&(Ha=Ja));var pb,qb,rb;if(t){if(la=F,ka=E,"open"==l&&(ka=N),"high"==l&&(ka=ra),"low"==l&&(ka=pa),pa=d.fitToBounds(pa,0,oa),ra=d.fitToBounds(ra,0,oa),0===E&&0===N&&0===pa&&0===ra)continue;if(E==oa&&N==oa&&pa==oa&&ra==oa)continue;var Hb=F-k/2,Hb=d.fitToBounds(Hb,0,q),Sb=d.fitToBounds(F,0,q),Ib=F+k/2,Ib=d.fitToBounds(Ib,0,q);N>=0&&oa>=N&&(qb=d.line(h,[N,N],[Hb,Sb],Ha,X,ca,da)),F>0&&q>F&&(pb=d.line(h,[pa,ra],[F,F],Ha,X,ca,da)),E>=0&&oa>=E&&(rb=d.line(h,[E,E],[Sb,Ib],Ha,X,ca,da))}else{la=F,"open"==l&&(la=M),"high"==l&&(la=sa),"low"==l&&(la=qa);var ka=E,qa=d.fitToBounds(qa,0,Fa),sa=d.fitToBounds(sa,0,Fa),Jb=E-k/2,Jb=d.fitToBounds(Jb,0,n),Tb=d.fitToBounds(E,0,n),Kb=E+k/2,Kb=d.fitToBounds(Kb,0,n);M>=0&&Fa>=M&&(qb=d.line(h,[Jb,Tb],[M,M],Ha,X,ca,da)),E>0&&n>E&&(pb=d.line(h,[E,E],[qa,sa],Ha,X,ca,da)),F>=0&&Fa>=F&&(rb=d.line(h,[Tb,Kb],[F,F],Ha,X,ca,da))}fa.push(qb),fa.push(pb),fa.push(rb),d.setCN(a,qb,this.bcn+"stroke-open"),d.setCN(a,rb,this.bcn+"stroke-close"),d.setCN(a,pb,this.bcn+"stroke"),v.className&&d.setCN(a,Rb,v.className,!0),wa=E,Da=F}}if(!H&&!isNaN(W)){var Ub=this.hideBulletsCount;if(this.end-this.start<=Ub||0===Ub){var Vb=this.createBullet(v,ka,la,K),Wb=this.labelText;if(Wb&&!isNaN(wa)&&!isNaN(wa)){var gc=this.createLabel(v,Wb),Xb=0;Vb&&(Xb=Vb.size),this.positionLabel(v,wa,Da,gc,Xb)}if("regular"==O||"100%"==O){var Yb=f.totalText;if(Yb){var Na=this.createLabel(v,Yb,f.totalTextColor);if(d.setCN(a,Na,this.bcn+"label-total"),this.allBullets.push(Na),Na){var db,eb,Zb=Na.getBBox(),$b=Zb.width,ac=Zb.height,sb=f.totalTextOffset,bc=f.totals[K];bc&&bc.remove();var fb=0;"column"!=g&&(fb=this.bulletSize),t?(eb=Da,db=0>W?E-$b/2-2-fb-sb:E+$b/2+3+fb+sb):(db=wa,eb=0>W?F+ac/2+fb+sb:F-ac/2-3-fb-sb),Na.translate(db,eb),f.totals[K]=Na,t?(0>eb||eb>q)&&Na.remove():(0>db||db>n)&&Na.remove()}}}}}}}("line"==g||"step"==g||"smoothedLine"==g)&&("smoothedLine"==g?this.drawSmoothedGraph(y,x,U,V):this.drawLineGraph(y,x,U,V),H||this.launchAnimation()),this.bulletsHidden&&this.hideBullets(),this.customBulletsHidden&&this.hideCustomBullets()},animateColumns:function(a,b){var c=this,e=c.chart.startDuration;e>0&&!c.animationPlayed&&(c.seqAn?(a.set.hide(),c.animationArray.push(a),e=setTimeout(function(){c.animate.call(c)},e/(c.end-c.start+1)*(b-c.start)*1e3),c.timeOuts.push(e)):c.animate(a),c.chart.animatable.push(a))},createLabel:function(a,b,c){var e=this.chart,h=a.labelColor;h||(h=this.color),h||(h=e.color),c&&(h=c),c=this.fontSize,void 0===c&&(this.fontSize=c=e.fontSize);var f=this.labelFunction;return b=e.formatString(b,a),b=d.cleanFromEmpty(b),f&&(b=f(a,b)),void 0!==b&&""!==b?(a=d.text(this.container,b,h,e.fontFamily,c),a.node.style.pointerEvents="none",d.setCN(e,a,this.bcn+"label"),this.bulletSet.push(a),a):void 0},positiveClip:function(a){a.clipRect(this.pmx,this.pmy,this.pmw,this.pmh)},negativeClip:function(a){a.clipRect(this.nmx,this.nmy,this.nmw,this.nmh)},drawLineGraph:function(a,b,c,e){var h=this;if(1<a.length){var f=h.noRounding,g=h.set,k=h.chart,l=h.container,m=l.set(),n=l.set();g.push(n),g.push(m);var q=h.lineAlpha,p=h.lineThickness,g=h.fillAlphas,t=h.lineColorR,r=h.negativeLineAlpha;isNaN(r)&&(r=q);var u=h.lineColorSwitched;u&&(t=u);var u=h.fillColorsR,w=h.fillColorsSwitched;w&&(u=w);var y=h.dashLength;(w=h.dashLengthSwitched)&&(y=w);var w=h.negativeLineColor,x=h.negativeFillColors,A=h.negativeFillAlphas,z=h.baseCoord;0!==h.negativeBase&&(z=h.valueAxis.getCoordinate(h.negativeBase,f),z>h.height&&(z=h.height),0>z&&(z=0)),q=d.line(l,a,b,t,q,p,y,!1,!0,f),d.setCN(k,q,h.bcn+"stroke"),m.push(q),m.click(function(a){h.handleGraphEvent(a,"clickGraph")}).mouseover(function(a){h.handleGraphEvent(a,"rollOverGraph")}).mouseout(function(a){h.handleGraphEvent(a,"rollOutGraph")}).touchmove(function(a){h.chart.handleMouseMove(a)}).touchend(function(a){h.chart.handleTouchEnd(a)}),void 0===w||h.useNegativeColorIfDown||(p=d.line(l,a,b,w,r,p,y,!1,!0,f),d.setCN(k,p,h.bcn+"stroke"),d.setCN(k,p,h.bcn+"stroke-negative"),n.push(p)),(g>0||A>0)&&(p=a.join(";").split(";"),r=b.join(";").split(";"),q=k.type,"serial"==q||"radar"==q?0<c.length?(c.reverse(),e.reverse(),p=a.concat(c),r=b.concat(e)):"radar"==q?(r.push(0),p.push(0)):h.rotate?(r.push(r[r.length-1]),p.push(z),r.push(r[0]),p.push(z),r.push(r[0]),p.push(p[0])):(p.push(p[p.length-1]),r.push(z),p.push(p[0]),r.push(z),p.push(a[0]),r.push(r[0])):"xy"==q&&(b=h.fillToAxis)&&(d.isString(b)&&(b=k.getValueAxisById(b)),"H"==b.orientation?(z="top"==b.position?0:b.height,p.push(p[p.length-1]),r.push(z),p.push(p[0]),r.push(z),p.push(a[0]),r.push(r[0])):(z="left"==b.position?0:b.width,r.push(r[r.length-1]),p.push(z),r.push(r[0]),p.push(z),r.push(r[0]),p.push(p[0]))),a=h.gradientRotation,g>0&&(b=d.polygon(l,p,r,u,g,1,"#000",0,a,f),b.pattern(h.pattern,NaN,k.path),d.setCN(k,b,h.bcn+"fill"),m.push(b)),(x||void 0!==w)&&(isNaN(A)&&(A=g),x||(x=w),f=d.polygon(l,p,r,x,A,1,"#000",0,a,f),d.setCN(k,f,h.bcn+"fill"),d.setCN(k,f,h.bcn+"fill-negative"),f.pattern(h.pattern,NaN,k.path),n.push(f),n.click(function(a){h.handleGraphEvent(a,"clickGraph")}).mouseover(function(a){h.handleGraphEvent(a,"rollOverGraph")}).mouseout(function(a){h.handleGraphEvent(a,"rollOutGraph")}).touchmove(function(a){h.chart.handleMouseMove(a)}).touchend(function(a){h.chart.handleTouchEnd(a)}))),h.applyMask(n,m)}},applyMask:function(a,b){var c=a.length();"serial"!=this.chart.type||this.scrollbar||(this.positiveClip(b),c>0&&this.negativeClip(a))},drawSmoothedGraph:function(a,b,c,e){if(1<a.length){var h=this.set,f=this.chart,g=this.container,k=g.set(),l=g.set();h.push(l),h.push(k);var m=this.lineAlpha,n=this.lineThickness,h=this.dashLength,q=this.fillAlphas,p=this.lineColorR,t=this.fillColorsR,r=this.negativeLineColor,u=this.negativeFillColors,w=this.negativeFillAlphas,y=this.baseCoord,x=this.lineColorSwitched;x&&(p=x),(x=this.fillColorsSwitched)&&(t=x),x=this.negativeLineAlpha,isNaN(x)&&(x=m),m=new d.Bezier(g,a,b,p,m,n,t,0,h),d.setCN(f,m,this.bcn+"stroke"),k.push(m.path),void 0!==r&&(n=new d.Bezier(g,a,b,r,x,n,t,0,h),d.setCN(f,n,this.bcn+"stroke"),d.setCN(f,n,this.bcn+"stroke-negative"),l.push(n.path)),q>0&&(m=a.join(";").split(";"),p=b.join(";").split(";"),n="",0<c.length?(c.push("M"),e.push("M"),c.reverse(),e.reverse(),m=a.concat(c),p=b.concat(e)):(this.rotate?(n+=" L"+y+","+b[b.length-1],n+=" L"+y+","+b[0]):(n+=" L"+a[a.length-1]+","+y,n+=" L"+a[0]+","+y),n+=" L"+a[0]+","+b[0]),c=new d.Bezier(g,m,p,NaN,0,0,t,q,h,n),d.setCN(f,c,this.bcn+"fill"),c.path.pattern(this.pattern,NaN,f.path),k.push(c.path),u||void 0!==r)&&(w||(w=q),u||(u=r),a=new d.Bezier(g,a,b,NaN,0,0,u,w,h,n),a.path.pattern(this.pattern,NaN,f.path),d.setCN(f,a,this.bcn+"fill"),d.setCN(f,a,this.bcn+"fill-negative"),l.push(a.path)),this.applyMask(l,k)}},launchAnimation:function(){var a=this,b=a.chart.startDuration;if(b>0&&!a.animationPlayed){var c=a.set,e=a.bulletSet;d.VML||(c.attr({opacity:a.startAlpha}),e.attr({opacity:a.startAlpha})),c.hide(),e.hide(),a.seqAn?(b=setTimeout(function(){a.animateGraphs.call(a)},a.index*b*1e3),a.timeOuts.push(b)):a.animateGraphs()}},animateGraphs:function(){var a=this.chart,b=this.set,c=this.bulletSet,e=this.x,d=this.y;b.show(),c.show();var f=a.startDuration,g=a.startEffect;b&&(this.rotate?(b.translate(-1e3,d),c.translate(-1e3,d)):(b.translate(e,-1e3),c.translate(e,-1e3)),b.animate({opacity:1,translate:e+","+d},f,g),c.animate({opacity:1,translate:e+","+d},f,g),a.animatable.push(b))},animate:function(a){var b=this.chart,c=this.animationArray;!a&&0<c.length&&(a=c[0],c.shift()),c=d[d.getEffect(b.startEffect)],b=b.startDuration,a&&(this.rotate?a.animateWidth(b,c):a.animateHeight(b,c),a.set.show())},legendKeyColor:function(){var a=this.legendColor,b=this.lineAlpha;return void 0===a&&(a=this.lineColorR,0===b&&(b=this.fillColorsR)&&(a="object"==typeof b?b[0]:b)),a},legendKeyAlpha:function(){var a=this.legendAlpha;return void 0===a&&(a=this.lineAlpha,this.fillAlphas>a&&(a=this.fillAlphas),0===a&&(a=this.bulletAlpha),0===a&&(a=1)),a},createBullet:function(a,b,c){if(!isNaN(b)&&!isNaN(c)&&("none"!=this.bullet||this.customBullet||a.bullet||a.customBullet)){var e=this.chart,h=this.container,f=this.bulletOffset,g=this.bulletSize;isNaN(a.bulletSize)||(g=a.bulletSize);var k=a.values.value,l=this.maxValue,m=this.minValue,n=this.maxBulletSize,q=this.minBulletSize;isNaN(l)||(isNaN(k)||(g=(k-m)/(l-m)*(n-q)+q),m==l&&(g=n)),l=g,this.bulletAxis&&(g=a.values.error,isNaN(g)||(k=g),g=this.bulletAxis.stepWidth*k),g<this.minBulletSize&&(g=this.minBulletSize),this.rotate?b=a.isNegative?b-f:b+f:c=a.isNegative?c+f:c-f,q=this.bulletColorR,a.lineColor&&(this.bulletColorSwitched=a.lineColor),this.bulletColorSwitched&&(q=this.bulletColorSwitched),a.isNegative&&void 0!==this.bulletColorNegative&&(q=this.bulletColorNegative),void 0!==a.color&&(q=a.color);var p;"xy"==e.type&&this.valueField&&(p=this.pattern,a.pattern&&(p=a.pattern)),f=this.bullet,a.bullet&&(f=a.bullet);var k=this.bulletBorderThickness,m=this.bulletBorderColorR,n=this.bulletBorderAlpha,t=this.bulletAlpha;m||(m=q),this.useLineColorForBulletBorder&&(m=this.lineColorR,this.lineColorSwitched&&(m=this.lineColorSwitched));var r=a.alpha;return isNaN(r)||(t=r),p=d.bullet(h,f,g,q,t,k,m,n,l,0,p,e.path),l=this.customBullet,a.customBullet&&(l=a.customBullet),l&&(p&&p.remove(),"function"==typeof l?(l=new l,l.chart=e,a.bulletConfig&&(l.availableSpace=c,l.graph=this,l.graphDataItem=a,l.bulletY=c,a.bulletConfig.minCoord=this.minCoord-c,l.bulletConfig=a.bulletConfig),l.write(h),p&&l.showBullet&&l.set.push(p),a.customBulletGraphics=l.cset,p=l.set):(p=h.set(),h=h.image(l,0,0,g,g),p.push(h),this.centerCustomBullets&&h.translate(-g/2,-g/2))),p&&((a.url||this.showHandOnHover)&&p.setAttr("cursor","pointer"),("serial"==e.type||"gantt"==e.type)&&(-.5>b||b>this.width||-g/2>c||c>this.height)&&(p.remove(),p=null),p&&(this.bulletSet.push(p),p.translate(b,c),this.addListeners(p,a),this.allBullets.push(p)),a.bx=b,a.by=c,d.setCN(e,p,this.bcn+"bullet"),a.className&&d.setCN(e,p,a.className,!0)),p?(p.size=g||0,a.bulletGraphics=p):p={size:0},p.graphDataItem=a,p}},showBullets:function(){var b,a=this.allBullets;for(this.bulletsHidden=!1,b=0;b<a.length;b++)a[b].show()},hideBullets:function(){var b,a=this.allBullets;for(this.bulletsHidden=!0,b=0;b<a.length;b++)a[b].hide()},showCustomBullets:function(){var b,a=this.allBullets;for(this.customBulletsHidden=!1,b=0;b<a.length;b++){var c=a[b].graphDataItem;c.customBulletGraphics&&c.customBulletGraphics.show()}},hideCustomBullets:function(){var b,a=this.allBullets;for(this.customBulletsHidden=!0,b=0;b<a.length;b++){var c=a[b].graphDataItem;c.customBulletGraphics&&c.customBulletGraphics.hide()}},addListeners:function(a,b){var c=this;a.mouseover(function(a){c.handleRollOver(b,a)}).mouseout(function(a){c.handleRollOut(b,a)}).touchend(function(a){c.handleRollOver(b,a),c.chart.panEventsEnabled&&c.handleClick(b,a)}).touchstart(function(a){c.handleRollOver(b,a)}).click(function(a){c.handleClick(b,a)}).dblclick(function(a){c.handleDoubleClick(b,a)}).contextmenu(function(a){c.handleRightClick(b,a)})},handleRollOver:function(a,b){if(this.handleGraphEvent(b,"rollOverGraph"),a){var c=this.chart,e={type:"rollOverGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire(e),c.fire(e),clearTimeout(c.hoverInt),(c=c.chartCursor)&&c.valueBalloonsEnabled||this.showGraphBalloon(a,"V",!0)}},handleRollOut:function(a,b){if(a){var c={type:"rollOutGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire(c),this.chart.fire(c)}this.handleGraphEvent(b,"rollOutGraph"),(c=this.chart.chartCursor)&&c.valueBalloonsEnabled||this.hideBalloon()},handleClick:function(a,b){if(a){var c={type:"clickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire(c),this.chart.fire(c),d.getURL(a.url,this.urlTarget)}this.handleGraphEvent(b,"clickGraph")},handleGraphEvent:function(a,b){var c={type:b,graph:this,target:this,chart:this.chart,event:a};this.fire(c),this.chart.fire(c)},handleRightClick:function(a,b){if(a){var c={type:"rightClickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire(c),this.chart.fire(c)}},handleDoubleClick:function(a,b){if(a){var c={type:"doubleClickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire(c),this.chart.fire(c)}},zoom:function(a,b){this.start=a,this.end=b,this.draw()},changeOpacity:function(a){var b=this.set;if(b&&b.setAttr("opacity",a),b=this.ownColumns){var c;for(c=0;c<b.length;c++){var e=b[c].set;e&&e.setAttr("opacity",a)}}(b=this.bulletSet)&&b.setAttr("opacity",a)},destroy:function(){d.remove(this.set),d.remove(this.bulletSet);var a=this.timeOuts;if(a){var b;for(b=0;b<a.length;b++)clearTimeout(a[b])}this.timeOuts=[]},createBalloon:function(){var a=this.chart;this.balloon?this.balloon.destroy&&this.balloon.destroy():this.balloon={};var b=this.balloon;d.extend(b,a.balloon,!0),b.chart=a,b.mainSet=a.plotBalloonsSet},hideBalloon:function(){var a=this,b=a.chart;b.chartCursor?b.chartCursor.valueBalloonsEnabled||b.hideBalloon():b.hideBalloon(),clearTimeout(a.hoverInt),a.hoverInt=setTimeout(function(){a.hideBalloonReal.call(a)},b.hideBalloonTime)},hideBalloonReal:function(){this.balloon&&this.balloon.hide(),this.fixBulletSize()},fixBulletSize:function(){if(d.isModern){var a=this.resizedDItem;if(a){var b=a.bulletGraphics;b&&!b.doNotScale&&(b.translate(a.bx,a.by,1),b.setAttr("fill-opacity",this.bulletAlpha),b.setAttr("stroke-opacity",this.bulletBorderAlpha))}this.resizedDItem=null}},showGraphBalloon:function(a,b,c,e,h){var f=this.chart,g=this.balloon,k=0,l=0,m=f.chartCursor,n=!0;if(m?m.valueBalloonsEnabled||(g=f.balloon,k=this.x,l=this.y,n=!1):(g=f.balloon,k=this.x,l=this.y,n=!1),clearTimeout(this.hoverInt),f.chartCursor&&(this.currentDataItem=a),this.resizeBullet(a,e,h),g&&g.enabled&&this.showBalloon&&!this.hidden){var m=f.formatString(this.balloonText,a,!0),q=this.balloonFunction;q&&(m=q(a,a.graph)),m&&(m=d.cleanFromEmpty(m)),m&&""!==m?(e=f.getBalloonColor(this,a),g.drop||(g.pointerOrientation=b),b=a.x,h=a.y,f.rotate&&(b=a.y,h=a.x),b+=k,h+=l,isNaN(b)||isNaN(h)?this.hideBalloonReal():(a=this.width,q=this.height,n&&g.setBounds(k,l,a+k,q+l),g.changeColor(e),g.setPosition(b,h),g.fixPrevious(),g.fixedPosition&&(c=!1),!c&&"radar"!=f.type&&(k>b||b>a+k||l>h||h>q+l)?(g.showBalloon(m),g.hide(0)):(g.followCursor(c),g.showBalloon(m)))):(this.hideBalloonReal(),this.resizeBullet(a,e,h))}else this.hideBalloonReal()},resizeBullet:function(a,b,c){if(this.fixBulletSize(),a&&d.isModern&&(1!=b||!isNaN(c))){var e=a.bulletGraphics;e&&!e.doNotScale&&(e.translate(a.bx,a.by,b),isNaN(c)||(e.setAttr("fill-opacity",c),e.setAttr("stroke-opacity",c)),this.resizedDItem=a)}}})}(),function(){var d=window.AmCharts;d.ChartCursor=d.Class({construct:function(a){this.cname="ChartCursor",this.createEvents("changed","zoomed","onHideCursor","onShowCursor","draw","selected","moved","panning","zoomStarted"),this.enabled=!0,this.cursorAlpha=1,this.selectionAlpha=.2,this.cursorColor="#CC0000",this.categoryBalloonAlpha=1,this.color="#FFFFFF",this.type="cursor",this.zoomed=!1,this.zoomable=!0,this.pan=!1,this.categoryBalloonDateFormat="MMM DD, YYYY",this.categoryBalloonText="[[category]]",this.categoryBalloonEnabled=this.valueBalloonsEnabled=!0,this.rolledOver=!1,this.cursorPosition="middle",this.bulletsEnabled=this.skipZoomDispatch=!1,this.bulletSize=8,this.selectWithoutZooming=this.oneBalloonOnly=!1,this.graphBulletSize=1.7,this.animationDuration=.3,this.zooming=!1,this.adjustment=0,this.avoidBalloonOverlapping=!0,this.leaveCursor=!1,this.leaveAfterTouch=!0,this.valueZoomable=!1,this.balloonPointerOrientation="horizontal",this.hLineEnabled=this.vLineEnabled=!0,this.vZoomEnabled=this.hZoomEnabled=!1,d.applyTheme(this,a,this.cname)},draw:function(){this.destroy();var a=this.chart;a.panRequired=!0;var b=a.container;this.rotate=a.rotate,this.container=b,this.prevLineHeight=this.prevLineWidth=NaN,b=b.set(),b.translate(this.x,this.y),this.set=b,a.cursorSet.push(b),this.createElements(),d.isString(this.limitToGraph)&&(this.limitToGraph=d.getObjById(a.graphs,this.limitToGraph),this.fullWidth=!1,this.cursorPosition="middle"),this.pointer=this.balloonPointerOrientation.substr(0,1).toUpperCase(),this.isHidden=!1,this.hideLines(),this.valueLineAxis||(this.valueLineAxis=a.valueAxes[0])},createElements:function(){var f,g,a=this.chart,b=a.dx,c=a.dy,e=this.width,h=this.height,k=this.cursorAlpha;f=this.valueLineAlpha,this.rotate?g=k:(g=f,f=k),"xy"==a.type&&(f=g=k),this.vvLine=d.line(this.container,[b,0,0],[c,0,h],this.cursorColor,f,1),d.setCN(a,this.vvLine,"cursor-line"),d.setCN(a,this.vvLine,"cursor-line-vertical"),this.hhLine=d.line(this.container,[0,e,e+b],[0,0,c],this.cursorColor,g,1),d.setCN(a,this.hhLine,"cursor-line"),d.setCN(a,this.hhLine,"cursor-line-horizontal"),this.vLine=this.rotate?this.vvLine:this.hhLine,this.set.push(this.vvLine),this.set.push(this.hhLine),this.set.node.style.pointerEvents="none",this.fullLines=this.container.set(),a=a.cursorLineSet,a.push(this.fullLines),a.translate(this.x,this.y),a.clipRect(0,0,e,h),this.set.clipRect(0,0,e,h)},update:function(){var a=this.chart,b=a.mouseX-this.x,c=a.mouseY-this.y;this.mouseX=b,this.mouseY=c,this.mouse2X=a.mouse2X-this.x,this.mouse2Y=a.mouse2Y-this.y;var e;if(a.chartData&&0<a.chartData.length){if(this.mouseIsOver()?(this.hideGraphBalloons=!1,this.rolledOver=e=!0,this.updateDrawing(),this.vvLine&&isNaN(this.fx)&&(a.rotate||!this.limitToGraph)&&this.vvLine.translate(b,0),!this.hhLine||!isNaN(this.fy)||a.rotate&&this.limitToGraph||this.hhLine.translate(0,c),isNaN(this.mouse2X)?this.dispatchMovedEvent(b,c):e=!1):this.forceShow||this.hideCursor(),this.zooming){if(!isNaN(this.mouse2X))return void(isNaN(this.mouse2X0)||this.dispatchPanEvent());if(this.pan)return void this.dispatchPanEvent();(this.hZoomEnabled||this.vZoomEnabled)&&this.zooming&&this.updateSelection()}e&&this.showCursor()}},updateDrawing:function(){this.drawing&&this.chart.setMouseCursor("crosshair"),this.drawingNow&&(d.remove(this.drawingLine),this.drawingLine=d.line(this.container,[this.drawStartX,this.mouseX],[this.drawStartY,this.mouseY],this.cursorColor,1,1))},fixWidth:function(a){if(this.fullWidth&&this.prevLineWidth!=a){var b=this.vvLine,c=0;b&&(b.remove(),c=b.x),b=this.container.set(),b.translate(c,0),c=d.rect(this.container,a,this.height,this.cursorColor,this.cursorAlpha,0),d.setCN(this.chart,c,"cursor-fill"),c.translate(-a/2,0),b.push(c),this.vvLine=b,this.fullLines.push(b),this.prevLineWidth=a}},fixHeight:function(a){if(this.fullWidth&&this.prevLineHeight!=a){var b=this.hhLine,c=0;b&&(b.remove(),c=b.y),b=this.container.set(),b.translate(0,c),c=d.rect(this.container,this.width,a,this.cursorColor,this.cursorAlpha),c.translate(0,-a/2),b.push(c),this.fullLines.push(b),this.hhLine=b,this.prevLineHeight=a}},fixVLine:function(a,b){if(!isNaN(a)){if(isNaN(this.prevLineX)){var c=0,e=this.mouseX;if(this.limitToGraph){var d=this.chart.categoryAxis;d&&(this.chart.rotate||(c="bottom"==d.position?this.height:-this.height),e=a)}this.vvLine.translate(e,c)}else this.prevLineX!=a&&this.vvLine.translate(this.prevLineX,this.prevLineY);this.fx=a,this.prevLineX!=a&&(c=this.animationDuration,this.zooming&&(c=0),this.vvLine.stop(),this.vvLine.animate({translate:a+","+b},c,"easeOutSine"),this.prevLineX=a,this.prevLineY=b)}},fixHLine:function(a,b){if(!isNaN(a)){if(isNaN(this.prevLineY)){var c=0,e=this.mouseY;if(this.limitToGraph){var d=this.chart.categoryAxis;d&&(this.chart.rotate&&(c="right"==d.position?this.width:-this.width),e=a)}this.hhLine.translate(c,e)}else this.prevLineY!=a&&this.hhLine.translate(this.prevLineX,this.prevLineY);this.fy=a,this.prevLineY!=a&&(c=this.animationDuration,this.zooming&&(c=0),this.hhLine.stop(),this.hhLine.animate({translate:b+","+a},c,"easeOutSine"),this.prevLineY=a,this.prevLineX=b)}},hideCursor:function(a){this.forceShow=!1,this.chart.wasTouched&&this.leaveAfterTouch||this.isHidden||this.leaveCursor||(this.hideLines(),
this.isHidden=!0,this.index=this.prevLineY=this.prevLineX=this.mouseY0=this.mouseX0=this.fy=this.fx=NaN,a?this.chart.handleCursorHide():this.fire({target:this,chart:this.chart,type:"onHideCursor"}),this.chart.setMouseCursor("auto"))},hideLines:function(){this.vvLine&&this.vvLine.hide(),this.hhLine&&this.hhLine.hide(),this.fullLines&&this.fullLines.hide(),this.isHidden=!0,this.chart.handleCursorHide()},showCursor:function(a){this.drawing||(this.vLineEnabled&&this.vvLine&&this.vvLine.show(),this.hLineEnabled&&this.hhLine&&this.hhLine.show(),this.isHidden=!1,this.updateFullLine(),a||this.fire({target:this,chart:this.chart,type:"onShowCursor"}),this.pan&&this.chart.setMouseCursor("move"))},updateFullLine:function(){this.zooming&&this.fullWidth&&this.selection&&(this.rotate?0<this.selection.height&&this.hhLine.hide():0<this.selection.width&&this.vvLine.hide())},updateSelection:function(){if(!this.pan){var a=this.mouseX,b=this.mouseY;isNaN(this.fx)||(a=this.fx),isNaN(this.fy)||(b=this.fy),this.clearSelection();var g,c=this.mouseX0,e=this.mouseY0,h=this.width,f=this.height,a=d.fitToBounds(a,0,h),b=d.fitToBounds(b,0,f);c>a&&(g=a,a=c,c=g),e>b&&(g=b,b=e,e=g),this.hZoomEnabled?h=a-c:c=0,this.vZoomEnabled?f=b-e:e=0,isNaN(this.mouse2X)&&0<Math.abs(h)&&0<Math.abs(f)&&(a=this.chart,b=d.rect(this.container,h,f,this.cursorColor,this.selectionAlpha),d.setCN(a,b,"cursor-selection"),b.width=h,b.height=f,b.translate(c,e),this.set.push(b),this.selection=b),this.updateFullLine()}},mouseIsOver:function(){var a=this.mouseX,b=this.mouseY;return this.justReleased?(this.justReleased=!1,!0):this.mouseIsDown?!0:this.chart.mouseIsOver?a>0&&a<this.width&&b>0&&b<this.height?!0:void this.handleMouseOut():(this.handleMouseOut(),!1)},fixPosition:function(){this.prevY=this.prevX=NaN},handleMouseDown:function(){if(this.update(),this.mouseIsOver())if(this.mouseIsDown=!0,this.mouseX0=this.mouseX,this.mouseY0=this.mouseY,this.mouse2X0=this.mouse2X,this.mouse2Y0=this.mouse2Y,this.drawing)this.drawStartY=this.mouseY,this.drawStartX=this.mouseX,this.drawingNow=!0;else if(this.dispatchMovedEvent(this.mouseX,this.mouseY),!this.pan&&isNaN(this.mouse2X0)&&(isNaN(this.fx)||(this.mouseX0=this.fx),isNaN(this.fy)||(this.mouseY0=this.fy)),this.hZoomEnabled||this.vZoomEnabled){this.zooming=!0;var a={chart:this.chart,target:this,type:"zoomStarted"};a.x=this.mouseX/this.width,a.y=this.mouseY/this.height,this.index0=a.index=this.index,this.timestamp0=this.timestamp,this.fire(a)}},registerInitialMouse:function(){},handleReleaseOutside:function(){if(this.mouseIsDown=!1,this.drawingNow){this.drawingNow=!1,d.remove(this.drawingLine);var a=this.drawStartX,b=this.drawStartY,c=this.mouseX,e=this.mouseY,h=this.chart;(2<Math.abs(a-c)||2<Math.abs(b-e))&&this.fire({type:"draw",target:this,chart:h,initialX:a,initialY:b,finalX:c,finalY:e})}this.zooming&&(this.zooming=!1,this.selectWithoutZooming?this.dispatchZoomEvent("selected"):(this.hZoomEnabled||this.vZoomEnabled)&&this.dispatchZoomEvent("zoomed"),this.rolledOver&&this.dispatchMovedEvent(this.mouseX,this.mouseY)),this.mouse2Y0=this.mouse2X0=this.mouseY0=this.mouseX0=NaN},dispatchZoomEvent:function(a){if(!this.pan){var b=this.selection;if(b&&3<Math.abs(b.width)&&3<Math.abs(b.height)){var c=Math.min(this.index,this.index0),e=Math.max(this.index,this.index0),d=c,f=e,g=this.chart,k=g.chartData,l=g.categoryAxis;l&&l.parseDates&&!l.equalSpacing&&(d=k[c]?k[c].time:Math.min(this.timestamp0,this.timestamp),f=k[e]?g.getEndTime(k[e].time):Math.max(this.timestamp0,this.timestamp));var m,b={type:a,chart:this.chart,target:this,end:f,start:d,startIndex:c,endIndex:e,selectionHeight:b.height,selectionWidth:b.width,selectionY:b.y,selectionX:b.x};this.hZoomEnabled&&4<Math.abs(this.mouseX0-this.mouseX)&&(b.startX=this.mouseX0/this.width,b.endX=this.mouseX/this.width,m=!0),this.vZoomEnabled&&4<Math.abs(this.mouseY0-this.mouseY)&&(b.startY=1-this.mouseY0/this.height,b.endY=1-this.mouseY/this.height,m=!0),m&&(this.prevY=this.prevX=NaN,this.fire(b),"selected"!=a&&this.clearSelection()),this.hideCursor()}}},dispatchMovedEvent:function(a,b,c,e){if(a=Math.round(a),b=Math.round(b),!this.isHidden&&(a!=this.prevX||b!=this.prevY||"changed"==c)){c||(c="moved");var d=this.fx,f=this.fy;isNaN(d)&&(d=a),isNaN(f)&&(f=b);var g=!1;this.zooming&&this.pan&&(g=!0),g={hidden:this.isHidden,type:c,chart:this.chart,target:this,x:a,y:b,finalX:d,finalY:f,zooming:this.zooming,panning:g,mostCloseGraph:this.mostCloseGraph,index:this.index,skip:e,hideBalloons:this.hideGraphBalloons},this.rotate?(g.position=b,g.finalPosition=f):(g.position=a,g.finalPosition=d),this.prevX=a,this.prevY=b,e?this.chart.handleCursorMove(g):(this.fire(g),"changed"==c&&this.chart.fire(g))}},dispatchPanEvent:function(){if(this.mouseIsDown){var a=d.roundTo((this.mouseX-this.mouseX0)/this.width,3),b=d.roundTo((this.mouseY-this.mouseY0)/this.height,3),c=d.roundTo((this.mouse2X-this.mouse2X0)/this.width,3),e=d.roundTo((this.mouse2Y-this.mouse2Y0)/this.height,2),h=!1;0!==Math.abs(a)&&0!==Math.abs(b)&&(h=!0),(this.prevDeltaX==a||this.prevDeltaY==b)&&(h=!1),isNaN(c)||isNaN(e)||(0!==Math.abs(c)&&0!==Math.abs(e)&&(h=!0),this.prevDelta2X!=c&&this.prevDelta2Y!=e)||(h=!1),h&&(this.hideLines(),this.fire({type:"panning",chart:this.chart,target:this,deltaX:a,deltaY:b,delta2X:c,delta2Y:e,index:this.index}),this.prevDeltaX=a,this.prevDeltaY=b,this.prevDelta2X=c,this.prevDelta2Y=e)}},clearSelection:function(){var a=this.selection;a&&(a.width=0,a.height=0,a.remove())},destroy:function(){this.clear(),d.remove(this.selection),this.selection=null,clearTimeout(this.syncTO),d.remove(this.set)},clear:function(){},setTimestamp:function(a){this.timestamp=a},setIndex:function(a,b){a!=this.index&&(this.index=a,b||this.isHidden||this.dispatchMovedEvent(this.mouseX,this.mouseY,"changed"))},handleMouseOut:function(){this.enabled&&this.rolledOver&&(this.leaveCursor||this.setIndex(void 0),this.forceShow=!1,this.hideCursor(),this.rolledOver=!1)},showCursorAt:function(a){var b=this.chart.categoryAxis;b&&this.setPosition(b.categoryToCoordinate(a))},setPosition:function(a){var b=this.chart,c=b.categoryAxis;if(c){var e,d,f=c.coordinateToValue(a);c.showBalloonAt(f),this.forceShow=!0,c.stickBalloonToCategory?b.rotate?this.fixHLine(a,0):this.fixVLine(a,0):(this.showCursor(),b.rotate?this.hhLine.translate(0,a):this.vvLine.translate(a,0)),b.rotate?e=a:d=a,this.dispatchMovedEvent(d,e),b.rotate?(this.vvLine&&this.vvLine.hide(),this.hhLine&&this.hhLine.show()):(this.hhLine&&this.hhLine.hide(),this.vvLine&&this.vvLine.show()),this.updateFullLine(),this.isHidden=!1,this.dispatchMovedEvent(d,e,"moved",!0)}},enableDrawing:function(a){this.enabled=!a,this.hideCursor(),this.drawing=a},syncWithCursor:function(a,b){clearTimeout(this.syncTO),a&&(a.isHidden?this.hideCursor(!0):this.syncWithCursorReal(a,b))},isZooming:function(a){this.zooming=a},syncWithCursorReal:function(a,b){var c=a.vvLine,e=a.hhLine;this.index=a.index,this.forceShow=!0,this.zooming&&this.pan||this.showCursor(!0),this.hideGraphBalloons=b,this.justReleased=a.justReleased,this.zooming=a.zooming,this.index0=a.index0,this.mouseX0=a.mouseX0,this.mouseY0=a.mouseY0,this.mouse2X0=a.mouse2X0,this.mouse2Y0=a.mouse2Y0,this.timestamp0=a.timestamp0,this.prevDeltaX=a.prevDeltaX,this.prevDeltaY=a.prevDeltaY,this.prevDelta2X=a.prevDelta2X,this.prevDelta2Y=a.prevDelta2Y,this.fx=a.fx,this.fy=a.fy,this.index=a.index,a.zooming&&this.updateSelection();var d=a.mouseX,f=a.mouseY;this.rotate?(d=NaN,this.vvLine&&this.vvLine.hide(),this.hhLine&&e&&(isNaN(a.fy)?this.hhLine.translate(0,a.mouseY):this.fixHLine(a.fy,0))):(f=NaN,this.hhLine&&this.hhLine.hide(),this.vvLine&&c&&(isNaN(a.fx)?this.vvLine.translate(a.mouseX,0):this.fixVLine(a.fx,0))),this.dispatchMovedEvent(d,f,"moved",!0)}})}(),function(){var d=window.AmCharts;d.SimpleChartScrollbar=d.Class({construct:function(a){this.createEvents("zoomed","zoomStarted","zoomEnded"),this.backgroundColor="#D4D4D4",this.backgroundAlpha=1,this.selectedBackgroundColor="#EFEFEF",this.scrollDuration=this.selectedBackgroundAlpha=1,this.resizeEnabled=!0,this.hideResizeGrips=!1,this.scrollbarHeight=20,this.updateOnReleaseOnly=!1,9>document.documentMode&&(this.updateOnReleaseOnly=!0),this.dragIconHeight=this.dragIconWidth=35,this.dragIcon="dragIconRoundBig",this.dragCursorHover="cursor: cursor: grab; cursor:-moz-grab; cursor:-webkit-grab;",this.dragCursorDown="cursor: cursor: grab; cursor:-moz-grabbing; cursor:-webkit-grabbing;",this.enabled=!0,this.percentStart=this.offset=0,this.percentEnd=1,d.applyTheme(this,a,"SimpleChartScrollbar")},draw:function(){var a=this;if(a.destroy(),a.enabled){var b=a.chart.container,c=a.rotate,e=a.chart;e.panRequired=!0;var h=b.set();a.set=h,e.scrollbarsSet.push(h);var f,g;if(c?(f=a.scrollbarHeight,g=e.plotAreaHeight):(g=a.scrollbarHeight,f=e.plotAreaWidth),a.width=f,(a.height=g)&&f){var k=d.rect(b,f,g,a.backgroundColor,a.backgroundAlpha,1,a.backgroundColor,a.backgroundAlpha);d.setCN(e,k,"scrollbar-bg"),a.bg=k,h.push(k),k=d.rect(b,f,g,"#000",.005),h.push(k),a.invisibleBg=k,k.click(function(){a.handleBgClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()}).touchend(function(){a.handleBgClick()}),k=d.rect(b,f,g,a.selectedBackgroundColor,a.selectedBackgroundAlpha),d.setCN(e,k,"scrollbar-bg-selected"),a.selectedBG=k,h.push(k),f=d.rect(b,f,g,"#000",.005),a.dragger=f,h.push(f),f.mousedown(function(b){a.handleDragStart(b)}).mouseup(function(){a.handleDragStop()}).mouseover(function(){a.handleDraggerOver()}).mouseout(function(){a.handleMouseOut()}).touchstart(function(b){a.handleDragStart(b)}).touchend(function(){a.handleDragStop()}),f=e.pathToImages,g=a.dragIcon.replace(/\.[a-z]*$/i,""),c?(k=f+g+"H"+e.extension,f=a.dragIconWidth,c=a.dragIconHeight):(k=f+g+e.extension,c=a.dragIconWidth,f=a.dragIconHeight),g=b.image(k,0,0,c,f),d.setCN(e,g,"scrollbar-grip-left"),k=b.image(k,0,0,c,f),d.setCN(e,k,"scrollbar-grip-right");var l=10,m=20;e.panEventsEnabled&&(l=25,m=a.scrollbarHeight);var n=d.rect(b,l,m,"#000",.005),q=d.rect(b,l,m,"#000",.005);q.translate(-(l-c)/2,-(m-f)/2),n.translate(-(l-c)/2,-(m-f)/2),c=b.set([g,q]),b=b.set([k,n]),a.iconLeft=c,h.push(a.iconLeft),a.iconRight=b,h.push(b),c.mousedown(function(){a.leftDragStart()}).mouseup(function(){a.leftDragStop()}).mouseover(function(){a.iconRollOver()}).mouseout(function(){a.iconRollOut()}).touchstart(function(){a.leftDragStart()}).touchend(function(){a.leftDragStop()}),b.mousedown(function(){a.rightDragStart()}).mouseup(function(){a.rightDragStop()}).mouseover(function(){a.iconRollOver()}).mouseout(function(){a.iconRollOut()}).touchstart(function(){a.rightDragStart()}).touchend(function(){a.rightDragStop()}),d.ifArray(e.chartData)?h.show():h.hide(),a.hideDragIcons(),a.clipDragger(!1)}h.translate(a.x,a.y),h.node.style.msTouchAction="none",h.node.style.touchAction="none"}},updateScrollbarSize:function(a,b){if(!isNaN(a)&&!isNaN(b)){a=Math.round(a),b=Math.round(b);var e,d,f,g,k,c=this.dragger;this.rotate?(e=0,d=a,f=this.width+1,g=b-a,c.setAttr("height",b-a),c.setAttr("y",d)):(e=a,d=0,f=b-a,g=this.height+1,k=b-a,c.setAttr("x",e),c.setAttr("width",k)),this.clipAndUpdate(e,d,f,g)}},update:function(){var a,c,e,b=!1,d=this.x,f=this.y,g=this.dragger,k=this.getDBox();if(k){c=k.x+d,e=k.y+f;var l=k.width,k=k.height,m=this.rotate,n=this.chart,q=this.width,p=this.height,t=n.mouseX,r=n.mouseY;a=this.initialMouse,this.forceClip&&this.clipDragger(!0),n.mouseIsOver&&(this.dragging&&(n=this.initialCoord,m?(a=n+(r-a),0>a&&(a=0),n=p-k,a>n&&(a=n),g.setAttr("y",a)):(a=n+(t-a),0>a&&(a=0),n=q-l,a>n&&(a=n),g.setAttr("x",a)),this.clipDragger(!0)),this.resizingRight&&(m?(a=r-e,a+e>p+f&&(a=p-e+f),0>a?(this.resizingRight=!1,b=this.resizingLeft=!0):(0===a&&(a=.1),g.setAttr("height",a))):(a=t-c,a+c>q+d&&(a=q-c+d),0>a?(this.resizingRight=!1,b=this.resizingLeft=!0):(0===a&&(a=.1),g.setAttr("width",a))),this.clipDragger(!0)),this.resizingLeft&&(m?(c=e,e=r,f>e&&(e=f),e>p+f&&(e=p+f),a=!0===b?c-e:k+c-e,0>a?(this.resizingRight=!0,this.resizingLeft=!1,g.setAttr("y",c+k-f)):(0===a&&(a=.1),g.setAttr("y",e-f),g.setAttr("height",a))):(e=t,d>e&&(e=d),e>q+d&&(e=q+d),a=!0===b?c-e:l+c-e,0>a?(this.resizingRight=!0,this.resizingLeft=!1,g.setAttr("x",c+l-d)):(0===a&&(a=.1),g.setAttr("x",e-d),g.setAttr("width",a))),this.clipDragger(!0)))}},stopForceClip:function(){this.animating=this.forceClip=!1},clipDragger:function(a){var b=this.getDBox();if(b){var c=b.x,e=b.y,d=b.width,b=b.height,f=!1;this.rotate?(c=0,d=this.width+1,(this.clipY!=e||this.clipH!=b)&&(f=!0)):(e=0,b=this.height+1,(this.clipX!=c||this.clipW!=d)&&(f=!0)),f&&(this.clipAndUpdate(c,e,d,b),a&&(this.updateOnReleaseOnly||this.dispatchScrollbarEvent()))}},maskGraphs:function(){},clipAndUpdate:function(a,b,c,e){this.clipX=a,this.clipY=b,this.clipW=c,this.clipH=e,this.selectedBG.setAttr("width",c),this.selectedBG.setAttr("height",e),this.selectedBG.translate(a,b),this.updateDragIconPositions(),this.maskGraphs(a,b,c,e)},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var a=this.chart;a.hideBalloon();var g,k,b=this.getDBox(),c=b.x,e=b.y,d=b.width,f=b.height;this.rotate?(b=e,g=this.height/f,k=1-e/this.height,c=1-(e+f)/this.height):(b=c,g=this.width/d,k=c/this.width,c=(c+d)/this.width),this.fire({type:"zoomed",position:b,chart:a,target:this,multiplier:g,relativeStart:c,relativeEnd:k})}},updateDragIconPositions:function(){var f,g,a=this.getDBox(),b=a.x,c=a.y,e=this.iconLeft,d=this.iconRight,k=this.scrollbarHeight;this.rotate?(f=this.dragIconWidth,g=this.dragIconHeight,e.translate((k-g)/2,c-f/2),d.translate((k-g)/2,c+a.height-f/2)):(f=this.dragIconHeight,g=this.dragIconWidth,e.translate(b-g/2,(k-f)/2),d.translate(b-g/2+a.width,(k-f)/2))},showDragIcons:function(){this.resizeEnabled&&(this.iconLeft.show(),this.iconRight.show())},hideDragIcons:function(){this.resizingLeft||this.resizingRight||this.dragging||((this.hideResizeGrips||!this.resizeEnabled)&&(this.iconLeft.hide(),this.iconRight.hide()),this.removeCursors())},removeCursors:function(){this.chart.setMouseCursor("auto")},fireZoomEvent:function(a){this.fire({type:a,chart:this.chart,target:this})},percentZoom:function(a,b){if(this.dragger&&this.enabled){this.dragger.stop(),isNaN(a)&&(a=0),isNaN(b)&&(b=1);var c,e,d;this.rotate?(c=this.height,e=c-c*b,d=c-c*a):(c=this.width,d=c*b,e=c*a),this.updateScrollbarSize(e,d),this.clipDragger(!1),this.percentStart=a,this.percentEnd=b}},destroy:function(){this.clear(),d.remove(this.set),d.remove(this.iconRight),d.remove(this.iconLeft)},clear:function(){},handleDragStart:function(){if(this.enabled){this.fireZoomEvent("zoomStarted");var a=this.chart;this.dragger.stop(),this.removeCursors(),d.isModern&&this.dragger.node.setAttribute("style",this.dragCursorDown),this.dragging=!0;var b=this.getDBox();this.rotate?(this.initialCoord=b.y,this.initialMouse=a.mouseY):(this.initialCoord=b.x,this.initialMouse=a.mouseX)}},handleDragStop:function(){this.updateOnReleaseOnly&&(this.update(),this.skipEvent=!1,this.dispatchScrollbarEvent()),this.dragging=!1,this.mouseIsOver&&this.removeCursors(),d.isModern&&this.dragger.node.setAttribute("style",this.dragCursorHover),this.update(),this.fireZoomEvent("zoomEnded")},handleDraggerOver:function(){this.handleMouseOver(),d.isModern&&this.dragger.node.setAttribute("style",this.dragCursorHover)},leftDragStart:function(){this.fireZoomEvent("zoomStarted"),this.dragger.stop(),this.resizingLeft=!0},leftDragStop:function(){this.resizingLeft=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease(),this.fireZoomEvent("zoomEnded")},rightDragStart:function(){this.fireZoomEvent("zoomStarted"),this.dragger.stop(),this.resizingRight=!0},rightDragStop:function(){this.resizingRight=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease(),this.fireZoomEvent("zoomEnded")},iconRollOut:function(){this.removeCursors()},iconRollOver:function(){this.rotate?this.chart.setMouseCursor("ns-resize"):this.chart.setMouseCursor("ew-resize"),this.handleMouseOver()},getDBox:function(){return this.dragger?this.dragger.getBBox():void 0},handleBgClick:function(){var a=this;if(!a.resizingRight&&!a.resizingLeft){a.zooming=!0;var b,c,e=a.scrollDuration,h=a.dragger;b=a.getDBox();var f=b.height,g=b.width;c=a.chart;var k=a.y,l=a.x,m=a.rotate;m?(b="y",c=c.mouseY-f/2-k,c=d.fitToBounds(c,0,a.height-f)):(b="x",c=c.mouseX-g/2-l,c=d.fitToBounds(c,0,a.width-g)),a.updateOnReleaseOnly?(a.skipEvent=!1,h.setAttr(b,c),a.dispatchScrollbarEvent(),a.clipDragger()):(a.animating=!0,c=Math.round(c),m?h.animate({y:c},e,">"):h.animate({x:c},e,">"),a.forceClip=!0,clearTimeout(a.forceTO),a.forceTO=setTimeout(function(){a.stopForceClip.call(a)},5e3*e))}},updateOnRelease:function(){this.updateOnReleaseOnly&&(this.update(),this.skipEvent=!1,this.dispatchScrollbarEvent())},handleReleaseOutside:function(){this.set&&((this.resizingLeft||this.resizingRight||this.dragging)&&(this.updateOnRelease(),this.removeCursors()),this.animating=this.mouseIsOver=this.dragging=this.resizingRight=this.resizingLeft=!1,this.hideDragIcons(),this.update())},handleMouseOver:function(){this.mouseIsOver=!0,this.showDragIcons()},handleMouseOut:function(){this.mouseIsOver=!1,this.hideDragIcons(),this.removeCursors()}})}(),function(){var d=window.AmCharts;d.ChartScrollbar=d.Class({inherits:d.SimpleChartScrollbar,construct:function(a){this.cname="ChartScrollbar",d.ChartScrollbar.base.construct.call(this,a),this.graphLineColor="#BBBBBB",this.graphLineAlpha=0,this.graphFillColor="#BBBBBB",this.graphFillAlpha=1,this.selectedGraphLineColor="#888888",this.selectedGraphLineAlpha=0,this.selectedGraphFillColor="#888888",this.selectedGraphFillAlpha=1,this.gridCount=0,this.gridColor="#FFFFFF",this.gridAlpha=.7,this.skipEvent=this.autoGridCount=!1,this.color="#FFFFFF",this.scrollbarCreated=!1,this.oppositeAxis=!0,d.applyTheme(this,a,this.cname)},init:function(){var a=this.categoryAxis,b=this.chart,c=this.gridAxis;a||("CategoryAxis"==this.gridAxis.cname?(this.catScrollbar=!0,a=new d.CategoryAxis,a.id="scrollbar"):(a=new d.ValueAxis,a.data=b.chartData,a.id=c.id,a.type=c.type,a.maximumDate=c.maximumDate,a.minimumDate=c.minimumDate,a.minPeriod=c.minPeriod),this.categoryAxis=a),a.chart=b,a.dateFormats=c.dateFormats,a.markPeriodChange=c.markPeriodChange,a.boldPeriodBeginning=c.boldPeriodBeginning,a.labelFunction=c.labelFunction,a.axisItemRenderer=d.RecItem,a.axisRenderer=d.RecAxis,a.guideFillRenderer=d.RecFill,a.inside=!0,a.fontSize=this.fontSize,a.tickLength=0,a.axisAlpha=0,d.isString(this.graph)&&(this.graph=d.getObjById(b.graphs,this.graph)),(a=this.graph)&&this.catScrollbar&&(c=this.valueAxis,c||(this.valueAxis=c=new d.ValueAxis,c.visible=!1,c.scrollbar=!0,c.axisItemRenderer=d.RecItem,c.axisRenderer=d.RecAxis,c.guideFillRenderer=d.RecFill,c.labelsEnabled=!1,c.chart=b),b=this.unselectedGraph,b||(b=new d.AmGraph,b.scrollbar=!0,this.unselectedGraph=b,b.negativeBase=a.negativeBase,b.noStepRisers=a.noStepRisers),b=this.selectedGraph,b||(b=new d.AmGraph,b.scrollbar=!0,this.selectedGraph=b,b.negativeBase=a.negativeBase,b.noStepRisers=a.noStepRisers)),this.scrollbarCreated=!0},draw:function(){var a=this;if(d.ChartScrollbar.base.draw.call(a),a.enabled){a.scrollbarCreated||a.init();var b=a.chart,c=b.chartData,e=a.categoryAxis,h=a.rotate,f=a.x,g=a.y,k=a.width,l=a.height,m=a.gridAxis,n=a.set;if(e.setOrientation(!h),e.parseDates=m.parseDates,"ValueAxis"==a.categoryAxis.cname&&(e.rotate=!h),e.equalSpacing=m.equalSpacing,e.minPeriod=m.minPeriod,e.startOnAxis=m.startOnAxis,e.width=k-1,e.height=l,e.gridCount=a.gridCount,e.gridColor=a.gridColor,e.gridAlpha=a.gridAlpha,e.color=a.color,e.tickLength=0,e.axisAlpha=0,e.autoGridCount=a.autoGridCount,e.parseDates&&!e.equalSpacing&&e.timeZoom(b.firstTime,b.lastTime),e.minimum=a.gridAxis.fullMin,e.maximum=a.gridAxis.fullMax,e.strictMinMax=!0,e.zoom(0,c.length-1),(m=a.graph)&&a.catScrollbar){var q=a.valueAxis,p=m.valueAxis;q.id=p.id,q.rotate=h,q.setOrientation(h),q.width=k,q.height=l,q.dataProvider=c,q.reversed=p.reversed,q.logarithmic=p.logarithmic,q.gridAlpha=0,q.axisAlpha=0,n.push(q.set),h?(q.y=g,q.x=0):(q.x=f,q.y=0);var t,f=1/0,g=-(1/0);for(t=0;t<c.length;t++){var u,r=c[t].axes[p.id].graphs[m.id].values;for(u in r)if(r.hasOwnProperty(u)&&"percents"!=u&&"total"!=u){var w=r[u];f>w&&(f=w),w>g&&(g=w)}}1/0!=f&&(q.minimum=f),-(1/0)!=g&&(q.maximum=g+.1*(g-f)),f==g&&(--q.minimum,q.maximum+=1),void 0!==a.minimum&&(q.minimum=a.minimum),void 0!==a.maximum&&(q.maximum=a.maximum),q.zoom(0,c.length-1),u=a.unselectedGraph,u.id=m.id,u.bcn="scrollbar-graph-",u.rotate=h,u.chart=b,u.data=c,u.valueAxis=q,u.chart=m.chart,u.categoryAxis=a.categoryAxis,u.periodSpan=m.periodSpan,u.valueField=m.valueField,u.openField=m.openField,u.closeField=m.closeField,u.highField=m.highField,u.lowField=m.lowField,u.lineAlpha=a.graphLineAlpha,u.lineColorR=a.graphLineColor,u.fillAlphas=a.graphFillAlpha,u.fillColorsR=a.graphFillColor,u.connect=m.connect,u.hidden=m.hidden,u.width=k,u.height=l,u.pointPosition=m.pointPosition,u.stepDirection=m.stepDirection,u.periodSpan=m.periodSpan,p=a.selectedGraph,p.id=m.id,p.bcn=u.bcn+"selected-",p.rotate=h,p.chart=b,p.data=c,p.valueAxis=q,p.chart=m.chart,p.categoryAxis=e,p.periodSpan=m.periodSpan,p.valueField=m.valueField,p.openField=m.openField,p.closeField=m.closeField,p.highField=m.highField,p.lowField=m.lowField,p.lineAlpha=a.selectedGraphLineAlpha,p.lineColorR=a.selectedGraphLineColor,p.fillAlphas=a.selectedGraphFillAlpha,p.fillColorsR=a.selectedGraphFillColor,p.connect=m.connect,p.hidden=m.hidden,p.width=k,p.height=l,p.pointPosition=m.pointPosition,p.stepDirection=m.stepDirection,p.periodSpan=m.periodSpan,b=a.graphType,b||(b=m.type),u.type=b,p.type=b,c=c.length-1,u.zoom(0,c),p.zoom(0,c),p.set.click(function(){a.handleBackgroundClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()}),u.set.click(function(){a.handleBackgroundClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()}),n.push(u.set),n.push(p.set)}n.push(e.set),n.push(e.labelsSet),a.bg.toBack(),a.invisibleBg.toFront(),a.dragger.toFront(),a.iconLeft.toFront(),a.iconRight.toFront()}},timeZoom:function(a,b,c){this.startTime=a,this.endTime=b,this.timeDifference=b-a,this.skipEvent=!d.toBoolean(c),this.zoomScrollbar(),this.skipEvent||this.dispatchScrollbarEvent()},zoom:function(a,b){this.start=a,this.end=b,this.skipEvent=!0,this.zoomScrollbar()},dispatchScrollbarEvent:function(){if("ValueAxis"==this.categoryAxis.cname)d.ChartScrollbar.base.dispatchScrollbarEvent.call(this);else if(this.skipEvent)this.skipEvent=!1;else{var b,c,a=this.chart.chartData,e=this.dragger.getBBox();b=e.x;var h=e.y,f=e.width,e=e.height,g=this.chart;this.rotate?(b=h,c=e):c=f,f={type:"zoomed",target:this},f.chart=g;var k=this.categoryAxis,l=this.stepWidth,h=g.minSelectedTime,e=g.maxSelectedTime,m=!1;k.parseDates&&!k.equalSpacing?(a=g.lastTime,g=g.firstTime,k=Math.round(b/l)+g,b=this.dragging?k+this.timeDifference:Math.round((b+c)/l)+g,k>b&&(k=b),h>0&&h>b-k&&(b=Math.round(k+(b-k)/2),m=Math.round(h/2),k=b-m,b+=m,m=!0),e>0&&b-k>e&&(b=Math.round(k+(b-k)/2),m=Math.round(e/2),k=b-m,b+=m,m=!0),b>a&&(b=a),k>b-h&&(k=b-h),g>k&&(k=g),k+h>b&&(b=k+h),(k!=this.startTime||b!=this.endTime)&&(this.startTime=k,this.endTime=b,f.start=k,f.end=b,f.startDate=new Date(k),f.endDate=new Date(b),this.fire(f))):(k.startOnAxis||(b+=l/2),c-=this.stepWidth/2,h=k.xToIndex(b),b=k.xToIndex(b+c),(h!=this.start||this.end!=b)&&(k.startOnAxis&&(this.resizingRight&&h==b&&b++,this.resizingLeft&&h==b&&(h>0?h--:b=1)),this.start=h,this.end=this.dragging?this.start+this.difference:b,f.start=this.start,f.end=this.end,k.parseDates&&(a[this.start]&&(f.startDate=new Date(a[this.start].time)),a[this.end]&&(f.endDate=new Date(a[this.end].time))),this.fire(f))),m&&this.zoomScrollbar(!0)}},zoomScrollbar:function(a){if((!(this.dragging||this.resizingLeft||this.resizingRight||this.animating)||a)&&this.dragger&&this.enabled){var b;a=this.chart;var c=a.chartData,d=this.categoryAxis;d.parseDates&&!d.equalSpacing?(c=d.stepWidth,d=a.firstTime,a=c*(this.startTime-d),b=c*(this.endTime-d)):(a=c[this.start].x[d.id],b=c[this.end].x[d.id],c=d.stepWidth,d.startOnAxis||(d=c/2,a-=d,b+=d)),this.stepWidth=c,this.updateScrollbarSize(a,b)}},maskGraphs:function(a,b,c,d){var h=this.selectedGraph;h&&h.set.clipRect(a,b,c,d)},handleDragStart:function(){d.ChartScrollbar.base.handleDragStart.call(this),this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0)},handleBackgroundClick:function(){d.ChartScrollbar.base.handleBackgroundClick.call(this),this.dragging||(this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0))}})}(),function(){var d=window.AmCharts;d.AmBalloon=d.Class({construct:function(a){this.cname="AmBalloon",this.enabled=!0,this.fillColor="#FFFFFF",this.fillAlpha=.8,this.borderThickness=2,this.borderColor="#FFFFFF",this.borderAlpha=1,this.cornerRadius=0,this.maxWidth=220,this.horizontalPadding=8,this.verticalPadding=4,this.pointerWidth=6,this.pointerOrientation="V",this.color="#000000",this.adjustBorderColor=!0,this.show=this.follow=this.showBullet=!1,this.bulletSize=3,this.shadowAlpha=.4,this.shadowColor="#000000",this.fadeOutDuration=this.animationDuration=.3,this.fixedPosition=!0,this.offsetY=6,this.offsetX=1,this.textAlign="center",this.disableMouseEvents=!0,this.deltaSignX=this.deltaSignY=1,d.isModern||(this.offsetY*=1.5),this.sdy=this.sdx=0,d.applyTheme(this,a,this.cname)},draw:function(){var a=this.pointToX,b=this.pointToY;d.isModern||(this.drop=!1);var c=this.chart;if(d.VML&&(this.fadeOutDuration=0),this.xAnim&&c.stopAnim(this.xAnim),this.yAnim&&c.stopAnim(this.yAnim),this.sdy=this.sdx=0,!isNaN(a)){var e=this.follow,h=c.container,f=this.set;if(d.remove(f),this.removeDiv(),f=h.set(),f.node.style.pointerEvents="none",this.set=f,this.mainSet?(this.mainSet.push(this.set),this.sdx=this.mainSet.x,this.sdy=this.mainSet.y):c.balloonsSet.push(f),this.show){var g=this.l,k=this.t,l=this.r,m=this.b,n=this.balloonColor,q=this.fillColor,p=this.borderColor,t=q;void 0!=n&&(this.adjustBorderColor?t=p=n:q=n);var r=this.horizontalPadding,u=this.verticalPadding,w=this.pointerWidth,y=this.pointerOrientation,x=this.cornerRadius,A=c.fontFamily,z=this.fontSize;void 0==z&&(z=c.fontSize);var n=document.createElement("div"),B=c.classNamePrefix;n.className=B+"-balloon-div",this.className&&(n.className=n.className+" "+B+"-balloon-div-"+this.className),B=n.style,this.disableMouseEvents&&(B.pointerEvents="none"),B.position="absolute";var C=this.minWidth,D="";isNaN(C)||(D="min-width:"+(C-2*r)+"px; "),n.innerHTML='<div style="text-align:'+this.textAlign+"; "+D+"max-width:"+this.maxWidth+"px; font-size:"+z+"px; color:"+this.color+"; font-family:"+A+'">'+this.text+"</div>",c.chartDiv.appendChild(n),this.textDiv=n;var L=n.offsetWidth,I=n.offsetHeight;n.clientHeight&&(L=n.clientWidth,I=n.clientHeight),A=I+2*u,D=L+2*r,!isNaN(C)&&C>D&&(D=C),window.opera&&(A+=2);var S=!1,z=this.offsetY;c.handDrawn&&(z+=c.handDrawScatter+2),"H"!=y?(C=a-D/2,k+A+10>b&&"down"!=y?(S=!0,e&&(b+=z),z=b+w,this.deltaSignY=-1):(e&&(b-=z),z=b-A-w,this.deltaSignY=1)):(2*w>A&&(w=A/2),z=b-A/2,g+(l-g)/2>a?(C=a+w,this.deltaSignX=-1):(C=a-D-w,this.deltaSignX=1)),z+A>=m&&(z=m-A),k>z&&(z=k),g>C&&(C=g),C+D>l&&(C=l-D);var H,k=z+u,m=C+r,O=this.shadowAlpha,Q=this.shadowColor,r=this.borderThickness,ia=this.bulletSize,u=this.fillAlpha,Z=this.borderAlpha;this.showBullet&&(H=d.circle(h,ia,t,u),f.push(H)),this.drop?(g=D/1.6,l=0,"V"==y&&(y="down"),"H"==y&&(y="left"),"down"==y&&(C=a+1,z=b-g-g/3),"up"==y&&(l=180,C=a+1,z=b+g+g/3),"left"==y&&(l=270,C=a+g+g/3+2,z=b),"right"==y&&(l=90,C=a-g-g/3+2,z=b),k=z-I/2+1,m=C-L/2-1,q=d.drop(h,g,l,q,u,r,p,Z)):x>0||0===w?(O>0&&(a=d.rect(h,D,A,q,0,r+1,Q,O,x),d.isModern?a.translate(1,1):a.translate(4,4),f.push(a)),q=d.rect(h,D,A,q,u,r,p,Z,x)):(t=[],x=[],"H"!=y?(g=a-C,g>D-w&&(g=D-w),w>g&&(g=w),t=[0,g-w,a-C,g+w,D,D,0,0],x=S?[0,0,b-z,0,0,A,A,0]:[A,A,b-z,A,A,0,0,A]):(y=b-z,y>A-w&&(y=A-w),w>y&&(y=w),x=[0,y-w,b-z,y+w,A,A,0,0],t=g+(l-g)/2>a?[0,0,a>C?0:a-C,0,0,D,D,0]:[D,D,C+D>a?D:a-C,D,D,0,0,D]),O>0&&(a=d.polygon(h,t,x,q,0,r,Q,O),a.translate(1,1),f.push(a)),q=d.polygon(h,t,x,q,u,r,p,Z)),this.bg=q,f.push(q),q.toFront(),d.setCN(c,q,"balloon-bg"),this.className&&d.setCN(c,q,"balloon-bg-"+this.className),h=1*this.deltaSignX,m+=this.sdx,k+=this.sdy,B.left=m+"px",B.top=k+"px",f.translate(C-h,z,1,!0),q=q.getBBox(),this.bottom=z+A+1,this.yPos=q.y+z,H&&H.translate(this.pointToX-C+h,b-z),b=this.animationDuration,0<this.animationDuration&&!e&&!isNaN(this.prevX)&&(f.translate(this.prevX,this.prevY,NaN,!0),f.animate({translate:C-h+","+z},b,"easeOutSine"),n&&(B.left=this.prevTX+"px",B.top=this.prevTY+"px",this.xAnim=c.animate({node:n},"left",this.prevTX,m,b,"easeOutSine","px"),this.yAnim=c.animate({node:n},"top",this.prevTY,k,b,"easeOutSine","px"))),this.prevX=C-h,this.prevY=z,this.prevTX=m,this.prevTY=k}}},fixPrevious:function(){this.rPrevX=this.prevX,this.rPrevY=this.prevY,this.rPrevTX=this.prevTX,this.rPrevTY=this.prevTY},restorePrevious:function(){this.prevX=this.rPrevX,this.prevY=this.rPrevY,this.prevTX=this.rPrevTX,this.prevTY=this.rPrevTY},followMouse:function(){if(this.follow&&this.show){var a=this.chart.mouseX-this.offsetX*this.deltaSignX-this.sdx,b=this.chart.mouseY-this.sdy;if(this.pointToX=a,this.pointToY=b,a!=this.previousX||b!=this.previousY)if(this.previousX=a,this.previousY=b,0===this.cornerRadius)this.draw();else{var c=this.set;if(c){var d=c.getBBox(),a=a-d.width/2,h=b-d.height-10;a<this.l&&(a=this.l),a>this.r-d.width&&(a=this.r-d.width),h<this.t&&(h=b+10),c.translate(a,h),b=this.textDiv.style,b.left=a+this.horizontalPadding+"px",b.top=h+this.verticalPadding+"px"}}}},changeColor:function(a){this.balloonColor=a},setBounds:function(a,b,c,d){this.l=a,this.t=b,this.r=c,this.b=d,this.destroyTO&&clearTimeout(this.destroyTO)},showBalloon:function(a){(this.text!=a||this.positionChanged)&&(this.text=a,this.isHiding=!1,this.show=!0,this.destroyTO&&clearTimeout(this.destroyTO),a=this.chart,this.fadeAnim1&&a.stopAnim(this.fadeAnim1),this.fadeAnim2&&a.stopAnim(this.fadeAnim2),this.draw(),this.positionChanged=!1)},hide:function(a){var b=this;b.text=void 0,isNaN(a)&&(a=b.fadeOutDuration);var c=b.chart;if(a>0&&!b.isHiding){b.isHiding=!0,b.destroyTO&&clearTimeout(b.destroyTO),b.destroyTO=setTimeout(function(){b.destroy.call(b)},1e3*a),b.follow=!1,b.show=!1;var d=b.set;d&&(d.setAttr("opacity",b.fillAlpha),b.fadeAnim1=d.animate({opacity:0},a,"easeInSine")),b.textDiv&&(b.fadeAnim2=c.animate({node:b.textDiv},"opacity",1,0,a,"easeInSine",""))}else b.show=!1,b.follow=!1,b.destroy()},setPosition:function(a,b){(a!=this.pointToX||b!=this.pointToY)&&(this.previousX=this.pointToX,this.previousY=this.pointToY,this.pointToX=a,this.pointToY=b,this.positionChanged=!0)},followCursor:function(a){var b=this;b.follow=a,clearInterval(b.interval);var c=b.chart.mouseX-b.sdx,d=b.chart.mouseY-b.sdy;!isNaN(c)&&a&&(b.pointToX=c-b.offsetX*b.deltaSignX,b.pointToY=d,b.followMouse(),b.interval=setInterval(function(){b.followMouse.call(b)},40))},removeDiv:function(){if(this.textDiv){var a=this.textDiv.parentNode;a&&a.removeChild(this.textDiv)}},destroy:function(){clearInterval(this.interval),d.remove(this.set),this.removeDiv(),this.set=null}})}(),function(){var d=window.AmCharts;d.AmCoordinateChart=d.Class({inherits:d.AmChart,construct:function(a){d.AmCoordinateChart.base.construct.call(this,a),this.theme=a,this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph"),this.startAlpha=1,this.startDuration=0,this.startEffect="elastic",this.sequencedAnimation=!0,this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" "),this.balloonDateFormat="MMM DD, YYYY",this.valueAxes=[],this.graphs=[],this.guides=[],this.gridAboveGraphs=!1,d.applyTheme(this,a,"AmCoordinateChart")},initChart:function(){d.AmCoordinateChart.base.initChart.call(this),
this.drawGraphs=!0;var a=this.categoryAxis;a&&(this.categoryAxis=d.processObject(a,d.CategoryAxis,this.theme)),this.processValueAxes(),this.createValueAxes(),this.processGraphs(),this.processGuides(),d.VML&&(this.startAlpha=1),this.setLegendData(this.graphs),this.gridAboveGraphs&&(this.gridSet.toFront(),this.bulletSet.toFront(),this.balloonsSet.toFront())},createValueAxes:function(){if(0===this.valueAxes.length){var a=new d.ValueAxis;this.addValueAxis(a)}},parseData:function(){this.processValueAxes(),this.processGraphs()},parseSerialData:function(a){if(this.chartData=[],a)if(0<this.processTimeout){1>this.processCount&&(this.processCount=1);var b=a.length/this.processCount;this.parseCount=Math.ceil(b)-1;for(var c=0;b>c;c++)this.delayParseSerialData(a,c)}else this.parseCount=0,this.parsePartSerialData(a,0,a.length,0);else this.onDataUpdated()},delayParseSerialData:function(a,b){var c=this,d=c.processCount;setTimeout(function(){c.parsePartSerialData.call(c,a,b*d,(b+1)*d,b)},c.processTimeout)},parsePartSerialData:function(a,b,c,e){c>a.length&&(c=a.length);var h=this.graphs,f={},g=this.seriesIdField;g||(g=this.categoryField);var l,n,q,p,k=!1,m=this.categoryAxis;m&&(k=m.parseDates,n=m.forceShowField,p=m.classNameField,q=m.labelColorField,l=m.categoryFunction);var t,r,w,u={};k&&(t=d.extractPeriod(m.minPeriod),r=t.period,t=t.count,w=d.getPeriodDuration(r,t));var y={};this.lookupTable=y;var x,A=this.dataDateFormat,z={};for(x=b;c>x;x++){var B={},C=a[x];if(b=C[this.categoryField],B.dataContext=C,B.category=l?l(b,C,m):String(b),n&&(B.forceShow=C[n]),p&&(B.className=C[p]),q&&(B.labelColor=C[q]),y[C[g]]=B,!k||(m.categoryFunction?b=m.categoryFunction(b,C,m):(!A||b instanceof Date||(b=b.toString()+" |"),b=d.getDate(b,A,m.minPeriod)),b=d.resetDateToMin(b,r,t,m.firstDayOfWeek),B.category=b,B.time=b.getTime(),!isNaN(B.time))){var D=this.valueAxes;B.axes={},B.x={};var L;for(L=0;L<D.length;L++){var I=D[L].id;B.axes[I]={},B.axes[I].graphs={};var S;for(S=0;S<h.length;S++){b=h[S];var O=b.id,Q=1.1;isNaN(b.gapPeriod)||(Q=b.gapPeriod);var ia=b.periodValue;if(b.valueAxis.id==I){B.axes[I].graphs[O]={};var H={};H.index=x;var Z=C;b.dataProvider&&(Z=f),H.values=this.processValues(Z,b,ia),!b.connect&&z&&z[O]&&Q>0&&B.time-u[O]>=w*Q&&(z[O].gap=!0),this.processFields(b,H,Z),H.category=B.category,H.serialDataItem=B,H.graph=b,B.axes[I].graphs[O]=H,u[O]=B.time,z[O]=H}}}this.chartData[x]=B}}if(this.parseCount==e){for(a=0;a<h.length;a++)b=h[a],b.dataProvider&&this.parseGraphData(b);this.dataChanged=!1,this.dispatchDataUpdated=!0,this.onDataUpdated()}},processValues:function(a,b,c){var h,e={},f=!1;"candlestick"!=b.type&&"ohlc"!=b.type||""===c||(f=!0);for(var g="value error open close low high".split(" "),k=0;k<g.length;k++){var l=g[k];"value"!=l&&"error"!=l&&f&&(c=l.charAt(0).toUpperCase()+l.slice(1));var m=a[b[l+"Field"]+c];null!==m&&(h=Number(m),isNaN(h)||(e[l]=h),"date"==b.valueAxis.type&&void 0!==m&&(h=d.getDate(m,b.chart.dataDateFormat),e[l]=h.getTime()))}return e},parseGraphData:function(a){var b=a.dataProvider,c=a.seriesIdField;c||(c=this.seriesIdField),c||(c=this.categoryField);var d;for(d=0;d<b.length;d++){var h=b[d],f=this.lookupTable[String(h[c])],g=a.valueAxis.id;f&&(g=f.axes[g].graphs[a.id],g.serialDataItem=f,g.values=this.processValues(h,a,a.periodValue),this.processFields(a,g,h))}},addValueAxis:function(a){a.chart=this,this.valueAxes.push(a),this.validateData()},removeValueAxesAndGraphs:function(){var b,a=this.valueAxes;for(b=a.length-1;b>-1;b--)this.removeValueAxis(a[b])},removeValueAxis:function(a){var c,b=this.graphs;for(c=b.length-1;c>=0;c--){var d=b[c];d&&d.valueAxis==a&&this.removeGraph(d)}for(b=this.valueAxes,c=b.length-1;c>=0;c--)b[c]==a&&b.splice(c,1);this.validateData()},addGraph:function(a){this.graphs.push(a),this.chooseGraphColor(a,this.graphs.length-1),this.validateData()},removeGraph:function(a){var c,b=this.graphs;for(c=b.length-1;c>=0;c--)b[c]==a&&(b.splice(c,1),a.destroy());this.validateData()},handleValueAxisZoom:function(){},processValueAxes:function(){var b,a=this.valueAxes;for(b=0;b<a.length;b++){var c=a[b],c=d.processObject(c,d.ValueAxis,this.theme);a[b]=c,c.chart=this,c.init(),this.listenTo(c,"axisIntZoomed",this.handleValueAxisZoom),c.id||(c.id="valueAxisAuto"+b+"_"+(new Date).getTime()),void 0===c.usePrefixes&&(c.usePrefixes=this.usePrefixes)}},processGuides:function(){var a=this.guides,b=this.categoryAxis;if(a)for(var c=0;c<a.length;c++){var e=a[c];(void 0!==e.category||void 0!==e.date)&&b&&b.addGuide(e),e.id||(e.id="guideAuto"+c+"_"+(new Date).getTime());var h=e.valueAxis;h?(d.isString(h)&&(h=this.getValueAxisById(h)),h?h.addGuide(e):this.valueAxes[0].addGuide(e)):isNaN(e.value)||this.valueAxes[0].addGuide(e)}},processGraphs:function(){var b,a=this.graphs;for(this.graphsById={},b=0;b<a.length;b++){var c=a[b],c=d.processObject(c,d.AmGraph,this.theme);a[b]=c,this.chooseGraphColor(c,b),c.chart=this,c.init(),d.isString(c.valueAxis)&&(c.valueAxis=this.getValueAxisById(c.valueAxis)),c.valueAxis||(c.valueAxis=this.valueAxes[0]),c.id||(c.id="graphAuto"+b+"_"+(new Date).getTime()),this.graphsById[c.id]=c}},formatString:function(a,b,c){var e=b.graph,h=e.valueAxis;return h.duration&&b.values.value&&(h=d.formatDuration(b.values.value,h.duration,"",h.durationUnits,h.maxInterval,h.numberFormatter),a=a.split("[[value]]").join(h)),a=d.massReplace(a,{"[[title]]":e.title,"[[description]]":b.description}),a=c?d.fixNewLines(a):d.fixBrakes(a),a=d.cleanFromEmpty(a)},getBalloonColor:function(a,b,c){var e=a.lineColor,h=a.balloonColor;return c&&(h=e),c=a.fillColorsR,"object"==typeof c?e=c[0]:void 0!==c&&(e=c),b.isNegative&&(c=a.negativeLineColor,a=a.negativeFillColors,"object"==typeof a?c=a[0]:void 0!==a&&(c=a),void 0!==c&&(e=c)),void 0!==b.color&&(e=b.color),void 0!==b.lineColor&&(e=b.lineColor),b=b.fillColors,void 0!==b&&(e=b,d.ifArray(b)&&(e=b[0])),void 0===h&&(h=e),h},getGraphById:function(a){return d.getObjById(this.graphs,a)},getValueAxisById:function(a){return d.getObjById(this.valueAxes,a)},processFields:function(a,b,c){if(a.itemColors){var e=a.itemColors,h=b.index;b.color=h<e.length?e[h]:d.randomColor()}for(e="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern gap className".split(" "),h=0;h<e.length;h++){var f=e[h],g=a[f+"Field"];g&&(g=c[g],d.isDefined(g)&&(b[f]=g))}b.dataContext=c},chooseGraphColor:function(a,b){if(a.lineColor)a.lineColorR=a.lineColor;else{var c;c=this.colors.length>b?this.colors[b]:a.lineColorR?a.lineColorR:d.randomColor(),a.lineColorR=c}a.fillColorsR=a.fillColors?a.fillColors:a.lineColorR,a.bulletBorderColorR=a.bulletBorderColor?a.bulletBorderColor:a.useLineColorForBulletBorder?a.lineColorR:a.bulletColor,a.bulletColorR=a.bulletColor?a.bulletColor:a.lineColorR,(c=this.patterns)&&(a.pattern=c[b])},handleLegendEvent:function(a){var b=a.type;if(a=a.dataItem,!this.legend.data&&a){var c=a.hidden,d=a.showBalloon;switch(b){case"clickMarker":this.textClickEnabled&&(d?this.hideGraphsBalloon(a):this.showGraphsBalloon(a));break;case"clickLabel":d?this.hideGraphsBalloon(a):this.showGraphsBalloon(a);break;case"rollOverItem":c||this.highlightGraph(a);break;case"rollOutItem":c||this.unhighlightGraph();break;case"hideItem":this.hideGraph(a);break;case"showItem":this.showGraph(a)}}},highlightGraph:function(a){var c,b=this.graphs,d=.2;if(this.legend&&(d=this.legend.rollOverGraphAlpha),1!=d)for(c=0;c<b.length;c++){var h=b[c];h!=a&&h.changeOpacity(d)}},unhighlightGraph:function(){var a;if(this.legend&&(a=this.legend.rollOverGraphAlpha),1!=a){a=this.graphs;var b;for(b=0;b<a.length;b++)a[b].changeOpacity(1)}},showGraph:function(a){a.switchable&&(a.hidden=!1,this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),this.chartCreated&&this.initChart())},hideGraph:function(a){a.switchable&&(this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),a.hidden=!0,this.chartCreated&&this.initChart())},hideGraphsBalloon:function(a){a.showBalloon=!1,this.updateLegend()},showGraphsBalloon:function(a){a.showBalloon=!0,this.updateLegend()},updateLegend:function(){this.legend&&this.legend.invalidateSize()},resetAnimation:function(){var a=this.graphs;if(a){var b;for(b=0;b<a.length;b++)a[b].animationPlayed=!1}},animateAgain:function(){this.resetAnimation(),this.validateNow()}})}(),function(){var d=window.AmCharts;d.TrendLine=d.Class({construct:function(a){this.cname="TrendLine",this.createEvents("click"),this.isProtected=!1,this.dashLength=0,this.lineColor="#00CC00",this.lineThickness=this.lineAlpha=1,d.applyTheme(this,a,this.cname)},draw:function(){var a=this;a.destroy();var e,h,f,g,b=a.chart,c=b.container,k=a.categoryAxis,l=a.initialDate,m=a.initialCategory,n=a.finalDate,q=a.finalCategory,p=a.valueAxis,t=a.valueAxisX,r=a.initialXValue,u=a.finalXValue,w=a.initialValue,y=a.finalValue,x=p.recalculateToPercents,A=b.dataDateFormat;k&&(l&&(l=d.getDate(l,A,"fff"),a.initialDate=l,e=k.dateToCoordinate(l)),m&&(e=k.categoryToCoordinate(m)),n&&(n=d.getDate(n,A,"fff"),a.finalDate=n,h=k.dateToCoordinate(n)),q&&(h=k.categoryToCoordinate(q))),t&&!x&&(isNaN(r)||(e=t.getCoordinate(r)),isNaN(u)||(h=t.getCoordinate(u))),p&&!x&&(isNaN(w)||(f=p.getCoordinate(w)),isNaN(y)||(g=p.getCoordinate(y))),isNaN(e)||isNaN(h)||isNaN(f)||isNaN(f)||(b.rotate?(k=[f,g],g=[e,h]):(k=[e,h],g=[f,g]),l=a.lineColor,f=d.line(c,k,g,l,a.lineAlpha,a.lineThickness,a.dashLength),e=k,h=g,q=k[1]-k[0],p=g[1]-g[0],0===q&&(q=.01),0===p&&(p=.01),m=q/Math.abs(q),n=p/Math.abs(p),p=90*Math.PI/180-Math.asin(q/(q*p/Math.abs(q*p)*Math.sqrt(Math.pow(q,2)+Math.pow(p,2)))),q=Math.abs(5*Math.cos(p)),p=Math.abs(5*Math.sin(p)),e.push(k[1]-m*p,k[0]-m*p),h.push(g[1]+n*q,g[0]+n*q),g=d.polygon(c,e,h,l,.005,0),c=c.set([g,f]),c.translate(b.marginLeftReal,b.marginTopReal),b.trendLinesSet.push(c),d.setCN(b,f,"trend-line"),d.setCN(b,f,"trend-line-"+a.id),a.line=f,a.set=c,(f=a.initialImage)&&(f=d.processObject(f,d.Image,a.theme),f.chart=b,f.draw(),f.translate(e[0]+f.offsetX,h[0]+f.offsetY),c.push(f.set)),(f=a.finalImage)&&(f=d.processObject(f,d.Image,a.theme),f.chart=b,f.draw(),f.translate(e[1]+f.offsetX,h[1]+f.offsetY),c.push(f.set)),g.mouseup(function(){a.handleLineClick()}).mouseover(function(){a.handleLineOver()}).mouseout(function(){a.handleLineOut()}),g.touchend&&g.touchend(function(){a.handleLineClick()}),c.clipRect(0,0,b.plotAreaWidth,b.plotAreaHeight))},handleLineClick:function(){this.fire({type:"click",trendLine:this,chart:this.chart})},handleLineOver:function(){var a=this.rollOverColor;void 0!==a&&this.line.attr({stroke:a}),this.balloonText&&(clearTimeout(this.chart.hoverInt),a=this.line.getBBox(),this.chart.showBalloon(this.balloonText,this.lineColor,!0,this.x+a.x+a.width/2,this.y+a.y+a.height/2))},handleLineOut:function(){this.line.attr({stroke:this.lineColor}),this.balloonText&&this.chart.hideBalloon()},destroy:function(){d.remove(this.set)}})}(),function(){var d=window.AmCharts;d.Image=d.Class({construct:function(a){this.cname="Image",this.height=this.width=20,this.rotation=this.offsetY=this.offsetX=0,this.balloonColor=this.color="#000000",this.opacity=1,d.applyTheme(this,a,this.cname)},draw:function(){var a=this;a.set&&a.set.remove();var b=a.chart.container;a.set=b.set();var c,d;a.url?(c=b.image(a.url,0,0,a.width,a.height),d=1):a.svgPath&&(c=b.path(a.svgPath),c.setAttr("fill",a.color),c.setAttr("stroke",a.outlineColor),b=c.getBBox(),d=Math.min(a.width/b.width,a.height/b.height)),c&&(c.setAttr("opacity",a.opacity),a.set.rotate(a.rotation),c.translate(-a.width/2,-a.height/2,d),a.balloonText&&c.mouseover(function(){a.chart.showBalloon(a.balloonText,a.balloonColor,!0)}).mouseout(function(){a.chart.hideBalloon()}).touchend(function(){a.chart.hideBalloon()}).touchstart(function(){a.chart.showBalloon(a.balloonText,a.balloonColor,!0)}),a.set.push(c))},translate:function(a,b){this.set&&this.set.translate(a,b)}})}(),function(){var d=window.AmCharts;d.circle=function(a,b,c,e,h,f,g,k,l){return 0>=b&&(b=.001),(void 0==h||0===h)&&(h=.01),void 0===f&&(f="#000000"),void 0===g&&(g=0),e={fill:c,stroke:f,"fill-opacity":e,"stroke-width":h,"stroke-opacity":g},a=isNaN(l)?a.circle(0,0,b).attr(e):a.ellipse(0,0,b,l).attr(e),k&&a.gradient("radialGradient",[c,d.adjustLuminosity(c,-.6)]),a},d.text=function(a,b,c,e,h,f,g,k){return f||(f="middle"),"right"==f&&(f="end"),"left"==f&&(f="start"),isNaN(k)&&(k=1),void 0!==b&&(b=String(b),d.isIE&&!d.isModern&&(b=b.replace("&amp;","&"),b=b.replace("&","&amp;"))),c={fill:c,"font-family":e,"font-size":h+"px",opacity:k},!0===g&&(c["font-weight"]="bold"),c["text-anchor"]=f,a.text(b,c)},d.polygon=function(a,b,c,e,h,f,g,k,l,m,n){isNaN(f)&&(f=.01),isNaN(k)&&(k=h);var q=e,p=!1;"object"==typeof q&&1<q.length&&(p=!0,q=q[0]),void 0===g&&(g=q),h={fill:q,stroke:g,"fill-opacity":h,"stroke-width":f,"stroke-opacity":k},void 0!==n&&n>0&&(h["stroke-dasharray"]=n),n=d.dx,f=d.dy,a.handDrawn&&(c=d.makeHD(b,c,a.handDrawScatter),b=c[0],c=c[1]),g=Math.round,m&&(b[t]=d.roundTo(b[t],5),c[t]=d.roundTo(c[t],5),g=Number),k="M"+(g(b[0])+n)+","+(g(c[0])+f);for(var t=1;t<b.length;t++)m&&(b[t]=d.roundTo(b[t],5),c[t]=d.roundTo(c[t],5)),k+=" L"+(g(b[t])+n)+","+(g(c[t])+f);return a=a.path(k+" Z").attr(h),p&&a.gradient("linearGradient",e,l),a},d.rect=function(a,b,c,e,h,f,g,k,l,m,n){if(isNaN(b)||isNaN(c))return a.set();isNaN(f)&&(f=0),void 0===l&&(l=0),void 0===m&&(m=270),isNaN(h)&&(h=0);var q=e,p=!1;"object"==typeof q&&(q=q[0],p=!0),void 0===g&&(g=q),void 0===k&&(k=h),b=Math.round(b),c=Math.round(c);var t=0,r=0;return 0>b&&(b=Math.abs(b),t=-b),0>c&&(c=Math.abs(c),r=-c),t+=d.dx,r+=d.dy,h={fill:q,stroke:g,"fill-opacity":h,"stroke-opacity":k},void 0!==n&&n>0&&(h["stroke-dasharray"]=n),a=a.rect(t,r,b,c,l,f).attr(h),p&&a.gradient("linearGradient",e,m),a},d.bullet=function(a,b,c,e,h,f,g,k,l,m,n,q,p){var t;switch("circle"==b&&(b="round"),b){case"round":t=d.circle(a,c/2,e,h,f,g,k);break;case"square":t=d.polygon(a,[-c/2,c/2,c/2,-c/2],[c/2,c/2,-c/2,-c/2],e,h,f,g,k,m-180,void 0,p);break;case"rectangle":t=d.polygon(a,[-c,c,c,-c],[c/2,c/2,-c/2,-c/2],e,h,f,g,k,m-180,void 0,p);break;case"diamond":t=d.polygon(a,[-c/2,0,c/2,0],[0,-c/2,0,c/2],e,h,f,g,k);break;case"triangleUp":t=d.triangle(a,c,0,e,h,f,g,k);break;case"triangleDown":t=d.triangle(a,c,180,e,h,f,g,k);break;case"triangleLeft":t=d.triangle(a,c,270,e,h,f,g,k);break;case"triangleRight":t=d.triangle(a,c,90,e,h,f,g,k);break;case"bubble":t=d.circle(a,c/2,e,h,f,g,k,!0);break;case"line":t=d.line(a,[-c/2,c/2],[0,0],e,h,f,g,k);break;case"yError":t=a.set(),t.push(d.line(a,[0,0],[-c/2,c/2],e,h,f)),t.push(d.line(a,[-l,l],[-c/2,-c/2],e,h,f)),t.push(d.line(a,[-l,l],[c/2,c/2],e,h,f));break;case"xError":t=a.set(),t.push(d.line(a,[-c/2,c/2],[0,0],e,h,f)),t.push(d.line(a,[-c/2,-c/2],[-l,l],e,h,f)),t.push(d.line(a,[c/2,c/2],[-l,l],e,h,f))}return t&&t.pattern(n,NaN,q),t},d.triangle=function(a,b,c,d,h,f,g,k){(void 0===f||0===f)&&(f=1),void 0===g&&(g="#000"),void 0===k&&(k=0),d={fill:d,stroke:g,"fill-opacity":h,"stroke-width":f,"stroke-opacity":k},b/=2;var l;return 0===c&&(l=" M"+-b+","+b+" L0,"+-b+" L"+b+","+b+" Z"),180==c&&(l=" M"+-b+","+-b+" L0,"+b+" L"+b+","+-b+" Z"),90==c&&(l=" M"+-b+","+-b+" L"+b+",0 L"+-b+","+b+" Z"),270==c&&(l=" M"+-b+",0 L"+b+","+b+" L"+b+","+-b+" Z"),a.path(l).attr(d)},d.line=function(a,b,c,e,h,f,g,k,l,m,n){if(a.handDrawn&&!n)return d.handDrawnLine(a,b,c,e,h,f,g,k,l,m,n);for(f={fill:"none","stroke-width":f},void 0!==g&&g>0&&(f["stroke-dasharray"]=g),isNaN(h)||(f["stroke-opacity"]=h),e&&(f.stroke=e),e=Math.round,m&&(e=Number,b[0]=d.roundTo(b[0],5),c[0]=d.roundTo(c[0],5)),m=d.dx,h=d.dy,g="M"+(e(b[0])+m)+","+(e(c[0])+h),k=1;k<b.length;k++)b[k]=d.roundTo(b[k],5),c[k]=d.roundTo(c[k],5),g+=" L"+(e(b[k])+m)+","+(e(c[k])+h);return d.VML?a.path(g,void 0,!0).attr(f):(l&&(g+=" M0,0 L0,0"),a.path(g).attr(f))},d.makeHD=function(a,b,c){for(var d=[],h=[],f=1;f<a.length;f++)for(var g=Number(a[f-1]),k=Number(b[f-1]),l=Number(a[f]),m=Number(b[f]),n=Math.round(Math.sqrt(Math.pow(l-g,2)+Math.pow(m-k,2))/50)+1,l=(l-g)/n,m=(m-k)/n,q=0;n>=q;q++){var p=k+q*m+Math.random()*c;d.push(g+q*l+Math.random()*c),h.push(p)}return[d,h]},d.handDrawnLine=function(a,b,c,e,h,f,g,k,l,m){var n,q=a.set();for(n=1;n<b.length;n++)for(var p=[b[n-1],b[n]],t=[c[n-1],c[n]],t=d.makeHD(p,t,a.handDrawScatter),p=t[0],t=t[1],r=1;r<p.length;r++)q.push(d.line(a,[p[r-1],p[r]],[t[r-1],t[r]],e,h,f+Math.random()*a.handDrawThickness-a.handDrawThickness/2,g,k,l,m,!0));return q},d.doNothing=function(a){return a},d.drop=function(a,b,c,d,h,f,g,k){var l=1/180*Math.PI,m=c-20,n=Math.sin(m*l)*b,q=Math.cos(m*l)*b,p=Math.sin((m+40)*l)*b,t=Math.cos((m+40)*l)*b,r=.8*b,u=-b/3,w=b/3;return 0===c&&(u=-u,w=0),180==c&&(w=0),90==c&&(u=0),270==c&&(u=0,w=-w),c={fill:d,stroke:g,"stroke-width":f,"stroke-opacity":k,"fill-opacity":h},b="M"+n+","+q+" A"+b+","+b+",0,1,1,"+p+","+t+(" A"+r+","+r+",0,0,0,"+(Math.sin((m+20)*l)*b+w)+","+(Math.cos((m+20)*l)*b+u)),b+=" A"+r+","+r+",0,0,0,"+n+","+q,a.path(b,void 0,void 0,"1000,1000").attr(c)},d.wedge=function(a,b,c,e,h,f,g,k,l,m,n,q,p,t){var r=Math.round;f=r(f),g=r(g),k=r(k);var u=r(g/f*k),w=d.VML,y=359.5+f/100;y>359.94&&(y=359.94),h>=y&&(h=y);var x=1/180*Math.PI,y=b+Math.sin(e*x)*k,A=c-Math.cos(e*x)*u,z=b+Math.sin(e*x)*f,B=c-Math.cos(e*x)*g,C=b+Math.sin((e+h)*x)*f,D=c-Math.cos((e+h)*x)*g,L=b+Math.sin((e+h)*x)*k,x=c-Math.cos((e+h)*x)*u,I={fill:d.adjustLuminosity(m.fill,-.2),"stroke-opacity":0,"fill-opacity":m["fill-opacity"]},S=0;180<Math.abs(h)&&(S=1),e=a.set();var O;w&&(y=r(10*y),z=r(10*z),C=r(10*C),L=r(10*L),A=r(10*A),B=r(10*B),D=r(10*D),x=r(10*x),b=r(10*b),l=r(10*l),c=r(10*c),f*=10,g*=10,k*=10,u*=10,1>Math.abs(h)&&1>=Math.abs(C-z)&&1>=Math.abs(D-B)&&(O=!0)),h="";var Q;if(q&&(I["fill-opacity"]=0,I["stroke-opacity"]=m["stroke-opacity"]/2,I.stroke=m.stroke),l>0){Q=" M"+y+","+(A+l)+" L"+z+","+(B+l),w?(O||(Q+=" A"+(b-f)+","+(l+c-g)+","+(b+f)+","+(l+c+g)+","+z+","+(B+l)+","+C+","+(D+l)),Q+=" L"+L+","+(x+l),k>0&&(O||(Q+=" B"+(b-k)+","+(l+c-u)+","+(b+k)+","+(l+c+u)+","+L+","+(l+x)+","+y+","+(l+A)))):(Q+=" A"+f+","+g+",0,"+S+",1,"+C+","+(D+l)+" L"+L+","+(x+l),k>0&&(Q+=" A"+k+","+u+",0,"+S+",0,"+y+","+(A+l))),Q+=" Z";var ia=l;w&&(ia/=10);for(var H=0;ia>H;H+=10){var Z=a.path(Q,void 0,void 0,"1000,1000").attr(I);e.push(Z),Z.translate(0,-H)}Q=a.path(" M"+y+","+A+" L"+y+","+(A+l)+" L"+z+","+(B+l)+" L"+z+","+B+" L"+y+","+A+" Z",void 0,void 0,"1000,1000").attr(I),l=a.path(" M"+C+","+D+" L"+C+","+(D+l)+" L"+L+","+(x+l)+" L"+L+","+x+" L"+C+","+D+" Z",void 0,void 0,"1000,1000").attr(I),e.push(Q),e.push(l)}if(w?(O||(h=" A"+r(b-f)+","+r(c-g)+","+r(b+f)+","+r(c+g)+","+r(z)+","+r(B)+","+r(C)+","+r(D)),g=" M"+r(y)+","+r(A)+" L"+r(z)+","+r(B)+h+" L"+r(L)+","+r(x)):g=" M"+y+","+A+" L"+z+","+B+(" A"+f+","+g+",0,"+S+",1,"+C+","+D)+" L"+L+","+x,k>0&&(w?O||(g+=" B"+(b-k)+","+(c-u)+","+(b+k)+","+(c+u)+","+L+","+x+","+y+","+A):g+=" A"+k+","+u+",0,"+S+",0,"+y+","+A),a.handDrawn&&(k=d.line(a,[y,z],[A,B],m.stroke,m.thickness*Math.random()*a.handDrawThickness,m["stroke-opacity"]),e.push(k)),k=a.path(g+" Z",void 0,void 0,"1000,1000").attr(m),n){for(u=[],w=0;w<n.length;w++)u.push(d.adjustLuminosity(m.fill,n[w]));"radial"!=t||d.isModern||(u=[]),0<u.length&&k.gradient(t+"Gradient",u)}return d.isModern&&"radial"==t&&k.grad&&(k.grad.setAttribute("gradientUnits","userSpaceOnUse"),k.grad.setAttribute("r",f),k.grad.setAttribute("gradientTransform","translate("+(b-a.width/2)+","+(c-a.height/2)+")")),k.pattern(q,NaN,p),e.wedge=k,e.push(k),e},d.rgb2hex=function(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""},d.adjustLuminosity=function(a,b){a&&-1!=a.indexOf("rgb")&&(a=d.rgb2hex(a)),a=String(a).replace(/[^0-9a-f]/gi,""),6>a.length&&(a=String(a[0])+String(a[0])+String(a[1])+String(a[1])+String(a[2])+String(a[2])),b=b||0;var e,h,c="#";for(h=0;3>h;h++)e=parseInt(a.substr(2*h,2),16),e=Math.round(Math.min(Math.max(0,e+e*b),255)).toString(16),c+=("00"+e).substr(e.length);return c}}(),function(){var d=window.AmCharts;d.Bezier=d.Class({construct:function(a,b,c,e,h,f,g,k,l,m){for("object"==typeof g&&(g=g[0]),"object"==typeof k&&(k=k[0]),0===k&&(g="none"),f={fill:g,"fill-opacity":k,"stroke-width":f},void 0!==l&&l>0&&(f["stroke-dasharray"]=l),isNaN(h)||(f["stroke-opacity"]=h),e&&(f.stroke=e),e="M"+Math.round(b[0])+","+Math.round(c[0]),h=[],l=0;l<b.length;l++)h.push({x:Number(b[l]),y:Number(c[l])});1<h.length&&(b=this.interpolate(h),e+=this.drawBeziers(b)),m?e+=m:d.VML||(e+="M0,0 L0,0"),this.path=a.path(e).attr(f),this.node=this.path.node},interpolate:function(a){var b=[];b.push({x:a[0].x,y:a[0].y});var c=a[1].x-a[0].x,e=a[1].y-a[0].y,h=d.bezierX,f=d.bezierY;b.push({x:a[0].x+c/h,y:a[0].y+e/f});var g;for(g=1;g<a.length-1;g++){var k=a[g-1],l=a[g],e=a[g+1];isNaN(e.x)&&(e=l),isNaN(l.x)&&(l=k),isNaN(k.x)&&(k=l),c=e.x-l.x,e=e.y-k.y,k=l.x-k.x,k>c&&(k=c),b.push({x:l.x-k/h,y:l.y-e/f}),b.push({x:l.x,y:l.y}),b.push({x:l.x+k/h,y:l.y+e/f})}return e=a[a.length-1].y-a[a.length-2].y,c=a[a.length-1].x-a[a.length-2].x,b.push({x:a[a.length-1].x-c/h,y:a[a.length-1].y-e/f}),b.push({x:a[a.length-1].x,y:a[a.length-1].y}),b},drawBeziers:function(a){var c,b="";for(c=0;c<(a.length-1)/3;c++)b+=this.drawBezierMidpoint(a[3*c],a[3*c+1],a[3*c+2],a[3*c+3]);return b},drawBezierMidpoint:function(a,b,c,d){var h=Math.round,f=this.getPointOnSegment(a,b,.75),g=this.getPointOnSegment(d,c,.75),k=(d.x-a.x)/16,l=(d.y-a.y)/16,m=this.getPointOnSegment(a,b,.375);return a=this.getPointOnSegment(f,g,.375),a.x-=k,a.y-=l,b=this.getPointOnSegment(g,f,.375),b.x+=k,b.y+=l,c=this.getPointOnSegment(d,c,.375),k=this.getMiddle(m,a),f=this.getMiddle(f,g),g=this.getMiddle(b,c),m=" Q"+h(m.x)+","+h(m.y)+","+h(k.x)+","+h(k.y),m+=" Q"+h(a.x)+","+h(a.y)+","+h(f.x)+","+h(f.y),m+=" Q"+h(b.x)+","+h(b.y)+","+h(g.x)+","+h(g.y),m+=" Q"+h(c.x)+","+h(c.y)+","+h(d.x)+","+h(d.y)},getMiddle:function(a,b){return{x:(a.x+b.x)/2,y:(a.y+b.y)/2}},getPointOnSegment:function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}}})}(),function(){var d=window.AmCharts;d.AmDraw=d.Class({construct:function(a,b,c,e){d.SVG_NS="http://www.w3.org/2000/svg",d.SVG_XLINK="http://www.w3.org/1999/xlink",d.hasSVG=!!document.createElementNS&&!!document.createElementNS(d.SVG_NS,"svg").createSVGRect,1>b&&(b=10),1>c&&(c=10),this.div=a,this.width=b,this.height=c,this.rBin=document.createElement("div"),d.hasSVG?(d.SVG=!0,b=this.createSvgElement("svg"),a.appendChild(b),this.container=b,this.addDefs(e),this.R=new d.SVGRenderer(this)):d.isIE&&d.VMLRenderer&&(d.VML=!0,d.vmlStyleSheet||(document.namespaces.add("amvml","urn:schemas-microsoft-com:vml"),31>document.styleSheets.length?(b=document.createStyleSheet(),b.addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true"),d.vmlStyleSheet=b):document.styleSheets[0].addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true")),this.container=a,this.R=new d.VMLRenderer(this,e),this.R.disableSelection(a))},createSvgElement:function(a){return document.createElementNS(d.SVG_NS,a)},circle:function(a,b,c,e){var h=new d.AmDObject("circle",this);return h.attr({r:c,cx:a,cy:b}),this.addToContainer(h.node,e),h},ellipse:function(a,b,c,e,h){var f=new d.AmDObject("ellipse",this);return f.attr({rx:c,ry:e,cx:a,cy:b}),this.addToContainer(f.node,h),f},setSize:function(a,b){a>0&&b>0&&(this.container.style.width=a+"px",this.container.style.height=b+"px")},rect:function(a,b,c,e,h,f,g){var k=new d.AmDObject("rect",this);return d.VML&&(h=Math.round(100*h/Math.min(c,e)),c+=2*f,e+=2*f,k.bw=f,k.node.style.marginLeft=-f,k.node.style.marginTop=-f),1>c&&(c=1),1>e&&(e=1),k.attr({x:a,y:b,width:c,height:e,rx:h,ry:h,"stroke-width":f}),this.addToContainer(k.node,g),k},image:function(a,b,c,e,h,f){var g=new d.AmDObject("image",this);return g.attr({x:b,y:c,width:e,height:h}),this.R.path(g,a),this.addToContainer(g.node,f),g},addToContainer:function(a,b){b||(b=this.container),b.appendChild(a)},text:function(a,b,c){return this.R.text(a,b,c)},path:function(a,b,c,e){var h=new d.AmDObject("path",this);return e||(e="100,100"),h.attr({cs:e}),c?h.attr({dd:a}):h.attr({d:a}),this.addToContainer(h.node,b),h},set:function(a){return this.R.set(a)},remove:function(a){if(a){var b=this.rBin;b.appendChild(a),b.innerHTML=""}},renderFix:function(){var a=this.container,b=a.style;b.top="0px",b.left="0px";try{var c=a.getBoundingClientRect(),d=c.left-Math.round(c.left),h=c.top-Math.round(c.top);d&&(b.left=d+"px"),h&&(b.top=h+"px")}catch(f){}},update:function(){this.R.update()},addDefs:function(a){if(d.hasSVG){var b=this.createSvgElement("desc"),c=this.container;c.setAttribute("version","1.1"),c.style.position="absolute",this.setSize(this.width,this.height),d.rtl&&(c.setAttribute("direction","rtl"),c.style.left="auto",c.style.right="0px"),a&&(a.addCodeCredits&&b.appendChild(document.createTextNode("JavaScript chart by amCharts "+a.version)),c.appendChild(b),a.defs&&(b=this.createSvgElement("defs"),c.appendChild(b),d.parseDefs(a.defs,b),this.defs=b))}}})}(),function(){var d=window.AmCharts;d.AmDObject=d.Class({construct:function(a,b){this.D=b,this.R=b.R,this.node=this.R.create(this,a),this.y=this.x=0,this.scale=1},attr:function(a){return this.R.attr(this,a),this},getAttr:function(a){return this.node.getAttribute(a)},setAttr:function(a,b){return this.R.setAttr(this,a,b),this},clipRect:function(a,b,c,d){this.R.clipRect(this,a,b,c,d)},translate:function(a,b,c,d){d||(a=Math.round(a),b=Math.round(b)),this.R.move(this,a,b,c),this.x=a,this.y=b,this.scale=c,this.angle&&this.rotate(this.angle)},rotate:function(a,b){this.R.rotate(this,a,b),this.angle=a},animate:function(a,b,c){for(var e in a)if(a.hasOwnProperty(e)){var h=e,f=a[e];c=d.getEffect(c),this.R.animate(this,h,f,b,c)}},push:function(a){if(a){var b=this.node;b.appendChild(a.node);var c=a.clipPath;c&&b.appendChild(c),(a=a.grad)&&b.appendChild(a)}},text:function(a){this.R.setText(this,a)},remove:function(){this.stop(),this.R.remove(this)},clear:function(){var a=this.node;if(a.hasChildNodes())for(;1<=a.childNodes.length;)a.removeChild(a.firstChild)},hide:function(){this.setAttr("visibility","hidden")},show:function(){this.setAttr("visibility","visible")},getBBox:function(){return this.R.getBBox(this)},toFront:function(){var a=this.node;if(a){this.prevNextNode=a.nextSibling;var b=a.parentNode;b&&b.appendChild(a)}},toPrevious:function(){var a=this.node;a&&this.prevNextNode&&(a=a.parentNode)&&a.insertBefore(this.prevNextNode,null)},toBack:function(){var a=this.node;if(a){this.prevNextNode=a.nextSibling;var b=a.parentNode;if(b){var c=b.firstChild;c&&b.insertBefore(a,c)}}},mouseover:function(a){return this.R.addListener(this,"mouseover",a),this},mouseout:function(a){return this.R.addListener(this,"mouseout",a),this},click:function(a){return this.R.addListener(this,"click",a),this},dblclick:function(a){return this.R.addListener(this,"dblclick",a),this},mousedown:function(a){return this.R.addListener(this,"mousedown",a),this},mouseup:function(a){return this.R.addListener(this,"mouseup",a),this},touchmove:function(a){return this.R.addListener(this,"touchmove",a),this},touchstart:function(a){return this.R.addListener(this,"touchstart",a),this},touchend:function(a){return this.R.addListener(this,"touchend",a),this},contextmenu:function(a){return this.node.addEventListener?this.node.addEventListener("contextmenu",a,!0):this.R.addListener(this,"contextmenu",a),this},stop:function(){d.removeFromArray(this.R.animations,this.an_translate),d.removeFromArray(this.R.animations,this.an_y),d.removeFromArray(this.R.animations,this.an_x)},length:function(){return this.node.childNodes.length},gradient:function(a,b,c){this.R.gradient(this,a,b,c)},pattern:function(a,b,c){a&&this.R.pattern(this,a,b,c)}})}(),function(){var d=window.AmCharts;d.VMLRenderer=d.Class({construct:function(a,b){this.chart=b,this.D=a,this.cNames={circle:"oval",ellipse:"oval",rect:"roundrect",path:"shape"},this.styleMap={x:"left",y:"top",width:"width",height:"height","font-family":"fontFamily","font-size":"fontSize",visibility:"visibility"}},create:function(a,b){var c;if("group"==b)c=document.createElement("div"),a.type="div";else if("text"==b)c=document.createElement("div"),a.type="text";else if("image"==b)c=document.createElement("img"),a.type="image";else{a.type="shape",a.shapeType=this.cNames[b],c=document.createElement("amvml:"+this.cNames[b]);var d=document.createElement("amvml:stroke");c.appendChild(d),a.stroke=d;var h=document.createElement("amvml:fill");c.appendChild(h),a.fill=h,h.className="amvml",d.className="amvml",c.className="amvml"}return c.style.position="absolute",c.style.top=0,c.style.left=0,c},path:function(a,b){a.node.setAttribute("src",b)},setAttr:function(a,b,c){if(void 0!==c){var e;8===document.documentMode&&(e=!0);var h=a.node,f=a.type,g=h.style;"r"==b&&(g.width=2*c,g.height=2*c),"oval"==a.shapeType&&("rx"==b&&(g.width=2*c),"ry"==b&&(g.height=2*c)),"roundrect"==a.shapeType&&("width"!=b&&"height"!=b||--c),"cursor"==b&&(g.cursor=c),"cx"==b&&(g.left=c-d.removePx(g.width)/2),"cy"==b&&(g.top=c-d.removePx(g.height)/2);var k=this.styleMap[b];if("width"==k&&0>c&&(c=0),void 0!==k&&(g[k]=c),"text"==f&&("text-anchor"==b&&(a.anchor=c,k=h.clientWidth,"end"==c&&(g.marginLeft=-k+"px"),"middle"==c&&(g.marginLeft=-(k/2)+"px",g.textAlign="center"),"start"==c&&(g.marginLeft="0px")),"fill"==b&&(g.color=c),"font-weight"==b&&(g.fontWeight=c)),g=a.children)for(k=0;k<g.length;k++)g[k].setAttr(b,c);"shape"==f&&("cs"==b&&(h.style.width="100px",h.style.height="100px",h.setAttribute("coordsize",c)),"d"==b&&h.setAttribute("path",this.svgPathToVml(c)),"dd"==b&&h.setAttribute("path",c),f=a.stroke,a=a.fill,"stroke"==b&&(e?f.color=c:f.setAttribute("color",c)),"stroke-width"==b&&(e?f.weight=c:f.setAttribute("weight",c)),"stroke-opacity"==b&&(e?f.opacity=c:f.setAttribute("opacity",c)),"stroke-dasharray"==b&&(g="solid",c>0&&3>c&&(g="dot"),c>=3&&6>=c&&(g="dash"),c>6&&(g="longdash"),e?f.dashstyle=g:f.setAttribute("dashstyle",g)),("fill-opacity"==b||"opacity"==b)&&(0===c?e?a.on=!1:a.setAttribute("on",!1):e?a.opacity=c:a.setAttribute("opacity",c)),"fill"==b&&(e?a.color=c:a.setAttribute("color",c)),"rx"==b&&(e?h.arcSize=c+"%":h.setAttribute("arcsize",c+"%")))}},attr:function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setAttr(a,c,b[c])},text:function(a,b,c){var e=new d.AmDObject("text",this.D),h=e.node;return h.style.whiteSpace="pre",h.innerHTML=a,this.D.addToContainer(h,c),this.attr(e,b),e},getBBox:function(a){return this.getBox(a.node)},getBox:function(a){var f,b=a.offsetLeft,c=a.offsetTop,d=a.offsetWidth,h=a.offsetHeight;if(a.hasChildNodes()){var g,k,l;for(l=0;l<a.childNodes.length;l++){f=this.getBox(a.childNodes[l]);var m=f.x;isNaN(m)||(isNaN(g)?g=m:g>m&&(g=m));var n=f.y;isNaN(n)||(isNaN(k)?k=n:k>n&&(k=n)),m=f.width+m,isNaN(m)||(d=Math.max(d,m)),f=f.height+n,isNaN(f)||(h=Math.max(h,f))}0>g&&(b+=g),0>k&&(c+=k)}return{x:b,y:c,width:d,height:h}},setText:function(a,b){var c=a.node;c&&(c.innerHTML=b),this.setAttr(a,"text-anchor",a.anchor)},addListener:function(a,b,c){a.node["on"+b]=c},move:function(a,b,c){var e=a.node,h=e.style;"text"==a.type&&(c-=d.removePx(h.fontSize)/2-1),"oval"==a.shapeType&&(b-=d.removePx(h.width)/2,c-=d.removePx(h.height)/2),a=a.bw,isNaN(a)||(b-=a,c-=a),isNaN(b)||isNaN(c)||(e.style.left=b+"px",e.style.top=c+"px")},svgPathToVml:function(a){var b=a.split(" ");a="";var c,h,d=Math.round;for(h=0;h<b.length;h++){var f=b[h],g=f.substring(0,1),f=f.substring(1),k=f.split(","),l=d(k[0])+","+d(k[1]);if("M"==g&&(a+=" m "+l),"L"==g&&(a+=" l "+l),"Z"==g&&(a+=" x e"),"Q"==g){var m=c.length,n=c[m-1],q=k[0],p=k[1],l=k[2],t=k[3];c=d(c[m-2]/3+2/3*q),n=d(n/3+2/3*p),q=d(2/3*q+l/3),p=d(2/3*p+t/3),a+=" c "+c+","+n+","+q+","+p+","+l+","+t}"A"==g&&(a+=" wa "+f),"B"==g&&(a+=" at "+f),c=k}return a},animate:function(a,b,c,d,h){var f=a.node,g=this.chart;if(a.animationFinished=!1,"translate"==b){b=c.split(","),c=b[1];var k=f.offsetTop;g.animate(a,"left",f.offsetLeft,b[0],d,h,"px"),g.animate(a,"top",k,c,d,h,"px")}},clipRect:function(a,b,c,d,h){a=a.node,0===b&&0===c?(a.style.width=d+"px",
a.style.height=h+"px",a.style.overflow="hidden"):a.style.clip="rect("+c+"px "+(b+d)+"px "+(c+h)+"px "+b+"px)"},rotate:function(a,b,c){if(0!==Number(b)){var e=a.node;a=e.style,c||(c=this.getBGColor(e.parentNode)),a.backgroundColor=c,a.paddingLeft=1,c=b*Math.PI/180;var h=Math.cos(c),f=Math.sin(c),g=d.removePx(a.left),k=d.removePx(a.top),l=e.offsetWidth,e=e.offsetHeight;b/=Math.abs(b),a.left=g+l/2-l/2*Math.cos(c)-b*e/2*Math.sin(c)+3,a.top=k-b*l/2*Math.sin(c)+b*e/2*Math.sin(c),a.cssText=a.cssText+"; filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+h+"', M12='"+-f+"', M21='"+f+"', M22='"+h+"', sizingmethod='auto expand');"}},getBGColor:function(a){var b="#FFFFFF";if(a.style){var c=a.style.backgroundColor;""!==c?b=c:a.parentNode&&(b=this.getBGColor(a.parentNode))}return b},set:function(a){var b=new d.AmDObject("group",this.D);if(this.D.container.appendChild(b.node),a){var c;for(c=0;c<a.length;c++)b.push(a[c])}return b},gradient:function(a,b,c,d){var h="";"radialGradient"==b&&(b="gradientradial",c.reverse()),"linearGradient"==b&&(b="gradient");var f;for(f=0;f<c.length;f++)h+=Math.round(100*f/(c.length-1))+"% "+c[f],f<c.length-1&&(h+=",");a=a.fill,90==d?d=0:270==d?d=180:180==d?d=90:0===d&&(d=270),8===document.documentMode?(a.type=b,a.angle=d):(a.setAttribute("type",b),a.setAttribute("angle",d)),h&&(a.colors.value=h)},remove:function(a){a.clipPath&&this.D.remove(a.clipPath),this.D.remove(a.node)},disableSelection:function(a){a.onselectstart=function(){return!1},a.style.cursor="default"},pattern:function(a,b,c,e){c=a.node,a=a.fill;var h="none";b.color&&(h=b.color),c.fillColor=h,b=b.url,d.isAbsolute(b)||(b=e+b),8===document.documentMode?(a.type="tile",a.src=b):(a.setAttribute("type","tile"),a.setAttribute("src",b))},update:function(){}})}(),function(){var d=window.AmCharts;d.SVGRenderer=d.Class({construct:function(a){this.D=a,this.animations=[]},create:function(a,b){return document.createElementNS(d.SVG_NS,b)},attr:function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setAttr(a,c,b[c])},setAttr:function(a,b,c){void 0!==c&&a.node.setAttribute(b,c)},animate:function(a,b,c,e,h){a.animationFinished=!1;var f=a.node;a["an_"+b]&&d.removeFromArray(this.animations,a["an_"+b]),"translate"==b?(f=(f=f.getAttribute("transform"))?String(f).substring(10,f.length-1):"0,0",f=f.split(", ").join(" "),f=f.split(" ").join(","),0===f&&(f="0,0")):f=Number(f.getAttribute(b)),c={obj:a,frame:0,attribute:b,from:f,to:c,time:e,effect:h},this.animations.push(c),a["an_"+b]=c},update:function(){var a,b=this.animations;for(a=b.length-1;a>=0;a--){var k,l,m,c=b[a],e=c.time*d.updateRate,h=c.frame+1,f=c.obj,g=c.attribute;e>=h?(c.frame++,"translate"==g?(k=c.from.split(","),g=Number(k[0]),k=Number(k[1]),isNaN(k)&&(k=0),l=c.to.split(","),m=Number(l[0]),l=Number(l[1]),m=0===m-g?m:Math.round(d[c.effect](0,h,g,m-g,e)),c=0===l-k?l:Math.round(d[c.effect](0,h,k,l-k,e)),g="transform",c="translate("+m+","+c+")"):(l=Number(c.from),k=Number(c.to),m=k-l,c=d[c.effect](0,h,l,m,e),isNaN(c)&&(c=k),0===m&&this.animations.splice(a,1)),this.setAttr(f,g,c)):("translate"==g?(l=c.to.split(","),m=Number(l[0]),l=Number(l[1]),f.translate(m,l)):(k=Number(c.to),this.setAttr(f,g,k)),f.animationFinished=!0,this.animations.splice(a,1))}},getBBox:function(a){if(a=a.node)try{return a.getBBox()}catch(b){}return{width:0,height:0,x:0,y:0}},path:function(a,b){a.node.setAttributeNS(d.SVG_XLINK,"xlink:href",b)},clipRect:function(a,b,c,e,h){var f=a.node,g=a.clipPath;g&&this.D.remove(g);var k=f.parentNode;k&&(f=document.createElementNS(d.SVG_NS,"clipPath"),g=d.getUniqueId(),f.setAttribute("id",g),this.D.rect(b,c,e,h,0,0,f),k.appendChild(f),b="#",d.baseHref&&!d.isIE&&(b=this.removeTarget(window.location.href)+b),this.setAttr(a,"clip-path","url("+b+g+")"),this.clipPathC++,a.clipPath=f)},text:function(a,b,c){var e=new d.AmDObject("text",this.D);a=String(a).split("\n");var f,h=d.removePx(b["font-size"]);for(f=0;f<a.length;f++){var g=this.create(null,"tspan");g.appendChild(document.createTextNode(a[f])),g.setAttribute("y",(h+2)*f+Math.round(h/2)),g.setAttribute("x",0),e.node.appendChild(g)}return e.node.setAttribute("y",Math.round(h/2)),this.attr(e,b),this.D.addToContainer(e.node,c),e},setText:function(a,b){var c=a.node;c&&(c.removeChild(c.firstChild),c.appendChild(document.createTextNode(b)))},move:function(a,b,c,d){isNaN(b)&&(b=0),isNaN(c)&&(c=0),b="translate("+b+","+c+")",d&&(b=b+" scale("+d+")"),this.setAttr(a,"transform",b)},rotate:function(a,b){var c=a.node.getAttribute("transform"),d="rotate("+b+")";c&&(d=c+" "+d),this.setAttr(a,"transform",d)},set:function(a){var b=new d.AmDObject("g",this.D);if(this.D.container.appendChild(b.node),a){var c;for(c=0;c<a.length;c++)b.push(a[c])}return b},addListener:function(a,b,c){a.node["on"+b]=c},gradient:function(a,b,c,e){var h=a.node,f=a.grad;if(f&&this.D.remove(f),b=document.createElementNS(d.SVG_NS,b),f=d.getUniqueId(),b.setAttribute("id",f),!isNaN(e)){var g=0,k=0,l=0,m=0;90==e?l=100:270==e?m=100:180==e?g=100:0===e&&(k=100),b.setAttribute("x1",g+"%"),b.setAttribute("x2",k+"%"),b.setAttribute("y1",l+"%"),b.setAttribute("y2",m+"%")}for(e=0;e<c.length;e++)g=document.createElementNS(d.SVG_NS,"stop"),k=100*e/(c.length-1),0===e&&(k=0),g.setAttribute("offset",k+"%"),g.setAttribute("stop-color",c[e]),b.appendChild(g);h.parentNode.appendChild(b),c="#",d.baseHref&&!d.isIE&&(c=this.removeTarget(window.location.href)+c),h.setAttribute("fill","url("+c+f+")"),a.grad=b},removeTarget:function(a){return a.split("#")[0]},pattern:function(a,b,c,e){var h=a.node;isNaN(c)&&(c=1);var f=a.patternNode;f&&this.D.remove(f);var f=document.createElementNS(d.SVG_NS,"pattern"),g=d.getUniqueId(),k=b;b.url&&(k=b.url),d.isAbsolute(k)||-1!=k.indexOf("data:image")||(k=e+k),e=Number(b.width),isNaN(e)&&(e=4);var l=Number(b.height);isNaN(l)&&(l=4),e/=c,l/=c,c=b.x,isNaN(c)&&(c=0);var m=-Math.random()*Number(b.randomX);isNaN(m)||(c=m),m=b.y,isNaN(m)&&(m=0);var n=-Math.random()*Number(b.randomY);isNaN(n)||(m=n),f.setAttribute("id",g),f.setAttribute("width",e),f.setAttribute("height",l),f.setAttribute("patternUnits","userSpaceOnUse"),f.setAttribute("xlink:href",k),b.color&&(n=document.createElementNS(d.SVG_NS,"rect"),n.setAttributeNS(null,"height",e),n.setAttributeNS(null,"width",l),n.setAttributeNS(null,"fill",b.color),f.appendChild(n)),this.D.image(k,0,0,e,l,f).translate(c,m),k="#",d.baseHref&&!d.isIE&&(k=this.removeTarget(window.location.href)+k),h.setAttribute("fill","url("+k+g+")"),a.patternNode=f,h.parentNode.appendChild(f)},remove:function(a){a.clipPath&&this.D.remove(a.clipPath),a.grad&&this.D.remove(a.grad),a.patternNode&&this.D.remove(a.patternNode),this.D.remove(a.node)}})}(),function(){var d=window.AmCharts;d.AmLegend=d.Class({construct:function(a){this.enabled=!0,this.cname="AmLegend",this.createEvents("rollOverMarker","rollOverItem","rollOutMarker","rollOutItem","showItem","hideItem","clickMarker","rollOverItem","rollOutItem","clickLabel"),this.position="bottom",this.borderColor=this.color="#000000",this.borderAlpha=0,this.markerLabelGap=5,this.verticalGap=10,this.align="left",this.horizontalGap=0,this.spacing=10,this.markerDisabledColor="#AAB3B3",this.markerType="square",this.markerSize=16,this.markerBorderThickness=this.markerBorderAlpha=1,this.marginBottom=this.marginTop=0,this.marginLeft=this.marginRight=20,this.autoMargins=!0,this.valueWidth=50,this.switchable=!0,this.switchType="x",this.switchColor="#FFFFFF",this.rollOverColor="#CC0000",this.reversedOrder=!1,this.labelText="[[title]]",this.valueText="[[value]]",this.useMarkerColorForLabels=!1,this.rollOverGraphAlpha=1,this.textClickEnabled=!1,this.equalWidths=!0,this.backgroundColor="#FFFFFF",this.backgroundAlpha=0,this.useGraphSettings=!1,this.showEntries=!0,d.applyTheme(this,a,this.cname)},setData:function(a){this.legendData=a,this.invalidateSize()},invalidateSize:function(){this.destroy(),this.entries=[],this.valueLabels=[];var a=this.legendData;this.enabled&&(d.ifArray(a)||d.ifArray(this.data))&&this.drawLegend()},drawLegend:function(){var a=this.chart,b=this.position,c=this.width,e=a.divRealWidth,h=a.divRealHeight,f=this.div,g=this.legendData;if(this.data&&(g=this.data),isNaN(this.fontSize)&&(this.fontSize=a.fontSize),this.maxColumnsReal=this.maxColumns,"right"==b||"left"==b)this.maxColumnsReal=1,this.autoMargins&&(this.marginLeft=this.marginRight=10);else if(this.autoMargins){this.marginRight=a.marginRight,this.marginLeft=a.marginLeft;var k=a.autoMarginOffset;"bottom"==b?(this.marginBottom=k,this.marginTop=0):(this.marginTop=k,this.marginBottom=0)}if(c=void 0!==c?d.toCoordinate(c,e):"right"!=b&&"left"!=b?a.realWidth:0<this.ieW?this.ieW:a.realWidth,"outside"==b?(c=f.offsetWidth,h=f.offsetHeight,f.clientHeight&&(c=f.clientWidth,h=f.clientHeight)):(isNaN(c)||(f.style.width=c+"px"),f.className="amChartsLegend "+a.classNamePrefix+"-legend-div"),this.divWidth=c,(b=this.container)?(b.container.innerHTML="",f.appendChild(b.container),b.width=c,b.height=h,b.setSize(c,h),b.addDefs(a)):b=new d.AmDraw(f,c,h,a),this.container=b,this.lx=0,this.ly=8,h=this.markerSize,h>this.fontSize&&(this.ly=h/2-1),h>0&&(this.lx+=h+this.markerLabelGap),this.titleWidth=0,(h=this.title)&&(h=d.text(this.container,h,this.color,a.fontFamily,this.fontSize,"start",!0),d.setCN(a,h,"legend-title"),h.translate(this.marginLeft,this.marginTop+this.verticalGap+this.ly+1),a=h.getBBox(),this.titleWidth=a.width+15,this.titleHeight=a.height+6),this.index=this.maxLabelWidth=0,this.showEntries){for(a=0;a<g.length;a++)this.createEntry(g[a]);for(a=this.index=0;a<g.length;a++)this.createValue(g[a])}this.arrangeEntries(),this.updateValues()},arrangeEntries:function(){var a=this.position,b=this.marginLeft+this.titleWidth,c=this.marginRight,e=this.marginTop,h=this.marginBottom,f=this.horizontalGap,g=this.div,k=this.divWidth,l=this.maxColumnsReal,m=this.verticalGap,n=this.spacing,q=k-c-b,p=0,t=0,r=this.container;this.set&&this.set.remove();var u=r.set();this.set=u;var w=r.set();u.push(w);var x,A,y=this.entries;for(A=0;A<y.length;A++){x=y[A].getBBox();var z=x.width;z>p&&(p=z),x=x.height,x>t&&(t=x)}var z=t=0,B=f,C=0,D=0;for(A=0;A<y.length;A++){var L=y[A];this.reversedOrder&&(L=y[y.length-A-1]),x=L.getBBox();var I;this.equalWidths?I=z*(p+n+this.markerLabelGap):(I=B,B=B+x.width+f+n),x.height>D&&(D=x.height),I+x.width>q&&A>0&&0!==z&&(t++,I=z=0,B=I+x.width+f+n,C=C+D+m,D=0),L.translate(I,C),z++,!isNaN(l)&&z>=l&&(z=0,t++,C=C+D+m,B=f,D=0),w.push(L)}x=w.getBBox(),l=x.height+2*m-1,"left"==a||"right"==a?(n=x.width+2*f,k=n+b+c,g.style.width=k+"px",this.ieW=k):n=k-b-c-1,c=d.polygon(this.container,[0,n,n,0],[0,0,l,l],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha),d.setCN(this.chart,c,"legend-bg"),u.push(c),u.translate(b,e),c.toBack(),b=f,("top"==a||"bottom"==a||"absolute"==a||"outside"==a)&&("center"==this.align?b=f+(n-x.width)/2:"right"==this.align&&(b=f+n-x.width)),w.translate(b,m+1),this.titleHeight>l&&(l=this.titleHeight),a=l+e+h+1,0>a&&(a=0),a>this.chart.divRealHeight&&(g.style.top="0px"),g.style.height=Math.round(a)+"px",r.setSize(this.divWidth,a)},createEntry:function(a){if(!1!==a.visibleInLegend&&!a.hideFromLegend){var b=this.chart,c=a.markerType;a.legendEntryWidth=this.markerSize,c||(c=this.markerType);var e=a.color,h=a.alpha;a.legendKeyColor&&(e=a.legendKeyColor()),a.legendKeyAlpha&&(h=a.legendKeyAlpha());var f;!0===a.hidden&&(f=e=this.markerDisabledColor);var g=a.pattern,k=a.customMarker;k||(k=this.customMarker);var l=this.container,m=this.markerSize,n=0,q=0,p=m/2;if(this.useGraphSettings){if(c=a.type,this.switchType=void 0,"line"==c||"step"==c||"smoothedLine"==c||"ohlc"==c)g=l.set(),a.hidden||(e=a.lineColorR,f=a.bulletBorderColorR),n=d.line(l,[0,2*m],[m/2,m/2],e,a.lineAlpha,a.lineThickness,a.dashLength),d.setCN(b,n,"graph-stroke"),g.push(n),a.bullet&&(a.hidden||(e=a.bulletColorR),n=d.bullet(l,a.bullet,a.bulletSize,e,a.bulletAlpha,a.bulletBorderThickness,f,a.bulletBorderAlpha))&&(d.setCN(b,n,"graph-bullet"),n.translate(m+1,m/2),g.push(n)),p=0,n=m,q=m/3;else{var t;a.getGradRotation&&(t=a.getGradRotation(),0===t&&(t=180)),n=a.fillColorsR,!0===a.hidden&&(n=e),(g=this.createMarker("rectangle",n,a.fillAlphas,a.lineThickness,e,a.lineAlpha,t,g,a.dashLength))&&(p=m,g.translate(p,m/2)),n=m}d.setCN(b,g,"graph-"+c),d.setCN(b,g,"graph-"+a.id)}else if(k)g=l.image(k,0,0,m,m);else{var r;isNaN(this.gradientRotation)||(r=180+this.gradientRotation),(g=this.createMarker(c,e,h,void 0,void 0,void 0,r,g))&&g.translate(m/2,m/2)}d.setCN(b,g,"legend-marker"),this.addListeners(g,a),l=l.set([g]),this.switchable&&a.switchable&&l.setAttr("cursor","pointer"),void 0!==a.id&&d.setCN(b,l,"legend-item-"+a.id),d.setCN(b,l,a.className,!0),f=this.switchType;var u;f&&"none"!=f&&m>0&&("x"==f?(u=this.createX(),u.translate(m/2,m/2)):u=this.createV(),u.dItem=a,!0!==a.hidden?"x"==f?u.hide():u.show():"x"!=f&&u.hide(),this.switchable||u.hide(),this.addListeners(u,a),a.legendSwitch=u,l.push(u),d.setCN(b,u,"legend-switch")),f=this.color,a.showBalloon&&this.textClickEnabled&&void 0!==this.selectedColor&&(f=this.selectedColor),this.useMarkerColorForLabels&&(f=e),!0===a.hidden&&(f=this.markerDisabledColor),e=d.massReplace(this.labelText,{"[[title]]":a.title}),t=this.fontSize,g&&(t>=m&&(m=m/2+this.ly-t/2+(t+2-m)/2-q,g.translate(p,m),u&&u.translate(u.x,m)),a.legendEntryWidth=g.getBBox().width);var w;e&&(e=d.fixBrakes(e),a.legendTextReal=e,w=this.labelWidth,w=isNaN(w)?d.text(this.container,e,f,b.fontFamily,t,"start"):d.wrappedText(this.container,e,f,b.fontFamily,t,"start",!1,w,0),d.setCN(b,w,"legend-label"),w.translate(this.lx+n,this.ly),l.push(w),b=w.getBBox().width,this.maxLabelWidth<b&&(this.maxLabelWidth=b)),this.entries[this.index]=l,a.legendEntry=this.entries[this.index],a.legendLabel=w,this.index++}},addListeners:function(a,b){var c=this;a&&a.mouseover(function(a){c.rollOverMarker(b,a)}).mouseout(function(a){c.rollOutMarker(b,a)}).click(function(a){c.clickMarker(b,a)})},rollOverMarker:function(a,b){this.switchable&&this.dispatch("rollOverMarker",a,b),this.dispatch("rollOverItem",a,b)},rollOutMarker:function(a,b){this.switchable&&this.dispatch("rollOutMarker",a,b),this.dispatch("rollOutItem",a,b)},clickMarker:function(a,b){this.switchable&&(!0===a.hidden?this.dispatch("showItem",a,b):this.dispatch("hideItem",a,b)),this.dispatch("clickMarker",a,b)},rollOverLabel:function(a,b){a.hidden||(this.textClickEnabled&&a.legendLabel&&a.legendLabel.attr({fill:this.rollOverColor}),this.dispatch("rollOverItem",a,b))},rollOutLabel:function(a,b){if(!a.hidden){if(this.textClickEnabled&&a.legendLabel){var c=this.color;void 0!==this.selectedColor&&a.showBalloon&&(c=this.selectedColor),this.useMarkerColorForLabels&&(c=a.lineColor,void 0===c&&(c=a.color)),a.legendLabel.attr({fill:c})}this.dispatch("rollOutItem",a,b)}},clickLabel:function(a,b){this.textClickEnabled?a.hidden||this.dispatch("clickLabel",a,b):this.switchable&&(!0===a.hidden?this.dispatch("showItem",a,b):this.dispatch("hideItem",a,b))},dispatch:function(a,b,c){a={type:a,dataItem:b,target:this,event:c,chart:this.chart},this.chart&&this.chart.handleLegendEvent(a),this.fire(a)},createValue:function(a){var b=this,c=b.fontSize,e=b.chart;if(!1!==a.visibleInLegend&&!a.hideFromLegend){var h=b.maxLabelWidth;b.forceWidth&&(h=b.labelWidth),b.equalWidths||(b.valueAlign="left"),"left"==b.valueAlign&&(h=a.legendEntry.getBBox().width);var f=h;if(b.valueText&&0<b.valueWidth){var g=b.color;b.useMarkerColorForValues&&(g=a.color,a.legendKeyColor&&(g=a.legendKeyColor())),!0===a.hidden&&(g=b.markerDisabledColor);var k=b.valueText,h=h+b.lx+b.markerLabelGap+b.valueWidth,l="end";"left"==b.valueAlign&&(h-=b.valueWidth,l="start"),g=d.text(b.container,k,g,b.chart.fontFamily,c,l),d.setCN(e,g,"legend-value"),g.translate(h,b.ly),b.entries[b.index].push(g),f+=b.valueWidth+2*b.markerLabelGap,g.dItem=a,b.valueLabels.push(g)}b.index++,e=b.markerSize,c+7>e&&(e=c+7,d.VML&&(e+=3)),c=b.container.rect(a.legendEntryWidth,0,f,e,0,0).attr({stroke:"none",fill:"#fff","fill-opacity":.005}),c.dItem=a,b.entries[b.index-1].push(c),c.mouseover(function(c){b.rollOverLabel(a,c)}).mouseout(function(c){b.rollOutLabel(a,c)}).click(function(c){b.clickLabel(a,c)})}},createV:function(){var a=this.markerSize;return d.polygon(this.container,[a/5,a/2,a-a/5,a/2],[a/3,a-a/5,a/5,a/1.7],this.switchColor)},createX:function(){var a=(this.markerSize-4)/2,b={stroke:this.switchColor,"stroke-width":3},c=this.container,e=d.line(c,[-a,a],[-a,a]).attr(b),a=d.line(c,[-a,a],[a,-a]).attr(b);return this.container.set([e,a])},createMarker:function(a,b,c,e,h,f,g,k,l){var m=this.markerSize,n=this.container;return h||(h=this.markerBorderColor),h||(h=b),isNaN(e)&&(e=this.markerBorderThickness),isNaN(f)&&(f=this.markerBorderAlpha),d.bullet(n,a,m,b,c,e,h,f,m,g,k,this.chart.path,l)},validateNow:function(){this.invalidateSize()},updateValues:function(){var c,a=this.valueLabels,b=this.chart,e=this.data;if(a)for(c=0;c<a.length;c++){var h=a[c],f=h.dItem,g=" ";if(e)f.value?h.text(f.value):h.text("");else{var k;if(void 0!==f.type){k=f.currentDataItem;var l=this.periodValueText;f.legendPeriodValueText&&(l=f.legendPeriodValueText),k?(g=this.valueText,f.legendValueText&&(g=f.legendValueText),g=b.formatString(g,k)):l&&b.formatPeriodString&&(l=d.massReplace(l,{"[[title]]":f.title}),g=b.formatPeriodString(l,f))}else g=b.formatString(this.valueText,f);(l=this.valueFunction)&&(k&&(f=k),g=l(f,g)),h.text(g)}}},renderFix:function(){if(!d.VML&&this.enabled){var a=this.container;a&&a.renderFix()}},destroy:function(){this.div.innerHTML="",d.remove(this.set)}})}(),function(){var d=window.AmCharts;d.formatMilliseconds=function(a,b){if(-1!=a.indexOf("fff")){var c=b.getMilliseconds(),d=String(c);10>c&&(d="00"+c),c>=10&&100>c&&(d="0"+c),a=a.replace(/fff/g,d)}return a},d.extractPeriod=function(a){var b=d.stripNumbers(a),c=1;return b!=a&&(c=Number(a.slice(0,a.indexOf(b)))),{period:b,count:c}},d.getDate=function(a,b,c){return a instanceof Date?d.newDate(a,c):b&&isNaN(a)?d.stringToDate(a,b):new Date(a)},d.daysInMonth=function(a){return new Date(a.getYear(),a.getMonth()+1,0).getDate()},d.newDate=function(a,b){return b&&-1==b.indexOf("fff")?new Date(a):new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())},d.resetDateToMin=function(a,b,c,e){void 0===e&&(e=1);var h,f,g,k,l,m,n;switch(d.useUTC?(h=a.getUTCFullYear(),f=a.getUTCMonth(),g=a.getUTCDate(),k=a.getUTCHours(),l=a.getUTCMinutes(),m=a.getUTCSeconds(),n=a.getUTCMilliseconds(),a=a.getUTCDay()):(h=a.getFullYear(),f=a.getMonth(),g=a.getDate(),k=a.getHours(),l=a.getMinutes(),m=a.getSeconds(),n=a.getMilliseconds(),a=a.getDay()),b){case"YYYY":h=Math.floor(h/c)*c,f=0,g=1,n=m=l=k=0;break;case"MM":f=Math.floor(f/c)*c,g=1,n=m=l=k=0;break;case"WW":g=a>=e?g-a+e:g-(7+a)+e,n=m=l=k=0;break;case"DD":n=m=l=k=0;break;case"hh":k=Math.floor(k/c)*c,n=m=l=0;break;case"mm":l=Math.floor(l/c)*c,n=m=0;break;case"ss":m=Math.floor(m/c)*c,n=0;break;case"fff":n=Math.floor(n/c)*c}return d.useUTC?(a=new Date,a.setUTCFullYear(h,f,g),a.setUTCHours(k,l,m,n)):a=new Date(h,f,g,k,l,m,n),a},d.getPeriodDuration=function(a,b){void 0===b&&(b=1);var c;switch(a){case"YYYY":c=316224e5;break;case"MM":c=26784e5;break;case"WW":c=6048e5;break;case"DD":c=864e5;break;case"hh":c=36e5;break;case"mm":c=6e4;break;case"ss":c=1e3;break;case"fff":c=1}return c*b},d.intervals={s:{nextInterval:"ss",contains:1e3},ss:{nextInterval:"mm",contains:60,count:0},mm:{nextInterval:"hh",contains:60,count:1},hh:{nextInterval:"DD",contains:24,count:2},DD:{nextInterval:"",contains:1/0,count:3}},d.getMaxInterval=function(a,b){var c=d.intervals;return a>=c[b].contains?(a=Math.round(a/c[b].contains),b=c[b].nextInterval,d.getMaxInterval(a,b)):"ss"==b?c[b].nextInterval:b},d.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d.shortDayNames="Sun Mon Tue Wed Thu Fri Sat".split(" "),d.monthNames="January February March April May June July August September October November December".split(" "),d.shortMonthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),d.getWeekNumber=function(a){a=new Date(a),a.setHours(0,0,0),a.setDate(a.getDate()+4-(a.getDay()||7));var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+1)/7)},d.stringToDate=function(a,b){var c={},e=[{pattern:"YYYY",period:"year"},{pattern:"YY",period:"year"},{pattern:"MM",period:"month"},{pattern:"M",period:"month"},{pattern:"DD",period:"date"},{pattern:"D",period:"date"},{pattern:"JJ",period:"hours"},{pattern:"J",period:"hours"},{pattern:"HH",period:"hours"},{pattern:"H",period:"hours"},{pattern:"KK",period:"hours"},{pattern:"K",period:"hours"},{pattern:"LL",period:"hours"},{pattern:"L",period:"hours"},{pattern:"NN",period:"minutes"},{pattern:"N",period:"minutes"},{pattern:"SS",period:"seconds"},{pattern:"S",period:"seconds"},{pattern:"QQQ",period:"milliseconds"},{pattern:"QQ",period:"milliseconds"},{pattern:"Q",period:"milliseconds"}],h=!0,f=b.indexOf("AA");-1!=f&&(a.substr(f,2),"pm"==a.toLowerCase&&(h=!1));var g,k,l,f=b;for(l=0;l<e.length;l++)k=e[l].period,c[k]=0,"date"==k&&(c[k]=1);for(l=0;l<e.length;l++)if(g=e[l].pattern,k=e[l].period,-1!=b.indexOf(g)){var m=d.getFromDateString(g,a,f);b=b.replace(g,""),("KK"==g||"K"==g||"LL"==g||"L"==g)&&(h||(m+=12)),c[k]=m}return d.useUTC?(e=new Date,e.setUTCFullYear(c.year,c.month,c.date),e.setUTCHours(c.hours,c.minutes,c.seconds,c.milliseconds)):e=new Date(c.year,c.month,c.date,c.hours,c.minutes,c.seconds,c.milliseconds),e},d.getFromDateString=function(a,b,c){return void 0!==b?(c=c.indexOf(a),b=String(b),b=b.substr(c,a.length),"0"==b.charAt(0)&&(b=b.substr(1,b.length-1)),b=Number(b),isNaN(b)&&(b=0),-1!=a.indexOf("M")&&b--,b):void 0},d.formatDate=function(a,b,c){c||(c=d);var e,h,f,g,k,l,m,n,q=d.getWeekNumber(a);d.useUTC?(e=a.getUTCFullYear(),h=a.getUTCMonth(),f=a.getUTCDate(),g=a.getUTCDay(),k=a.getUTCHours(),l=a.getUTCMinutes(),m=a.getUTCSeconds(),n=a.getUTCMilliseconds()):(e=a.getFullYear(),h=a.getMonth(),f=a.getDate(),g=a.getDay(),k=a.getHours(),l=a.getMinutes(),m=a.getSeconds(),n=a.getMilliseconds());var p=String(e).substr(2,2),t="0"+g;b=b.replace(/W/g,q),q=k,24==q&&(q=0);var r=q;10>r&&(r="0"+r),b=b.replace(/JJ/g,r),b=b.replace(/J/g,q),r=k,0===r&&(r=24,-1!=b.indexOf("H")&&(f--,0===f&&(e=new Date(a),e.setDate(e.getDate()-1),h=e.getMonth(),f=e.getDate(),e=e.getFullYear()))),a=h+1,9>h&&(a="0"+a),q=f,10>f&&(q="0"+f);var u=r;return 10>u&&(u="0"+u),b=b.replace(/HH/g,u),b=b.replace(/H/g,r),r=k,r>11&&(r-=12),u=r,10>u&&(u="0"+u),b=b.replace(/KK/g,u),b=b.replace(/K/g,r),r=k,0===r&&(r=12),r>12&&(r-=12),u=r,10>u&&(u="0"+u),b=b.replace(/LL/g,u),b=b.replace(/L/g,r),r=l,10>r&&(r="0"+r),b=b.replace(/NN/g,r),b=b.replace(/N/g,l),l=m,10>l&&(l="0"+l),b=b.replace(/SS/g,l),b=b.replace(/S/g,m),m=n,10>m&&(m="00"+m),100>m&&(m="0"+m),l=n,10>l&&(l="00"+l),b=b.replace(/QQQ/g,m),b=b.replace(/QQ/g,l),b=b.replace(/Q/g,n),b=12>k?b.replace(/A/g,c.amString):b.replace(/A/g,c.pmString),b=b.replace(/YYYY/g,"@IIII@"),b=b.replace(/YY/g,"@II@"),b=b.replace(/MMMM/g,"@XXXX@"),b=b.replace(/MMM/g,"@XXX@"),b=b.replace(/MM/g,"@XX@"),b=b.replace(/M/g,"@X@"),b=b.replace(/DD/g,"@RR@"),b=b.replace(/D/g,"@R@"),b=b.replace(/EEEE/g,"@PPPP@"),b=b.replace(/EEE/g,"@PPP@"),b=b.replace(/EE/g,"@PP@"),b=b.replace(/E/g,"@P@"),b=b.replace(/@IIII@/g,e),b=b.replace(/@II@/g,p),b=b.replace(/@XXXX@/g,c.monthNames[h]),b=b.replace(/@XXX@/g,c.shortMonthNames[h]),b=b.replace(/@XX@/g,a),b=b.replace(/@X@/g,h+1),b=b.replace(/@RR@/g,q),b=b.replace(/@R@/g,f),b=b.replace(/@PPPP@/g,c.dayNames[g]),b=b.replace(/@PPP@/g,c.shortDayNames[g]),b=b.replace(/@PP@/g,t),b=b.replace(/@P@/g,g)},d.changeDate=function(a,b,c,e,h){if(d.useUTC)return d.changeUTCDate(a,b,c,e,h);var f=-1;switch(void 0===e&&(e=!0),void 0===h&&(h=!1),!0===e&&(f=1),b){case"YYYY":a.setFullYear(a.getFullYear()+c*f),e||h||a.setDate(a.getDate()+1);break;case"MM":b=a.getMonth(),a.setMonth(a.getMonth()+c*f),a.getMonth()>b+c*f&&a.setDate(a.getDate()-1),e||h||a.setDate(a.getDate()+1);break;case"DD":a.setDate(a.getDate()+c*f);break;case"WW":a.setDate(a.getDate()+c*f*7);break;case"hh":a.setHours(a.getHours()+c*f);break;case"mm":a.setMinutes(a.getMinutes()+c*f);break;case"ss":a.setSeconds(a.getSeconds()+c*f);break;case"fff":a.setMilliseconds(a.getMilliseconds()+c*f)}return a},d.changeUTCDate=function(a,b,c,d,h){var f=-1;switch(void 0===d&&(d=!0),void 0===h&&(h=!1),!0===d&&(f=1),b){case"YYYY":a.setUTCFullYear(a.getUTCFullYear()+c*f),d||h||a.setUTCDate(a.getUTCDate()+1);break;case"MM":b=a.getUTCMonth(),a.setUTCMonth(a.getUTCMonth()+c*f),a.getUTCMonth()>b+c*f&&a.setUTCDate(a.getUTCDate()-1),d||h||a.setUTCDate(a.getUTCDate()+1);break;case"DD":a.setUTCDate(a.getUTCDate()+c*f);break;case"WW":a.setUTCDate(a.getUTCDate()+c*f*7);break;case"hh":a.setUTCHours(a.getUTCHours()+c*f);break;case"mm":a.setUTCMinutes(a.getUTCMinutes()+c*f);break;case"ss":a.setUTCSeconds(a.getUTCSeconds()+c*f);break;case"fff":a.setUTCMilliseconds(a.getUTCMilliseconds()+c*f)}return a}}()},{}],58:[function(require,module,exports){!function(){var e=window.AmCharts;e.AmSlicedChart=e.Class({inherits:e.AmChart,construct:function(a){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice"),e.AmSlicedChart.base.construct.call(this,a),this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" "),this.alpha=1,this.groupPercent=0,this.groupedTitle="Other",this.groupedPulled=!1,this.groupedAlpha=1,this.marginLeft=0,this.marginBottom=this.marginTop=10,this.marginRight=0,this.hoverAlpha=1,this.outlineColor="#FFFFFF",this.outlineAlpha=0,this.outlineThickness=1,this.startAlpha=0,this.startDuration=1,this.startEffect="bounce",this.sequencedAnimation=!0,this.pullOutDuration=1,this.pullOutEffect="bounce",this.pullOnHover=this.pullOutOnlyOne=!1,this.labelsEnabled=!0,this.labelTickColor="#000000",this.labelTickAlpha=.2,this.hideLabelsPercent=0,this.urlTarget="_self",this.autoMarginOffset=10,this.gradientRatio=[],this.maxLabelWidth=200,e.applyTheme(this,a,"AmSlicedChart")},initChart:function(){e.AmSlicedChart.base.initChart.call(this),this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData)),this.drawChart()},handleLegendEvent:function(a){var b=a.type,c=a.dataItem,d=this.legend;if(!d.data&&c){var f=c.hidden;switch(a=a.event,b){case"clickMarker":f||d.switchable||this.clickSlice(c,a);break;case"clickLabel":f||this.clickSlice(c,a,!1);break;case"rollOverItem":f||this.rollOverSlice(c,!1,a);break;case"rollOutItem":f||this.rollOutSlice(c,a);break;case"hideItem":this.hideSlice(c,a);break;case"showItem":this.showSlice(c,a)}}},invalidateVisibility:function(){this.recalculatePercents(),this.initChart();var a=this.legend;a&&a.invalidateSize()},addEventListeners:function(a,b){var c=this;a.mouseover(function(a){c.rollOverSlice(b,!0,a)}).mouseout(function(a){c.rollOutSlice(b,a)}).touchend(function(a){c.rollOverSlice(b,a)}).mouseup(function(a){c.clickSlice(b,a)}).contextmenu(function(a){c.handleRightClick(b,a)})},formatString:function(a,b,c){a=e.formatValue(a,b,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);var d=this.pf.precision;return isNaN(this.tempPrec)||(this.pf.precision=this.tempPrec),a=e.formatValue(a,b,["percents"],this.pf),a=e.massReplace(a,{"[[title]]":b.title,"[[description]]":b.description}),this.pf.precision=d,-1!=a.indexOf("[[")&&(a=e.formatDataContextValue(a,b.dataContext)),a=c?e.fixNewLines(a):e.fixBrakes(a),a=e.cleanFromEmpty(a)},startSlices:function(){var a;for(a=0;a<this.chartData.length;a++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(a):this.startSlice(this.chartData[a])},setStartTO:function(a){var b=this;a=setTimeout(function(){b.startSequenced.call(b)},b.startDuration/b.chartData.length*500*a),b.timeOuts.push(a)},pullSlices:function(a){var c,b=this.chartData;for(c=0;c<b.length;c++){var d=b[c];d.pulled&&this.pullSlice(d,1,a)}},startSequenced:function(){var b,a=this.chartData;for(b=0;b<a.length;b++)if(!a[b].started){this.startSlice(this.chartData[b]);break}},startSlice:function(a){a.started=!0;var b=a.wedge,c=this.startDuration,d=a.labelSet;b&&c>0&&(0<a.alpha&&b.show(),b.translate(a.startX,a.startY),this.animatable.push(b),b.animate({opacity:1,translate:"0,0"},c,this.startEffect)),d&&c>0&&(0<a.alpha&&d.show(),d.translate(a.startX,a.startY),d.animate({opacity:1,translate:"0,0"},c,this.startEffect))},showLabels:function(){var b,a=this.chartData;for(b=0;b<a.length;b++){var c=a[b];if(0<c.alpha){var d=c.label;d&&d.show(),(c=c.tick)&&c.show()}}},showSlice:function(a){isNaN(a)?a.hidden=!1:this.chartData[a].hidden=!1,this.invalidateVisibility()},hideSlice:function(a){isNaN(a)?a.hidden=!0:this.chartData[a].hidden=!0,this.hideBalloon(),this.invalidateVisibility()},rollOverSlice:function(a,b,c){if(isNaN(a)||(a=this.chartData[a]),clearTimeout(this.hoverInt),!a.hidden){this.pullOnHover&&this.pullSlice(a,1),1>this.hoverAlpha&&a.wedge&&a.wedge.attr({opacity:this.hoverAlpha});var d=a.balloonX,f=a.balloonY;a.pulled&&(d+=a.pullX,f+=a.pullY);var h=this.formatString(this.balloonText,a,!0),k=this.balloonFunction;k&&(h=k(a,h)),k=e.adjustLuminosity(a.color,-.15),h?this.showBalloon(h,k,b,d,f):this.hideBalloon(),0===a.value&&this.hideBalloon(),this.fire({type:"rollOverSlice",dataItem:a,chart:this,event:c})}},rollOutSlice:function(a,b){isNaN(a)||(a=this.chartData[a]),a.wedge&&a.wedge.attr({opacity:1}),this.hideBalloon(),this.fire({type:"rollOutSlice",dataItem:a,chart:this,event:b})},clickSlice:function(a,b,c){isNaN(a)||(a=this.chartData[a]),a.pulled?this.pullSlice(a,0):this.pullSlice(a,1),e.getURL(a.url,this.urlTarget),c||this.fire({type:"clickSlice",dataItem:a,chart:this,event:b})},handleRightClick:function(a,b){isNaN(a)||(a=this.chartData[a]),this.fire({type:"rightClickSlice",dataItem:a,chart:this,event:b})},drawTicks:function(){var b,a=this.chartData;for(b=0;b<a.length;b++){var c=a[b];if(c.label&&!c.skipTick){var d=c.ty,d=e.line(this.container,[c.tx0,c.tx,c.tx2],[c.ty0,d,d],this.labelTickColor,this.labelTickAlpha);e.setCN(this,d,this.type+"-tick"),e.setCN(this,d,c.className,!0),c.tick=d,c.wedge.push(d)}}},initialStart:function(){var a=this,b=a.startDuration,c=setTimeout(function(){a.showLabels.call(a)},1e3*b);a.timeOuts.push(c),a.chartCreated?a.pullSlices(!0):(a.startSlices(),b>0?(b=setTimeout(function(){a.pullSlices.call(a)},1200*b),a.timeOuts.push(b)):a.pullSlices(!0))},pullSlice:function(a,b,c){var d=this.pullOutDuration;!0===c&&(d=0),(c=a.wedge)&&(d>0?(c.animate({translate:b*a.pullX+","+b*a.pullY},d,this.pullOutEffect),a.labelSet&&a.labelSet.animate({translate:b*a.pullX+","+b*a.pullY},d,this.pullOutEffect)):(a.labelSet&&a.labelSet.translate(b*a.pullX,b*a.pullY),c.translate(b*a.pullX,b*a.pullY))),1==b?(a.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(a.index),a={type:"pullOutSlice",dataItem:a,chart:this}):(a.pulled=!1,a={type:"pullInSlice",dataItem:a,chart:this}),this.fire(a)},pullInAll:function(a){var c,b=this.chartData;for(c=0;c<this.chartData.length;c++)c!=a&&b[c].pulled&&this.pullSlice(b[c],0)},pullOutAll:function(){var b,a=this.chartData;for(b=0;b<a.length;b++)a[b].pulled||this.pullSlice(a[b],1)},parseData:function(){var a=[];this.chartData=a;var b=this.dataProvider;if(isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha),void 0!==b){var f,h,k,c=b.length,d=0;for(f=0;c>f;f++){h={};var n=b[f];h.dataContext=n,null!==n[this.valueField]&&(h.value=Number(n[this.valueField])),(k=n[this.titleField])||(k=""),h.title=k,h.pulled=e.toBoolean(n[this.pulledField],!1),(k=n[this.descriptionField])||(k=""),h.description=k,h.labelRadius=Number(n[this.labelRadiusField]),h.switchable=!0,h.className=n[this.classNameField],h.url=n[this.urlField],k=n[this.patternField],!k&&this.patterns&&(k=this.patterns[f]),h.pattern=k,h.visibleInLegend=e.toBoolean(n[this.visibleInLegendField],!0),k=n[this.alphaField],h.alpha=void 0!==k?Number(k):this.alpha,k=n[this.colorField],void 0!==k&&(h.color=k),h.labelColor=e.toColor(n[this.labelColorField]),d+=h.value,h.hidden=!1,a[f]=h}for(f=b=0;c>f;f++)h=a[f],
h.percents=h.value/d*100,h.percents<this.groupPercent&&b++;for(b>1&&(this.groupValue=0,this.removeSmallSlices(),a.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/d*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,className:this.groupedClassName,dataContext:{}})),c=this.baseColor,c||(c=this.pieBaseColor),d=this.brightnessStep,d||(d=this.pieBrightnessStep),f=0;f<a.length;f++)c?k=e.adjustLuminosity(c,f*d/100):(k=this.colors[f],void 0===k&&(k=e.randomColor())),void 0===a[f].color&&(a[f].color=k);this.recalculatePercents()}},recalculatePercents:function(){var c,d,a=this.chartData,b=0;for(c=0;c<a.length;c++)d=a[c],!d.hidden&&0<d.value&&(b+=d.value);for(c=0;c<a.length;c++)d=this.chartData[c],d.percents=!d.hidden&&0<d.value?100*d.value/b:0},removeSmallSlices:function(){var b,a=this.chartData;for(b=a.length-1;b>=0;b--)a[b].percents<this.groupPercent&&(this.groupValue+=a[b].value,a.splice(b,1))},animateAgain:function(){var a=this;a.startSlices();for(var b=0;b<a.chartData.length;b++){var c=a.chartData[b];c.started=!1;var d=c.wedge;d&&(d.setAttr("opacity",a.startAlpha),d.translate(c.startX,c.startY)),(d=c.labelSet)&&(d.setAttr("opacity",a.startAlpha),d.translate(c.startX,c.startY))}b=a.startDuration,b>0?(b=setTimeout(function(){a.pullSlices.call(a)},1200*b),a.timeOuts.push(b)):a.pullSlices()},measureMaxLabel:function(){var c,a=this.chartData,b=0;for(c=0;c<a.length;c++){var d=a[c],f=this.formatString(this.labelText,d),h=this.labelFunction;h&&(f=h(d,f)),d=e.text(this.container,f,this.color,this.fontFamily,this.fontSize),f=d.getBBox().width,f>b&&(b=f),d.remove()}return b}})}(),function(){var e=window.AmCharts;e.AmFunnelChart=e.Class({inherits:e.AmSlicedChart,construct:function(a){this.type="funnel",e.AmFunnelChart.base.construct.call(this,a),this.cname="AmFunnelChart",this.startX=this.startY=0,this.baseWidth="100%",this.neckHeight=this.neckWidth=0,this.rotate=!1,this.valueRepresents="height",this.pullDistance=30,this.labelPosition="center",this.labelText="[[title]]: [[value]]",this.balloonText="[[title]]: [[value]]\n[[description]]",e.applyTheme(this,a,this.cname)},drawChart:function(){e.AmFunnelChart.base.drawChart.call(this);var a=this.chartData;if(e.ifArray(a))if(0<this.realWidth&&0<this.realHeight){var b=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),c=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),d=this.container,f=this.startDuration,h=this.rotate,k=this.updateWidth();this.realWidth=k;var n=this.updateHeight();this.realHeight=n;var l=e.toCoordinate,t=l(this.marginLeft,k),u=l(this.marginRight,k),g=l(this.marginTop,n)+this.getTitleHeight(),l=l(this.marginBottom,n);b>0&&0>c&&(this.neckHeight=this.neckWidth=0,h?l-=c/2:g-=c/2);var u=k-t-u,E=e.toCoordinate(this.baseWidth,u),I=e.toCoordinate(this.neckWidth,u),D=n-l-g,F=e.toCoordinate(this.neckHeight,D),y=g+D-F;h&&(g=n-l,y=g-D+F),this.firstSliceY=g,e.VML&&(this.startAlpha=1);for(var z=u/2+t,G=(D-F)/((E-I)/2),C=1,v=E/2,E=(D-F)*(E+I)/2+I*F,H=g,M=0,F=0;F<a.length;F++){var x,m=a[F];if(!0!==m.hidden&&(this.showZeroSlices||0!==m.percents)){var p,A=[],q=[];if("height"==this.valueRepresents)p=D*m.percents/100;else{var B=-E*m.percents/100/2,K=v;p=-1/(2*G);var r=Math.pow(K,2)-4*p*B;0>r&&(r=0),p=(Math.sqrt(r)-K)/(2*p),!h&&g>=y||h&&y>=g?p=2*-B/I:(!h&&g+p>y||h&&y>g-p)&&(x=h?Math.round(p+(g-p-y)):Math.round(p-(g+p-y)),r=x/G,B=2*(-B-(K-r/2)*x)/I,1/0!=B&&(p=x+B))}if(B=v-p/G,K=!1,!h&&g+p>y||h&&y>g-p?(B=I/2,A.push(z-v,z+v,z+B,z+B,z-B,z-B),h?(x=p+(g-p-y),y>g&&(x=0),q.push(g,g,g-x,g-p,g-p,g-x,g)):(x=p-(g+p-y),g>y&&(x=0),q.push(g,g,g+x,g+p,g+p,g+x,g)),K=!0):(A.push(z-v,z+v,z+B,z-B),h?q.push(g,g,g-p,g-p):q.push(g,g,g+p,g+p)),x=d.set(),b>0&&0>c?(q=B/v,A=-1,h||(A=1),isNaN(C)&&(C=0),A=new e.Cuboid(d,2*v,A*p,b,c*C,m.color,m.alpha,this.outlineThickness,this.outlineColor,this.outlineAlpha,90,0,!1,0,m.pattern,q).set,A.translate(z-v,g-c/2*C),C*=q):A=e.polygon(d,A,q,m.color,m.alpha,this.outlineThickness,this.outlineColor,this.outlineAlpha),e.setCN(this,x,"funnel-item"),e.setCN(this,A,"funnel-slice"),e.setCN(this,x,m.className,!0),x.push(A),this.graphsSet.push(x),h||x.toBack(),m.wedge=x,m.index=F,q=this.gradientRatio){var w,r=[];for(w=0;w<q.length;w++)r.push(e.adjustLuminosity(m.color,q[w]));0<r.length&&A.gradient("linearGradient",r),m.pattern&&A.pattern(m.pattern,NaN,this.path)}f>0&&(this.chartCreated||x.setAttr("opacity",this.startAlpha)),this.addEventListeners(x,m),m.ty0=g-p/2,this.labelsEnabled&&this.labelText&&m.percents>=this.hideLabelsPercent&&(q=this.formatString(this.labelText,m),(A=this.labelFunction)&&(q=A(m,q)),r=m.labelColor,r||(r=this.color),A=this.labelPosition,w="left","center"==A&&(w="middle"),"left"==A&&(w="right"),""!==q&&(q=e.wrappedText(d,q,r,this.fontFamily,this.fontSize,w,!1,this.maxLabelWidth),e.setCN(this,q,"funnel-label"),e.setCN(this,q,m.className,!0),q.node.style.pointerEvents="none",x.push(q),r=z,h?(w=g-p/2,m.ty0=w):(w=g+p/2,m.ty0=w,H+M+5>w&&(w=H+M+5),w>n-l&&(w=n-l)),"right"==A&&(r=u+10+t,m.tx0=z+(v-p/2/G),K&&(m.tx0=z+B)),"left"==A&&(m.tx0=z-(v-p/2/G),K&&(m.tx0=z-B),r=t),m.label=q,m.labelX=r,m.labelY=w,m.labelHeight=q.getBBox().height,q.translate(r,w),v=q.getBBox(),H=e.rect(d,v.width+5,v.height+5,"#ffffff",.005),H.translate(r+v.x,w+v.y),x.push(H),m.hitRect=H,M=q.getBBox().height,H=w)),(0===m.alpha||f>0&&!this.chartCreated)&&x.hide(),g=h?g-p:g+p,v=B,m.startX=e.toCoordinate(this.startX,k),m.startY=e.toCoordinate(this.startY,n),m.pullX=e.toCoordinate(this.pullDistance,k),m.pullY=0,m.balloonX=z,m.balloonY=m.ty0}}this.arrangeLabels(),this.initialStart(),(a=this.legend)&&a.invalidateSize()}else this.cleanChart();this.dispDUpd()},arrangeLabels:function(){var b,a=this.rotate;b=a?0:this.realHeight;for(var e,c=0,d=this.chartData,f=d.length,k=0;f>k;k++){e=d[f-k-1];var n=e.label,l=e.labelY,t=e.labelX,u=e.labelHeight,g=l;a?b+c+5>l&&(g=b+c+5):l+u+5>b&&(g=b-5-u),b=g,c=u,n&&(n.translate(t,g),n=n.getBBox(),e.hitRect&&e.hitRect.translate(t+n.x,g+n.y)),e.labelY=g,e.tx=t,e.ty=g,e.tx2=t}"center"!=this.labelPosition&&this.drawTicks()}})}(),function(){var e=window.AmCharts;e.Cuboid=e.Class({construct:function(a,b,c,d,e,h,k,n,l,t,u,g,E,I,D,F,y){this.set=a.set(),this.container=a,this.h=Math.round(c),this.w=Math.round(b),this.dx=d,this.dy=e,this.colors=h,this.alpha=k,this.bwidth=n,this.bcolor=l,this.balpha=t,this.dashLength=I,this.topRadius=F,this.pattern=D,this.rotate=E,this.bcn=y,E?0>b&&0===u&&(u=180):0>c&&270==u&&(u=90),this.gradientRotation=u,0===d&&0===e&&(this.cornerRadius=g),this.draw()},draw:function(){var a=this.set;a.clear();var b=this.container,c=b.chart,d=this.w,f=this.h,h=this.dx,k=this.dy,n=this.colors,l=this.alpha,t=this.bwidth,u=this.bcolor,g=this.balpha,E=this.gradientRotation,I=this.cornerRadius,D=this.dashLength,F=this.pattern,y=this.topRadius,z=this.bcn,G=n,C=n;"object"==typeof n&&(G=n[0],C=n[n.length-1]);var v,H,M,m,x,A,q,p,B,K=l;F&&(l=0);var r,w,J,L,N=this.rotate;if(0<Math.abs(h)||0<Math.abs(k))if(isNaN(y))q=C,C=e.adjustLuminosity(G,-.2),C=e.adjustLuminosity(G,-.2),v=e.polygon(b,[0,h,d+h,d,0],[0,k,k,0,0],C,l,1,u,0,E),g>0&&(B=e.line(b,[0,h,d+h],[0,k,k],u,g,t,D)),H=e.polygon(b,[0,0,d,d,0],[0,f,f,0,0],C,l,1,u,0,E),H.translate(h,k),g>0&&(M=e.line(b,[h,h],[k,k+f],u,g,t,D)),m=e.polygon(b,[0,0,h,h,0],[0,f,f+k,k,0],C,l,1,u,0,E),x=e.polygon(b,[d,d,d+h,d+h,d],[0,f,f+k,k,0],C,l,1,u,0,E),g>0&&(A=e.line(b,[d,d+h,d+h,d],[0,k,f+k,f],u,g,t,D)),C=e.adjustLuminosity(q,.2),q=e.polygon(b,[0,h,d+h,d,0],[f,f+k,f+k,f,f],C,l,1,u,0,E),g>0&&(p=e.line(b,[0,h,d+h],[f,f+k,f+k],u,g,t,D));else{var O,P,Q;N?(O=f/2,C=h/2,Q=f/2,P=d+h/2,w=Math.abs(f/2),r=Math.abs(h/2)):(C=d/2,O=k/2,P=d/2,Q=f+k/2+1,r=Math.abs(d/2),w=Math.abs(k/2)),J=r*y,L=w*y,r>.1&&r>.1&&(v=e.circle(b,r,G,l,t,u,g,!1,w),v.translate(C,O)),J>.1&&J>.1&&(q=e.circle(b,J,e.adjustLuminosity(G,.5),l,t,u,g,!1,L),q.translate(P,Q))}for(l=K,1>Math.abs(f)&&(f=0),1>Math.abs(d)&&(d=0),!isNaN(y)&&(0<Math.abs(h)||0<Math.abs(k))?(n=[G],n={fill:n,stroke:u,"stroke-width":t,"stroke-opacity":g,"fill-opacity":l},N?(l="M0,0 L"+d+","+(f/2-f/2*y),t=" B",d>0&&(t=" A"),e.VML?(l+=t+Math.round(d-J)+","+Math.round(f/2-L)+","+Math.round(d+J)+","+Math.round(f/2+L)+","+d+",0,"+d+","+f,l=l+(" L0,"+f)+(t+Math.round(-r)+","+Math.round(f/2-w)+","+Math.round(r)+","+Math.round(f/2+w)+",0,"+f+",0,0")):(l+="A"+J+","+L+",0,0,0,"+d+","+(f-f/2*(1-y))+"L0,"+f,l+="A"+r+","+w+",0,0,1,0,0"),r=90):(t=d/2-d/2*y,l="M0,0 L"+t+","+f,e.VML?(l="M0,0 L"+t+","+f,t=" B",0>f&&(t=" A"),l+=t+Math.round(d/2-J)+","+Math.round(f-L)+","+Math.round(d/2+J)+","+Math.round(f+L)+",0,"+f+","+d+","+f,l+=" L"+d+",0",l+=t+Math.round(d/2+r)+","+Math.round(w)+","+Math.round(d/2-r)+","+Math.round(-w)+","+d+",0,0,0"):(l+="A"+J+","+L+",0,0,0,"+(d-d/2*(1-y))+","+f+"L"+d+",0",l+="A"+r+","+w+",0,0,1,0,0"),r=180),b=b.path(l).attr(n),b.gradient("linearGradient",[G,e.adjustLuminosity(G,-.3),e.adjustLuminosity(G,-.3),G],r),N?b.translate(h/2,0):b.translate(0,k/2)):b=0===f?e.line(b,[0,d],[0,0],u,g,t,D):0===d?e.line(b,[0,0],[0,f],u,g,t,D):I>0?e.rect(b,d,f,n,l,t,u,g,I,E,D):e.polygon(b,[0,0,d,d,0],[0,f,f,0,0],n,l,t,u,g,E,!1,D),d=isNaN(y)?0>f?[v,B,H,M,m,x,A,q,p,b]:[q,p,H,M,m,x,v,B,A,b]:N?d>0?[v,b,q]:[q,b,v]:0>f?[v,b,q]:[q,b,v],e.setCN(c,b,z+"front"),e.setCN(c,H,z+"back"),e.setCN(c,q,z+"top"),e.setCN(c,v,z+"bottom"),e.setCN(c,m,z+"left"),e.setCN(c,x,z+"right"),v=0;v<d.length;v++)(H=d[v])&&(a.push(H),e.setCN(c,H,z+"element"));F&&b.pattern(F,NaN,c.path)},width:function(a){isNaN(a)&&(a=0),this.w=Math.round(a),this.draw()},height:function(a){isNaN(a)&&(a=0),this.h=Math.round(a),this.draw()},animateHeight:function(a,b){var c=this;c.animationFinished=!1,c.easing=b,c.totalFrames=a*e.updateRate,c.rh=c.h,c.frame=0,c.height(1),setTimeout(function(){c.updateHeight.call(c)},1e3/e.updateRate)},updateHeight:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b?(b=a.easing(0,a.frame,1,a.rh-1,b),a.height(b),window.requestAnimationFrame?window.requestAnimationFrame(function(){a.updateHeight.call(a)}):setTimeout(function(){a.updateHeight.call(a)},1e3/e.updateRate)):(a.height(a.rh),a.animationFinished=!0)},animateWidth:function(a,b){var c=this;c.animationFinished=!1,c.easing=b,c.totalFrames=a*e.updateRate,c.rw=c.w,c.frame=0,c.width(1),setTimeout(function(){c.updateWidth.call(c)},1e3/e.updateRate)},updateWidth:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b?(b=a.easing(0,a.frame,1,a.rw-1,b),a.width(b),window.requestAnimationFrame?window.requestAnimationFrame(function(){a.updateWidth.call(a)}):setTimeout(function(){a.updateWidth.call(a)},1e3/e.updateRate)):(a.width(a.rw),a.animationFinished=!0)}})}()},{}],59:[function(require,module,exports){!function(){var c=window.AmCharts;c.AmGanttChart=c.Class({inherits:c.AmSerialChart,construct:function(a){this.type="gantt",c.AmGanttChart.base.construct.call(this,a),this.cname="AmGanttChart",this.period="ss"},initChart:function(){this.dataChanged&&this.processGanttData(),c.AmGanttChart.base.initChart.call(this)},parseData:function(){c.AmSerialChart.base.parseData.call(this),this.parseSerialData(this.ganttDataProvider)},processGanttData:function(){var a;this.graphs=[];var u=this.dataProvider;this.ganttDataProvider=[];var y=this.categoryField,B=this.startField,C=this.endField,D=this.durationField,E=this.startDateField,F=this.endDateField,v=this.colorField,f=this.period,p=c.getDate(this.startDate,this.dataDateFormat,"fff");this.categoryAxis.gridPosition="start",a=this.valueAxis,this.valueAxes=[a];var z;"date"==a.type&&(z=!0),a.minimumDate&&(a.minimumDate=c.getDate(a.minimumDate,t,f)),a.maximumDate&&(a.maximumDate=c.getDate(a.maximumDate,t,f)),isNaN(a.minimum)||(a.minimumDate=c.changeDate(new Date(p),f,a.minimum,!0,!0)),isNaN(a.maximum)||(a.maximumDate=c.changeDate(new Date(p),f,a.maximum,!0,!0));var t=this.dataDateFormat;if(u)for(a=0;a<u.length;a++){var e=u[a],l={};l[y]=e[y];var m,w=e[this.segmentsField];if(this.ganttDataProvider.push(l),e=e[v],this.colors[a]||(this.colors[a]=c.randomColor()),w)for(var g=0;g<w.length;g++){var d=w[g],b=d[B],h=d[C],n=d[D];isNaN(b)&&(b=m),isNaN(n)||(h=b+n);var n="start_"+a+"_"+g,x="end_"+a+"_"+g;l[n]=b,l[x]=h;var k,r,q="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern gap className".split(" ");for(r in q)k=q[r]+"Field",(m=this.graph[k])&&void 0!==d[m]&&(l[m+"_"+a+"_"+g]=d[m]);if(m=h,z){k=c.getDate(d[E],t,f);var A=c.getDate(d[F],t,f);p&&(isNaN(b)||(k=c.changeDate(new Date(p),f,b,!0,!0)),isNaN(h)||(A=c.changeDate(new Date(p),f,h,!0,!0))),l[n]=k.getTime(),l[x]=A.getTime()}h={},c.copyProperties(d,h),b={},c.copyProperties(this.graph,b,!0);for(r in q)k=q[r]+"Field",this.graph[k]&&(b[k]=q[r]+"_"+a+"_"+g);b.customData=h,b.segmentData=d,b.labelFunction=this.graph.labelFunction,b.balloonFunction=this.graph.balloonFunction,b.customBullet=this.graph.customBullet,b.type="column",b.openField=n,b.valueField=x,b.clustered=!1,d[v]&&(e=d[v]),b.columnWidth=d[this.columnWidthField],void 0===e&&(e=this.colors[a]),(d=this.brightnessStep)&&(e=c.adjustLuminosity(e,g*d/100)),void 0===this.graph.lineColor&&(b.lineColor=e),void 0===this.graph.fillColors&&(b.fillColors=e),this.graphs.push(b)}}}})}()},{}],60:[function(require,module,exports){!function(){var c=window.AmCharts;c.GaugeAxis=c.Class({construct:function(a){this.cname="GaugeAxis",this.radius="95%",this.createEvents("rollOverBand","rollOutBand","clickBand"),this.labelsEnabled=!0,this.startAngle=-120,this.endAngle=120,this.startValue=0,this.endValue=200,this.gridCount=5,this.tickLength=10,this.minorTickLength=5,this.tickColor="#555555",this.labelFrequency=this.tickThickness=this.tickAlpha=1,this.inside=!0,this.labelOffset=10,this.showLastLabel=this.showFirstLabel=!0,this.axisThickness=1,this.axisColor="#000000",this.axisAlpha=1,this.gridInside=!0,this.topTextYOffset=0,this.topTextBold=!0,this.bottomTextYOffset=0,this.bottomTextBold=!0,this.centerY=this.centerX="0%",this.bandOutlineAlpha=this.bandOutlineThickness=0,this.bandOutlineColor="#000000",this.bandAlpha=1,this.bcn="gauge-axis",c.applyTheme(this,a,"GaugeAxis")},value2angle:function(a){return(a-this.startValue)/(this.endValue-this.startValue)*(this.endAngle-this.startAngle)+this.startAngle},setTopText:function(a){if(void 0!==a){this.topText=a;var b=this.chart;if(this.axisCreated){this.topTF&&this.topTF.remove();var e=this.topTextFontSize;e||(e=b.fontSize);var d=this.topTextColor;d||(d=b.color),a=c.text(b.container,a,d,b.fontFamily,e,void 0,this.topTextBold),c.setCN(b,a,"axis-top-label"),a.translate(this.centerXReal,this.centerYReal-this.radiusReal/2+this.topTextYOffset),this.set.push(a),this.topTF=a}}},setBottomText:function(a){if(void 0!==a){this.bottomText=a;var b=this.chart;if(this.axisCreated){this.bottomTF&&this.bottomTF.remove();var e=this.bottomTextFontSize;e||(e=b.fontSize);var d=this.bottomTextColor;d||(d=b.color),a=c.text(b.container,a,d,b.fontFamily,e,void 0,this.bottomTextBold),c.setCN(b,a,"axis-bottom-label"),a.translate(this.centerXReal,this.centerYReal+this.radiusReal/2+this.bottomTextYOffset),this.bottomTF=a,this.set.push(a)}}},draw:function(){var a=this.chart,b=a.container.set();this.set=b,c.setCN(a,b,this.bcn),c.setCN(a,b,this.bcn+"-"+this.id),a.graphsSet.push(b);var e=this.startValue,d=this.endValue,g=this.valueInterval;isNaN(g)&&(g=(d-e)/this.gridCount);var m=this.minorTickInterval;isNaN(m)&&(m=g/5);var u=this.startAngle,k=this.endAngle,h=this.tickLength,d=(d-e)/g+1,v=(k-u)/(d-1),f=v/g;this.singleValueAngle=f;var p=a.container,G=this.tickColor,E=this.tickAlpha,M=this.tickThickness,m=g/m,N=v/m,H=this.minorTickLength,I=this.labelFrequency,y=this.radiusReal;this.inside||(y-=15);var C=a.centerX+c.toCoordinate(this.centerX,a.realWidth),D=a.centerY+c.toCoordinate(this.centerY,a.realHeight);this.centerXReal=C,this.centerYReal=D;var r,F,z={fill:this.axisColor,"fill-opacity":this.axisAlpha,"stroke-width":0,"stroke-opacity":0};this.gridInside?F=r=y:(r=y-h,F=r+H);var t=this.bands;if(t)for(var q=0;q<t.length;q++){var n=t[q];if(n){var x=n.startValue,B=n.endValue,l=c.toCoordinate(n.radius,y);isNaN(l)&&(l=F);var w=c.toCoordinate(n.innerRadius,y);isNaN(w)&&(w=l-H);var J=u+f*(x-this.startValue),B=f*(B-x),A=n.outlineColor;void 0==A&&(A=this.bandOutlineColor);var K=n.outlineThickness;isNaN(K)&&(K=this.bandOutlineThickness);var L=n.outlineAlpha;isNaN(L)&&(L=this.bandOutlineAlpha),x=n.alpha,isNaN(x)&&(x=this.bandAlpha),A={fill:n.color,stroke:A,"stroke-width":K,"stroke-opacity":L},n.url&&(A.cursor="pointer"),l=c.wedge(p,C,D,J,B,l,l,w,0,A),c.setCN(a,l.wedge,"axis-band"),void 0!==n.id&&c.setCN(a,l.wedge,"axis-band-"+n.id),l.setAttr("opacity",x),this.set.push(l),this.addEventListeners(l,n)}}for(f=this.axisThickness/2,k=c.wedge(p,C,D,u,k-u,r+f,r+f,r-f,0,z),c.setCN(a,k.wedge,"axis-line"),b.push(k),k=c.doNothing,c.isModern||(k=Math.round),g=c.roundTo(g,14),f=c.getDecimals(g),z=0;d>z;z++)if(t=e+z*g,r=u+z*v,q=k(C+y*Math.sin(r/180*Math.PI)),n=k(D-y*Math.cos(r/180*Math.PI)),l=k(C+(y-h)*Math.sin(r/180*Math.PI)),w=k(D-(y-h)*Math.cos(r/180*Math.PI)),q=c.line(p,[q,l],[n,w],G,E,M,0,!1,!1,!0),c.setCN(a,q,"axis-tick"),b.push(q),q=-1,l=this.labelOffset,this.inside||(l=-l-h,q=1),n=C+(y-h-l)*Math.sin(r/180*Math.PI),l=D-(y-h-l)*Math.cos(r/180*Math.PI),x=this.fontSize,isNaN(x)&&(x=a.fontSize),w=Math.sin((r-90)/180*Math.PI),J=Math.cos((r-90)/180*Math.PI),I>0&&this.labelsEnabled&&z/I==Math.round(z/I)&&(this.showLastLabel||z!=d-1)&&(this.showFirstLabel||0!==z)&&(B=this.usePrefixes?c.addPrefix(t,a.prefixesOfBigNumbers,a.prefixesOfSmallNumbers,a.nf,!0):c.formatNumber(t,a.nf,f),(A=this.unit)&&(B="left"==this.unitPosition?A+B:B+A),(A=this.labelFunction)&&(B=A(t)),t=c.text(p,B,a.color,a.fontFamily,x),c.setCN(a,t,"axis-label"),x=t.getBBox(),t.translate(n+q*x.width/2*J,l+q*x.height/2*w),b.push(t)),d-1>z)for(t=1;m>t;t++)w=r+N*t,q=k(C+F*Math.sin(w/180*Math.PI)),n=k(D-F*Math.cos(w/180*Math.PI)),l=k(C+(F-H)*Math.sin(w/180*Math.PI)),w=k(D-(F-H)*Math.cos(w/180*Math.PI)),q=c.line(p,[q,l],[n,w],G,E,M,0,!1,!1,!0),c.setCN(a,q,"axis-tick-minor"),b.push(q);this.axisCreated=!0,this.setTopText(this.topText),this.setBottomText(this.bottomText),a=a.graphsSet.getBBox(),this.width=a.width,this.height=a.height},addListeners:function(a,b){var c=this;b.mouseover(function(b){c.fireEvent("rollOverBand",a,b)}).mouseout(function(b){c.fireEvent("rollOutBand",a,b)}).touchend(function(b){c.fireEvent("clickBand",a,b)}).touchstart(function(b){c.fireEvent("rollOverBand",a,b)}).click(function(b){c.fireEvent("clickBand",a,b)})},fireEvent:function(a,b,c){this.fire({type:a,dataItem:b,chart:this,event:c})},addEventListeners:function(a,b){var e=this,d=e.chart;a.mouseover(function(a){d.showBalloon(b.balloonText,b.color,!0),e.fireEvent("rollOverBand",b,a)}).mouseout(function(a){d.hideBalloon(),e.fireEvent("rollOutBand",b,a)}).click(function(a){e.fireEvent("clickBand",b,a),c.getURL(b.url,d.urlTarget)}).touchend(function(a){e.fireEvent("clickBand",b,a),c.getURL(b.url,d.urlTarget)})}})}(),function(){var c=window.AmCharts;c.GaugeArrow=c.Class({construct:function(a){this.cname="GaugeArrow",this.color="#000000",this.nailAlpha=this.alpha=1,this.startWidth=this.nailRadius=8,this.endWidth=0,this.borderAlpha=1,this.radius="90%",this.nailBorderAlpha=this.innerRadius=0,this.nailBorderThickness=1,this.frame=0,c.applyTheme(this,a,"GaugeArrow")},setValue:function(a){var b=this.chart;b&&b.setValue?b.setValue(this,a):this.previousValue=this.value=a}}),c.GaugeBand=c.Class({construct:function(){this.cname="GaugeBand"}})}(),function(){var c=window.AmCharts;c.AmAngularGauge=c.Class({inherits:c.AmChart,construct:function(a){this.cname="AmAngularGauge",c.AmAngularGauge.base.construct.call(this,a),this.theme=a,this.type="gauge",this.minRadius=this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=10,this.faceColor="#FAFAFA",this.faceAlpha=0,this.faceBorderWidth=1,this.faceBorderColor="#555555",this.faceBorderAlpha=0,this.arrows=[],this.axes=[],this.startDuration=1,this.startEffect="easeOutSine",this.adjustSize=!0,this.extraHeight=this.extraWidth=0,c.applyTheme(this,a,this.cname)},addAxis:function(a){this.axes.push(a)},formatString:function(a,b){return a=c.formatValue(a,b,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers)},initChart:function(){c.AmAngularGauge.base.initChart.call(this);var a;0===this.axes.length&&(a=new c.GaugeAxis(this.theme),this.addAxis(a));var b;for(b=0;b<this.axes.length;b++)a=this.axes[b],a=c.processObject(a,c.GaugeAxis,this.theme),a.id||(a.id="axisAuto"+b+"_"+(new Date).getTime()),a.chart=this,this.axes[b]=a;var e=this.arrows;for(b=0;b<e.length;b++){a=e[b],a=c.processObject(a,c.GaugeArrow,this.theme),a.id||(a.id="arrowAuto"+b+"_"+(new Date).getTime()),a.chart=this,e[b]=a;var d=a.axis;c.isString(d)&&(a.axis=c.getObjById(this.axes,d)),a.axis||(a.axis=this.axes[0]),isNaN(a.value)&&a.setValue(a.axis.startValue),isNaN(a.previousValue)&&(a.previousValue=a.axis.startValue)}this.setLegendData(e),this.drawChart(),this.totalFrames=this.startDuration*c.updateRate},drawChart:function(){c.AmAngularGauge.base.drawChart.call(this);var a=this.container,b=this.updateWidth();this.realWidth=b;var e=this.updateHeight();this.realHeight=e;var d=c.toCoordinate,g=d(this.marginLeft,b),m=d(this.marginRight,b),u=d(this.marginTop,e)+this.getTitleHeight(),k=d(this.marginBottom,e),h=d(this.radius,b,e),d=b-g-m,v=e-u-k+this.extraHeight;h||(h=Math.min(d,v)/2),h<this.minRadius&&(h=this.minRadius),this.radiusReal=h,this.centerX=(b-g-m)/2+g,this.centerY=(e-u-k)/2+u+this.extraHeight/2,isNaN(this.gaugeX)||(this.centerX=this.gaugeX),isNaN(this.gaugeY)||(this.centerY=this.gaugeY);var f,b=this.faceAlpha,e=this.faceBorderAlpha;for((b>0||e>0)&&(f=c.circle(a,h,this.faceColor,b,this.faceBorderWidth,this.faceBorderColor,e,!1),f.translate(this.centerX,this.centerY),f.toBack(),(a=this.facePattern)&&f.pattern(a,NaN,this.path)),b=h=a=0;b<this.axes.length;b++)e=this.axes[b],g=e.radius,e.radiusReal=c.toCoordinate(g,this.radiusReal),e.draw(),m=1,-1!==String(g).indexOf("%")&&(m=1+(100-Number(g.substr(0,g.length-1)))/100),e.width*m>a&&(a=e.width*m),e.height*m>h&&(h=e.height*m);for((b=this.legend)&&b.invalidateSize(),this.adjustSize&&!this.sizeAdjusted&&(f&&(f=f.getBBox(),f.width>a&&(a=f.width),f.height>h&&(h=f.height)),f=0,(v>h||d>a)&&(f=Math.min(v-h,d-a)),f>0&&(this.extraHeight=v-h,this.sizeAdjusted=!0,this.validateNow())),d=this.arrows.length,b=0;d>b;b++)v=this.arrows[b],v.drawnAngle=NaN;this.dispDUpd()},validateSize:function(){this.extraHeight=this.extraWidth=0,this.chartCreated=this.sizeAdjusted=!1,c.AmAngularGauge.base.validateSize.call(this)},addArrow:function(a){this.arrows.push(a)},removeArrow:function(a){c.removeFromArray(this.arrows,a),this.validateNow()},removeAxis:function(a){c.removeFromArray(this.axes,a),this.validateNow()},drawArrow:function(a,b){a.set&&a.set.remove();var e=this.container;if(a.set=e.set(),c.setCN(this,a.set,"gauge-arrow"),c.setCN(this,a.set,"gauge-arrow-"+a.id),!a.hidden){var d=a.axis,g=d.radiusReal,m=d.centerXReal,u=d.centerYReal,k=a.startWidth,h=a.endWidth,v=c.toCoordinate(a.innerRadius,d.radiusReal),f=c.toCoordinate(a.radius,d.radiusReal);d.inside||(f-=15);var p=a.nailColor;p||(p=a.color);var G=a.nailColor;G||(G=a.color),0<a.nailRadius&&(p=c.circle(e,a.nailRadius,p,a.nailAlpha,a.nailBorderThickness,p,a.nailBorderAlpha),c.setCN(this,p,"gauge-arrow-nail"),a.set.push(p),p.translate(m,u)),isNaN(f)&&(f=g-d.tickLength);var d=Math.sin(b/180*Math.PI),g=Math.cos(b/180*Math.PI),p=Math.sin((b+90)/180*Math.PI),E=Math.cos((b+90)/180*Math.PI),e=c.polygon(e,[m-k/2*p+v*d,m+f*d-h/2*p,m+f*d+h/2*p,m+k/2*p+v*d],[u+k/2*E-v*g,u-f*g+h/2*E,u-f*g-h/2*E,u-k/2*E-v*g],a.color,a.alpha,1,G,a.borderAlpha,void 0,!0);c.setCN(this,e,"gauge-arrow"),a.set.push(e),this.graphsSet.push(a.set)}},setValue:function(a,b){a.axis&&a.axis.value2angle&&(a.frame=0,a.previousValue=a.value),a.value=b;var c=this.legend;c&&c.updateValues()},handleLegendEvent:function(a){var b=a.type;if(a=a.dataItem,!this.legend.data&&a)switch(b){case"hideItem":this.hideArrow(a);break;case"showItem":this.showArrow(a)}},hideArrow:function(a){a.set.hide(),a.hidden=!0},showArrow:function(a){a.set.show(),a.hidden=!1},updateAnimations:function(){c.AmAngularGauge.base.updateAnimations.call(this);for(var b,a=this.arrows.length,e=0;a>e;e++)if(b=this.arrows[e],b.axis&&b.axis.value2angle){var d;b.frame>=this.totalFrames?d=b.value:(b.frame++,b.clockWiseOnly&&b.value<b.previousValue&&(d=b.axis,b.previousValue-=d.endValue-d.startValue),d=c.getEffect(this.startEffect),d=c[d](0,b.frame,b.previousValue,b.value-b.previousValue,this.totalFrames),isNaN(d)&&(d=b.value)),d=b.axis.value2angle(d),b.drawnAngle!=d&&(this.drawArrow(b,d),b.drawnAngle=d)}}})}()},{}],61:[function(require,module,exports){!function(){var k=window.AmCharts;k.AmSlicedChart=k.Class({inherits:k.AmChart,construct:function(a){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice"),k.AmSlicedChart.base.construct.call(this,a),this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" "),this.alpha=1,this.groupPercent=0,this.groupedTitle="Other",this.groupedPulled=!1,this.groupedAlpha=1,this.marginLeft=0,this.marginBottom=this.marginTop=10,this.marginRight=0,this.hoverAlpha=1,this.outlineColor="#FFFFFF",this.outlineAlpha=0,this.outlineThickness=1,this.startAlpha=0,this.startDuration=1,this.startEffect="bounce",this.sequencedAnimation=!0,this.pullOutDuration=1,this.pullOutEffect="bounce",this.pullOnHover=this.pullOutOnlyOne=!1,this.labelsEnabled=!0,this.labelTickColor="#000000",this.labelTickAlpha=.2,this.hideLabelsPercent=0,this.urlTarget="_self",this.autoMarginOffset=10,this.gradientRatio=[],this.maxLabelWidth=200,k.applyTheme(this,a,"AmSlicedChart")},initChart:function(){k.AmSlicedChart.base.initChart.call(this),this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData)),this.drawChart()},handleLegendEvent:function(a){var b=a.type,c=a.dataItem,d=this.legend;if(!d.data&&c){var g=c.hidden;switch(a=a.event,b){case"clickMarker":g||d.switchable||this.clickSlice(c,a);break;case"clickLabel":g||this.clickSlice(c,a,!1);break;case"rollOverItem":g||this.rollOverSlice(c,!1,a);break;case"rollOutItem":g||this.rollOutSlice(c,a);break;case"hideItem":this.hideSlice(c,a);break;case"showItem":this.showSlice(c,a)}}},invalidateVisibility:function(){this.recalculatePercents(),this.initChart();var a=this.legend;a&&a.invalidateSize()},addEventListeners:function(a,b){var c=this;a.mouseover(function(a){c.rollOverSlice(b,!0,a)}).mouseout(function(a){c.rollOutSlice(b,a)}).touchend(function(a){c.rollOverSlice(b,a)}).mouseup(function(a){c.clickSlice(b,a)}).contextmenu(function(a){c.handleRightClick(b,a)})},formatString:function(a,b,c){a=k.formatValue(a,b,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);var d=this.pf.precision;return isNaN(this.tempPrec)||(this.pf.precision=this.tempPrec),a=k.formatValue(a,b,["percents"],this.pf),a=k.massReplace(a,{"[[title]]":b.title,"[[description]]":b.description}),this.pf.precision=d,-1!=a.indexOf("[[")&&(a=k.formatDataContextValue(a,b.dataContext)),a=c?k.fixNewLines(a):k.fixBrakes(a),a=k.cleanFromEmpty(a)},startSlices:function(){var a;for(a=0;a<this.chartData.length;a++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(a):this.startSlice(this.chartData[a])},setStartTO:function(a){var b=this;a=setTimeout(function(){b.startSequenced.call(b)},b.startDuration/b.chartData.length*500*a),b.timeOuts.push(a)},pullSlices:function(a){var c,b=this.chartData;for(c=0;c<b.length;c++){var d=b[c];d.pulled&&this.pullSlice(d,1,a)}},startSequenced:function(){var b,a=this.chartData;for(b=0;b<a.length;b++)if(!a[b].started){this.startSlice(this.chartData[b]);break}},startSlice:function(a){a.started=!0;var b=a.wedge,c=this.startDuration,d=a.labelSet;b&&c>0&&(0<a.alpha&&b.show(),b.translate(a.startX,a.startY),this.animatable.push(b),b.animate({opacity:1,translate:"0,0"},c,this.startEffect)),d&&c>0&&(0<a.alpha&&d.show(),d.translate(a.startX,a.startY),d.animate({opacity:1,translate:"0,0"},c,this.startEffect))},showLabels:function(){var b,a=this.chartData;for(b=0;b<a.length;b++){var c=a[b];if(0<c.alpha){var d=c.label;d&&d.show(),(c=c.tick)&&c.show()}}},showSlice:function(a){isNaN(a)?a.hidden=!1:this.chartData[a].hidden=!1,this.invalidateVisibility()},hideSlice:function(a){isNaN(a)?a.hidden=!0:this.chartData[a].hidden=!0,this.hideBalloon(),this.invalidateVisibility()},rollOverSlice:function(a,b,c){if(isNaN(a)||(a=this.chartData[a]),clearTimeout(this.hoverInt),!a.hidden){this.pullOnHover&&this.pullSlice(a,1),1>this.hoverAlpha&&a.wedge&&a.wedge.attr({opacity:this.hoverAlpha});var d=a.balloonX,g=a.balloonY;a.pulled&&(d+=a.pullX,g+=a.pullY);var f=this.formatString(this.balloonText,a,!0),h=this.balloonFunction;h&&(f=h(a,f)),h=k.adjustLuminosity(a.color,-.15),f?this.showBalloon(f,h,b,d,g):this.hideBalloon(),0===a.value&&this.hideBalloon(),this.fire({type:"rollOverSlice",dataItem:a,chart:this,event:c})}},rollOutSlice:function(a,b){isNaN(a)||(a=this.chartData[a]),a.wedge&&a.wedge.attr({opacity:1}),this.hideBalloon(),this.fire({type:"rollOutSlice",dataItem:a,chart:this,event:b})},clickSlice:function(a,b,c){isNaN(a)||(a=this.chartData[a]),a.pulled?this.pullSlice(a,0):this.pullSlice(a,1),k.getURL(a.url,this.urlTarget),c||this.fire({type:"clickSlice",dataItem:a,chart:this,event:b})},handleRightClick:function(a,b){isNaN(a)||(a=this.chartData[a]),this.fire({type:"rightClickSlice",dataItem:a,chart:this,event:b})},drawTicks:function(){var b,a=this.chartData;for(b=0;b<a.length;b++){var c=a[b];if(c.label&&!c.skipTick){var d=c.ty,d=k.line(this.container,[c.tx0,c.tx,c.tx2],[c.ty0,d,d],this.labelTickColor,this.labelTickAlpha);k.setCN(this,d,this.type+"-tick"),k.setCN(this,d,c.className,!0),c.tick=d,c.wedge.push(d)}}},initialStart:function(){var a=this,b=a.startDuration,c=setTimeout(function(){a.showLabels.call(a)},1e3*b);a.timeOuts.push(c),a.chartCreated?a.pullSlices(!0):(a.startSlices(),b>0?(b=setTimeout(function(){a.pullSlices.call(a)},1200*b),a.timeOuts.push(b)):a.pullSlices(!0))},pullSlice:function(a,b,c){var d=this.pullOutDuration;!0===c&&(d=0),(c=a.wedge)&&(d>0?(c.animate({translate:b*a.pullX+","+b*a.pullY},d,this.pullOutEffect),a.labelSet&&a.labelSet.animate({translate:b*a.pullX+","+b*a.pullY},d,this.pullOutEffect)):(a.labelSet&&a.labelSet.translate(b*a.pullX,b*a.pullY),c.translate(b*a.pullX,b*a.pullY))),1==b?(a.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(a.index),a={type:"pullOutSlice",dataItem:a,chart:this}):(a.pulled=!1,a={type:"pullInSlice",dataItem:a,chart:this}),this.fire(a)},pullInAll:function(a){var c,b=this.chartData;for(c=0;c<this.chartData.length;c++)c!=a&&b[c].pulled&&this.pullSlice(b[c],0)},pullOutAll:function(){var b,a=this.chartData;for(b=0;b<a.length;b++)a[b].pulled||this.pullSlice(a[b],1)},parseData:function(){var a=[];this.chartData=a;var b=this.dataProvider;if(isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha),void 0!==b){var g,f,h,c=b.length,d=0;for(g=0;c>g;g++){f={};var e=b[g];f.dataContext=e,null!==e[this.valueField]&&(f.value=Number(e[this.valueField])),(h=e[this.titleField])||(h=""),f.title=h,f.pulled=k.toBoolean(e[this.pulledField],!1),(h=e[this.descriptionField])||(h=""),f.description=h,f.labelRadius=Number(e[this.labelRadiusField]),f.switchable=!0,f.className=e[this.classNameField],f.url=e[this.urlField],h=e[this.patternField],!h&&this.patterns&&(h=this.patterns[g]),f.pattern=h,f.visibleInLegend=k.toBoolean(e[this.visibleInLegendField],!0),h=e[this.alphaField],f.alpha=void 0!==h?Number(h):this.alpha,h=e[this.colorField],void 0!==h&&(f.color=h),f.labelColor=k.toColor(e[this.labelColorField]),d+=f.value,f.hidden=!1,a[g]=f}for(g=b=0;c>g;g++)f=a[g],f.percents=f.value/d*100,f.percents<this.groupPercent&&b++;for(b>1&&(this.groupValue=0,this.removeSmallSlices(),a.push({title:this.groupedTitle,value:this.groupValue,
percents:this.groupValue/d*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,className:this.groupedClassName,dataContext:{}})),c=this.baseColor,c||(c=this.pieBaseColor),d=this.brightnessStep,d||(d=this.pieBrightnessStep),g=0;g<a.length;g++)c?h=k.adjustLuminosity(c,g*d/100):(h=this.colors[g],void 0===h&&(h=k.randomColor())),void 0===a[g].color&&(a[g].color=h);this.recalculatePercents()}},recalculatePercents:function(){var c,d,a=this.chartData,b=0;for(c=0;c<a.length;c++)d=a[c],!d.hidden&&0<d.value&&(b+=d.value);for(c=0;c<a.length;c++)d=this.chartData[c],d.percents=!d.hidden&&0<d.value?100*d.value/b:0},removeSmallSlices:function(){var b,a=this.chartData;for(b=a.length-1;b>=0;b--)a[b].percents<this.groupPercent&&(this.groupValue+=a[b].value,a.splice(b,1))},animateAgain:function(){var a=this;a.startSlices();for(var b=0;b<a.chartData.length;b++){var c=a.chartData[b];c.started=!1;var d=c.wedge;d&&(d.setAttr("opacity",a.startAlpha),d.translate(c.startX,c.startY)),(d=c.labelSet)&&(d.setAttr("opacity",a.startAlpha),d.translate(c.startX,c.startY))}b=a.startDuration,b>0?(b=setTimeout(function(){a.pullSlices.call(a)},1200*b),a.timeOuts.push(b)):a.pullSlices()},measureMaxLabel:function(){var c,a=this.chartData,b=0;for(c=0;c<a.length;c++){var d=a[c],g=this.formatString(this.labelText,d),f=this.labelFunction;f&&(g=f(d,g)),d=k.text(this.container,g,this.color,this.fontFamily,this.fontSize),g=d.getBBox().width,g>b&&(b=g),d.remove()}return b}})}(),function(){var k=window.AmCharts;k.AmPieChart=k.Class({inherits:k.AmSlicedChart,construct:function(a){this.type="pie",k.AmPieChart.base.construct.call(this,a),this.cname="AmPieChart",this.pieBrightnessStep=30,this.minRadius=10,this.depth3D=0,this.startAngle=90,this.angle=this.innerRadius=0,this.startRadius="500%",this.pullOutRadius="20%",this.labelRadius=20,this.labelText="[[title]]: [[percents]]%",this.balloonText="[[title]]: [[percents]]% ([[value]])\n[[description]]",this.previousScale=1,this.adjustPrecision=!1,this.gradientType="radial",k.applyTheme(this,a,this.cname)},drawChart:function(){k.AmPieChart.base.drawChart.call(this);var a=this.chartData;if(k.ifArray(a)){if(0<this.realWidth&&0<this.realHeight){k.VML&&(this.startAlpha=1);var b=this.startDuration,c=this.container,d=this.updateWidth();this.realWidth=d;var g=this.updateHeight();this.realHeight=g;var A,B,l,f=k.toCoordinate,h=f(this.marginLeft,d),e=f(this.marginRight,d),z=f(this.marginTop,g)+this.getTitleHeight(),n=f(this.marginBottom,g),x=k.toNumber(this.labelRadius),p=this.measureMaxLabel();for(p>this.maxLabelWidth&&(p=this.maxLabelWidth),this.labelText&&this.labelsEnabled||(x=p=0),A=void 0===this.pieX?(d-h-e)/2+h:f(this.pieX,this.realWidth),B=void 0===this.pieY?(g-z-n)/2+z:f(this.pieY,g),l=f(this.radius,d,g),l||(d=x>=0?d-h-e-2*p:d-h-e,g=g-z-n,l=Math.min(d,g),d>g&&(l/=1-this.angle/90,l>d&&(l=d)),g=k.toCoordinate(this.pullOutRadius,l),l=(x>=0?l-1.8*(x+g):l-1.8*g)/2),l<this.minRadius&&(l=this.minRadius),g=f(this.pullOutRadius,l),z=k.toCoordinate(this.startRadius,l),f=f(this.innerRadius,l),f>=l&&(f=l-1),n=k.fitToBounds(this.startAngle,0,360),0<this.depth3D&&(n=n>=270?270:90),n-=90,n>360&&(n-=360),d=l-l*this.angle/90,h=p=0;h<a.length;h++)e=a[h],!0!==e.hidden&&(p+=k.roundTo(e.percents,this.pf.precision));p=k.roundTo(p,this.pf.precision),this.tempPrec=NaN,this.adjustPrecision&&100!=p&&(this.tempPrec=this.pf.precision+1);for(var D,h=0;h<a.length;h++)if(e=a[h],!0!==e.hidden&&(this.showZeroSlices||0!==e.percents)){var r=360*e.percents/100,p=Math.sin((n+r/2)/180*Math.PI),C=d/l*-Math.cos((n+r/2)/180*Math.PI),q=this.outlineColor;q||(q=e.color);var v=this.alpha;if(isNaN(e.alpha)||(v=e.alpha),q={fill:e.color,stroke:q,"stroke-width":this.outlineThickness,"stroke-opacity":this.outlineAlpha,"fill-opacity":v},e.url&&(q.cursor="pointer"),q=k.wedge(c,A,B,n,r,l,d,f,this.depth3D,q,this.gradientRatio,e.pattern,this.path,this.gradientType),k.setCN(this,q,"pie-item"),k.setCN(this,q.wedge,"pie-slice"),k.setCN(this,q,e.className,!0),this.addEventListeners(q,e),e.startAngle=n,a[h].wedge=q,b>0&&(this.chartCreated||q.setAttr("opacity",this.startAlpha)),e.ix=p,e.iy=C,e.wedge=q,e.index=h,e.label=null,v=c.set(),this.labelsEnabled&&this.labelText&&e.percents>=this.hideLabelsPercent){var m=n+r/2;0>m&&(m+=360),m>360&&(m-=360);var t=x;isNaN(e.labelRadius)||(t=e.labelRadius,0>t&&(e.skipTick=!0));var w,r=A+p*(l+t),E=B+C*(l+t),u=0;if(isNaN(D)&&m>350&&1<a.length-h&&(D=h-1+Math.floor((a.length-h)/2)),t>=0){var y;90>=m&&m>=0?(y=0,w="start",u=8):m>=90&&180>m?(y=1,w="start",u=8):m>=180&&270>m?(y=2,w="end",u=-8):m>=270&&354>=m?(y=3,w="end",u=-8):m>=354&&(h>D?(y=0,w="start",u=8):(y=3,w="end",u=-8)),e.labelQuarter=y}else w="middle";m=this.formatString(this.labelText,e),(t=this.labelFunction)&&(m=t(e,m)),t=e.labelColor,t||(t=this.color),""!==m&&(m=k.wrappedText(c,m,t,this.fontFamily,this.fontSize,w,!1,this.maxLabelWidth),k.setCN(this,m,"pie-label"),k.setCN(this,m,e.className,!0),m.translate(r+1.5*u,E),m.node.style.pointerEvents="none",e.ty=E,e.textX=r+1.5*u,v.push(m),this.axesSet.push(v),e.labelSet=v,e.label=m),e.tx=r,e.tx2=r+u,e.tx0=A+p*l,e.ty0=B+C*l}r=f+(l-f)/2,e.pulled&&(r+=this.pullOutRadiusReal),e.balloonX=p*r+A,e.balloonY=C*r+B,e.startX=Math.round(p*z),e.startY=Math.round(C*z),e.pullX=Math.round(p*g),e.pullY=Math.round(C*g),this.graphsSet.push(q),(0===e.alpha||b>0&&!this.chartCreated)&&(q.hide(),v&&v.hide()),n+=360*e.percents/100,n>360&&(n-=360)}x>0&&this.arrangeLabels(),this.pieXReal=A,this.pieYReal=B,this.radiusReal=l,this.innerRadiusReal=f,x>0&&this.drawTicks(),this.initialStart(),this.setDepths()}(a=this.legend)&&a.invalidateSize()}else this.cleanChart();this.dispDUpd()},setDepths:function(){var b,a=this.chartData;for(b=0;b<a.length;b++){var c=a[b],d=c.wedge,c=c.startAngle;c>=0&&180>c?d.toFront():c>=180&&d.toBack()}},arrangeLabels:function(){var c,d,a=this.chartData,b=a.length;for(d=b-1;d>=0;d--)c=a[d],0!==c.labelQuarter||c.hidden||this.checkOverlapping(d,c,0,!0,0);for(d=0;b>d;d++)c=a[d],1!=c.labelQuarter||c.hidden||this.checkOverlapping(d,c,1,!1,0);for(d=b-1;d>=0;d--)c=a[d],2!=c.labelQuarter||c.hidden||this.checkOverlapping(d,c,2,!0,0);for(d=0;b>d;d++)c=a[d],3!=c.labelQuarter||c.hidden||this.checkOverlapping(d,c,3,!1,0)},checkOverlapping:function(a,b,c,d,g){var f,h,e=this.chartData,k=e.length,n=b.label;if(n){if(!0===d)for(h=a+1;k>h;h++)e[h].labelQuarter==c&&(f=this.checkOverlappingReal(b,e[h],c))&&(h=k);else for(h=a-1;h>=0;h--)e[h].labelQuarter==c&&(f=this.checkOverlappingReal(b,e[h],c))&&(h=0);!0===f&&100>g&&isNaN(b.labelRadius)&&(f=b.ty+3*b.iy,b.ty=f,n.translate(b.textX,f),this.checkOverlapping(a,b,c,d,g+1))}},checkOverlappingReal:function(a,b,c){var d=!1,g=a.label,f=b.label;return a.labelQuarter!=c||a.hidden||b.hidden||!f||(g=g.getBBox(),c={},c.width=g.width,c.height=g.height,c.y=a.ty,c.x=a.tx,a=f.getBBox(),f={},f.width=a.width,f.height=a.height,f.y=b.ty,f.x=b.tx,k.hitTest(c,f)&&(d=!0)),d}})}()},{}],62:[function(require,module,exports){!function(){var d=window.AmCharts;d.AmRadarChart=d.Class({inherits:d.AmCoordinateChart,construct:function(a){this.type="radar",d.AmRadarChart.base.construct.call(this,a),this.cname="AmRadarChart",this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=0,this.radius="35%",d.applyTheme(this,a,this.cname)},initChart:function(){d.AmRadarChart.base.initChart.call(this),this.dataChanged?this.parseData():this.onDataUpdated()},onDataUpdated:function(){this.drawChart()},updateGraphs:function(){var b,a=this.graphs;for(b=0;b<a.length;b++){var c=a[b];c.index=b,c.width=this.realRadius,c.height=this.realRadius,c.x=this.marginLeftReal,c.y=this.marginTopReal,c.data=this.chartData}},parseData:function(){d.AmRadarChart.base.parseData.call(this),this.parseSerialData(this.dataProvider)},updateValueAxes:function(){var b,a=this.valueAxes;for(b=0;b<a.length;b++){var c=a[b];c.axisRenderer=d.RadAxis,c.guideFillRenderer=d.RadarFill,c.axisItemRenderer=d.RadItem,c.autoGridCount=!1,c.rMultiplier=1,c.x=this.marginLeftReal,c.y=this.marginTopReal,c.width=this.realRadius,c.height=this.realRadius,c.marginsChanged=!0,c.titleDY=c.y}},drawChart:function(){d.AmRadarChart.base.drawChart.call(this);var a=this.updateWidth(),b=this.updateHeight(),c=this.marginTop+this.getTitleHeight(),f=this.marginLeft,m=this.marginBottom,n=this.marginRight,e=b-c-m;if(this.marginLeftReal=f+(a-f-n)/2,this.marginTopReal=c+e/2,this.realRadius=d.toCoordinate(this.radius,Math.min(a-f-n,b-c-m),e),this.updateValueAxes(),this.updateGraphs(),a=this.chartData,d.ifArray(a)){if(0<this.realWidth&&0<this.realHeight){for(a=a.length-1,c=this.valueAxes,b=0;b<c.length;b++)c[b].zoom(0,a);for(c=this.graphs,b=0;b<c.length;b++)c[b].zoom(0,a);(a=this.legend)&&a.invalidateSize()}}else this.cleanChart();this.dispDUpd(),this.gridSet.toBack(),this.axesSet.toBack(),this.set.toBack()},formatString:function(a,b,c){var f=b.graph;return-1!=a.indexOf("[[category]]")&&(a=a.replace(/\[\[category\]\]/g,String(b.serialDataItem.category))),f=f.numberFormatter,f||(f=this.nf),a=d.formatValue(a,b.values,["value"],f,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),-1!=a.indexOf("[[")&&(a=d.formatDataContextValue(a,b.dataContext)),a=d.AmRadarChart.base.formatString.call(this,a,b,c)},cleanChart:function(){d.callMethod("destroy",[this.valueAxes,this.graphs])}})}(),function(){var d=window.AmCharts;d.RadAxis=d.Class({construct:function(a){var b=a.chart,c=a.axisThickness,f=a.axisColor,m=a.axisAlpha;this.set=b.container.set(),this.set.translate(a.x,a.y),b.axesSet.push(this.set);var n=a.axisTitleOffset,e=a.radarCategoriesEnabled,r=a.chart.fontFamily,h=a.fontSize;void 0===h&&(h=a.chart.fontSize);var k=a.color;if(void 0===k&&(k=a.chart.color),b){this.axisWidth=a.height;var w,p=b.chartData,l=p.length,z=this.axisWidth;for("middle"==a.pointPosition&&"circles"!=a.gridType&&(a.rMultiplier=Math.cos(180/l*Math.PI/180),z*=a.rMultiplier),w=0;l>w;w++){var q=180-360/l*w,g=q;"middle"==a.pointPosition&&(g-=180/l);var t=this.axisWidth*Math.sin(q/180*Math.PI),q=this.axisWidth*Math.cos(q/180*Math.PI);if(m>0&&(t=d.line(b.container,[0,t],[0,q],f,m,c),this.set.push(t),d.setCN(b,t,a.bcn+"line")),e){var x="start",t=(z+n)*Math.sin(g/180*Math.PI),q=(z+n)*Math.cos(g/180*Math.PI);(180==g||0===g)&&(x="middle",t-=5),0>g&&(x="end",t-=10),180==g&&(q-=5),0===g&&(q+=5),g=d.text(b.container,p[w].category,k,r,h,x),g.translate(t+5,q),this.set.push(g),d.setCN(b,g,a.bcn+"title")}}}}})}(),function(){var d=window.AmCharts;d.RadItem=d.Class({construct:function(a,b,c,f,m,n,e,r){f=a.chart,void 0===c&&(c="");var h=a.chart.fontFamily,k=a.fontSize;void 0===k&&(k=a.chart.fontSize);var p=a.color;void 0===p&&(p=a.chart.color);var l=a.chart.container;this.set=m=l.set();var w=a.axisColor,z=a.axisAlpha,q=a.tickLength,g=a.gridAlpha,t=a.gridThickness,x=a.gridColor,D=a.dashLength,E=a.fillColor,B=a.fillAlpha,F=a.labelsEnabled;n=a.counter;var u,A,G=a.inside,H=a.gridType,J=a.labelOffset;b-=a.height;var y;e?(F=!0,void 0!==e.id&&(A=f.classNamePrefix+"-guide-"+e.id),isNaN(e.tickLength)||(q=e.tickLength),void 0!=e.lineColor&&(x=e.lineColor),isNaN(e.lineAlpha)||(g=e.lineAlpha),isNaN(e.dashLength)||(D=e.dashLength),isNaN(e.lineThickness)||(t=e.lineThickness),!0===e.inside&&(G=!0),void 0!==e.boldLabel&&(r=e.boldLabel)):c||(g/=3,q/=2);var I="end",C=-1;G&&(I="start",C=1);var v;if(F&&(v=d.text(l,c,p,h,k,I,r),v.translate((q+3+J)*C,b),m.push(v),d.setCN(f,v,a.bcn+"label"),e&&d.setCN(f,v,"guide"),d.setCN(f,v,A,!0),this.label=v,y=d.line(l,[0,q*C],[b,b],w,z,t),m.push(y),d.setCN(f,y,a.bcn+"tick"),e&&d.setCN(f,y,"guide"),d.setCN(f,y,A,!0)),b=Math.abs(b),r=[],h=[],g>0){if("polygons"==H){for(u=a.data.length,k=0;u>k;k++)p=180-360/u*k,r.push(b*Math.sin(p/180*Math.PI)),h.push(b*Math.cos(p/180*Math.PI));r.push(r[0]),h.push(h[0]),g=d.line(l,r,h,x,g,t,D)}else g=d.circle(l,b,"#FFFFFF",0,t,x,g);m.push(g),d.setCN(f,g,a.bcn+"grid"),d.setCN(f,g,A,!0),e&&d.setCN(f,g,"guide")}if(1==n&&B>0&&!e&&""!==c){if(e=a.previousCoord,"polygons"==H){for(k=u;k>=0;k--)p=180-360/u*k,r.push(e*Math.sin(p/180*Math.PI)),h.push(e*Math.cos(p/180*Math.PI));u=d.polygon(l,r,h,E,B)}else u=d.wedge(l,0,0,0,360,b,b,e,0,{fill:E,"fill-opacity":B,stroke:"#000","stroke-opacity":0,"stroke-width":1});m.push(u),d.setCN(f,u,a.bcn+"fill"),d.setCN(f,u,A,!0)}!1===a.visible&&(y&&y.hide(),v&&v.hide()),""!==c&&(a.counter=0===n?1:0,a.previousCoord=b)},graphics:function(){return this.set},getLabel:function(){return this.label}})}(),function(){var d=window.AmCharts;d.RadarFill=d.Class({construct:function(a,b,c,f){b-=a.axisWidth,c-=a.axisWidth;var m=Math.min(b,c);c=Math.max(b,c),b=a.chart;var n=b.container,e=f.fillAlpha,r=f.fillColor;c=Math.abs(c);var m=Math.abs(m),h=Math.min(c,m);c=Math.max(c,m);var m=h,h=f.angle+90,k=f.toAngle+90;if(isNaN(h)&&(h=0),isNaN(k)&&(k=360),this.set=n.set(),void 0===r&&(r="#000000"),isNaN(e)&&(e=0),"polygons"==a.gridType){var k=[],p=[];a=a.data.length;var l;for(l=0;a>l;l++)h=180-360/a*l,k.push(c*Math.sin(h/180*Math.PI)),p.push(c*Math.cos(h/180*Math.PI));for(k.push(k[0]),p.push(p[0]),l=a;l>=0;l--)h=180-360/a*l,k.push(m*Math.sin(h/180*Math.PI)),p.push(m*Math.cos(h/180*Math.PI));n=d.polygon(n,k,p,r,e)}else n=d.wedge(n,0,0,h,k-h,c,c,m,0,{fill:r,"fill-opacity":e,stroke:"#000","stroke-opacity":0,"stroke-width":1});d.setCN(b,n,"guide-fill"),f.id&&d.setCN(b,n,"guide-fill-"+f.id),this.set.push(n),this.fill=n},graphics:function(){return this.set},getLabel:function(){}})}()},{}],63:[function(require,module,exports){!function(){var e=window.AmCharts;e.AmRectangularChart=e.Class({inherits:e.AmCoordinateChart,construct:function(a){e.AmRectangularChart.base.construct.call(this,a),this.theme=a,this.createEvents("zoomed","changed"),this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20,this.depth3D=this.angle=0,this.plotAreaFillColors="#FFFFFF",this.plotAreaFillAlphas=0,this.plotAreaBorderColor="#000000",this.plotAreaBorderAlpha=0,this.maxZoomFactor=20,this.zoomOutButtonImageSize=19,this.zoomOutButtonImage="lens",this.zoomOutText="Show all",this.zoomOutButtonColor="#e5e5e5",this.zoomOutButtonAlpha=0,this.zoomOutButtonRollOverAlpha=1,this.zoomOutButtonPadding=8,this.trendLines=[],this.autoMargins=!0,this.marginsUpdated=!1,this.autoMarginOffset=10,e.applyTheme(this,a,"AmRectangularChart")},initChart:function(){e.AmRectangularChart.base.initChart.call(this),this.updateDxy(),!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),this.drawGraphs=!1),this.processScrollbars(),this.updateMargins(),this.updatePlotArea(),this.updateScrollbars(),this.updateTrendLines(),this.updateChartCursor(),this.updateValueAxes(),this.scrollbarOnly||this.updateGraphs()},drawChart:function(){if(e.AmRectangularChart.base.drawChart.call(this),this.drawPlotArea(),e.ifArray(this.chartData)){var a=this.chartCursor;a&&a.draw()}},resetMargins:function(){var b,a={};if("xy"==this.type){var c=this.xAxes,d=this.yAxes;for(b=0;b<c.length;b++){var g=c[b];g.ignoreAxisWidth||(g.setOrientation(!0),g.fixAxisPosition(),a[g.position]=!0)}for(b=0;b<d.length;b++)c=d[b],c.ignoreAxisWidth||(c.setOrientation(!1),c.fixAxisPosition(),a[c.position]=!0)}else{for(d=this.valueAxes,b=0;b<d.length;b++)c=d[b],c.ignoreAxisWidth||(c.setOrientation(this.rotate),c.fixAxisPosition(),a[c.position]=!0);(b=this.categoryAxis)&&!b.ignoreAxisWidth&&(b.setOrientation(!this.rotate),b.fixAxisPosition(),b.fixAxisPosition(),a[b.position]=!0)}a.left&&(this.marginLeft=0),a.right&&(this.marginRight=0),a.top&&(this.marginTop=0),a.bottom&&(this.marginBottom=0),this.fixMargins=a},measureMargins:function(){var b,a=this.valueAxes,c=this.autoMarginOffset,d=this.fixMargins,g=this.realWidth,h=this.realHeight,f=c,e=c,l=g;b=h;var m;for(m=0;m<a.length;m++)a[m].handleSynchronization(),b=this.getAxisBounds(a[m],f,l,e,b),f=Math.round(b.l),l=Math.round(b.r),e=Math.round(b.t),b=Math.round(b.b);(a=this.categoryAxis)&&(b=this.getAxisBounds(a,f,l,e,b),f=Math.round(b.l),l=Math.round(b.r),e=Math.round(b.t),b=Math.round(b.b)),d.left&&c>f&&(this.marginLeft=Math.round(-f+c)),d.right&&l>=g-c&&(this.marginRight=Math.round(l-g+c)),d.top&&e<c+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-e+c+this.titleHeight)),d.bottom&&b>h-c&&(this.marginBottom=Math.round(this.marginBottom+b-h+c)),this.initChart()},getAxisBounds:function(a,b,c,d,g){if(!a.ignoreAxisWidth){var e=a.labelsSet,f=a.tickLength;if(a.inside&&(f=0),e)switch(e=a.getBBox(),a.position){case"top":a=e.y,d>a&&(d=a);break;case"bottom":a=e.y+e.height,a>g&&(g=a);break;case"right":a=e.x+e.width+f+3,a>c&&(c=a);break;case"left":a=e.x-f,b>a&&(b=a)}}return{l:b,t:d,r:c,b:g}},drawZoomOutButton:function(){var a=this;if(!a.zbSet){var b=a.container.set();a.zoomButtonSet.push(b);var c=a.color,d=a.fontSize,g=a.zoomOutButtonImageSize,h=a.zoomOutButtonImage.replace(/\.[a-z]*$/i,""),f=e.lang.zoomOutText||a.zoomOutText,k=a.zoomOutButtonColor,l=a.zoomOutButtonAlpha,m=a.zoomOutButtonFontSize,q=a.zoomOutButtonPadding;isNaN(m)||(d=m),(m=a.zoomOutButtonFontColor)&&(c=m);var n,m=a.zoomOutButton;m&&(m.fontSize&&(d=m.fontSize),m.color&&(c=m.color),m.backgroundColor&&(k=m.backgroundColor),isNaN(m.backgroundAlpha)||(a.zoomOutButtonRollOverAlpha=m.backgroundAlpha));var p=m=0;for(void 0!==a.pathToImages&&h&&(n=a.container.image(a.pathToImages+h+a.extension,0,0,g,g),e.setCN(a,n,"zoom-out-image"),b.push(n),n=n.getBBox(),m=n.width+5),void 0!==f&&(c=e.text(a.container,f,c,a.fontFamily,d,"start"),e.setCN(a,c,"zoom-out-label"),d=c.getBBox(),p=n?n.height/2-3:d.height/2,c.translate(m,p),b.push(c)),n=b.getBBox(),c=1,e.isModern||(c=0),k=e.rect(a.container,n.width+2*q+5,n.height+2*q-2,k,1,1,k,c),k.setAttr("opacity",l),k.translate(-q,-q),e.setCN(a,k,"zoom-out-bg"),b.push(k),k.toBack(),a.zbBG=k,n=k.getBBox(),b.translate(a.marginLeftReal+a.plotAreaWidth-n.width+q,a.marginTopReal+q),b.hide(),b.mouseover(function(){a.rollOverZB()}).mouseout(function(){a.rollOutZB()}).click(function(){a.clickZB()}).touchstart(function(){a.rollOverZB()}).touchend(function(){a.rollOutZB(),a.clickZB()}),l=0;l<b.length;l++)b[l].attr({cursor:"pointer"});a.zbSet=b}},rollOverZB:function(){this.rolledOverZB=!0,this.zbBG.setAttr("opacity",this.zoomOutButtonRollOverAlpha)},rollOutZB:function(){this.rolledOverZB=!1,this.zbBG.setAttr("opacity",this.zoomOutButtonAlpha)},clickZB:function(){this.rolledOverZB=!1,this.zoomOut()},zoomOut:function(){this.zoomOutValueAxes()},drawPlotArea:function(){var a=this.dx,b=this.dy,c=this.marginLeftReal,d=this.marginTopReal,g=this.plotAreaWidth-1,h=this.plotAreaHeight-1,f=this.plotAreaFillColors,k=this.plotAreaFillAlphas,l=this.plotAreaBorderColor,m=this.plotAreaBorderAlpha;"object"==typeof k&&(k=k[0]),f=e.polygon(this.container,[0,g,g,0,0],[0,0,h,h,0],f,k,1,l,m,this.plotAreaGradientAngle),e.setCN(this,f,"plot-area"),f.translate(c+a,d+b),this.set.push(f),0!==a&&0!==b&&(f=this.plotAreaFillColors,"object"==typeof f&&(f=f[0]),f=e.adjustLuminosity(f,-.15),g=e.polygon(this.container,[0,a,g+a,g,0],[0,b,b,0,0],f,k,1,l,m),e.setCN(this,g,"plot-area-bottom"),g.translate(c,d+h),this.set.push(g),a=e.polygon(this.container,[0,0,a,a,0],[0,h,h+b,b,0],f,k,1,l,m),e.setCN(this,a,"plot-area-left"),a.translate(c,d),this.set.push(a)),(c=this.bbset)&&this.scrollbarOnly&&c.remove()},updatePlotArea:function(){var a=this.updateWidth(),b=this.updateHeight(),c=this.container;this.realWidth=a,this.realWidth=b,c&&this.container.setSize(a,b);var c=this.marginLeftReal,d=this.marginTopReal,a=a-c-this.marginRightReal-this.dx,b=b-d-this.marginBottomReal;1>a&&(a=1),1>b&&(b=1),this.plotAreaWidth=Math.round(a),this.plotAreaHeight=Math.round(b),this.plotBalloonsSet.translate(c,d)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),this.d3x=Math.round(this.columnSpacing3D*Math.cos(this.angle*Math.PI/180)),this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var a=this.getTitleHeight();this.titleHeight=a,this.marginTopReal=this.marginTop-this.dy,this.fixMargins&&!this.fixMargins.top&&(this.marginTopReal+=a),this.marginBottomReal=this.marginBottom,this.marginLeftReal=this.marginLeft,this.marginRightReal=this.marginRight},updateValueAxes:function(){var b,a=this.valueAxes;for(b=0;b<a.length;b++){var c=a[b];this.setAxisRenderers(c),this.updateObjectSize(c)}},setAxisRenderers:function(a){a.axisRenderer=e.RecAxis,a.guideFillRenderer=e.RecFill,a.axisItemRenderer=e.RecItem,a.marginsChanged=!0},updateGraphs:function(){var b,a=this.graphs;for(b=0;b<a.length;b++){var c=a[b];c.index=b,c.rotate=this.rotate,this.updateObjectSize(c)}},updateObjectSize:function(a){a.width=this.plotAreaWidth-1,a.height=this.plotAreaHeight-1,a.x=this.marginLeftReal,a.y=this.marginTopReal,a.dx=this.dx,a.dy=this.dy},updateChartCursor:function(){var a=this.chartCursor;a&&(a=e.processObject(a,e.ChartCursor,this.theme),this.updateObjectSize(a),this.addChartCursor(a),a.chart=this)},processScrollbars:function(){var a=this.chartScrollbar;a&&(a=e.processObject(a,e.ChartScrollbar,this.theme),this.addChartScrollbar(a))},updateScrollbars:function(){},removeChartCursor:function(){e.callMethod("destroy",[this.chartCursor]),this.chartCursor=null},zoomTrendLines:function(){var b,a=this.trendLines;for(b=0;b<a.length;b++){var c=a[b];c.valueAxis.recalculateToPercents?c.set&&c.set.hide():(c.x=this.marginLeftReal,c.y=this.marginTopReal,c.draw())}},handleCursorValueZoom:function(){},addTrendLine:function(a){this.trendLines.push(a)},zoomOutValueAxes:function(){for(var a=this.valueAxes,b=0;b<a.length;b++)a[b].zoomOut()},removeTrendLine:function(a){var c,b=this.trendLines;for(c=b.length-1;c>=0;c--)b[c]==a&&b.splice(c,1)},adjustMargins:function(a,b){var c=a.position,d=a.scrollbarHeight+a.offset;a.enabled&&("top"==c?b?this.marginLeftReal+=d:this.marginTopReal+=d:b?this.marginRightReal+=d:this.marginBottomReal+=d)},getScrollbarPosition:function(a,b,c){var d="bottom",g="top";a.oppositeAxis||(g=d,d="top"),a.position=b?"bottom"==c||"left"==c?d:g:"top"==c||"right"==c?d:g},updateChartScrollbar:function(a,b){if(a){a.rotate=b;var c=this.marginTopReal,d=this.marginLeftReal,g=a.scrollbarHeight,e=this.dx,f=this.dy,k=a.offset;"top"==a.position?b?(a.y=c,a.x=d-g-k):(a.y=c-g+f-k,a.x=d+e):b?(a.y=c+f,a.x=d+this.plotAreaWidth+e+k):(a.y=c+this.plotAreaHeight+k,a.x=this.marginLeftReal)}},showZB:function(a){var b=this.zbSet;a&&(b=this.zoomOutText,""!==b&&b&&this.drawZoomOutButton()),(b=this.zbSet)&&(this.zoomButtonSet.push(b),a?b.show():b.hide(),this.rollOutZB())},handleReleaseOutside:function(a){e.AmRectangularChart.base.handleReleaseOutside.call(this,a),(a=this.chartCursor)&&a.handleReleaseOutside&&a.handleReleaseOutside()},handleMouseDown:function(a){e.AmRectangularChart.base.handleMouseDown.call(this,a);var b=this.chartCursor;b&&b.handleMouseDown&&!this.rolledOverZB&&b.handleMouseDown(a)},update:function(){e.AmRectangularChart.base.update.call(this),this.chartCursor&&this.chartCursor.update&&this.chartCursor.update()},handleScrollbarValueZoom:function(a){this.relativeZoomValueAxes(a.target.valueAxes,a.relativeStart,a.relativeEnd),this.zoomAxesAndGraphs()},zoomValueScrollbar:function(a){if(a&&a.enabled){var b=a.valueAxes[0],c=b.relativeStart,d=b.relativeEnd;b.reversed&&(d=1-c,c=1-b.relativeEnd),a.percentZoom(c,d)}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var b,a=this.valueAxes;for(b=0;b<a.length;b++)a[b].zoom(this.start,this.end);for(a=this.graphs,b=0;b<a.length;b++)a[b].zoom(this.start,this.end);(b=this.chartCursor)&&b.clearSelection(),this.zoomTrendLines()}},handleValueAxisZoomReal:function(a,b){var c=a.relativeStart,d=a.relativeEnd;if(c>d)var g=c,c=d,d=g;this.relativeZoomValueAxes(b,c,d),this.updateAfterValueZoom()},updateAfterValueZoom:function(){this.zoomAxesAndGraphs(),this.zoomScrollbar()},relativeZoomValueAxes:function(a,b,c){if(b=e.fitToBounds(b,0,1),c=e.fitToBounds(c,0,1),b>c){var d=b;b=c,c=d}var d=1/this.maxZoomFactor,g=e.getDecimals(d)+4;if(d>c-b&&(c=b+(c-b)/2,b=c-d/2,c+=d/2),b=e.roundTo(b,g),c=e.roundTo(c,g),d=!1,a){for(g=0;g<a.length;g++){var h=a[g].zoomToRelativeValues(b,c,!0);h&&(d=h)}this.showZB()}return d},addChartCursor:function(a){e.callMethod("destroy",[this.chartCursor]),a&&(this.listenTo(a,"moved",this.handleCursorMove),this.listenTo(a,"zoomed",this.handleCursorZoom),this.listenTo(a,"zoomStarted",this.handleCursorZoomStarted),this.listenTo(a,"panning",this.handleCursorPanning),this.listenTo(a,"onHideCursor",this.handleCursorHide)),this.chartCursor=a},handleCursorChange:function(){},handleCursorMove:function(a){var b,c=this.valueAxes;for(b=0;b<c.length;b++)a.panning||c[b].showBalloon(a.x,a.y)},handleCursorZoom:function(a){if(this.skipZoomed)this.skipZoomed=!1;else{var b=this.startX0,c=this.endX0,d=this.endY0,g=this.startY0,e=a.startX,f=a.endX,k=a.startY,l=a.endY;this.startX0=this.endX0=this.startY0=this.endY0=NaN,this.handleCursorZoomReal(b+e*(c-b),b+f*(c-b),g+k*(d-g),g+l*(d-g),a)}},handleCursorHide:function(){var a,b=this.valueAxes;for(a=0;a<b.length;a++)b[a].hideBalloon();for(b=this.graphs,a=0;a<b.length;a++)b[a].hideBalloonReal()}})}(),function(){var e=window.AmCharts;e.AmSerialChart=e.Class({inherits:e.AmRectangularChart,construct:function(a){this.type="serial",e.AmSerialChart.base.construct.call(this,a),this.cname="AmSerialChart",this.theme=a,this.columnSpacing=5,this.columnSpacing3D=0,this.columnWidth=.8;var b=new e.CategoryAxis(a);b.chart=this,this.categoryAxis=b,this.zoomOutOnDataUpdate=!0,this.mouseWheelZoomEnabled=this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1,this.minSelectedTime=0,e.applyTheme(this,a,this.cname)},initChart:function(){e.AmSerialChart.base.initChart.call(this),this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis"),this.dataChanged?this.parseData():this.onDataUpdated(),this.drawGraphs=!0},onDataUpdated:function(){var d,a=this.countColumns(),b=this.chartData,c=this.graphs;for(d=0;d<c.length;d++){var g=c[d];g.data=b,g.columnCount=a}0<b.length&&(this.firstTime=this.getStartTime(b[0].time),this.lastTime=this.getEndTime(b[b.length-1].time)),this.drawChart(),this.autoMargins&&!this.marginsUpdated?(this.marginsUpdated=!0,this.measureMargins()):this.dispDUpd()},handleWheelReal:function(a,b){if(!this.wheelBusy){var c=this.categoryAxis,d=c.parseDates,g=c.minDuration(),e=c=1;this.mouseWheelZoomEnabled?b||(c=-1):b&&(c=-1);var f=this.chartData.length,k=this.lastTime,l=this.firstTime;0>a?d?(f=this.endTime-this.startTime,d=this.startTime+c*g,g=this.endTime+e*g,e>0&&c>0&&g>=k&&(g=k,d=k-f),this.zoomToDates(new Date(d),new Date(g))):(e>0&&c>0&&this.end>=f-1&&(c=e=0),d=this.start+c,g=this.end+e,this.zoomToIndexes(d,g)):d?(f=this.endTime-this.startTime,d=this.startTime-c*g,g=this.endTime-e*g,e>0&&c>0&&l>=d&&(d=l,g=l+f),this.zoomToDates(new Date(d),new Date(g))):(e>0&&c>0&&1>this.start&&(c=e=0),d=this.start-c,g=this.end-e,this.zoomToIndexes(d,g))}},validateData:function(a){this.marginsUpdated=!1,this.zoomOutOnDataUpdate&&!a&&(this.endTime=this.end=this.startTime=this.start=NaN),e.AmSerialChart.base.validateData.call(this)},drawChart:function(){if(0<this.realWidth&&0<this.realHeight){e.AmSerialChart.base.drawChart.call(this);var a=this.chartData;if(e.ifArray(a)){var b=this.chartScrollbar;!b||!this.marginsUpdated&&this.autoMargins||b.draw(),(b=this.valueScrollbar)&&b.draw();var c,a=a.length-1,b=this.categoryAxis;b.parseDates&&!b.equalSpacing?(b=this.startTime,c=this.endTime,(isNaN(b)||isNaN(c))&&(b=this.firstTime,c=this.lastTime)):(b=this.start,c=this.end,(isNaN(b)||isNaN(c))&&(b=0,c=a)),this.endTime=this.startTime=this.end=this.start=void 0,this.zoom(b,c)}}else this.cleanChart()},cleanChart:function(){e.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor,this.valueScrollbar])},updateCategoryAxis:function(a,b,c){a.chart=this,a.id=c,a.rotate=b,a.setOrientation(!this.rotate),a.init(),this.setAxisRenderers(a),this.updateObjectSize(a)},updateValueAxes:function(){e.AmSerialChart.base.updateValueAxes.call(this);var b,a=this.valueAxes;for(b=0;b<a.length;b++){var c=a[b],d=this.rotate;c.rotate=d,c.setOrientation(d),d=this.categoryAxis,(!d.startOnAxis||d.parseDates)&&(c.expandMinMax=!0)}},getStartTime:function(a){var b=this.categoryAxis;return e.resetDateToMin(new Date(a),b.minPeriod,1,b.firstDayOfWeek).getTime()},getEndTime:function(a){var b=e.extractPeriod(this.categoryAxis.minPeriod);return e.changeDate(new Date(a),b.period,b.count,!0).getTime()-1},updateMargins:function(){e.AmSerialChart.base.updateMargins.call(this);var a=this.chartScrollbar;a&&(this.getScrollbarPosition(a,this.rotate,this.categoryAxis.position),this.adjustMargins(a,this.rotate)),(a=this.valueScrollbar)&&(this.getScrollbarPosition(a,!this.rotate,this.valueAxes[0].position),this.adjustMargins(a,!this.rotate))},updateScrollbars:function(){e.AmSerialChart.base.updateScrollbars.call(this),this.updateChartScrollbar(this.chartScrollbar,this.rotate),this.updateChartScrollbar(this.valueScrollbar,!this.rotate)},zoom:function(a,b){var c=this.categoryAxis;c.parseDates&&!c.equalSpacing?this.timeZoom(a,b):this.indexZoom(a,b),isNaN(a)&&this.zoomOutValueAxes(),this.updateLegendValues()},timeZoom:function(a,b){var c=this.maxSelectedTime;isNaN(c)||(b!=this.endTime&&b-a>c&&(a=b-c),a!=this.startTime&&b-a>c&&(b=a+c));var d=this.minSelectedTime;if(d>0&&d>b-a){var g=Math.round(a+(b-a)/2),d=Math.round(d/2);a=g-d,b=g+d}if(d=this.chartData,g=this.categoryAxis,e.ifArray(d)&&(a!=this.startTime||b!=this.endTime)){var h=g.minDuration(),f=this.firstTime,k=this.lastTime;a||(a=f,isNaN(c)||(a=k-c)),b||(b=k),a>k&&(a=k),f>b&&(b=f),f>a&&(a=f),b>k&&(b=k),a>b&&(b=a+h),h/5>b-a&&(k>b?b=a+h/5:a=b-h/5),this.startTime=a,this.endTime=b,c=d.length-1,h=this.getClosestIndex(d,"time",a,!0,0,c),d=this.getClosestIndex(d,"time",b,!1,h,c),g.timeZoom(a,b),g.zoom(h,d),this.start=e.fitToBounds(h,0,c),this.end=e.fitToBounds(d,0,c),this.zoomAxesAndGraphs(),this.zoomScrollbar(),this.fixCursor(),this.showZB(),this.updateColumnsDepth(),this.dispatchTimeZoomEvent()}},showZB:function(){var a,b=this.categoryAxis;b&&b.parseDates&&!b.equalSpacing&&(this.startTime>this.firstTime&&(a=!0),this.endTime<this.lastTime&&(a=!0)),0<this.start&&(a=!0),this.end<this.chartData.length-1&&(a=!0),(b=this.valueAxes)&&(b=b[0],0!==b.relativeStart&&(a=!0),1!=b.relativeEnd&&(a=!0)),e.AmSerialChart.base.showZB.call(this,a)},updateAfterValueZoom:function(){e.AmSerialChart.base.updateAfterValueZoom.call(this),this.updateColumnsDepth()},indexZoom:function(a,b){var c=this.maxSelectedSeries;if(isNaN(c)||(b!=this.end&&b-a>c&&(a=b-c),a!=this.start&&b-a>c&&(b=a+c)),a!=this.start||b!=this.end){var d=this.chartData.length-1;isNaN(a)&&(a=0,isNaN(c)||(a=d-c)),isNaN(b)&&(b=d),a>b&&(b=a),b>d&&(b=d),a>d&&(a=d-1),0>a&&(a=0),this.start=a,this.end=b,this.categoryAxis.zoom(a,b),this.zoomAxesAndGraphs(),this.zoomScrollbar(),this.fixCursor(),0!==a||b!=this.chartData.length-1?this.showZB(!0):this.showZB(!1),this.updateColumnsDepth(),this.dispatchIndexZoomEvent()}},updateGraphs:function(){e.AmSerialChart.base.updateGraphs.call(this);var b,a=this.graphs;for(b=0;b<a.length;b++){var c=a[b];c.columnWidthReal=this.columnWidth,c.categoryAxis=this.categoryAxis,e.isString(c.fillToGraph)&&(c.fillToGraph=this.graphsById[c.fillToGraph])}},zoomAxesAndGraphs:function(){e.AmSerialChart.base.zoomAxesAndGraphs.call(this),this.updateColumnsDepth()},updateColumnsDepth:function(){if(0!==this.depth3D||0!==this.angle){var a,c,b=this.graphs;for(this.columnsArray=[],a=0;a<b.length;a++){c=b[a];var d=c.columnsArray;if(d){var g;for(g=0;g<d.length;g++)this.columnsArray.push(d[g])}}if(this.columnsArray.sort(this.compareDepth),0<this.columnsArray.length){for(b=this.columnsSet,d=this.container.set(),this.columnSet.push(d),a=0;a<this.columnsArray.length;a++)d.push(this.columnsArray[a].column.set);c&&d.translate(c.x,c.y),this.columnsSet=d,e.remove(b)}}},compareDepth:function(a,b){return a.depth>b.depth?1:-1},zoomScrollbar:function(){var a=this.chartScrollbar,b=this.categoryAxis;if(a){if(!this.zoomedByScrollbar){var c=a.dragger;c&&c.stop()}this.zoomedByScrollbar=!1,b.parseDates&&!b.equalSpacing?a.timeZoom(this.startTime,this.endTime):a.zoom(this.start,this.end);
}this.zoomValueScrollbar(this.valueScrollbar)},updateTrendLines:function(){var b,a=this.trendLines;for(b=0;b<a.length;b++){var c=a[b],c=e.processObject(c,e.TrendLine,this.theme);a[b]=c,c.chart=this,c.id||(c.id="trendLineAuto"+b+"_"+(new Date).getTime()),e.isString(c.valueAxis)&&(c.valueAxis=this.getValueAxisById(c.valueAxis)),c.valueAxis||(c.valueAxis=this.valueAxes[0]),c.categoryAxis=this.categoryAxis}},countColumns:function(){var d,g,f,k,a=0,b=this.valueAxes.length,c=this.graphs.length,e=!1;for(k=0;b>k;k++){g=this.valueAxes[k];var l=g.stackType;if("100%"==l||"regular"==l)for(e=!1,f=0;c>f;f++)d=this.graphs[f],d.tcc=1,d.valueAxis==g&&"column"==d.type&&(!e&&d.stackable&&(a++,e=!0),(!d.stackable&&d.clustered||d.newStack)&&a++,d.columnIndex=a-1,d.clustered||(d.columnIndex=0));if("none"==l||"3d"==l){for(e=!1,f=0;c>f;f++)d=this.graphs[f],d.valueAxis==g&&"column"==d.type&&(d.clustered?(d.tcc=1,d.newStack&&(a=0),d.hidden||(d.columnIndex=a,a++)):d.hidden||(e=!0,d.tcc=1,d.columnIndex=0));e&&0===a&&(a=1)}if("3d"==l){for(g=1,k=0;c>k;k++)d=this.graphs[k],d.newStack&&g++,d.depthCount=g,d.tcc=a;a=g}}return a},parseData:function(){e.AmSerialChart.base.parseData.call(this),this.parseSerialData(this.dataProvider)},getCategoryIndexByValue:function(a){var c,b=this.chartData;for(c=0;c<b.length;c++)if(b[c].category==a)return c},handleScrollbarZoom:function(a){this.zoomedByScrollbar=!0,this.zoom(a.start,a.end)},dispatchTimeZoomEvent:function(){if(this.drawGraphs&&(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime)){var a={type:"zoomed"};a.startDate=new Date(this.startTime),a.endDate=new Date(this.endTime),a.startIndex=this.start,a.endIndex=this.end,this.startIndex=this.start,this.endIndex=this.end,this.startDate=a.startDate,this.endDate=a.endDate,this.prevStartTime=this.startTime,this.prevEndTime=this.endTime;var b=this.categoryAxis,c=e.extractPeriod(b.minPeriod).period,b=b.dateFormatsObject[c];a.startValue=e.formatDate(a.startDate,b,this),a.endValue=e.formatDate(a.endDate,b,this),a.chart=this,a.target=this,this.fire(a)}},dispatchIndexZoomEvent:function(){if(this.drawGraphs&&(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end)){this.startIndex=this.start,this.endIndex=this.end;var a=this.chartData;if(e.ifArray(a)&&!isNaN(this.start)&&!isNaN(this.end)){var b={chart:this,target:this,type:"zoomed"};b.startIndex=this.start,b.endIndex=this.end,b.startValue=a[this.start].category,b.endValue=a[this.end].category,this.categoryAxis.parseDates&&(this.startTime=a[this.start].time,this.endTime=a[this.end].time,b.startDate=new Date(this.startTime),b.endDate=new Date(this.endTime)),this.prevStartIndex=this.start,this.prevEndIndex=this.end,this.fire(b)}}},updateLegendValues:function(){this.legend&&this.legend.updateValues()},getClosestIndex:function(a,b,c,d,e,h){0>e&&(e=0),h>a.length-1&&(h=a.length-1);var f=e+Math.round((h-e)/2),k=a[f][b];return c==k?f:1>=h-e?d?e:Math.abs(a[e][b]-c)<Math.abs(a[h][b]-c)?e:h:c==k?f:k>c?this.getClosestIndex(a,b,c,d,e,f):this.getClosestIndex(a,b,c,d,f,h)},zoomToIndexes:function(a,b){var c=this.chartData;if(c){var d=c.length;d>0&&(0>a&&(a=0),b>d-1&&(b=d-1),d=this.categoryAxis,d.parseDates&&!d.equalSpacing?this.zoom(c[a].time,this.getEndTime(c[b].time)):this.zoom(a,b))}},zoomToDates:function(a,b){var c=this.chartData;if(c)if(this.categoryAxis.equalSpacing){var d=this.getClosestIndex(c,"time",a.getTime(),!0,0,c.length);b=e.resetDateToMin(b,this.categoryAxis.minPeriod,1),c=this.getClosestIndex(c,"time",b.getTime(),!1,0,c.length),this.zoom(d,c)}else this.zoom(a.getTime(),b.getTime())},zoomToCategoryValues:function(a,b){this.chartData&&this.zoom(this.getCategoryIndexByValue(a),this.getCategoryIndexByValue(b))},formatPeriodString:function(a,b){if(b){var c=["value","open","low","high","close"],d="value open low high close average sum count".split(" "),g=b.valueAxis,h=this.chartData,f=b.numberFormatter;f||(f=this.nf);for(var k=0;k<c.length;k++){for(var n,p,x,u,B,C,v,w,A,z,l=c[k],m=0,q=0,r=0,t=0,G=this.start;G<=this.end;G++){var y=h[G];if(y&&(y=y.axes[g.id].graphs[b.id])){if(y.values){var D=y.values[l];if(this.rotate?(0>y.x||y.x>y.graph.height)&&(D=NaN):(0>y.x||y.x>y.graph.width)&&(D=NaN),!isNaN(D)){isNaN(n)&&(n=D),p=D,(isNaN(x)||x>D)&&(x=D),(isNaN(u)||D>u)&&(u=D),B=e.getDecimals(m);var F=e.getDecimals(D),m=m+D,m=e.roundTo(m,Math.max(B,F));q++,B=m/q}}y.percents&&(y=y.percents[l],!isNaN(y))&&(isNaN(C)&&(C=y),v=y,(isNaN(w)||w>y)&&(w=y),(isNaN(A)||y>A)&&(A=y),z=e.getDecimals(r),D=e.getDecimals(y),r+=y,r=e.roundTo(r,Math.max(z,D)),t++,z=r/t)}}r={open:C,close:v,high:A,low:w,average:z,sum:r,count:t},a=e.formatValue(a,{open:n,close:p,high:u,low:x,average:B,sum:m,count:q},d,f,l+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),a=e.formatValue(a,r,d,this.pf,"percents\\."+l+"\\.")}}return a=e.cleanFromEmpty(a)},formatString:function(a,b,c){if(b){var d=b.graph;if(void 0!==a){if(-1!=a.indexOf("[[category]]")){var g=b.serialDataItem.category;if(this.categoryAxis.parseDates){var h=this.balloonDateFormat,f=this.chartCursor;f&&f.categoryBalloonDateFormat&&(h=f.categoryBalloonDateFormat),h=e.formatDate(g,h,this),-1!=h.indexOf("fff")&&(h=e.formatMilliseconds(h,g)),g=h}a=a.replace(/\[\[category\]\]/g,String(g))}g=d.numberFormatter,g||(g=this.nf),h=b.graph.valueAxis,(f=h.duration)&&!isNaN(b.values.value)&&(f=e.formatDuration(b.values.value,f,"",h.durationUnits,h.maxInterval,g),a=a.replace(RegExp("\\[\\[value\\]\\]","g"),f)),"date"==h.type&&(h=e.formatDate(new Date(b.values.value),d.dateFormat,this),f=RegExp("\\[\\[value\\]\\]","g"),a=a.replace(f,h),h=e.formatDate(new Date(b.values.open),d.dateFormat,this),f=RegExp("\\[\\[open\\]\\]","g"),a=a.replace(f,h)),d="value open low high close total".split(" "),h=this.pf,a=e.formatValue(a,b.percents,d,h,"percents\\."),a=e.formatValue(a,b.values,d,g,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),a=e.formatValue(a,b.values,["percents"],h),-1!=a.indexOf("[[")&&(a=e.formatDataContextValue(a,b.dataContext)),-1!=a.indexOf("[[")&&b.graph.customData&&(a=e.formatDataContextValue(a,b.graph.customData)),a=e.AmSerialChart.base.formatString.call(this,a,b,c)}return a}},updateChartCursor:function(){e.AmSerialChart.base.updateChartCursor.call(this);var a=this.chartCursor,b=this.categoryAxis;if(a){var c=a.categoryBalloonAlpha,d=a.categoryBalloonColor,g=a.color;void 0===d&&(d=a.cursorColor);var h=a.valueZoomable,f=a.zoomable,k=a.valueLineEnabled;if(this.rotate?(a.vLineEnabled=k,a.hZoomEnabled=h,a.vZoomEnabled=f):(a.hLineEnabled=k,a.vZoomEnabled=h,a.hZoomEnabled=f),a.valueLineBalloonEnabled)for(k=0;k<this.valueAxes.length;k++)h=this.valueAxes[k],(f=h.balloon)||(f={}),f=e.extend(f,this.balloon,!0),f.fillColor=d,f.balloonColor=d,f.fillAlpha=c,f.borderColor=d,f.color=g,h.balloon=f;else for(f=0;f<this.valueAxes.length;f++)h=this.valueAxes[f],h.balloon&&(h.balloon=null);b&&(b.balloonTextFunction=a.categoryBalloonFunction,a.categoryLineAxis=b,b.balloonText=a.categoryBalloonText,a.categoryBalloonEnabled&&((f=b.balloon)||(f={}),f=e.extend(f,this.balloon,!0),f.fillColor=d,f.balloonColor=d,f.fillAlpha=c,f.borderColor=d,f.color=g,b.balloon=f),b.balloon&&(b.balloon.enabled=a.categoryBalloonEnabled))}},addChartScrollbar:function(a){e.callMethod("destroy",[this.chartScrollbar]),a&&(a.chart=this,this.listenTo(a,"zoomed",this.handleScrollbarZoom)),this.rotate?void 0===a.width&&(a.width=a.scrollbarHeight):void 0===a.height&&(a.height=a.scrollbarHeight),a.gridAxis=this.categoryAxis,this.chartScrollbar=a},addValueScrollbar:function(a){e.callMethod("destroy",[this.valueScrollbar]),a&&(a.chart=this,this.listenTo(a,"zoomed",this.handleScrollbarValueZoom),this.listenTo(a,"zoomStarted",this.handleCursorZoomStarted));var b=a.scrollbarHeight;this.rotate?void 0===a.height&&(a.height=b):void 0===a.width&&(a.width=b),a.gridAxis||(a.gridAxis=this.valueAxes[0]),a.valueAxes=this.valueAxes,this.valueScrollbar=a},removeChartScrollbar:function(){e.callMethod("destroy",[this.chartScrollbar]),this.chartScrollbar=null},removeValueScrollbar:function(){e.callMethod("destroy",[this.valueScrollbar]),this.valueScrollbar=null},handleReleaseOutside:function(a){e.AmSerialChart.base.handleReleaseOutside.call(this,a),e.callMethod("handleReleaseOutside",[this.chartScrollbar,this.valueScrollbar])},update:function(){e.AmSerialChart.base.update.call(this),this.chartScrollbar&&this.chartScrollbar.update&&this.chartScrollbar.update(),this.valueScrollbar&&this.valueScrollbar.update&&this.valueScrollbar.update()},processScrollbars:function(){e.AmSerialChart.base.processScrollbars.call(this);var a=this.valueScrollbar;a&&(a=e.processObject(a,e.ChartScrollbar,this.theme),a.id="valueScrollbar",this.addValueScrollbar(a))},handleValueAxisZoom:function(a){this.handleValueAxisZoomReal(a,this.valueAxes)},zoomOut:function(){e.AmSerialChart.base.zoomOut.call(this),this.zoom()},getNextItem:function(a){var b=a.index,c=this.chartData,d=a.graph;if(b+1<c.length)for(b+=1;b<c.length;b++)if((a=c[b])&&(a=a.axes[d.valueAxis.id].graphs[d.id],!isNaN(a.y)))return a},handleCursorZoomReal:function(a,b,c,d,e){var f,k,h=e.target;this.rotate?(isNaN(a)||isNaN(b)||this.relativeZoomValueAxes(this.valueAxes,a,b)&&this.updateAfterValueZoom(),h.vZoomEnabled&&(f=e.start,k=e.end)):(isNaN(c)||isNaN(d)||this.relativeZoomValueAxes(this.valueAxes,c,d)&&this.updateAfterValueZoom(),h.hZoomEnabled&&(f=e.start,k=e.end)),isNaN(f)||isNaN(k)||(a=this.categoryAxis,a.parseDates&&!a.equalSpacing?this.zoomToDates(new Date(f),new Date(k)):this.zoomToIndexes(f,k))},handleCursorZoomStarted:function(){var a=this.valueAxes;if(a){var a=a[0],b=a.relativeStart,c=a.relativeEnd;a.reversed&&(b=1-a.relativeEnd,c=1-a.relativeStart),this.rotate?(this.startX0=b,this.endX0=c):(this.startY0=b,this.endY0=c)}this.categoryAxis&&(this.start0=this.start,this.end0=this.end,this.startTime0=this.startTime,this.endTime0=this.endTime)},fixCursor:function(){this.chartCursor&&this.chartCursor.fixPosition(),this.prevCursorItem=null},handleCursorMove:function(a){e.AmSerialChart.base.handleCursorMove.call(this,a);var b=a.target,c=this.categoryAxis;if(a.panning)this.handleCursorHide(a);else if(this.chartData&&!b.isHidden){var d=this.graphs;if(d){var g;if(g=c.xToIndex(this.rotate?a.y:a.x),g=this.chartData[g]){var h,f,k,l;if(b.oneBalloonOnly&&b.valueBalloonsEnabled){var m=1/0;for(h=0;h<d.length;h++)if(f=d[h],f.balloon.enabled&&f.showBalloon&&!f.hidden){k=f.valueAxis.id,k=g.axes[k].graphs[f.id],k=k.y,"top"==f.showBalloonAt&&(k=0),"bottom"==f.showBalloonAt&&(k=this.height);var q=b.mouseX,n=b.mouseY;k=this.rotate?Math.abs(q-k):Math.abs(n-k),m>k&&(m=k,l=f)}b.mostCloseGraph=l}if(this.prevCursorItem!=g||l!=this.prevMostCloseGraph){for(m=[],h=0;h<d.length;h++)f=d[h],k=f.valueAxis.id,k=g.axes[k].graphs[f.id],b.showNextAvailable&&isNaN(k.y)&&(k=this.getNextItem(k)),l&&f!=l?(f.showGraphBalloon(k,b.pointer,!1,b.graphBulletSize,b.graphBulletAlpha),f.balloon.hide(0)):b.valueBalloonsEnabled?(f.balloon.showBullet=b.bulletsEnabled,f.balloon.bulletSize=b.bulletSize/2,a.hideBalloons||(f.showGraphBalloon(k,b.pointer,!1,b.graphBulletSize,b.graphBulletAlpha),f.balloon.set&&m.push({balloon:f.balloon,y:f.balloon.pointToY}))):(f.currentDataItem=k,f.resizeBullet(k,b.graphBulletSize,b.graphBulletAlpha));b.avoidBalloonOverlapping&&this.arrangeBalloons(m),this.prevCursorItem=g}this.prevMostCloseGraph=l}}c.showBalloon(a.x,a.y,b.categoryBalloonDateFormat,a.skip),this.updateLegendValues()}},handleCursorHide:function(a){e.AmSerialChart.base.handleCursorHide.call(this,a),a=this.categoryAxis,this.prevCursorItem=null,this.updateLegendValues(),a&&a.hideBalloon(),a=this.graphs;var b;for(b=0;b<a.length;b++)a[b].currentDataItem=null},handleCursorPanning:function(a){var c,b=a.target,d=a.deltaX,g=a.deltaY,h=a.delta2X,f=a.delta2Y;if(a=!1,this.rotate){isNaN(h)&&(h=d,a=!0);var k=this.endX0;c=this.startX0;var l=k-c,k=k-l*h,m=l;a||(m=0),a=e.fitToBounds(c-l*d,0,1-m)}else isNaN(f)&&(f=g,a=!0),k=this.endY0,c=this.startY0,l=k-c,k+=l*g,m=l,a||(m=0),a=e.fitToBounds(c+l*f,0,1-m);c=e.fitToBounds(k,m,1);var q;b.valueZoomable&&(q=this.relativeZoomValueAxes(this.valueAxes,a,c));var n;c=this.categoryAxis,this.rotate&&(d=g,h=f),a=!1,isNaN(h)&&(h=d,a=!0),b.zoomable&&(0<Math.abs(d)||0<Math.abs(h))&&(c.parseDates&&!c.equalSpacing?(f=this.startTime0,g=this.endTime0,c=g-f,h*=c,l=this.firstTime,k=this.lastTime,m=c,a||(m=0),a=Math.round(e.fitToBounds(f-c*d,l,k-m)),h=Math.round(e.fitToBounds(g-h,l+m,k)),(this.startTime!=a||this.endTime!=h)&&(n={chart:this,target:b,type:"zoomed",start:a,end:h},this.skipZoomed=!0,b.fire(n),this.zoom(a,h),n=!0)):(f=this.start0,g=this.end0,c=g-f,d=Math.round(c*d),h=Math.round(c*h),l=this.chartData.length-1,a||(c=0),a=e.fitToBounds(f-d,0,l-c),c=e.fitToBounds(g-h,c,l),(this.start!=a||this.end!=c)&&(this.skipZoomed=!0,b.fire({chart:this,target:b,type:"zoomed",start:a,end:c}),this.zoom(a,c),n=!0))),!n&&q&&this.updateAfterValueZoom()},arrangeBalloons:function(a){var b=this.plotAreaHeight;a.sort(this.compareY);var c,d,e,h=this.plotAreaWidth,f=a.length;for(c=0;f>c;c++)d=a[c].balloon,d.setBounds(0,0,h,b),d.restorePrevious(),d.draw(),b=d.yPos-3;for(a.reverse(),c=0;f>c;c++){d=a[c].balloon;var b=d.bottom,k=d.bottom-d.yPos;c>0&&e+3>b-k&&(d.setBounds(0,e+3,h,e+k+3),d.restorePrevious(),d.draw()),d.set&&d.set.show(),e=d.bottom}},compareY:function(a,b){return a.y<b.y?1:-1}})}(),function(){var e=window.AmCharts;e.Cuboid=e.Class({construct:function(a,b,c,d,e,h,f,k,l,m,q,n,p,x,u,B,r){this.set=a.set(),this.container=a,this.h=Math.round(c),this.w=Math.round(b),this.dx=d,this.dy=e,this.colors=h,this.alpha=f,this.bwidth=k,this.bcolor=l,this.balpha=m,this.dashLength=x,this.topRadius=B,this.pattern=u,this.rotate=p,this.bcn=r,p?0>b&&0===q&&(q=180):0>c&&270==q&&(q=90),this.gradientRotation=q,0===d&&0===e&&(this.cornerRadius=n),this.draw()},draw:function(){var a=this.set;a.clear();var b=this.container,c=b.chart,d=this.w,g=this.h,h=this.dx,f=this.dy,k=this.colors,l=this.alpha,m=this.bwidth,q=this.bcolor,n=this.balpha,p=this.gradientRotation,x=this.cornerRadius,u=this.dashLength,B=this.pattern,r=this.topRadius,t=this.bcn,C=k,v=k;"object"==typeof k&&(C=k[0],v=k[k.length-1]);var w,A,z,G,y,D,F,L,M,Q=l;B&&(l=0);var E,H,I,J,K=this.rotate;if(0<Math.abs(h)||0<Math.abs(f))if(isNaN(r))F=v,v=e.adjustLuminosity(C,-.2),v=e.adjustLuminosity(C,-.2),w=e.polygon(b,[0,h,d+h,d,0],[0,f,f,0,0],v,l,1,q,0,p),n>0&&(M=e.line(b,[0,h,d+h],[0,f,f],q,n,m,u)),A=e.polygon(b,[0,0,d,d,0],[0,g,g,0,0],v,l,1,q,0,p),A.translate(h,f),n>0&&(z=e.line(b,[h,h],[f,f+g],q,n,m,u)),G=e.polygon(b,[0,0,h,h,0],[0,g,g+f,f,0],v,l,1,q,0,p),y=e.polygon(b,[d,d,d+h,d+h,d],[0,g,g+f,f,0],v,l,1,q,0,p),n>0&&(D=e.line(b,[d,d+h,d+h,d],[0,f,g+f,g],q,n,m,u)),v=e.adjustLuminosity(F,.2),F=e.polygon(b,[0,h,d+h,d,0],[g,g+f,g+f,g,g],v,l,1,q,0,p),n>0&&(L=e.line(b,[0,h,d+h],[g,g+f,g+f],q,n,m,u));else{var N,O,P;K?(N=g/2,v=h/2,P=g/2,O=d+h/2,H=Math.abs(g/2),E=Math.abs(h/2)):(v=d/2,N=f/2,O=d/2,P=g+f/2+1,E=Math.abs(d/2),H=Math.abs(f/2)),I=E*r,J=H*r,E>.1&&E>.1&&(w=e.circle(b,E,C,l,m,q,n,!1,H),w.translate(v,N)),I>.1&&I>.1&&(F=e.circle(b,I,e.adjustLuminosity(C,.5),l,m,q,n,!1,J),F.translate(O,P))}for(l=Q,1>Math.abs(g)&&(g=0),1>Math.abs(d)&&(d=0),!isNaN(r)&&(0<Math.abs(h)||0<Math.abs(f))?(k=[C],k={fill:k,stroke:q,"stroke-width":m,"stroke-opacity":n,"fill-opacity":l},K?(l="M0,0 L"+d+","+(g/2-g/2*r),m=" B",d>0&&(m=" A"),e.VML?(l+=m+Math.round(d-I)+","+Math.round(g/2-J)+","+Math.round(d+I)+","+Math.round(g/2+J)+","+d+",0,"+d+","+g,l=l+(" L0,"+g)+(m+Math.round(-E)+","+Math.round(g/2-H)+","+Math.round(E)+","+Math.round(g/2+H)+",0,"+g+",0,0")):(l+="A"+I+","+J+",0,0,0,"+d+","+(g-g/2*(1-r))+"L0,"+g,l+="A"+E+","+H+",0,0,1,0,0"),E=90):(m=d/2-d/2*r,l="M0,0 L"+m+","+g,e.VML?(l="M0,0 L"+m+","+g,m=" B",0>g&&(m=" A"),l+=m+Math.round(d/2-I)+","+Math.round(g-J)+","+Math.round(d/2+I)+","+Math.round(g+J)+",0,"+g+","+d+","+g,l+=" L"+d+",0",l+=m+Math.round(d/2+E)+","+Math.round(H)+","+Math.round(d/2-E)+","+Math.round(-H)+","+d+",0,0,0"):(l+="A"+I+","+J+",0,0,0,"+(d-d/2*(1-r))+","+g+"L"+d+",0",l+="A"+E+","+H+",0,0,1,0,0"),E=180),b=b.path(l).attr(k),b.gradient("linearGradient",[C,e.adjustLuminosity(C,-.3),e.adjustLuminosity(C,-.3),C],E),K?b.translate(h/2,0):b.translate(0,f/2)):b=0===g?e.line(b,[0,d],[0,0],q,n,m,u):0===d?e.line(b,[0,0],[0,g],q,n,m,u):x>0?e.rect(b,d,g,k,l,m,q,n,x,p,u):e.polygon(b,[0,0,d,d,0],[0,g,g,0,0],k,l,m,q,n,p,!1,u),d=isNaN(r)?0>g?[w,M,A,z,G,y,D,F,L,b]:[F,L,A,z,G,y,w,M,D,b]:K?d>0?[w,b,F]:[F,b,w]:0>g?[w,b,F]:[F,b,w],e.setCN(c,b,t+"front"),e.setCN(c,A,t+"back"),e.setCN(c,F,t+"top"),e.setCN(c,w,t+"bottom"),e.setCN(c,G,t+"left"),e.setCN(c,y,t+"right"),w=0;w<d.length;w++)(A=d[w])&&(a.push(A),e.setCN(c,A,t+"element"));B&&b.pattern(B,NaN,c.path)},width:function(a){isNaN(a)&&(a=0),this.w=Math.round(a),this.draw()},height:function(a){isNaN(a)&&(a=0),this.h=Math.round(a),this.draw()},animateHeight:function(a,b){var c=this;c.animationFinished=!1,c.easing=b,c.totalFrames=a*e.updateRate,c.rh=c.h,c.frame=0,c.height(1),setTimeout(function(){c.updateHeight.call(c)},1e3/e.updateRate)},updateHeight:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b?(b=a.easing(0,a.frame,1,a.rh-1,b),a.height(b),window.requestAnimationFrame?window.requestAnimationFrame(function(){a.updateHeight.call(a)}):setTimeout(function(){a.updateHeight.call(a)},1e3/e.updateRate)):(a.height(a.rh),a.animationFinished=!0)},animateWidth:function(a,b){var c=this;c.animationFinished=!1,c.easing=b,c.totalFrames=a*e.updateRate,c.rw=c.w,c.frame=0,c.width(1),setTimeout(function(){c.updateWidth.call(c)},1e3/e.updateRate)},updateWidth:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b?(b=a.easing(0,a.frame,1,a.rw-1,b),a.width(b),window.requestAnimationFrame?window.requestAnimationFrame(function(){a.updateWidth.call(a)}):setTimeout(function(){a.updateWidth.call(a)},1e3/e.updateRate)):(a.width(a.rw),a.animationFinished=!0)}})}(),function(){var e=window.AmCharts;e.CategoryAxis=e.Class({inherits:e.AxisBase,construct:function(a){this.cname="CategoryAxis",e.CategoryAxis.base.construct.call(this,a),this.minPeriod="DD",this.equalSpacing=this.parseDates=!1,this.position="bottom",this.startOnAxis=!1,this.gridPosition="middle",this.safeDistance=30,this.stickBalloonToCategory=!1,e.applyTheme(this,a,this.cname)},draw:function(){e.CategoryAxis.base.draw.call(this),this.generateDFObject();var a=this.chart.chartData;if(this.data=a,this.labelRotationR=this.labelRotation,this.type=null,e.ifArray(a)){var b,c=this.chart;"scrollbar"!=this.id?(e.setCN(c,this.set,"category-axis"),e.setCN(c,this.labelsSet,"category-axis"),e.setCN(c,this.axisLine.axisSet,"category-axis")):this.bcn=this.id+"-";var q,n,u,B,r,t,d=this.start,g=this.labelFrequency,h=0,f=this.end-d+1,k=this.gridCountR,l=this.showFirstLabel,m=this.showLastLabel,p="",p=e.extractPeriod(this.minPeriod),x=e.getPeriodDuration(p.period,p.count),C=this.rotate;q=this.firstDayOfWeek,n=this.boldPeriodBeginning,b=e.resetDateToMin(new Date(a[a.length-1].time+1.05*x),this.minPeriod,1,q).getTime(),this.firstTime=c.firstTime,this.endTime>b&&(this.endTime=b),t=this.minorGridEnabled,B=this.gridAlpha;var v,w=0,A=0;if(this.widthField)for(b=this.start;b<=this.end;b++)if(v=this.data[b]){var z=Number(this.data[b].dataContext[this.widthField]);isNaN(z)||(w+=z,v.widthValue=z)}if(this.parseDates&&!this.equalSpacing)this.lastTime=a[a.length-1].time,this.maxTime=e.resetDateToMin(new Date(this.lastTime+1.05*x),this.minPeriod,1,q).getTime(),this.timeDifference=this.endTime-this.startTime,this.parseDatesDraw();else if(this.parseDates){if(this.parseDates&&this.equalSpacing){if(h=this.start,this.startTime=this.data[this.start].time,this.endTime=this.data[this.end].time,this.timeDifference=this.endTime-this.startTime,b=this.choosePeriod(0),g=b.period,u=b.count,b=e.getPeriodDuration(g,u),x>b&&(g=p.period,u=p.count,b=x),B=g,"WW"==B&&(B="DD"),this.currentDateFormat=this.dateFormatsObject[B],this.stepWidth=this.getStepWidth(f),k=Math.ceil(this.timeDifference/b)+1,x=e.resetDateToMin(new Date(this.startTime-b),g,u,q).getTime(),this.cellWidth=this.getStepWidth(f),p=Math.round(x/b),d=-1,p/2==Math.round(p/2)&&(d=-2,x-=b),p=this.start,p/2==Math.round(p/2)&&p--,0>p&&(p=0),A=this.end+2,A>=this.data.length&&(A=this.data.length),v=!1,v=!l,this.previousPos=-1e3,20<this.labelRotationR&&(this.safeDistance=5),a=p,this.data[p].time!=e.resetDateToMin(new Date(this.data[p].time),g,u,q).getTime())for(q=0,z=x,b=p;A>b;b++)f=this.data[b].time,this.checkPeriodChange(g,u,f,z)&&(q++,q>=2&&(a=b,b=A),z=f);if(t&&u>1&&(f=this.chooseMinorFrequency(u),e.getPeriodDuration(g,f)),0<this.gridCountR)for(b=p;A>b;b++)f=this.data[b].time,this.checkPeriodChange(g,u,f,x)&&b>=a&&(q=this.getCoordinate(b-this.start),t=!1,this.nextPeriod[B]&&(t=this.checkPeriodChange(this.nextPeriod[B],1,f,x,B)),x=!1,t&&this.markPeriodChange?(t=this.dateFormatsObject[this.nextPeriod[B]],x=!0):t=this.dateFormatsObject[B],p=e.formatDate(new Date(f),t,c),(b==d&&!l||b==k&&!m)&&(p=" "),v?v=!1:(n||(x=!1),q-this.previousPos>this.safeDistance*Math.cos(this.labelRotationR*Math.PI/180)&&(this.labelFunction&&(p=this.labelFunction(p,new Date(f),this,g,u,r)),this.boldLabels&&(x=!0),r=new this.axisItemRenderer(this,q,p,void 0,void 0,void 0,void 0,x),t=r.graphics(),this.pushAxisItem(r),t=t.getBBox().width,e.isModern||(t-=q),this.previousPos=q+t)),r=x=f)}}else if(this.cellWidth=this.getStepWidth(f),k>f&&(k=f),h+=this.start,this.stepWidth=this.getStepWidth(f),k>0)for(k=Math.floor(f/k),f=this.chooseMinorFrequency(k),p=h,p/2==Math.round(p/2)&&p--,0>p&&(p=0),v=0,this.widthField&&(p=this.start),this.end-p+1>=this.autoRotateCount&&(this.labelRotationR=this.autoRotateAngle),b=p;b<=this.end+2;b++){if(n=!1,b>=0&&b<this.data.length?(u=this.data[b],p=u.category,n=u.forceShow):p="",t&&!isNaN(f)){if(b/f!=Math.round(b/f)&&!n)continue;b/k==Math.round(b/k)||n||(this.gridAlpha=this.minorGridAlpha,p=void 0)}else if(b/k!=Math.round(b/k)&&!n)continue;q=this.getCoordinate(b-h),r=0,"start"==this.gridPosition&&(q-=this.cellWidth/2,r=this.cellWidth/2),n=!0,a=r,"start"==this.tickPosition&&(a=0,n=!1,r=0),(b==d&&!l||b==this.end&&!m)&&(p=void 0),Math.round(v/g)!=v/g&&(p=void 0),v++,z=this.cellWidth,C&&(z=NaN,this.ignoreAxisWidth||!c.autoMargins)&&(z="right"==this.position?c.marginRight:c.marginLeft,z-=this.tickLength+10),this.labelFunction&&u&&(p=this.labelFunction(p,u,this)),p=e.fixBrakes(p),x=!1,this.boldLabels&&(x=!0),b>this.end&&"start"==this.tickPosition&&(p=" "),this.rotate&&this.inside&&(r-=2),isNaN(u.widthValue)||(u.percentWidthValue=u.widthValue/w*100,z=this.rotate?this.height*u.widthValue/w:this.width*u.widthValue/w,q=A,A+=z,r=z/2),r=new this.axisItemRenderer(this,q,p,n,z,r,void 0,x,a,!1,u.labelColor,u.className),r.serialDataItem=u,this.pushAxisItem(r),this.gridAlpha=B}for(b=l=0;b<this.data.length;b++)(v=this.data[b])&&(this.parseDates&&!this.equalSpacing?(m=v.time,d=this.cellWidth,"MM"==this.minPeriod&&(d=864e5*e.daysInMonth(new Date(m))*this.stepWidth,v.cellWidth=d),m=Math.round((m-this.startTime)*this.stepWidth+d/2)):m=this.getCoordinate(b-h),v.x[this.id]=m);if(this.widthField)for(b=this.start;b<=this.end;b++)v=this.data[b],d=v.widthValue,v.percentWidthValue=d/w*100,this.rotate?(m=this.height*d/w/2+l,l=this.height*d/w+l):(m=this.width*d/w/2+l,l=this.width*d/w+l),v.x[this.id]=m;for(w=this.guides.length,b=0;w>b;b++)l=this.guides[b],n=k=k=t=d=NaN,m=l.above,l.toCategory&&(k=c.getCategoryIndexByValue(l.toCategory),isNaN(k)||(d=this.getCoordinate(k-h),l.expand&&(d+=this.cellWidth/2),r=new this.axisItemRenderer(this,d,"",!0,NaN,NaN,l),this.pushAxisItem(r,m))),l.category&&(n=c.getCategoryIndexByValue(l.category),isNaN(n)||(t=this.getCoordinate(n-h),l.expand&&(t-=this.cellWidth/2),k=(d-t)/2,r=new this.axisItemRenderer(this,t,l.label,!0,NaN,k,l),this.pushAxisItem(r,m))),n=c.dataDateFormat,l.toDate&&(!n||l.toDate instanceof Date||(l.toDate=l.toDate.toString()+" |"),l.toDate=e.getDate(l.toDate,n),this.equalSpacing?(k=c.getClosestIndex(this.data,"time",l.toDate.getTime(),!1,0,this.data.length-1),isNaN(k)||(d=this.getCoordinate(k-h))):d=(l.toDate.getTime()-this.startTime)*this.stepWidth,r=new this.axisItemRenderer(this,d,"",!0,NaN,NaN,l),this.pushAxisItem(r,m)),l.date&&(!n||l.date instanceof Date||(l.date=l.date.toString()+" |"),l.date=e.getDate(l.date,n),this.equalSpacing?(n=c.getClosestIndex(this.data,"time",l.date.getTime(),!1,0,this.data.length-1),isNaN(n)||(t=this.getCoordinate(n-h))):t=(l.date.getTime()-this.startTime)*this.stepWidth,k=(d-t)/2,n=!0,l.toDate&&(n=!1),r="H"==this.orientation?new this.axisItemRenderer(this,t,l.label,n,2*k,NaN,l):new this.axisItemRenderer(this,t,l.label,!1,NaN,k,l),this.pushAxisItem(r,m)),(d>0||t>0)&&(d<this.width||t<this.width)&&(d=new this.guideFillRenderer(this,t,d,l),t=d.graphics(),this.pushAxisItem(d,m),l.graphics=t,t.index=b,l.balloonText&&this.addEventListeners(t,l));(c=c.chartCursor)&&(C?c.fixHeight(this.cellWidth):(c.fixWidth(this.cellWidth),c.fullWidth&&this.balloon&&(this.balloon.minWidth=this.cellWidth))),this.previousHeight=G}this.axisCreated=!0,this.set.translate(this.x,this.y),this.labelsSet.translate(this.x,this.y),this.labelsSet.show(),this.positionTitle(),(C=this.axisLine.set)&&C.toFront();var G=this.getBBox().height;2<G-this.previousHeight&&this.autoWrap&&!this.parseDates&&(this.axisCreated=this.chart.marginsUpdated=!1)},xToIndex:function(a){var h,b=this.data,c=this.chart,d=c.rotate,g=this.stepWidth;if(this.parseDates&&!this.equalSpacing)a=this.startTime+Math.round(a/g)-this.minDuration()/2,h=c.getClosestIndex(b,"time",a,!1,this.start,this.end+1);else if(this.widthField)for(c=1/0,g=this.start;g<=this.end;g++){var f=this.data[g];f&&(f=Math.abs(f.x[this.id]-a),c>f&&(c=f,h=g))}else this.startOnAxis||(a-=g/2),h=this.start+Math.round(a/g);h=e.fitToBounds(h,0,b.length-1);var k;return b[h]&&(k=b[h].x[this.id]),d?k>this.height+1&&h--:k>this.width+1&&h--,0>k&&h++,h=e.fitToBounds(h,0,b.length-1)},dateToCoordinate:function(a){return this.parseDates&&!this.equalSpacing?(a.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(a=this.chart.getClosestIndex(this.data,"time",a.getTime(),!1,0,this.data.length-1),this.getCoordinate(a-this.start)):NaN},categoryToCoordinate:function(a){if(!this.chart)return NaN;var b=this.chart.getCategoryIndexByValue(a);return isNaN(b)?this.parseDates?this.dateToCoordinate(new Date(a)):void 0:this.getCoordinate(b-this.start)},coordinateToDate:function(a){return this.equalSpacing?(a=this.xToIndex(a),new Date(this.data[a].time)):new Date(this.startTime+a/this.stepWidth)},coordinateToValue:function(a){return a=this.xToIndex(a),(a=this.data[a])?this.parseDates?a.time:a.category:void 0},getCoordinate:function(a){return a*=this.stepWidth,this.startOnAxis||(a+=this.stepWidth/2),Math.round(a)},formatValue:function(a,b){return b||(b=this.currentDateFormat),this.parseDates&&(a=e.formatDate(new Date(a),b,this.chart)),a},showBalloonAt:function(a){return a=this.parseDates?this.dateToCoordinate(new Date(a)):this.categoryToCoordinate(a),this.adjustBalloonCoordinate(a)},formatBalloonText:function(a,b,c){var d="",g="",h=this.chart,f=this.data[b];if(f)if(this.parseDates)d=e.formatDate(f.category,c,h),b=e.changeDate(new Date(f.category),this.minPeriod,1),g=e.formatDate(b,c,h),-1!=d.indexOf("fff")&&(d=e.formatMilliseconds(d,f.category),g=e.formatMilliseconds(g,b));else{var k;this.data[b+1]&&(k=this.data[b+1]),d=e.fixNewLines(f.category),k&&(g=e.fixNewLines(k.category))}return a=a.replace(/\[\[category\]\]/g,String(d)),a=a.replace(/\[\[toCategory\]\]/g,String(g))},adjustBalloonCoordinate:function(a,b){var c=this.xToIndex(a),d=this.chart.chartCursor;if(this.stickBalloonToCategory){var e=this.data[c];e&&(a=e.x[this.id]),this.stickBalloonToStart&&(a-=this.cellWidth/2);var h=0;if(d){var f=d.limitToGraph;f&&(h=e.axes[f.valueAxis.id].graphs[f.id].y),this.rotate?("left"==this.position?(f&&(h-=d.width),h>0&&(h=0)):0>h&&(h=0),d.fixHLine(a,h)):("top"==this.position?(f&&(h-=d.height),h>0&&(h=0)):0>h&&(h=0),d.fixVLine(a,h))}}return d&&!b&&(d.setIndex(c),this.parseDates&&d.setTimestamp(this.coordinateToDate(a).getTime())),a}})}()},{}],64:[function(require,module,exports){!function(){var e=window.AmCharts;e.AmRectangularChart=e.Class({inherits:e.AmCoordinateChart,construct:function(a){e.AmRectangularChart.base.construct.call(this,a),this.theme=a,this.createEvents("zoomed","changed"),this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20,this.depth3D=this.angle=0,this.plotAreaFillColors="#FFFFFF",this.plotAreaFillAlphas=0,this.plotAreaBorderColor="#000000",this.plotAreaBorderAlpha=0,this.maxZoomFactor=20,this.zoomOutButtonImageSize=19,this.zoomOutButtonImage="lens",this.zoomOutText="Show all",this.zoomOutButtonColor="#e5e5e5",this.zoomOutButtonAlpha=0,this.zoomOutButtonRollOverAlpha=1,this.zoomOutButtonPadding=8,this.trendLines=[],this.autoMargins=!0,this.marginsUpdated=!1,this.autoMarginOffset=10,e.applyTheme(this,a,"AmRectangularChart")},initChart:function(){e.AmRectangularChart.base.initChart.call(this),this.updateDxy(),!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),this.drawGraphs=!1),this.processScrollbars(),this.updateMargins(),this.updatePlotArea(),this.updateScrollbars(),this.updateTrendLines(),this.updateChartCursor(),this.updateValueAxes(),this.scrollbarOnly||this.updateGraphs()},drawChart:function(){if(e.AmRectangularChart.base.drawChart.call(this),this.drawPlotArea(),e.ifArray(this.chartData)){var a=this.chartCursor;a&&a.draw()}},resetMargins:function(){var b,a={};if("xy"==this.type){var c=this.xAxes,d=this.yAxes;for(b=0;b<c.length;b++){var g=c[b];g.ignoreAxisWidth||(g.setOrientation(!0),g.fixAxisPosition(),a[g.position]=!0)}for(b=0;b<d.length;b++)c=d[b],c.ignoreAxisWidth||(c.setOrientation(!1),c.fixAxisPosition(),a[c.position]=!0)}else{for(d=this.valueAxes,b=0;b<d.length;b++)c=d[b],c.ignoreAxisWidth||(c.setOrientation(this.rotate),c.fixAxisPosition(),a[c.position]=!0);(b=this.categoryAxis)&&!b.ignoreAxisWidth&&(b.setOrientation(!this.rotate),b.fixAxisPosition(),b.fixAxisPosition(),a[b.position]=!0)}a.left&&(this.marginLeft=0),a.right&&(this.marginRight=0),a.top&&(this.marginTop=0),a.bottom&&(this.marginBottom=0),this.fixMargins=a},measureMargins:function(){var b,a=this.valueAxes,c=this.autoMarginOffset,d=this.fixMargins,g=this.realWidth,e=this.realHeight,f=c,k=c,m=g;b=e;var l;for(l=0;l<a.length;l++)a[l].handleSynchronization(),b=this.getAxisBounds(a[l],f,m,k,b),f=Math.round(b.l),m=Math.round(b.r),k=Math.round(b.t),b=Math.round(b.b);(a=this.categoryAxis)&&(b=this.getAxisBounds(a,f,m,k,b),f=Math.round(b.l),m=Math.round(b.r),k=Math.round(b.t),b=Math.round(b.b)),d.left&&c>f&&(this.marginLeft=Math.round(-f+c)),d.right&&m>=g-c&&(this.marginRight=Math.round(m-g+c)),d.top&&k<c+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-k+c+this.titleHeight)),d.bottom&&b>e-c&&(this.marginBottom=Math.round(this.marginBottom+b-e+c)),this.initChart()},getAxisBounds:function(a,b,c,d,e){if(!a.ignoreAxisWidth){var h=a.labelsSet,f=a.tickLength;if(a.inside&&(f=0),h)switch(h=a.getBBox(),a.position){case"top":a=h.y,d>a&&(d=a);break;case"bottom":a=h.y+h.height,a>e&&(e=a);break;case"right":a=h.x+h.width+f+3,a>c&&(c=a);break;case"left":a=h.x-f,b>a&&(b=a)}}return{l:b,t:d,r:c,b:e}},drawZoomOutButton:function(){var a=this;if(!a.zbSet){var b=a.container.set();a.zoomButtonSet.push(b);var c=a.color,d=a.fontSize,g=a.zoomOutButtonImageSize,h=a.zoomOutButtonImage.replace(/\.[a-z]*$/i,""),f=e.lang.zoomOutText||a.zoomOutText,k=a.zoomOutButtonColor,m=a.zoomOutButtonAlpha,l=a.zoomOutButtonFontSize,p=a.zoomOutButtonPadding;isNaN(l)||(d=l),(l=a.zoomOutButtonFontColor)&&(c=l);var q,l=a.zoomOutButton;l&&(l.fontSize&&(d=l.fontSize),l.color&&(c=l.color),l.backgroundColor&&(k=l.backgroundColor),isNaN(l.backgroundAlpha)||(a.zoomOutButtonRollOverAlpha=l.backgroundAlpha));var r=l=0;for(void 0!==a.pathToImages&&h&&(q=a.container.image(a.pathToImages+h+a.extension,0,0,g,g),e.setCN(a,q,"zoom-out-image"),b.push(q),q=q.getBBox(),l=q.width+5),void 0!==f&&(c=e.text(a.container,f,c,a.fontFamily,d,"start"),e.setCN(a,c,"zoom-out-label"),d=c.getBBox(),r=q?q.height/2-3:d.height/2,c.translate(l,r),b.push(c)),
q=b.getBBox(),c=1,e.isModern||(c=0),k=e.rect(a.container,q.width+2*p+5,q.height+2*p-2,k,1,1,k,c),k.setAttr("opacity",m),k.translate(-p,-p),e.setCN(a,k,"zoom-out-bg"),b.push(k),k.toBack(),a.zbBG=k,q=k.getBBox(),b.translate(a.marginLeftReal+a.plotAreaWidth-q.width+p,a.marginTopReal+p),b.hide(),b.mouseover(function(){a.rollOverZB()}).mouseout(function(){a.rollOutZB()}).click(function(){a.clickZB()}).touchstart(function(){a.rollOverZB()}).touchend(function(){a.rollOutZB(),a.clickZB()}),m=0;m<b.length;m++)b[m].attr({cursor:"pointer"});a.zbSet=b}},rollOverZB:function(){this.rolledOverZB=!0,this.zbBG.setAttr("opacity",this.zoomOutButtonRollOverAlpha)},rollOutZB:function(){this.rolledOverZB=!1,this.zbBG.setAttr("opacity",this.zoomOutButtonAlpha)},clickZB:function(){this.rolledOverZB=!1,this.zoomOut()},zoomOut:function(){this.zoomOutValueAxes()},drawPlotArea:function(){var a=this.dx,b=this.dy,c=this.marginLeftReal,d=this.marginTopReal,g=this.plotAreaWidth-1,h=this.plotAreaHeight-1,f=this.plotAreaFillColors,k=this.plotAreaFillAlphas,m=this.plotAreaBorderColor,l=this.plotAreaBorderAlpha;"object"==typeof k&&(k=k[0]),f=e.polygon(this.container,[0,g,g,0,0],[0,0,h,h,0],f,k,1,m,l,this.plotAreaGradientAngle),e.setCN(this,f,"plot-area"),f.translate(c+a,d+b),this.set.push(f),0!==a&&0!==b&&(f=this.plotAreaFillColors,"object"==typeof f&&(f=f[0]),f=e.adjustLuminosity(f,-.15),g=e.polygon(this.container,[0,a,g+a,g,0],[0,b,b,0,0],f,k,1,m,l),e.setCN(this,g,"plot-area-bottom"),g.translate(c,d+h),this.set.push(g),a=e.polygon(this.container,[0,0,a,a,0],[0,h,h+b,b,0],f,k,1,m,l),e.setCN(this,a,"plot-area-left"),a.translate(c,d),this.set.push(a)),(c=this.bbset)&&this.scrollbarOnly&&c.remove()},updatePlotArea:function(){var a=this.updateWidth(),b=this.updateHeight(),c=this.container;this.realWidth=a,this.realWidth=b,c&&this.container.setSize(a,b);var c=this.marginLeftReal,d=this.marginTopReal,a=a-c-this.marginRightReal-this.dx,b=b-d-this.marginBottomReal;1>a&&(a=1),1>b&&(b=1),this.plotAreaWidth=Math.round(a),this.plotAreaHeight=Math.round(b),this.plotBalloonsSet.translate(c,d)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),this.d3x=Math.round(this.columnSpacing3D*Math.cos(this.angle*Math.PI/180)),this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var a=this.getTitleHeight();this.titleHeight=a,this.marginTopReal=this.marginTop-this.dy,this.fixMargins&&!this.fixMargins.top&&(this.marginTopReal+=a),this.marginBottomReal=this.marginBottom,this.marginLeftReal=this.marginLeft,this.marginRightReal=this.marginRight},updateValueAxes:function(){var b,a=this.valueAxes;for(b=0;b<a.length;b++){var c=a[b];this.setAxisRenderers(c),this.updateObjectSize(c)}},setAxisRenderers:function(a){a.axisRenderer=e.RecAxis,a.guideFillRenderer=e.RecFill,a.axisItemRenderer=e.RecItem,a.marginsChanged=!0},updateGraphs:function(){var b,a=this.graphs;for(b=0;b<a.length;b++){var c=a[b];c.index=b,c.rotate=this.rotate,this.updateObjectSize(c)}},updateObjectSize:function(a){a.width=this.plotAreaWidth-1,a.height=this.plotAreaHeight-1,a.x=this.marginLeftReal,a.y=this.marginTopReal,a.dx=this.dx,a.dy=this.dy},updateChartCursor:function(){var a=this.chartCursor;a&&(a=e.processObject(a,e.ChartCursor,this.theme),this.updateObjectSize(a),this.addChartCursor(a),a.chart=this)},processScrollbars:function(){var a=this.chartScrollbar;a&&(a=e.processObject(a,e.ChartScrollbar,this.theme),this.addChartScrollbar(a))},updateScrollbars:function(){},removeChartCursor:function(){e.callMethod("destroy",[this.chartCursor]),this.chartCursor=null},zoomTrendLines:function(){var b,a=this.trendLines;for(b=0;b<a.length;b++){var c=a[b];c.valueAxis.recalculateToPercents?c.set&&c.set.hide():(c.x=this.marginLeftReal,c.y=this.marginTopReal,c.draw())}},handleCursorValueZoom:function(){},addTrendLine:function(a){this.trendLines.push(a)},zoomOutValueAxes:function(){for(var a=this.valueAxes,b=0;b<a.length;b++)a[b].zoomOut()},removeTrendLine:function(a){var c,b=this.trendLines;for(c=b.length-1;c>=0;c--)b[c]==a&&b.splice(c,1)},adjustMargins:function(a,b){var c=a.position,d=a.scrollbarHeight+a.offset;a.enabled&&("top"==c?b?this.marginLeftReal+=d:this.marginTopReal+=d:b?this.marginRightReal+=d:this.marginBottomReal+=d)},getScrollbarPosition:function(a,b,c){var d="bottom",e="top";a.oppositeAxis||(e=d,d="top"),a.position=b?"bottom"==c||"left"==c?d:e:"top"==c||"right"==c?d:e},updateChartScrollbar:function(a,b){if(a){a.rotate=b;var c=this.marginTopReal,d=this.marginLeftReal,e=a.scrollbarHeight,h=this.dx,f=this.dy,k=a.offset;"top"==a.position?b?(a.y=c,a.x=d-e-k):(a.y=c-e+f-k,a.x=d+h):b?(a.y=c+f,a.x=d+this.plotAreaWidth+h+k):(a.y=c+this.plotAreaHeight+k,a.x=this.marginLeftReal)}},showZB:function(a){var b=this.zbSet;a&&(b=this.zoomOutText,""!==b&&b&&this.drawZoomOutButton()),(b=this.zbSet)&&(this.zoomButtonSet.push(b),a?b.show():b.hide(),this.rollOutZB())},handleReleaseOutside:function(a){e.AmRectangularChart.base.handleReleaseOutside.call(this,a),(a=this.chartCursor)&&a.handleReleaseOutside&&a.handleReleaseOutside()},handleMouseDown:function(a){e.AmRectangularChart.base.handleMouseDown.call(this,a);var b=this.chartCursor;b&&b.handleMouseDown&&!this.rolledOverZB&&b.handleMouseDown(a)},update:function(){e.AmRectangularChart.base.update.call(this),this.chartCursor&&this.chartCursor.update&&this.chartCursor.update()},handleScrollbarValueZoom:function(a){this.relativeZoomValueAxes(a.target.valueAxes,a.relativeStart,a.relativeEnd),this.zoomAxesAndGraphs()},zoomValueScrollbar:function(a){if(a&&a.enabled){var b=a.valueAxes[0],c=b.relativeStart,d=b.relativeEnd;b.reversed&&(d=1-c,c=1-b.relativeEnd),a.percentZoom(c,d)}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var b,a=this.valueAxes;for(b=0;b<a.length;b++)a[b].zoom(this.start,this.end);for(a=this.graphs,b=0;b<a.length;b++)a[b].zoom(this.start,this.end);(b=this.chartCursor)&&b.clearSelection(),this.zoomTrendLines()}},handleValueAxisZoomReal:function(a,b){var c=a.relativeStart,d=a.relativeEnd;if(c>d)var e=c,c=d,d=e;this.relativeZoomValueAxes(b,c,d),this.updateAfterValueZoom()},updateAfterValueZoom:function(){this.zoomAxesAndGraphs(),this.zoomScrollbar()},relativeZoomValueAxes:function(a,b,c){if(b=e.fitToBounds(b,0,1),c=e.fitToBounds(c,0,1),b>c){var d=b;b=c,c=d}var d=1/this.maxZoomFactor,g=e.getDecimals(d)+4;if(d>c-b&&(c=b+(c-b)/2,b=c-d/2,c+=d/2),b=e.roundTo(b,g),c=e.roundTo(c,g),d=!1,a){for(g=0;g<a.length;g++){var h=a[g].zoomToRelativeValues(b,c,!0);h&&(d=h)}this.showZB()}return d},addChartCursor:function(a){e.callMethod("destroy",[this.chartCursor]),a&&(this.listenTo(a,"moved",this.handleCursorMove),this.listenTo(a,"zoomed",this.handleCursorZoom),this.listenTo(a,"zoomStarted",this.handleCursorZoomStarted),this.listenTo(a,"panning",this.handleCursorPanning),this.listenTo(a,"onHideCursor",this.handleCursorHide)),this.chartCursor=a},handleCursorChange:function(){},handleCursorMove:function(a){var b,c=this.valueAxes;for(b=0;b<c.length;b++)a.panning||c[b].showBalloon(a.x,a.y)},handleCursorZoom:function(a){if(this.skipZoomed)this.skipZoomed=!1;else{var b=this.startX0,c=this.endX0,d=this.endY0,e=this.startY0,h=a.startX,f=a.endX,k=a.startY,m=a.endY;this.startX0=this.endX0=this.startY0=this.endY0=NaN,this.handleCursorZoomReal(b+h*(c-b),b+f*(c-b),e+k*(d-e),e+m*(d-e),a)}},handleCursorHide:function(){var a,b=this.valueAxes;for(a=0;a<b.length;a++)b[a].hideBalloon();for(b=this.graphs,a=0;a<b.length;a++)b[a].hideBalloonReal()}})}(),function(){var e=window.AmCharts;e.AmXYChart=e.Class({inherits:e.AmRectangularChart,construct:function(a){this.type="xy",e.AmXYChart.base.construct.call(this,a),this.cname="AmXYChart",this.theme=a,this.createEvents("zoomed"),e.applyTheme(this,a,this.cname)},initChart:function(){e.AmXYChart.base.initChart.call(this),this.dataChanged&&this.updateData(),this.drawChart(),!this.marginsUpdated&&this.autoMargins&&(this.marginsUpdated=!0,this.measureMargins());var a=this.marginLeftReal,b=this.marginTopReal,c=this.plotAreaWidth,d=this.plotAreaHeight;this.graphsSet.clipRect(a,b,c,d),this.bulletSet.clipRect(a,b,c,d),this.trendLinesSet.clipRect(a,b,c,d),this.drawGraphs=!0,this.showZB()},prepareForExport:function(){var a=this.bulletSet;a.clipPath&&this.container.remove(a.clipPath)},createValueAxes:function(){var a=[],b=[];this.xAxes=a,this.yAxes=b;var d,g,c=this.valueAxes;for(g=0;g<c.length;g++){d=c[g];var h=d.position;("top"==h||"bottom"==h)&&(d.rotate=!0),d.setOrientation(d.rotate),h=d.orientation,"V"==h&&b.push(d),"H"==h&&a.push(d)}for(0===b.length&&(d=new e.ValueAxis(this.theme),d.rotate=!1,d.setOrientation(!1),c.push(d),b.push(d)),0===a.length&&(d=new e.ValueAxis(this.theme),d.rotate=!0,d.setOrientation(!0),c.push(d),a.push(d)),g=0;g<c.length;g++)this.processValueAxis(c[g],g);for(a=this.graphs,g=0;g<a.length;g++)this.processGraph(a[g],g)},drawChart:function(){e.AmXYChart.base.drawChart.call(this);var a=this.chartData;0<this.realWidth&&0<this.realHeight&&(e.ifArray(a)?(this.chartScrollbar&&this.updateScrollbars(),this.zoomChart()):this.cleanChart(),(a=this.scrollbarH)&&(this.hideXScrollbar?(a&&a.destroy(),this.scrollbarH=null):a.draw()),(a=this.scrollbarV)&&(this.hideYScrollbar?(a.destroy(),this.scrollbarV=null):a.draw()),this.zoomScrollbar(),(!this.autoMargins||this.marginsUpdated)&&(this.dispDUpd(),this.chartCreated=!0))},cleanChart:function(){e.callMethod("destroy",[this.valueAxes,this.graphs,this.scrollbarV,this.scrollbarH,this.chartCursor])},zoomChart:function(){this.zoomObjects(this.valueAxes),this.zoomObjects(this.graphs),this.zoomTrendLines(),this.prevPlotAreaWidth=this.plotAreaWidth,this.prevPlotAreaHeight=this.plotAreaHeight},zoomObjects:function(a){var c,d,b=a.length;for(c=0;b>c;c++)d=a[c],d.zoom(0,this.chartData.length-1)},updateData:function(){this.parseData();var f,k,a=this.chartData,b=a.length-1,c=this.graphs,d=this.dataProvider,e=-(1/0),h=1/0;if(d){for(f=0;f<c.length;f++)if(k=c[f],k.data=a,k.zoom(0,b),k=k.valueField){var m;for(m=0;m<d.length;m++)if(null!==l){var l=Number(d[m][k]);l>e&&(e=l),h>l&&(h=l)}}for(isNaN(this.minValue)||(h=this.minValue),isNaN(this.maxValue)||(e=this.maxValue),f=0;f<c.length;f++)k=c[f],k.maxValue=e,k.minValue=h;(a=this.chartCursor)&&(a.type="crosshair",a.valueBalloonsEnabled=!1),this.dataChanged=!1,this.dispatchDataUpdated=!0}},processValueAxis:function(a){a.chart=this,a.minMaxField="H"==a.orientation?"x":"y",a.min=NaN,a.max=NaN},processGraph:function(a){e.isString(a.xAxis)&&(a.xAxis=this.getValueAxisById(a.xAxis)),e.isString(a.yAxis)&&(a.yAxis=this.getValueAxisById(a.yAxis)),a.xAxis||(a.xAxis=this.xAxes[0]),a.yAxis||(a.yAxis=this.yAxes[0]),a.valueAxis=a.yAxis},parseData:function(){e.AmXYChart.base.parseData.call(this),this.chartData=[];var d,a=this.dataProvider,b=this.valueAxes,c=this.graphs;if(a)for(d=0;d<a.length;d++){var k,g={axes:{},x:{},y:{}},h=this.dataDateFormat,f=a[d];for(k=0;k<b.length;k++){var m=b[k].id;g.axes[m]={},g.axes[m].graphs={};var l;for(l=0;l<c.length;l++){var p=c[l],q=p.id;if(p.xAxis.id==m||p.yAxis.id==m){var r={};r.serialDataItem=g,r.index=d;var t={},n=f[p.valueField];null!==n&&(n=Number(n),isNaN(n)||(t.value=n)),n=f[p.xField],null!==n&&("date"==p.xAxis.type&&(n=e.getDate(f[p.xField],h).getTime()),n=Number(n),isNaN(n)||(t.x=n)),n=f[p.yField],null!==n&&("date"==p.yAxis.type&&(n=e.getDate(f[p.yField],h).getTime()),n=Number(n),isNaN(n)||(t.y=n)),n=f[p.errorField],null!==n&&(n=Number(n),isNaN(n)||(t.error=n)),r.values=t,this.processFields(p,r,f),r.serialDataItem=g,r.graph=p,g.axes[m].graphs[q]=r}}}this.chartData[d]=g}this.start=0,this.end=this.chartData.length-1},formatString:function(a,b,c){var d=b.graph,g=d.numberFormatter;g||(g=this.nf);var h,f;return"date"==b.graph.xAxis.type&&(h=e.formatDate(new Date(b.values.x),d.dateFormat,this),f=RegExp("\\[\\[x\\]\\]","g"),a=a.replace(f,h)),"date"==b.graph.yAxis.type&&(h=e.formatDate(new Date(b.values.y),d.dateFormat,this),f=RegExp("\\[\\[y\\]\\]","g"),a=a.replace(f,h)),a=e.formatValue(a,b.values,["value","x","y"],g),-1!=a.indexOf("[[")&&(a=e.formatDataContextValue(a,b.dataContext)),a=e.AmXYChart.base.formatString.call(this,a,b,c)},addChartScrollbar:function(a){if(e.callMethod("destroy",[this.chartScrollbar,this.scrollbarH,this.scrollbarV]),a){this.chartScrollbar=a,this.scrollbarHeight=a.scrollbarHeight;var b="backgroundColor backgroundAlpha selectedBackgroundColor selectedBackgroundAlpha scrollDuration resizeEnabled hideResizeGrips scrollbarHeight updateOnReleaseOnly".split(" ");if(!this.hideYScrollbar){var c=new e.ChartScrollbar(this.theme);c.skipEvent=!0,c.chart=this,this.listenTo(c,"zoomed",this.handleScrollbarValueZoom),e.copyProperties(a,c,b),c.rotate=!0,this.scrollbarV=c}this.hideXScrollbar||(c=new e.ChartScrollbar(this.theme),c.skipEvent=!0,c.chart=this,this.listenTo(c,"zoomed",this.handleScrollbarValueZoom),e.copyProperties(a,c,b),c.rotate=!1,this.scrollbarH=c)}},updateTrendLines:function(){var b,a=this.trendLines;for(b=0;b<a.length;b++){var c=a[b],c=e.processObject(c,e.TrendLine,this.theme);a[b]=c,c.chart=this;var d=c.valueAxis;e.isString(d)&&(c.valueAxis=this.getValueAxisById(d)),d=c.valueAxisX,e.isString(d)&&(c.valueAxisX=this.getValueAxisById(d)),c.id||(c.id="trendLineAuto"+b+"_"+(new Date).getTime()),c.valueAxis||(c.valueAxis=this.yAxes[0]),c.valueAxisX||(c.valueAxisX=this.xAxes[0])}},updateMargins:function(){e.AmXYChart.base.updateMargins.call(this);var a=this.scrollbarV;a&&(this.getScrollbarPosition(a,!0,this.yAxes[0].position),this.adjustMargins(a,!0)),(a=this.scrollbarH)&&(this.getScrollbarPosition(a,!1,this.xAxes[0].position),this.adjustMargins(a,!1))},updateScrollbars:function(){e.AmXYChart.base.updateScrollbars.call(this);var a=this.scrollbarV;a&&(this.updateChartScrollbar(a,!0),a.valueAxes=this.yAxes,a.gridAxis||(a.gridAxis=this.yAxes[0])),(a=this.scrollbarH)&&(this.updateChartScrollbar(a,!1),a.valueAxes=this.xAxes,a.gridAxis||(a.gridAxis=this.xAxes[0]))},removeChartScrollbar:function(){e.callMethod("destroy",[this.scrollbarH,this.scrollbarV]),this.scrollbarV=this.scrollbarH=null},handleReleaseOutside:function(a){e.AmXYChart.base.handleReleaseOutside.call(this,a),e.callMethod("handleReleaseOutside",[this.scrollbarH,this.scrollbarV])},update:function(){e.AmXYChart.base.update.call(this),this.scrollbarH&&this.scrollbarH.update&&this.scrollbarH.update(),this.scrollbarV&&this.scrollbarV.update&&this.scrollbarV.update()},zoomScrollbar:function(){this.zoomValueScrollbar(this.scrollbarV),this.zoomValueScrollbar(this.scrollbarH)},handleCursorZoomReal:function(a,b,c,d){isNaN(a)||isNaN(b)||this.relativeZoomValueAxes(this.xAxes,a,b),isNaN(c)||isNaN(d)||this.relativeZoomValueAxes(this.yAxes,c,d),this.updateAfterValueZoom()},handleCursorZoomStarted:function(){if(this.xAxes){var a=this.xAxes[0];this.startX0=a.relativeStart,this.endX0=a.relativeEnd,a.reversed&&(this.startX0=1-a.relativeEnd,this.endX0=1-a.relativeStart)}this.yAxes&&(a=this.yAxes[0],this.startY0=a.relativeStart,this.endY0=a.relativeEnd,a.reversed&&(this.startY0=1-a.relativeEnd,this.endY0=1-a.relativeStart))},updateChartCursor:function(){e.AmXYChart.base.updateChartCursor.call(this);var a=this.chartCursor;if(a){a.valueLineEnabled=!0,a.categoryLineAxis||(a.categoryLineAxis=this.xAxes[0]);var b=this.valueAxis;if(a.valueLineBalloonEnabled){var c=a.categoryBalloonAlpha,d=a.categoryBalloonColor,g=a.color;void 0===d&&(d=a.cursorColor);for(var h=0;h<this.valueAxes.length;h++){var b=this.valueAxes[h],f=b.balloon;f||(f={}),f=e.extend(f,this.balloon,!0),f.fillColor=d,f.balloonColor=d,f.fillAlpha=c,f.borderColor=d,f.color=g,b.balloon=f}}else for(c=0;c<this.valueAxes.length;c++)b=this.valueAxes[c],b.balloon&&(b.balloon=null);a.zoomable&&(this.hideYScrollbar||(a.vZoomEnabled=!0),this.hideXScrollbar||(a.hZoomEnabled=!0))}},handleCursorPanning:function(a){var d,b=a.deltaX,c=a.delta2X;isNaN(c)&&(c=b,d=!0);var g=this.endX0,h=this.startX0,f=g-h,c=g-f*c,g=f;d||(g=0),b=e.fitToBounds(h-f*b,0,1-g),c=e.fitToBounds(c,g,1),this.relativeZoomValueAxes(this.xAxes,b,c),f=a.deltaY,a=a.delta2Y,isNaN(a)&&(a=f,d=!0),c=this.endY0,b=this.startY0,h=c-b,f=c+h*f,c=h,d||(c=0),d=e.fitToBounds(b+h*a,0,1-c),f=e.fitToBounds(f,c,1),this.relativeZoomValueAxes(this.yAxes,d,f),this.updateAfterValueZoom()},handleValueAxisZoom:function(a){this.handleValueAxisZoomReal(a,"V"==a.valueAxis.orientation?this.yAxes:this.xAxes)},showZB:function(){var a,b=this.valueAxes;if(b)for(var c=0;c<b.length;c++){var d=b[c];0!==d.relativeStart&&(a=!0),1!=d.relativeEnd&&(a=!0)}e.AmXYChart.base.showZB.call(this,a)}})}()},{}],65:[function(require,module,exports){!function(mod){if("object"==typeof exports&&"object"==typeof module)module.exports=mod();else{if("function"==typeof define&&define.amd)return define([],mod);(this||window).browserKeymap=mod()}}(function(){"use strict";function keyName(event){if("keypress"==event.type)return"'"+String.fromCharCode(event.charCode)+"'";var base=keyNames[event.keyCode],name=base;return null==name||event.altGraphKey?null:(event.altKey&&"Alt"!=base&&(name="Alt-"+name),event.ctrlKey&&"Ctrl"!=base&&(name="Ctrl-"+name),event.metaKey&&"Cmd"!=base&&(name="Cmd-"+name),event.shiftKey&&"Shift"!=base&&(name="Shift-"+name),name)}function isModifierKey(name){return name=/[^-]*$/.exec(name)[0],"Ctrl"==name||"Alt"==name||"Shift"==name||"Mod"==name}function normalizeKeyName(name){for(var alt,ctrl,shift,cmd,parts=name.split(/-(?!'?$)/),result=parts[parts.length-1],i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))cmd=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)$/i.test(mod))shift=!0;else{if(!/^mod$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);mac?cmd=!0:ctrl=!0}}return alt&&(result="Alt-"+result),ctrl&&(result="Ctrl-"+result),cmd&&(result="Cmd-"+result),shift&&(result="Shift-"+result),result}function Keymap(keys,options){if(this.options=options||{},this.bindings=Object.create(null),keys)for(var keyname in keys)Object.prototype.hasOwnProperty.call(keys,keyname)&&this.addBinding(keyname,keys[keyname])}for(var mac="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os?"darwin"==os.platform():!1,keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},i=0;10>i;i++)keyNames[i+48]=keyNames[i+96]=String(i);for(var i=65;90>=i;i++)keyNames[i]=String.fromCharCode(i);for(var i=1;12>=i;i++)keyNames[i+111]=keyNames[i+63235]="F"+i;return Keymap.prototype={normalize:function(name){return this.options.multi!==!1?name.split(/ +(?!\'$)/).map(normalizeKeyName):[normalizeKeyName(name)]},addBinding:function(keyname,value){for(var keys=this.normalize(keyname),i=0;i<keys.length;i++){var name=keys.slice(0,i+1).join(" "),val=i==keys.length-1?value:"...",prev=this.bindings[name];if(prev){if(prev!=val)throw new Error("Inconsistent bindings for "+name)}else this.bindings[name]=val}},removeBinding:function(keyname){for(var keys=this.normalize(keyname),i=keys.length-1;i>=0;i--){var name=keys.slice(0,i).join(" "),val=this.bindings[name];if("..."==val&&!this.unusedMulti(name))break;val&&delete this.bindings[name]}},unusedMulti:function(name){for(var binding in this.bindings)if(binding.length>name&&0==binding.indexOf(name)&&" "==binding.charAt(name.length))return!1;return!0},lookup:function(key,context){return this.options.call?this.options.call(key,context):this.bindings[key]},constructor:Keymap},Keymap.keyName=keyName,Keymap.isModifierKey=isModifierKey,Keymap.normalizeKeyName=normalizeKeyName,Keymap})},{}],66:[function(require,module,exports){"use strict";var _edit=require("prosemirror/dist/edit");require("prosemirror/dist/menu/tooltipmenu"),require("prosemirror/dist/menu/menubar"),require("prosemirror/dist/inputrules/autoinput");var _menu=require("prosemirror/dist/menu/menu"),_widgets=require("./widgets"),_utils=require("./utils"),_schema=require("./schema");window.pm=new _edit.ProseMirror({place:document.querySelector("#editor"),menuBar:{"float":!0,content:[_menu.inlineGroup,[_menu.blockGroup,_menu.textblockMenu],_widgets.alignGroup,[_widgets.contentInsertMenu,_widgets.questionInsertMenu],_menu.historyGroup]},schema:_schema.widgetSchema,commands:_schema.commands,autoInput:!0,doc:document.querySelector("#content"),docFormat:"dom"});(0,_utils.defineFileHandler)(function(files){console.log(files)})},{"./schema":67,"./utils":68,"./widgets":81,"prosemirror/dist/edit":11,"prosemirror/dist/inputrules/autoinput":24,"prosemirror/dist/menu/menu":27,"prosemirror/dist/menu/menubar":28,"prosemirror/dist/menu/tooltipmenu":29}],67:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.commands=exports.widgetSchema=void 0;var _edit=require("prosemirror/dist/edit"),_dom=require("prosemirror/dist/dom"),_model=require("prosemirror/dist/model"),_widgets=require("./widgets"),_menu=require("prosemirror/dist/menu/menu"),widgetSpec=new _model.SchemaSpec({doc:_model.Doc,blockquote:_model.BlockQuote,ordered_list:_model.OrderedList,bullet_list:_model.BulletList,list_item:_model.ListItem,paragraph:_model.Paragraph,heading:_model.Heading,text:_model.Text,hard_break:_model.HardBreak,input:_widgets.Input,checkbox:_widgets.CheckBox,radiobutton:_widgets.RadioButton,select:_widgets.Select,textfield:_widgets.TextField,textarea:_widgets.TextArea,question:_widgets.Question,textbox:_widgets.TextBox,choice:_widgets.Choice,multiplechoice:_widgets.MultipleChoice,scaledisplay:_widgets.ScaleDisplay,scale:_widgets.Scale,checkitem:_widgets.CheckItem,checklist:_widgets.CheckList,shortanswer:_widgets.ShortAnswer,essay:_widgets.Essay,selection:_widgets.Selection,horizontal_rule:_model.HorizontalRule,image:_widgets.Image,inlinemath:_widgets.InlineMath,blockmath:_widgets.BlockMath,website:_widgets.Website,carryforward:_widgets.CarryForward,spreadsheet:_widgets.SpreadSheet,graph:_widgets.Graph,leftalign:_widgets.LeftAlign,centeralign:_widgets.CenterAlign,rightalign:_widgets.RightAlign},{em:_model.EmMark,strong:_model.StrongMark,link:_model.LinkMark,code:_model.CodeMark,underline:_widgets.UnderlineMark,strikethrough:_widgets.StrikeThroughMark});exports.widgetSchema=new _model.Schema(widgetSpec);_menu.textblockMenu.options.label="Format";exports.commands=_edit.CommandSet["default"].update({selectParentNode:{menu:null},lift:{menu:null},"horizontal_rule:insert":{menu:{group:"content",rank:71,display:{type:"label",label:"Horizontal Rule"}}},"code:toggle":{menu:{group:"textblock",rank:99,display:{type:"label",label:"Code"}}}});(0,_dom.insertCSS)('\n		\n.ProseMirror {\n	width: 800px;\n	min-height: 200px;\n}\n\n.ProseMirror-menu {\n	background: white;\n	color: black;\n}\n\ndiv.ProseMirror-dropdown-menu {\n  position: absolute;\n  background: white;\n  color: black;\n  border-radius: 6px;\n  border: 1px solid silver;\n  padding: 2px 2px;\n  z-index: 15;\n}\n\ndiv.ProseMirror-dropdown-menu {\n  cursor: pointer;\n  padding: 0 1em 0 2px;\n}\n\ndiv.ProseMirror-menubar-inner {\n  background: linear-gradient(to bottom, white, #0191C8);\n}\n\ndiv.ProseMirror-menu form {\n	background: linear-gradient(to bottom, white, #0191C8);\n	width: 300px;\n}\n\ndiv.ProseMirror-menu form select {\n	width: 100px;\n	background: white;\n}\n\ndiv.ProseMirror-menu input[type = "text"] {\n	background: white;\n}\n\n')},{"./widgets":81,"prosemirror/dist/dom":1,"prosemirror/dist/edit":11,"prosemirror/dist/menu/menu":27,"prosemirror/dist/model":34}],68:[function(require,module,exports){"use strict";function defParser(type,tag,cls){type.register("parseDOM",tag,{rank:25,parse:function(dom,state){return dom.classList.contains(cls)?void state.insert(type):!1}})}function getPosInParent(pm,pos,child){var i=0,parent=pm.doc.path(pos.path);return parent.forEach(function(node,start){i=node==child?start:0}),new _model.Pos(pos.path,i)}function nodeBefore(pm,pos){for(var before=void 0,cut=void 0,i=pos.path.length-1;!before&&i>=0;i--)pos.path[i]>0&&(cut=pos.shorten(i),before=pm.doc.path(cut.path).child(cut.offset-1));return{before:before,at:new _model.Pos(cut.path,cut.offset-1)}}function insertWidget(pm,pos,w){for(;;){if(0==pos.depth){pm.tr.insert(pos,w).apply(pm.apply.scroll);var side=getPosInParent(pm,pos,w),p=new _model.Pos(side.toPath(),0);return w.firstChild&&w.firstChild.isTextblock&&pm.setTextSelection(new _model.Pos(p.toPath(),0)),!0}pos=pos.shorten(null,1)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectedNodeAttr=exports.defParamsClick=exports.nameTitle=exports.namePattern=exports.defineFileHandler=exports.widgetParamHandler=void 0;var _params=require("./params");Object.defineProperty(exports,"widgetParamHandler",{enumerable:!0,get:function(){return _params.widgetParamHandler}}),Object.defineProperty(exports,"defineFileHandler",{enumerable:!0,get:function(){return _params.defineFileHandler}}),Object.defineProperty(exports,"namePattern",{enumerable:!0,get:function(){return _params.namePattern}}),Object.defineProperty(exports,"nameTitle",{enumerable:!0,get:function(){return _params.nameTitle}}),Object.defineProperty(exports,"defParamsClick",{enumerable:!0,get:function(){return _params.defParamsClick}}),Object.defineProperty(exports,"selectedNodeAttr",{enumerable:!0,get:function(){return _params.selectedNodeAttr}}),exports.defParser=defParser,exports.getPosInParent=getPosInParent,exports.nodeBefore=nodeBefore,exports.insertWidget=insertWidget;var _model=require("prosemirror/dist/model");require("prosemirror/dist/edit/selection")},{"./params":69,"prosemirror/dist/edit/selection":17,"prosemirror/dist/model":34}],69:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function defineFileHandler(handler){fhandler=handler}function getLastClicked(){return lastClicked}function openWidgetPrompt(wpp,options){var close=function close(){wpp.pm.off("interaction",close),dialog.parentNode&&(dialog.parentNode.removeChild(dialog),options&&options.onClose&&options.onClose())},submit=function(){var params=wpp.values();params&&(wpp.command.exec(wpp.pm,params),close())};wpp.pm.on("interaction",close);var save=(0,_dom.elt)("input",{name:"save",type:"button",value:"Save"});save.addEventListener("mousedown",function(e){submit()});var cancel=(0,_dom.elt)("input",{name:"cancel",type:"button",value:"Cancel"});cancel.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),close()});var buttons=(0,_dom.elt)("div",{"class":"widgetButtons"},save,cancel);wpp.form=(0,_dom.elt)("form",{"class":"widgetForm"},(0,_dom.elt)("h4",null,wpp.command.label+" Settings"),wpp.fields.map(function(f){return(0,_dom.elt)("div",null,f)}),buttons),wpp.form.addEventListener("keypress",function(e){13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),save.click())});var dialog=(0,_dom.elt)("div",null,(0,_dom.elt)("div",{"class":"widgetDialog"}),wpp.form);return wpp.pm.wrapper.appendChild(dialog),{close:close}}function selectClickedNode(pm,e){var pos=(0,_dompos.selectableNodeAbove)(pm,e.target,{left:e.clientX,top:e.clientY},!0);if(!pos)return pm.sel.fastPoll();var _pm$selection=pm.selection,node=_pm$selection.node,from=_pm$selection.from;if(node&&pos.depth>=from.depth&&0==pos.shorten(from.depth).cmp(from)){if(0==from.depth)return pm.sel.fastPoll();pos=from.shorten()}pm.setNodeSelection(pos),lastClicked=e.target}function defParamsClick(type,cmdname){var spots=arguments.length<=2||void 0===arguments[2]?["topright"]:arguments[2];type.prototype.handleClick=function(pm,e,path,node){selectClickedNode(pm,e);var spotClicked=!1;if(spots.forEach(function(loc){var r=e.target.getBoundingClientRect();"all"==loc?spotClicked=!0:"topright"==loc?spotClicked=spotClicked||e.clientX>r.right-16&&e.clientY<r.top+16:"topleft"==loc?spotClicked=spotClicked||e.clientX<r.left+16&&e.clientY<r.top+16:"bottomright"==loc&&(spotClicked=spotClicked||e.clientX>r.right-32&&e.clientY>r.bottom-32)}),spotClicked){var cmd=pm.commands[cmdname];return cmd?(cmd.exec(pm),!0):!1}}}function selectedNodeAttr(pm,type,name){var node=pm.selection.node;return node&&node.type==type?node.attrs[name]:void 0}function FileDragHover(e){e.stopPropagation(),e.preventDefault(),e.target.className="dragover"==e.type?"hover":""}function buildUploadForm(pm,field){var legend=(0,_dom.elt)("h4",null,"File Upload"),label=((0,_dom.elt)("input",{type:"hidden",id:"MAX_FILE_SIZE",name:"MAX_FILE_SIZE",value:"300000"}),(0,_dom.elt)("label",{"for":"fileselect"},"File to upload:")),fileselect=(0,_dom.elt)("input",{id:"fileselect",type:"file",name:"fileselect[]",multiple:"multiple"}),filedrag=(0,_dom.elt)("div",{id:"filedrag"},"or drop files here"),cancel=(0,_dom.elt)("input",{type:"button",value:"Cancel"});cancel.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),pm.wrapper.removeChild(form)});var saveFile=function(e){e.preventDefault(),e.stopPropagation(),FileDragHover(e);var files=e.target.files||e.dataTransfer.files;files&&(field.value=files[0].name),fhandler&&fhandler(files),pm.wrapper.removeChild(form)};fileselect.addEventListener("change",saveFile);var xhr=new XMLHttpRequest;xhr.upload&&(filedrag.addEventListener("dragover",FileDragHover),filedrag.addEventListener("dragleave",FileDragHover),filedrag.addEventListener("drop",saveFile),filedrag.style.display="block");var form=(0,_dom.elt)("form",{id:"upload",enctype:"multipart/form-data"},legend,(0,_dom.elt)("div",null,label,fileselect,filedrag),(0,_dom.elt)("div",null,cancel));pm.wrapper.appendChild(form)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.nameTitle=exports.namePattern=void 0,exports.defineFileHandler=defineFileHandler,exports.getLastClicked=getLastClicked,exports.defParamsClick=defParamsClick,exports.selectedNodeAttr=selectedNodeAttr;var _dom=require("prosemirror/dist/dom"),_prompt=require("prosemirror/dist/ui/prompt"),_edit=require("prosemirror/dist/edit"),_dompos=require("prosemirror/dist/edit/dompos"),fhandler=(require("prosemirror/dist/util/error"),null),lastClicked=null,WidgetParamPrompt=(exports.namePattern="[A-Za-z0-9_-]{1,10}",exports.nameTitle="letters,digits, -, _ (max:10)",function(_ParamPrompt){function WidgetParamPrompt(){return _classCallCheck(this,WidgetParamPrompt),_possibleConstructorReturn(this,Object.getPrototypeOf(WidgetParamPrompt).apply(this,arguments))}return _inherits(WidgetParamPrompt,_ParamPrompt),
_createClass(WidgetParamPrompt,[{key:"prompt",value:function(){var _this2=this;return openWidgetPrompt(this,{onClose:function(){return _this2.close()}})}}]),WidgetParamPrompt}(_prompt.ParamPrompt));(0,_edit.defineOption)("commandParamPrompt",WidgetParamPrompt),["text","number","range","email","url","date"].map(function(type){return _prompt.ParamPrompt.prototype.paramTypes[type]={render:function(param,value){var field=(0,_dom.elt)("input",{type:type,placeholder:param.label,value:value,required:"required",autocomplete:"off"}),label=param.name?param.name:param.label;field.setAttribute("name",label);var opt=param.options;if(opt)for(var prop in opt)field.setAttribute(prop,opt[prop]);var fieldLabel=(0,_dom.elt)("label",{"for":label},label);return(0,_dom.elt)("div",{"class":"widgetField"},fieldLabel,field)},validate:function(dom){var input=dom.querySelector("input");return input.checkValidity()?null:input.name+": "+input.validationMessage},read:function(dom){var input=dom.querySelector("input");return input?input.value:input}}}),_prompt.ParamPrompt.prototype.paramTypes.file={render:function(param,value){var field=(0,_dom.elt)("input",{type:"text",readonly:!0,placeholder:param.label,value:value,required:"required",autocomplete:"off",required:!0}),label=param.name?param.name:param.label;field.setAttribute("name",label);var opt=param.options;if(opt)for(var prop in opt)field.setAttribute(prop,opt[prop]);var fieldLabel=(0,_dom.elt)("label",{"for":label},label),uploadButton=(0,_dom.elt)("input",{name:"upload",type:"button",value:"Upload"});return uploadButton.addEventListener("click",function(e){buildUploadForm(pm,field)}),(0,_dom.elt)("div",{"class":"widgetField"},fieldLabel,field,uploadButton)},validate:function(dom){var input=dom.querySelector("input");return input.checkValidity()?null:input.name+": "+input.validationMessage},read:function(dom){var input=dom.querySelector("input");return input?input.value:input}},_prompt.ParamPrompt.prototype.paramTypes.select={render:function(param,value){var options=param.options.call?param.options(this):param.options,field=(0,_dom.elt)("select",null,options.map(function(o){return(0,_dom.elt)("option",{value:o.value,selected:o.value==value?"true":null},o.label)}));field.setAttribute("required","required");var label=param.name?param.name:param.label;field.setAttribute("name",label);var fieldLabel=(0,_dom.elt)("label",{"for":name},label);return(0,_dom.elt)("div",{"class":"widgetField"},fieldLabel,field)},validate:function(dom){var select=dom.querySelector("select");return select.checkValidity()?null:select.name+": "+select.validationMessage},read:function(dom){var select=dom.querySelector("select");return select?select.value:select}},(0,_dom.insertCSS)('\n\n.widgetDialog {\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	background: #FFF;\n	z-index: 8888;\n	opacity:0.7;\n}\n\n.widgetForm {\n	font-family: Helvetica, Arial, Sans-Serif;\n	font-size: 80%;\n	background: white;\n	position: absolute;\n	top: 10px;\n	left: 10px;\n	z-index: 9999;\n	display: block;\n	border-radius: 6px;\n	border: 1px solid #AAA;\n	padding: 4px;\n}\n\n.widgetForm h4 {\n	margin: 0;\n}\n\n.widgetField {\n	display: block;\n	padding: 2px;\n}\n\n.widgetField label {\n	width: 80px;\n	color: black;\n	display: inline-block;\n	padding: 2px;\n	float: left;\n}\n\n.widgetField input {\n	margin: 2px;\n	display: inline;\n}\n\n.widgetField input[type = "number"] {\n	width: 60px;\n	margin: 2px;\n	display: inline;\n}\n\n.widgetField input[type = "button"] {\n	margin: 5px;\n}\n\n.widgetFieldName {\n	color: black;\n	display: inline;\n	padding: 4px;\n}\n\n.widgetButtons {\n	text-align: center;\n	display: inline-block;\n	white-space: nowrap;\n}\n\n.widgetButtons input {\n	margin: 5px;\n}\n\n#upload {\n	position: absolute;\n	top: 40px;\n	left: 40px;\n	padding: 5px;\n	border: 1px solid #AAA;\n	border-radius: 6px;\n	background: white;\n	z-index: 10000;\n	display: block;\n}\n\n#upload input {\n	margin: 5px;\n}\n\n#upload h4 {\n	margin: 0;\n}\n\n#filedrag {\n	display: none;\n	font-weight: bold;\n	text-align: center;\n	padding: 1em 0;\n	margin: 1em 0;\n	color: #555;\n	border: 2px dashed #555;\n	border-radius: 6px;\n	cursor: default;\n}\n\n#filedrag:hover {\n	color: #f00;\n	border-color: #f00;\n	border-style: solid;\n	box-shadow: inset 0 3px 4px #888;\n}\n\n.ProseMirror-invalid {\n	  white-space: nowrap;\n	  font-size: 80%;\n	  background: white;\n	  border: 1px solid red;\n	  border-radius: 4px;\n	  padding: 5px 10px;\n	  position: absolute;\n	  min-width: 10em;\n	}\n\n')},{"prosemirror/dist/dom":1,"prosemirror/dist/edit":11,"prosemirror/dist/edit/dompos":8,"prosemirror/dist/ui/prompt":49,"prosemirror/dist/util/error":52}],70:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockMath=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),BlockMath=exports.BlockMath=function(_Block){function BlockMath(){return _classCallCheck(this,BlockMath),_possibleConstructorReturn(this,Object.getPrototypeOf(BlockMath).apply(this,arguments))}return _inherits(BlockMath,_Block),_createClass(BlockMath,[{key:"attrs",get:function(){return{tex:new _model.Attribute({"default":""})}}},{key:"contains",get:function(){return null}}]),BlockMath}(_model.Block);(0,_utils.defParser)(BlockMath,"div","widgets-blockmath"),BlockMath.prototype.serializeDOM=function(node){return node.rendered?node.rendered=node.rendered.cloneNode(!0):(node.rendered=(0,_dom.elt)("div",{"class":"widgets-blockmath widgets-edit"},"\\["+node.attrs.tex+"\\]"),MathJax.Hub.Queue(["Delay",MathJax.Callback,100],["Typeset",MathJax.Hub,node.rendered])),node.rendered},BlockMath.register("command","insert",{derive:{params:[{name:"Latex",attr:"tex",label:"Latex Expression",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"tex")}}]},label:"BlockMath",menu:{group:"content",rank:72,display:{type:"label",label:"Block Math"}}}),(0,_utils.defParamsClick)(BlockMath,"blockmath:insert"),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-blockmath {\n	display: inline-block;\n}\n}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],71:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getCarryOptions(names){return names.map(function(w){return{value:w,label:w}})}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CarryForward=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),CarryForward=exports.CarryForward=function(_Inline){function CarryForward(){return _classCallCheck(this,CarryForward),_possibleConstructorReturn(this,Object.getPrototypeOf(CarryForward).apply(this,arguments))}return _inherits(CarryForward,_Inline),_createClass(CarryForward,[{key:"attrs",get:function(){return{name:new _model.Attribute,model:new _model.Attribute({"default":"user_response"}),type:new _model.Attribute({"default":"carry_forward"}),"class":new _model.Attribute({"default":"widgets-carryforward widgets-edit"})}}}]),CarryForward}(_model.Inline);(0,_utils.defParser)(CarryForward,"thinkspace","widgets-carryforward"),CarryForward.prototype.serializeDOM=function(node){return(0,_dom.elt)("thinkspace",node.attrs,(0,_dom.elt)("img",{src:"icons/forward.png",width:16,height:16,title:"Carry forward "+node.attrs.name}))},CarryForward.register("command","insert",{derive:{params:[{name:"Name",attr:"name",label:"Element name",type:"select",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:function(){return getCarryOptions(["test1","test2"])}}]},label:"CarryForward",menu:{group:"insert",rank:73,display:{type:"label",label:"Carry Forward"}}}),(0,_utils.defParamsClick)(CarryForward,"carryforward:insert",["all"]),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-carryforward img:hover {\n	cursor: pointer;\n}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],72:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getJSONData(id,url){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){var data=JSON.parse(xmlhttp.responseText);AmCharts.makeChart(id,data)}},xmlhttp.open("GET",url,!0),xmlhttp.send()}function getGraphOptions(){return graphs.map(function(w){return{value:w,label:w}})}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Graph=void 0,require("prosemirror/node_modules/amcharts3/amcharts/amcharts"),require("prosemirror/node_modules/amcharts3/amcharts/serial"),require("prosemirror/node_modules/amcharts3/amcharts/gantt"),require("prosemirror/node_modules/amcharts3/amcharts/pie"),require("prosemirror/node_modules/amcharts3/amcharts/funnel"),require("prosemirror/node_modules/amcharts3/amcharts/gauge"),require("prosemirror/node_modules/amcharts3/amcharts/radar"),require("prosemirror/node_modules/amcharts3/amcharts/xy");var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),graphs=["graphs/line.json","graphs/column.json","graphs/pie.json","graphs/gantt.json"],Graph=exports.Graph=function(_Block){function Graph(){return _classCallCheck(this,Graph),_possibleConstructorReturn(this,Object.getPrototypeOf(Graph).apply(this,arguments))}return _inherits(Graph,_Block),_createClass(Graph,[{key:"attrs",get:function(){return{data:new _model.Attribute({"default":""}),size:new _model.Attribute({"default":"small"})}}},{key:"contains",get:function(){return null}}]),Graph}(_model.Block);(0,_utils.defParser)(Graph,"div","widgets-graph"),Graph.prototype.serializeDOM=function(node){return node.rendered?node.rendered=node.rendered.cloneNode(!0):(node.rendered=(0,_dom.elt)("div",{"class":"widgets-graph widgets-edit widgets-graph-"+node.attrs.size,id:"amchart"}),getJSONData("amchart",node.attrs.data)),node.rendered},Graph.register("command","insert",{derive:{params:[{name:"Data URL",attr:"data",label:"Data URL",type:"select",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"data")},options:function(){return getGraphOptions()}},{name:"Size",attr:"size",label:"Size",type:"select","default":"small",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"size")},options:[{value:"small",label:"small"},{value:"medium",label:"medium"},{value:"large",label:"large"}]}]},label:"Graph",menu:{group:"content",rank:74,display:{type:"label",label:"Graph"}}}),(0,_utils.defParamsClick)(Graph,"graph:insert"),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-graph {}\n\n.widgets-graph-small {\n	border-radius: 6px;\n	border: 1px solid #DDD;\n	width: 400px;\n    height: 300px;\n	display: inline-block;\n}\n\n.widgets-graph-medium {\n	border-radius: 6px;\n	border: 1px solid #DDD;\n	width: 600px;\n    height: 400px;\n	display: inline-block;\n}\n\n.widgets-graph-large {\n	border-radius: 6px;\n	border: 1px solid #DDD;\n	width: 800px;\n    height: 600px;\n	display: inline-block;\n}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34,"prosemirror/node_modules/amcharts3/amcharts/amcharts":57,"prosemirror/node_modules/amcharts3/amcharts/funnel":58,"prosemirror/node_modules/amcharts3/amcharts/gantt":59,"prosemirror/node_modules/amcharts3/amcharts/gauge":60,"prosemirror/node_modules/amcharts3/amcharts/pie":61,"prosemirror/node_modules/amcharts3/amcharts/radar":62,"prosemirror/node_modules/amcharts3/amcharts/serial":63,"prosemirror/node_modules/amcharts3/amcharts/xy":64}],73:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Image=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),Image=exports.Image=function(_Inline){function Image(){return _classCallCheck(this,Image),_possibleConstructorReturn(this,Object.getPrototypeOf(Image).apply(this,arguments))}return _inherits(Image,_Inline),_createClass(Image,[{key:"attrs",get:function(){return{src:new _model.Attribute,alt:new _model.Attribute,title:new _model.Attribute,"class":new _model.Attribute({"default":"widgets-img widgets-edit"})}}}]),Image}(_model.Inline);(0,_utils.defParser)(Image,"img","widgets-img"),Image.prototype.serializeDOM=function(node,s){return s.renderAs(node,"img",node.attrs)},Image.register("command","insert",{derive:{params:[{name:"File",attr:"src",label:"Image File",type:"file","default":"img.png",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"src")}},{name:"Description",attr:"alt",label:"Description / alternative text",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"alt")}},{name:"Title",attr:"title",label:"Title",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"title")}}]},label:"Image",menu:{group:"insert",rank:70,display:{type:"label",label:"Image"}}}),(0,_utils.defParamsClick)(Image,"image:insert",["all"]),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-img {}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _blockmath=require("./blockmath");Object.defineProperty(exports,"BlockMath",{enumerable:!0,get:function(){return _blockmath.BlockMath}});var _website=require("./website");Object.defineProperty(exports,"Website",{enumerable:!0,get:function(){return _website.Website}});var _inlinemath=require("./inlinemath");Object.defineProperty(exports,"InlineMath",{enumerable:!0,get:function(){return _inlinemath.InlineMath}});var _image=require("./image");Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return _image.Image}});var _spreadsheet=require("./spreadsheet");Object.defineProperty(exports,"SpreadSheet",{enumerable:!0,get:function(){return _spreadsheet.SpreadSheet}});var _carryforward=require("./carryforward");Object.defineProperty(exports,"CarryForward",{enumerable:!0,get:function(){return _carryforward.CarryForward}});var _graph=require("./graph");Object.defineProperty(exports,"Graph",{enumerable:!0,get:function(){return _graph.Graph}}),window.MathJax&&MathJax.Hub.Queue(function(){MathJax.Hub.Config({tex2jax:{displayMath:[["\\[","\\]"]],inlineMath:[["\\(","\\)"]],processEscapes:!0},displayAlign:"left"})})},{"./blockmath":70,"./carryforward":71,"./graph":72,"./image":73,"./inlinemath":75,"./spreadsheet":76,"./website":77}],75:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.InlineMath=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),InlineMath=exports.InlineMath=function(_Inline){function InlineMath(){return _classCallCheck(this,InlineMath),_possibleConstructorReturn(this,Object.getPrototypeOf(InlineMath).apply(this,arguments))}return _inherits(InlineMath,_Inline),_createClass(InlineMath,[{key:"attrs",get:function(){return{tex:new _model.Attribute}}},{key:"contains",get:function(){return null}}]),InlineMath}(_model.Inline);(0,_utils.defParser)(InlineMath,"span","widgets-inlinemath"),InlineMath.prototype.serializeDOM=function(node){return node.rendered?node.rendered=node.rendered.cloneNode(!0):(node.rendered=(0,_dom.elt)("span",{"class":"widgets-inlinemath widgets-edit"}," \\("+node.attrs.tex+"\\) "),MathJax.Hub.Queue(["Delay",MathJax.Callback,100],["Typeset",MathJax.Hub,node.rendered])),node.rendered},InlineMath.register("command","insert",{derive:{params:[{name:"Latex",attr:"tex",label:"Latex Expression",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"tex")}}]},label:"InlineMath",menu:{group:"insert",rank:71,display:{type:"label",label:"Inline Math"}}}),(0,_utils.defParamsClick)(InlineMath,"inlinemath:insert"),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-inlinemath {}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],76:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpreadSheet=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),SpreadSheet=exports.SpreadSheet=function(_Block){function SpreadSheet(){return _classCallCheck(this,SpreadSheet),_possibleConstructorReturn(this,Object.getPrototypeOf(SpreadSheet).apply(this,arguments))}return _inherits(SpreadSheet,_Block),_createClass(SpreadSheet,[{key:"attrs",get:function(){return{data:new _model.Attribute}}},{key:"contains",get:function(){return null}}]),SpreadSheet}(_model.Block);(0,_utils.defParser)(SpreadSheet,"div","widgets-spreadsheet"),SpreadSheet.prototype.serializeDOM=function(node){return node.rendered?node.rendered=node.rendered.cloneNode(!0):(node.rendered=(0,_dom.elt)("div",{"class":"widgets-spreadsheet widgets-edit"}),window.setTimeout(function(){var data=[["","Ford","Volvo","Toyota","Honda"],["2014",10,11,12,13],["2015",20,11,14,13],["2016",30,15,12,13]];new Handsontable(node.rendered,{data:data,minSpareRows:1,rowHeaders:!0,colHeaders:!0,contextMenu:!0})},100)),node.rendered},SpreadSheet.register("command","insert",{derive:{params:[{name:"Data Link",attr:"data",label:"Link to CSV (fixed for demo)",type:"file","default":"cars.csv",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"data")}}]},label:"SpreadSheet",menu:{group:"content",rank:75,display:{type:"label",label:"Spreadsheet"}}}),(0,_utils.defParamsClick)(SpreadSheet,"spreadsheet:insert",["all"]),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-spreadsheet {\n	display: inline-block;\n}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],77:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Website=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),Website=exports.Website=function(_Block){function Website(){return _classCallCheck(this,Website),_possibleConstructorReturn(this,Object.getPrototypeOf(Website).apply(this,arguments))}return _inherits(Website,_Block),_createClass(Website,[{key:"attrs",get:function(){return{src:new _model.Attribute,width:new _model.Attribute({"default":200}),height:new _model.Attribute({"default":200})}}},{key:"contains",get:function(){return null}}]),Website}(_model.Block);(0,_utils.defParser)(Website,"website","widgets-website"),Website.prototype.serializeDOM=function(node,s){return s.renderAs(node,"iframe",{src:node.attrs.src,width:node.attrs.width,height:node.attrs.height,content:"text/html;charset=UTF-8","class":"widgets-website widgets-edit",frameborder:"1",allowfullscreen:"1"})},Website.register("command","insert",{derive:{params:[{name:"URL",attr:"src",label:"Link to website, youTube, Google Maps ...",type:"url",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"src")}},{name:"Width",attr:"width",label:"Width in pixels",type:"number","default":200,prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"width")},options:{min:50,height:800}},{name:"Height",attr:"height",label:"Height in pixels",type:"number","default":200,prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"height")},options:{min:50,height:800}}]},label:"Website",menu:{group:"content",rank:74,display:{type:"label",label:"Website"}}}),(0,_utils.defParamsClick)(Website,"website:insert"),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-website:hover {\n	display: inline-block;\n    padding-top: 16px;\n}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],78:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getAlignPos(pm,pos){for(var node=void 0;;){if(node=pm.doc.path(pos.path),node.type instanceof Align||0==pos.depth)return pos;pos=pos.shorten()}}function findAlignWrapper(pm,align){var _pm$selection=pm.selection,from=_pm$selection.from,to=_pm$selection.to,isLeft=(_pm$selection.node,"leftalign"==align.name),start=getAlignPos(pm,from),parent=pm.doc.path(start.path);if(parent.type instanceof Align)return isLeft?pm.tr.lift(new _model.Pos(start.path,0),new _model.Pos(start.path,parent.size)).apply(pm.apply.scroll):pm.tr.setNodeType((0,_utils.getPosInParent)(pm,start.shorten(),parent),align,{"class":align.style}).apply(pm.apply.scroll);if(isLeft)return!1;var end=from.cmp(to)?getAlignPos(pm,to):start.move(1);return pm.tr.wrap(start,end,align,{"class":align.style}).apply(pm.apply.scroll)}function alignApplies(pm,type){var _pm$selection2=pm.selection,from=_pm$selection2.from,isLeft=(_pm$selection2.to,_pm$selection2.node,"leftalign"==type.name),start=getAlignPos(pm,from),parent=pm.doc.path(start.path);return!isLeft||parent.type instanceof Align?parent.type.name==type.name:!0}function defAlign(type,label,path){type.register("command","align",{run:function(pm){return findAlignWrapper(pm,this)},active:function(pm){return alignApplies(pm,this)},label:label,menu:{group:"align",rank:51,display:{type:"icon",width:8,height:8,path:path}}})}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.RightAlign=exports.CenterAlign=exports.LeftAlign=exports.alignGroup=void 0;var _menu=require("prosemirror/dist/menu/menu"),_model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=(require("prosemirror/dist/transform"),require("../../utils")),Align=function(_Block){function Align(){return _classCallCheck(this,Align),_possibleConstructorReturn(this,Object.getPrototypeOf(Align).apply(this,arguments))}return _inherits(Align,_Block),_createClass(Align,[{key:"attrs",get:function(){return{"class":new _model.Attribute({"default":"widgets-leftalign"})}}},{key:"contains",get:function(){return"block"}}]),Align;
}(_model.Block);Align.prototype.serializeDOM=function(node,s){return s.renderAs(node,"div",node.attrs)};var LeftAlign=(exports.alignGroup=new _menu.MenuCommandGroup("align"),exports.LeftAlign=function(_Align){function LeftAlign(){return _classCallCheck(this,LeftAlign),_possibleConstructorReturn(this,Object.getPrototypeOf(LeftAlign).apply(this,arguments))}return _inherits(LeftAlign,_Align),_createClass(LeftAlign,[{key:"style",get:function(){return"widgets-leftalign"}}]),LeftAlign}(Align)),CenterAlign=exports.CenterAlign=function(_Align2){function CenterAlign(){return _classCallCheck(this,CenterAlign),_possibleConstructorReturn(this,Object.getPrototypeOf(CenterAlign).apply(this,arguments))}return _inherits(CenterAlign,_Align2),_createClass(CenterAlign,[{key:"style",get:function(){return"widgets-centeralign"}}]),CenterAlign}(Align),RightAlign=exports.RightAlign=function(_Align3){function RightAlign(){return _classCallCheck(this,RightAlign),_possibleConstructorReturn(this,Object.getPrototypeOf(RightAlign).apply(this,arguments))}return _inherits(RightAlign,_Align3),_createClass(RightAlign,[{key:"style",get:function(){return"widgets-rightalign"}}]),RightAlign}(Align);(0,_utils.defParser)(LeftAlign,"div","icons/leftalign.png"),(0,_utils.defParser)(CenterAlign,"div","widgets-centeralign"),(0,_utils.defParser)(RightAlign,"div","widgets-rightalign"),defAlign(LeftAlign,"Left Align","M0 0v1h8v-1h-8zm0 2v1h6v-1h-6zm0 2v1h8v-1h-8zm0 2v1h6v-1h-6z"),defAlign(CenterAlign,"Center Align","M0 0v1h8v-1h-8zm1 2v1h6v-1h-6zm-1 2v1h8v-1h-8zm1 2v1h6v-1h-6z"),defAlign(RightAlign,"Right Align","M0 0v1h8v-1h-8zm2 2v1h6v-1h-6zm-2 2v1h8v-1h-8zm2 2v1h6v-1h-6z"),(0,_dom.insertCSS)("\ndiv.widgets-leftalign {\n	text-align: left;\n}\n\ndiv.widgets-centeralign {\n	text-align: center;\n	margin: 0 auto;\n}\n\ndiv.widgets-rightalign {\n	text-align: right;\n	float: right;\n}\n\ndiv.widgets-justifyalign {\n	text-align: justify;\n}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/menu/menu":27,"prosemirror/dist/model":34,"prosemirror/dist/transform":40}],79:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _align=require("./align");Object.defineProperty(exports,"alignGroup",{enumerable:!0,get:function(){return _align.alignGroup}}),Object.defineProperty(exports,"LeftAlign",{enumerable:!0,get:function(){return _align.LeftAlign}}),Object.defineProperty(exports,"CenterAlign",{enumerable:!0,get:function(){return _align.CenterAlign}}),Object.defineProperty(exports,"RightAlign",{enumerable:!0,get:function(){return _align.RightAlign}});var _marks=require("./marks");Object.defineProperty(exports,"UnderlineMark",{enumerable:!0,get:function(){return _marks.UnderlineMark}}),Object.defineProperty(exports,"StrikeThroughMark",{enumerable:!0,get:function(){return _marks.StrikeThroughMark}})},{"./align":78,"./marks":80}],80:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StrikeThroughMark=exports.UnderlineMark=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),UnderlineMark=(require("../../utils"),exports.UnderlineMark=function(_MarkType){function UnderlineMark(){return _classCallCheck(this,UnderlineMark),_possibleConstructorReturn(this,Object.getPrototypeOf(UnderlineMark).apply(this,arguments))}return _inherits(UnderlineMark,_MarkType),UnderlineMark}(_model.MarkType));UnderlineMark.prototype.serializeDOM=function(mark,s){return s.elt("span",{style:"text-decoration: underline;"})},UnderlineMark.register("command","set",{derive:!0,label:"Set underline"}),UnderlineMark.register("command","unset",{derive:!0,label:"Unset underline"}),UnderlineMark.register("command","toggle",{derive:!0,label:"Toggle underline",menu:{group:"inline",rank:22,display:{type:"icon",width:8,height:8,path:"M1 0v4c0 1.1 1.12 2 2.5 2h.5c1.1 0 2-.9 2-2v-4h-1v4c0 .55-.45 1-1 1s-1-.45-1-1v-4h-2zm-1 7v1h7v-1h-7z"}},keys:["Mod-U"]}),UnderlineMark.register("parseDOMStyle","text-decoration",{parse:function(value,state,inner){"underline"==value?state.wrapMark(inner,this):inner()}});var StrikeThroughMark=exports.StrikeThroughMark=function(_MarkType2){function StrikeThroughMark(){return _classCallCheck(this,StrikeThroughMark),_possibleConstructorReturn(this,Object.getPrototypeOf(StrikeThroughMark).apply(this,arguments))}return _inherits(StrikeThroughMark,_MarkType2),StrikeThroughMark}(_model.MarkType);StrikeThroughMark.prototype.serializeDOM=function(mark,s){return s.elt("span",{style:"text-decoration: line-through;"})},StrikeThroughMark.register("command","set",{derive:!0,label:"Set strike-through"}),StrikeThroughMark.register("command","unset",{derive:!0,label:"Unset strike-through"}),StrikeThroughMark.register("command","toggle",{derive:!0,label:"Toggle strike-through",menu:{group:"inline",rank:23,display:{type:"icon",width:512,height:512,path:"M100.382,486.283v-69.5c8.006,7.789,17.585,14.803,28.743,21.053c11.151,6.263,22.901,11.513,35.257,15.776  c12.349,4.276,24.756,7.578,37.217,9.934c12.467,2.368,23.974,3.54,34.526,3.54c36.454,0,63.664-6.908,81.638-20.711  c17.948-13.815,26.948-33.671,26.948-59.565c0-13.474-3.026-25.237-9.053-35.264s-14.329-19.157-24.921-27.395  c-10.593-8.237-23.132-16.145-37.605-23.737l-31.224-15.895H0v-53.895h149.289c-4.395-3.553-8.552-7.224-12.474-11.007  c-11.342-10.928-20.25-23.315-26.724-37.164c-6.474-13.842-9.71-30.086-9.71-48.73c0-22.829,5.105-42.685,15.322-59.56  c10.217-16.881,23.638-30.789,40.257-41.717c16.611-10.928,35.552-19.066,56.809-24.421C234.033,2.678,255.704,0,277.789,0  c50.29,0,86.974,6.625,110.026,19.875V86.23c-29.868-23.947-68.236-35.928-115.078-35.928c-12.954,0-25.908,1.388-38.855,4.151  c-12.954,2.776-24.48,7.303-34.586,13.585c-10.105,6.29-18.335,14.375-24.697,24.257c-6.361,9.882-9.546,21.935-9.546,36.151  c0,12.803,2.414,23.862,7.243,33.185c4.829,9.315,11.954,17.809,21.389,25.486c9.434,7.671,20.921,15.119,34.467,22.343  l41.73,21.164H512v53.895H359.395c3.474,2.961,6.816,5.987,10,9.093c12.29,11.907,22.014,25.065,29.211,39.46  c7.184,14.421,10.763,30.947,10.763,49.579c0,24.711-4.921,45.605-14.763,62.711c-9.843,17.104-23.105,31-39.79,41.71  c-16.71,10.711-35.947,18.435-57.776,23.185c-21.828,4.763-44.822,7.132-69,7.132l-29.861-2.079  c-11.829-1.382-23.921-3.396-36.27-6.053c-12.349-2.658-24.026-5.961-35.033-9.895C115.875,495.44,107.039,491.072,100.382,486.283z  "}},keys:["Mod-S"]}),StrikeThroughMark.register("parseDOMStyle","text-decoration",{parse:function(value,state,inner){"line-through"==value?state.wrapMark(inner,this):inner()}}),(0,_dom.insertCSS)("\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],81:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.questionInsertMenu=exports.contentInsertMenu=exports.questionCommandGroup=exports.contentCommandGroup=exports.StrikeThroughMark=exports.UnderlineMark=exports.RightAlign=exports.CenterAlign=exports.LeftAlign=exports.alignGroup=exports.TextArea=exports.TextField=exports.Select=exports.RadioButton=exports.CheckBox=exports.Graph=exports.Website=exports.SpreadSheet=exports.InlineMath=exports.Image=exports.CarryForward=exports.BlockMath=exports.Selection=exports.ShortAnswer=exports.Essay=exports.Scale=exports.ScaleDisplay=exports.Choice=exports.MultipleChoice=exports.CheckItem=exports.CheckList=exports.TextBox=exports.Input=exports.Question=void 0;var _questions=require("./questions");Object.defineProperty(exports,"Question",{enumerable:!0,get:function(){return _questions.Question}}),Object.defineProperty(exports,"Input",{enumerable:!0,get:function(){return _questions.Input}}),Object.defineProperty(exports,"TextBox",{enumerable:!0,get:function(){return _questions.TextBox}}),Object.defineProperty(exports,"CheckList",{enumerable:!0,get:function(){return _questions.CheckList}}),Object.defineProperty(exports,"CheckItem",{enumerable:!0,get:function(){return _questions.CheckItem}}),Object.defineProperty(exports,"MultipleChoice",{enumerable:!0,get:function(){return _questions.MultipleChoice}}),Object.defineProperty(exports,"Choice",{enumerable:!0,get:function(){return _questions.Choice}}),Object.defineProperty(exports,"ScaleDisplay",{enumerable:!0,get:function(){return _questions.ScaleDisplay}}),Object.defineProperty(exports,"Scale",{enumerable:!0,get:function(){return _questions.Scale}}),Object.defineProperty(exports,"Essay",{enumerable:!0,get:function(){return _questions.Essay}}),Object.defineProperty(exports,"ShortAnswer",{enumerable:!0,get:function(){return _questions.ShortAnswer}}),Object.defineProperty(exports,"Selection",{enumerable:!0,get:function(){return _questions.Selection}});var _content=require("./content");Object.defineProperty(exports,"BlockMath",{enumerable:!0,get:function(){return _content.BlockMath}}),Object.defineProperty(exports,"CarryForward",{enumerable:!0,get:function(){return _content.CarryForward}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return _content.Image}}),Object.defineProperty(exports,"InlineMath",{enumerable:!0,get:function(){return _content.InlineMath}}),Object.defineProperty(exports,"SpreadSheet",{enumerable:!0,get:function(){return _content.SpreadSheet}}),Object.defineProperty(exports,"Website",{enumerable:!0,get:function(){return _content.Website}}),Object.defineProperty(exports,"Graph",{enumerable:!0,get:function(){return _content.Graph}});var _input=require("./input");Object.defineProperty(exports,"Input",{enumerable:!0,get:function(){return _input.Input}}),Object.defineProperty(exports,"CheckBox",{enumerable:!0,get:function(){return _input.CheckBox}}),Object.defineProperty(exports,"RadioButton",{enumerable:!0,get:function(){return _input.RadioButton}}),Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return _input.Select}}),Object.defineProperty(exports,"TextField",{enumerable:!0,get:function(){return _input.TextField}}),Object.defineProperty(exports,"TextArea",{enumerable:!0,get:function(){return _input.TextArea}});var _format=require("./format");Object.defineProperty(exports,"alignGroup",{enumerable:!0,get:function(){return _format.alignGroup}}),Object.defineProperty(exports,"LeftAlign",{enumerable:!0,get:function(){return _format.LeftAlign}}),Object.defineProperty(exports,"CenterAlign",{enumerable:!0,get:function(){return _format.CenterAlign}}),Object.defineProperty(exports,"RightAlign",{enumerable:!0,get:function(){return _format.RightAlign}}),Object.defineProperty(exports,"UnderlineMark",{enumerable:!0,get:function(){return _format.UnderlineMark}}),Object.defineProperty(exports,"StrikeThroughMark",{enumerable:!0,get:function(){return _format.StrikeThroughMark}});var _dom=require("prosemirror/dist/dom"),_menu=require("prosemirror/dist/menu/menu"),contentCommandGroup=exports.contentCommandGroup=new _menu.MenuCommandGroup("content"),questionCommandGroup=exports.questionCommandGroup=new _menu.MenuCommandGroup("question");exports.contentInsertMenu=new _menu.Dropdown({label:"Content..",displayActive:!0,"class":"ProseMirror-widgetinsert-dropdown"},[contentCommandGroup]),exports.questionInsertMenu=new _menu.Dropdown({label:"Question..",displayActive:!0,"class":"ProseMirror-widgetinsert-dropdown"},[questionCommandGroup]);(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-edit:hover {\n	background-image: url('icons/settings.png');\n	background-repeat: no-repeat;\n	background-position: top right;\n	cursor: pointer;\n }\n\n.ProseMirror-menu-dropdown-item {\n	white-space: nowrap;\n}\n\n.ProseMirror-menu-dropdown-menu {\n	border-radius: 6px;\n}\n\n.ProseMirror-menu-submenu {\n	border-radius: 6px;\n}\n\n\n")},{"./content":74,"./format":79,"./input":83,"./questions":91,"prosemirror/dist/dom":1,"prosemirror/dist/menu/menu":27}],82:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckBox=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_input=require("./input"),_utils=require("../../utils"),CheckBox=exports.CheckBox=function(_Input){function CheckBox(){return _classCallCheck(this,CheckBox),_possibleConstructorReturn(this,Object.getPrototypeOf(CheckBox).apply(this,arguments))}return _inherits(CheckBox,_Input),_createClass(CheckBox,[{key:"attrs",get:function(){return{name:new _model.Attribute,type:new _model.Attribute({"default":"checkbox"}),value:new _model.Attribute({"default":"1"}),"class":new _model.Attribute({"default":"widgets-checkbox"})}}}]),CheckBox}(_input.Input);(0,_utils.defParser)(CheckBox,"input","widgets-checkbox"),CheckBox.register("command","insert",{label:"CheckBox",run:function(pm,name){return pm.tr.replaceSelection(this.create({name:name})).apply(pm.apply.scroll)},params:[{name:"Name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}}]}),(0,_utils.defParamsClick)(CheckBox,"checkbox:insert",["all"]),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-checkbox:hover {\n	cursor: pointer;\n}\n\n")},{"../../utils":68,"./input":84,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],83:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _input=require("./input");Object.defineProperty(exports,"Input",{enumerable:!0,get:function(){return _input.Input}});var _checkbox=require("./checkbox");Object.defineProperty(exports,"CheckBox",{enumerable:!0,get:function(){return _checkbox.CheckBox}});var _radiobutton=require("./radiobutton");Object.defineProperty(exports,"RadioButton",{enumerable:!0,get:function(){return _radiobutton.RadioButton}});var _select=require("./select");Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return _select.Select}});var _textfield=require("./textfield");Object.defineProperty(exports,"TextField",{enumerable:!0,get:function(){return _textfield.TextField}});var _textarea=require("./textarea");Object.defineProperty(exports,"TextArea",{enumerable:!0,get:function(){return _textarea.TextArea}})},{"./checkbox":82,"./input":84,"./radiobutton":85,"./select":86,"./textarea":87,"./textfield":88}],84:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Input=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),Input=exports.Input=function(_Block){function Input(){return _classCallCheck(this,Input),_possibleConstructorReturn(this,Object.getPrototypeOf(Input).apply(this,arguments))}return _inherits(Input,_Block),_createClass(Input,[{key:"attrs",get:function(){return{name:new _model.Attribute,type:new _model.Attribute({"default":"text"}),value:new _model.Attribute}}},{key:"selectable",get:function(){return!1}},{key:"contains",get:function(){return null}}]),Input}(_model.Block);(0,_utils.defParser)(Input,"widgets-input"),Input.prototype.serializeDOM=function(node){return(0,_dom.elt)("input",node.attrs)},(0,_dom.insertCSS)("\n		\n.widgets-input {}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],85:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.RadioButton=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),_input=require("./input"),RadioButton=exports.RadioButton=function(_Input){function RadioButton(){return _classCallCheck(this,RadioButton),_possibleConstructorReturn(this,Object.getPrototypeOf(RadioButton).apply(this,arguments))}return _inherits(RadioButton,_Input),_createClass(RadioButton,[{key:"attrs",get:function(){return{name:new _model.Attribute,type:new _model.Attribute({"default":"radio"}),value:new _model.Attribute,"class":new _model.Attribute({"default":"widgets-radiobutton"})}}}]),RadioButton}(_input.Input);(0,_utils.defParser)(RadioButton,"input","widgets-radiobutton"),(0,_dom.insertCSS)("\n\n.widgets-radiobutton {}\n\n")},{"../../utils":68,"./input":84,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],86:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Select=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),Select=exports.Select=function(_Inline){function Select(){return _classCallCheck(this,Select),_possibleConstructorReturn(this,Object.getPrototypeOf(Select).apply(this,arguments))}return _inherits(Select,_Inline),_createClass(Select,[{key:"contains",get:function(){return null}},{key:"attrs",get:function(){return{name:new _model.Attribute,options:new _model.Attribute,size:new _model.Attribute({"default":1}),multiple:new _model.Attribute({"default":"single"})}}}]),Select}(_model.Inline);(0,_utils.defParser)(Select,"select","widgets-select"),Select.prototype.serializeDOM=function(node){var select=("multiple"==node.attrs.multiple,(0,_dom.elt)("select",node.attrs));return node.attrs.options.split(",").map(function(option){select.appendChild((0,_dom.elt)("option",{value:option.trim()},option))}),select},Select.register("command","delete",{run:function(pm){var _pm$selection=pm.selection,node=(_pm$selection.from,_pm$selection.node);return node&&node.type==this?!0:!1},keys:["Backspace(10)","Mod-Backspace(10)"]}),Select.register("command","insert",{label:"Select",run:function(pm,name,options,size,multiple){return pm.tr.replaceSelection(this.create({name:name,options:options,size:size,multiple:multiple})).apply(pm.apply.scroll)},params:[{name:"Name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}},{name:"Options",label:"comma separated names",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"options")}},{name:"Size",label:"options displayed",type:"range",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"options")},options:{min:1,max:10,"default":1}},{name:"Selection",label:"Selection (single or multiple)",type:"select",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"multiple")},options:[{value:"multiple",label:"multiple"},{value:"single",label:"single"}]}]}),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-select {}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],87:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextArea=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=(require("./input"),require("../../utils")),TextArea=exports.TextArea=function(_Block){function TextArea(){return _classCallCheck(this,TextArea),_possibleConstructorReturn(this,Object.getPrototypeOf(TextArea).apply(this,arguments))}return _inherits(TextArea,_Block),_createClass(TextArea,[{key:"attrs",get:function(){return{name:new _model.Attribute,rows:new _model.Attribute,cols:new _model.Attribute,"class":new _model.Attribute({"default":"widgets-textarea"})}}}]),TextArea}(_model.Block);(0,_utils.defParser)(TextArea,"textarea","widgets-textarea"),TextArea.prototype.serializeDOM=function(node,s){return(0,_dom.elt)("textarea",node.attrs)},TextArea.register("command","delete",{run:function(pm){var _pm$selection=pm.selection,node=(_pm$selection.from,_pm$selection.node);return node&&node.type==this?!0:!1},keys:["Backspace(10)","Mod-Backspace(10)"]}),TextArea.register("command","insert",{label:"TextArea",run:function(pm,name,rows,cols){return pm.tr.replaceSelection(this.create({name:name,rows:rows,cols:cols})).apply(pm.apply.scroll)},params:[{name:"Name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}},{name:"Rows",label:"In lines",type:"number","default":"4",options:{min:2,max:24},prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"rows")}},{name:"Columns",label:"In characters",type:"number","default":"40",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"cols")},options:{min:2,max:80}}]}),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-textarea:hover {\n	cursor: pointer;\n}\n\n")},{"../../utils":68,"./input":84,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],88:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextField=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_input=require("./input"),_utils=require("../../utils"),TextField=exports.TextField=function(_Input){function TextField(){return _classCallCheck(this,TextField),_possibleConstructorReturn(this,Object.getPrototypeOf(TextField).apply(this,arguments))}return _inherits(TextField,_Input),_createClass(TextField,[{key:"attrs",get:function(){return{name:new _model.Attribute,type:new _model.Attribute({"default":"text"}),size:new _model.Attribute({"default":"20"}),"class":new _model.Attribute({"default":"widgets-textfield"})}}}]),TextField}(_input.Input);(0,_utils.defParser)(TextField,"input","widgets-textfield"),TextField.register("command","insert",{label:"TextField",run:function(pm,name){return pm.tr.replaceSelection(this.create({name:name})).apply(pm.apply.scroll)},params:[{name:"Name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}},{name:"Size",label:"Size in characters",type:"number","default":"20",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"size")},options:{min:1,max:80}}]}),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-textfield:hover {\n	cursor: pointer;\n}\n\n")},{"../../utils":68,"./input":84,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],89:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function renumber(pm,pos){var cl=pm.doc.path(pos.path),i=1;cl.forEach(function(node,start){"checkitem"==node.type.name&&pm.tr.setNodeType(new _model.Pos(pos.path,start),node.type,{name:node.attrs.name+"-"+i,value:i++}).apply()})}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),
Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckList=exports.CheckItem=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=(require("./textbox"),require("../../utils")),_question=require("./question"),CheckItem=exports.CheckItem=function(_Block){function CheckItem(){return _classCallCheck(this,CheckItem),_possibleConstructorReturn(this,Object.getPrototypeOf(CheckItem).apply(this,arguments))}return _inherits(CheckItem,_Block),_createClass(CheckItem,[{key:"create",value:function(attrs,content,marks){var len=content.content.length;return content=_model.Fragment.from([this.schema.nodes.checkbox.create(attrs),content.content[len-1]]),_get(Object.getPrototypeOf(CheckItem.prototype),"create",this).call(this,attrs,content,marks)}},{key:"attrs",get:function(){return{name:new _model.Attribute,value:new _model.Attribute,"class":new _model.Attribute({"default":"widgets-checkitem"})}}}],[{key:"kinds",get:function(){return"checkitem"}}]),CheckItem}(_model.Block),CheckList=exports.CheckList=function(_Question){function CheckList(){return _classCallCheck(this,CheckList),_possibleConstructorReturn(this,Object.getPrototypeOf(CheckList).apply(this,arguments))}return _inherits(CheckList,_Question),_createClass(CheckList,[{key:"attrs",get:function(){return{name:new _model.Attribute,"class":new _model.Attribute({"default":"widgets-checklist"})}}},{key:"isList",get:function(){return!0}}]),CheckList}(_question.Question);(0,_utils.defParser)(CheckItem,"div","widgets-checkitem"),(0,_utils.defParser)(CheckList,"div","widgets-checklist"),CheckItem.prototype.serializeDOM=function(node,s){return s.renderAs(node,"div",node.attrs)},CheckItem.register("command","split",{label:"Split the current checkitem",run:function(pm){var _pm$selection=pm.selection,from=_pm$selection.from,to=_pm$selection.to,node=_pm$selection.node;if(node&&node.isBlock||from.path.length<2||!_model.Pos.samePath(from.path,to.path))return!1;var toParent=from.shorten(),parent=pm.doc.path(toParent.path);if(parent.type!=this)return!1;var tr=pm.tr["delete"](from,to).split(from,2).apply(pm.apply.scroll);return renumber(pm,toParent.shorten()),tr},keys:["Enter(20)"]}),CheckItem.register("command","delete",{label:"delete this checkitem or checklist",run:function(pm){var _pm$selection2=pm.selection,from=_pm$selection2.from,to=_pm$selection2.to,node=(_pm$selection2.head,_pm$selection2.node);if(node&&node.type==this)return!0;var toCH=from.shorten(),ch=pm.doc.path(toCH.path);if(ch.type!=this)return!1;if(from.offset>0)return pm.tr["delete"](from,to).apply(pm.apply.scroll);var toCL=toCH.shorten(),cl=pm.doc.path(toCL.path),_nodeBefore=(0,_utils.nodeBefore)(pm,toCH),before=_nodeBefore.before;_nodeBefore.at;if(2==cl.size||before.type!=this||ch.lastChild.size>0)return!0;var tr=pm.tr["delete"](toCL,toCL.move(1)).apply();return renumber(pm,toCL),tr},keys:["Backspace(10)","Mod-Backspace(10)"]}),CheckList.register("command","insert",{label:"Check List",run:function(pm,name){var _pm$selection3=pm.selection,from=_pm$selection3.from,node=(_pm$selection3.to,_pm$selection3.node);if(node&&node.type==this){var tr=pm.tr.setNodeType(from,this,{name:name}).apply();return renumber(pm,_model.Pos.from(from.toPath().concat(from.offset),0)),tr}var choice_content=_model.Fragment.from([this.schema.nodes.checkbox.create({name:name,value:1}),this.schema.nodes.textbox.create()]),content=_model.Fragment.from([this.schema.nodes.paragraph.create(null,""),this.schema.nodes.checkitem.create({name:name,value:1},choice_content)]);return(0,_utils.insertWidget)(pm,from,this.create({name:name},content))},select:function(pm){return!0},menu:{group:"question",rank:70,display:{type:"label",label:"CheckList"}},params:[{name:"Name",attr:"name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}}]}),(0,_utils.defParamsClick)(CheckList,"checklist:insert"),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-checkitem input {\n	float: left;\n}\n\n.ProseMirror .widgets-checkitem {\n	cursor: text;\n}\n\n\n")},{"../../utils":68,"./question":93,"./textbox":97,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],90:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Essay=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),_question=require("./question"),Essay=exports.Essay=function(_Question){function Essay(){return _classCallCheck(this,Essay),_possibleConstructorReturn(this,Object.getPrototypeOf(Essay).apply(this,arguments))}return _inherits(Essay,_Question),_createClass(Essay,[{key:"create",value:function(attrs,content,marks){var ta=this.schema.nodes.textarea.create(attrs);if(content){var nodes=content.toArray();nodes.pop(),content=_model.Fragment.fromArray(nodes.concat(ta))}else content=_model.Fragment.from([this.schema.nodes.paragraph.create(null,""),ta]);return _get(Object.getPrototypeOf(Essay.prototype),"create",this).call(this,attrs,content,marks)}},{key:"attrs",get:function(){return{name:new _model.Attribute,rows:new _model.Attribute,cols:new _model.Attribute,"class":new _model.Attribute({"default":"widgets-essay"})}}}]),Essay}(_question.Question);(0,_utils.defParser)(Essay,"div","widgets-essay"),Essay.register("command","insert",{label:"Essay",run:function(pm,name,rows,cols){var _pm$selection=pm.selection,from=_pm$selection.from,node=(_pm$selection.to,_pm$selection.node);return node&&node.type==this?pm.tr.setNodeType(from,this,{name:name,rows:rows,cols:cols}).apply(pm.apply.scroll):(0,_utils.insertWidget)(pm,from,this.create({name:name,rows:rows,cols:cols}))},select:function(pm){return pm.doc.path(pm.selection.from.path).type.canContainType(this)},menu:{group:"question",rank:72,display:{type:"label",label:"Essay"},select:"ignore"},params:[{name:"Name",attr:"name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}},{name:"Rows",attr:"rows",label:"In lines lines",type:"number","default":"4",options:{min:2,max:24},prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"rows")}},{name:"Columns",attr:"cols",label:"In characters",type:"number","default":"40",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"cols")},options:{min:2,max:80}}]}),(0,_utils.defParamsClick)(Essay,"essay:insert"),(0,_dom.insertCSS)("\n\n.ProseMirror .widgets-essay textarea {\n	resize: none;\n}\n\n")},{"../../utils":68,"./question":93,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],91:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _textbox=require("./textbox");Object.defineProperty(exports,"TextBox",{enumerable:!0,get:function(){return _textbox.TextBox}});var _shortanswer=require("./shortanswer");Object.defineProperty(exports,"ShortAnswer",{enumerable:!0,get:function(){return _shortanswer.ShortAnswer}});var _essay=require("./essay");Object.defineProperty(exports,"Essay",{enumerable:!0,get:function(){return _essay.Essay}});var _multiplechoice=require("./multiplechoice");Object.defineProperty(exports,"MultipleChoice",{enumerable:!0,get:function(){return _multiplechoice.MultipleChoice}}),Object.defineProperty(exports,"Choice",{enumerable:!0,get:function(){return _multiplechoice.Choice}});var _checklist=require("./checklist");Object.defineProperty(exports,"CheckList",{enumerable:!0,get:function(){return _checklist.CheckList}}),Object.defineProperty(exports,"CheckItem",{enumerable:!0,get:function(){return _checklist.CheckItem}});var _scale=require("./scale");Object.defineProperty(exports,"Scale",{enumerable:!0,get:function(){return _scale.Scale}}),Object.defineProperty(exports,"ScaleDisplay",{enumerable:!0,get:function(){return _scale.ScaleDisplay}});var _selection=require("./selection");Object.defineProperty(exports,"Selection",{enumerable:!0,get:function(){return _selection.Selection}});var _question=require("./question");Object.defineProperty(exports,"Question",{enumerable:!0,get:function(){return _question.Question}})},{"./checklist":89,"./essay":90,"./multiplechoice":92,"./question":93,"./scale":94,"./selection":95,"./shortanswer":96,"./textbox":97}],92:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function renumber(pm,pos){var cl=pm.doc.path(pos.path),i=1;cl.forEach(function(node,start){"choice"==node.type.name&&pm.tr.setNodeType(new _model.Pos(pos.path,start),node.type,{name:cl.attrs.name,value:i++}).apply()})}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultipleChoice=exports.Choice=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),_question=require("./question"),Choice=exports.Choice=function(_Block){function Choice(){return _classCallCheck(this,Choice),_possibleConstructorReturn(this,Object.getPrototypeOf(Choice).apply(this,arguments))}return _inherits(Choice,_Block),_createClass(Choice,[{key:"create",value:function(attrs,content,marks){var len=content.content.length;return content=_model.Fragment.from([this.schema.nodes.radiobutton.create(attrs),content.content[len-1]]),_get(Object.getPrototypeOf(Choice.prototype),"create",this).call(this,attrs,content,marks)}},{key:"attrs",get:function(){return{name:new _model.Attribute,value:new _model.Attribute,"class":new _model.Attribute({"default":"widgets-choice"})}}}]),Choice}(_model.Block),MultipleChoice=exports.MultipleChoice=function(_Question){function MultipleChoice(){return _classCallCheck(this,MultipleChoice),_possibleConstructorReturn(this,Object.getPrototypeOf(MultipleChoice).apply(this,arguments))}return _inherits(MultipleChoice,_Question),_createClass(MultipleChoice,[{key:"attrs",get:function(){return{name:new _model.Attribute,"class":new _model.Attribute({"default":"widgets-multiplechoice"})}}},{key:"isList",get:function(){return!0}}]),MultipleChoice}(_question.Question);(0,_utils.defParser)(Choice,"div","widgets-choice"),(0,_utils.defParser)(MultipleChoice,"div","widgets-multiplechoice"),Choice.prototype.serializeDOM=function(node,s){return s.renderAs(node,"div",node.attrs)},Choice.register("command","split",{label:"Split the current choice",run:function(pm){var _pm$selection=pm.selection,from=_pm$selection.from,to=_pm$selection.to,node=_pm$selection.node;if(node&&node.isBlock||from.path.length<2||!_model.Pos.samePath(from.path,to.path))return!1;var toParent=from.shorten(),parent=pm.doc.path(toParent.path);if(parent.type!=this)return!1;var tr=pm.tr["delete"](from,to).split(from,2).apply(pm.apply.scroll);return renumber(pm,toParent.shorten()),tr},keys:["Enter(20)"]}),Choice.register("command","delete",{label:"delete text, this choice or choicelist",run:function(pm){var _pm$selection2=pm.selection,from=_pm$selection2.from,to=_pm$selection2.to,node=(_pm$selection2.head,_pm$selection2.node);if(node&&node.type==this)return!0;var toCH=from.shorten(),ch=pm.doc.path(toCH.path);if(ch.type!=this)return!1;if(from.offset>0)return pm.tr["delete"](from,to).apply(pm.apply.scroll);var toMC=toCH.shorten(),mc=pm.doc.path(toMC.path),_nodeBefore=(0,_utils.nodeBefore)(pm,toCH),before=_nodeBefore.before;_nodeBefore.at;if(2==mc.size||before.type!=this||ch.lastChild.size>0)return!0;var tr=pm.tr["delete"](toMC,toMC.move(1)).apply();return renumber(pm,toMC),tr},keys:["Backspace(10)","Mod-Backspace(10)"]}),MultipleChoice.register("command","insert",{label:"MultipleChoice",run:function(pm,name){var _pm$selection3=pm.selection,from=_pm$selection3.from,node=(_pm$selection3.to,_pm$selection3.node);if(node&&node.type==this){var tr=pm.tr.setNodeType(from,this,{name:name}).apply();return renumber(pm,_model.Pos.from(from.toPath().concat(from.offset),0)),tr}var choice_content=_model.Fragment.from([this.schema.nodes.radiobutton.create({name:name,value:1}),this.schema.nodes.textbox.create()]),content=_model.Fragment.from([this.schema.nodes.paragraph.create(null,""),this.schema.nodes.choice.create({name:name,value:1},choice_content)]);return(0,_utils.insertWidget)(pm,from,this.create({name:name},content))},select:function(pm){return!0},menu:{group:"question",rank:70,display:{type:"label",label:"MultipleChoice"}},params:[{name:"Name",attr:"name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}}]}),(0,_utils.defParamsClick)(MultipleChoice,"multiplechoice:insert"),(0,_dom.insertCSS)("\n\n.widgets-choice input {\n	float: left;\n}\n\n.ProseMirror .widgets-choice:hover {\n	cursor: text;\n}\n\n")},{"../../utils":68,"./question":93,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],93:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Question=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),Question=(require("prosemirror/dist/transform"),exports.Question=function(_Block){function Question(){return _classCallCheck(this,Question),_possibleConstructorReturn(this,Object.getPrototypeOf(Question).apply(this,arguments))}return _inherits(Question,_Block),Question}(_model.Block));(0,_utils.defParser)(Question,"div","widgets-question"),Question.prototype.serializeDOM=function(node,s){return(0,_dom.elt)("div",{"class":"widgets-question widgets-edit"},s.renderAs(node,"div",node.attrs))},Question.register("command","delete",{label:"delete text from question",run:function(pm){var _pm$selection=pm.selection,from=_pm$selection.from,para=(_pm$selection.to,_pm$selection.head,pm.doc.path(from.path));if(from.offset>0||"paragraph"!=para.type.name)return!1;from=from.shorten();var parent=pm.doc.path(from.path);return parent.type instanceof Question?parent.firstChild==para:!1},keys:["Backspace(10)","Mod-Backspace(10)"]}),Question.register("command","enter",{label:"process enter",run:function(pm){var _pm$selection2=pm.selection,from=_pm$selection2.from,node=_pm$selection2.node,para=pm.doc.path(from.path);if(node&&node.type instanceof Question){var _parent=pm.doc.path(from.path);if(_parent.lastChild==node||!_parent.child(from.offset+1).isTextblock){var side=from.move(1);pm.tr.insert(side,pm.schema.defaultTextblockType().create()).apply(pm.apply.scroll),pm.setTextSelection(new _model.Pos(side.toPath(),0))}return!0}if(from.offset>0||"paragraph"!=para.type.name)return!1;var parent=pm.doc.path(from.shorten().path);return parent.type instanceof Question},keys:["Enter(10)","Mod-Enter(10)"]}),(0,_dom.insertCSS)('\n		\n.widgets-question {\n	counter-increment: qcnt;\n	border: 1px solid #DDD;\n    border-radius: 4px;\n	padding: 8px;\n	margin-top: 1em;\n}\n\n.widgets-question:before {\n	content: "Question " counter(qcnt) ".";\n	font-size: 80%;\n	font-weight: bold;\n//	cursor: move;\n}\n\n.ProseMirror .widgets-question p:hover {\n    cursor: text;\n}\n\n')},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34,"prosemirror/dist/transform":40}],94:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scale=exports.ScaleDisplay=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),_question=require("./question"),ScaleDisplay=exports.ScaleDisplay=function(_Block){function ScaleDisplay(){return _classCallCheck(this,ScaleDisplay),_possibleConstructorReturn(this,Object.getPrototypeOf(ScaleDisplay).apply(this,arguments))}return _inherits(ScaleDisplay,_Block),_createClass(ScaleDisplay,[{key:"attrs",get:function(){return{name:new _model.Attribute,startvalue:new _model.Attribute({"default":"1"}),startlabel:new _model.Attribute({"default":"low"}),endvalue:new _model.Attribute({"default":"10"}),endlabel:new _model.Attribute({"default":"high"}),contenteditable:new _model.Attribute({"default":!1})}}}]),ScaleDisplay}(_model.Block);ScaleDisplay.prototype.serializeDOM=function(node,s){var para=(0,_dom.elt)("div",node.attrs);para.appendChild((0,_dom.elt)("span",null,node.attrs.startlabel+" "));var startVal=Number(node.attrs.startvalue),endVal=Number(node.attrs.endvalue);if(endVal>startVal)for(var i=startVal;endVal>=i;i++){var _name=node.attrs.name+i;para.appendChild((0,_dom.elt)("span",{"class":"widgets-scaleitem"},(0,_dom.elt)("label",{"for":_name},i.toString()),(0,_dom.elt)("input",{id:_name,name:node.attrs.name,type:"radio",value:i})))}else for(var i=startVal;i>=endVal;i--)para.appendChild((0,_dom.elt)("span",{"class":"widgets-scaleitem"},(0,_dom.elt)("label",{"for":name},i.toString()),(0,_dom.elt)("input",{id:name,name:node.attrs.name,type:"radio",value:i})));return para.appendChild((0,_dom.elt)("span",null," "+node.attrs.endlabel)),para};var Scale=exports.Scale=function(_Question){function Scale(){return _classCallCheck(this,Scale),_possibleConstructorReturn(this,Object.getPrototypeOf(Scale).apply(this,arguments))}return _inherits(Scale,_Question),_createClass(Scale,[{key:"create",value:function(attrs,content,marks){var sd=this.schema.nodes.scaledisplay.create(attrs);if(content){var nodes=content.toArray();nodes.pop(),content=_model.Fragment.fromArray(nodes.concat(sd))}else content=_model.Fragment.from([this.schema.nodes.paragraph.create(null,""),sd]);return _get(Object.getPrototypeOf(Scale.prototype),"create",this).call(this,attrs,content,marks)}},{key:"attrs",get:function(){return{name:new _model.Attribute,startvalue:new _model.Attribute({"default":"1"}),startlabel:new _model.Attribute({"default":"low"}),endvalue:new _model.Attribute({"default":"10"}),endlabel:new _model.Attribute({"default":"high"}),"class":new _model.Attribute({"default":"widgets-scale"})}}}],[{key:"contains",get:function(){return"text"}}]),Scale}(_question.Question);(0,_utils.defParser)(Scale,"div","widgets-scale"),Scale.register("command","insert",{label:"Scale",run:function(pm,name,startvalue,startlabel,endvalue,endlabel){var _pm$selection=pm.selection,from=_pm$selection.from,node=(_pm$selection.to,_pm$selection.node);return node&&node.type==this?pm.tr.setNodeType(from,this,{name:name,startvalue:startvalue,startlabel:startlabel,endvalue:endvalue,endlabel:endlabel}).apply(pm.apply.scroll):(0,_utils.insertWidget)(pm,from,this.create({name:name,startvalue:startvalue,startlabel:startlabel,endvalue:endvalue,endlabel:endlabel}))},menu:{group:"question",rank:74,display:{type:"label",label:"Scale"}},params:[{name:"Name",attr:"name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}},{label:"Start value",attr:"startvalue",type:"number","default":1,prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"startvalue")}},{name:"Start Label",attr:"startlabel",label:"Text on left",type:"text","default":"low",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"startlabel")}},{label:"End value",attr:"endvalue",type:"number","default":10,prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"endvalue")}},{name:"End Label",attr:"endlabel",label:"Text on right",type:"text","default":"high",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"endlabel")}}]}),(0,_utils.defParamsClick)(Scale,"scale:insert"),(0,_dom.insertCSS)("\n\n.widgets-scaleitem {\n	display: inline-block;\n	text-align: center;\n    padding: 4px;\n}\n\n.widgets-scaleitem input {\n	display: block;\n}\n\n.widgets-scale span {\n	vertical-align: middle;\n	font-weight: normal;\n}\n\n.widgets-scale div {\n	display: inline-block;\n	padding: 4px;\n	background: #EEE;\n    border-radius: 6px;\n    border: 1px solid #AAA;\n}\n")},{"../../utils":68,"./question":93,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],95:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Selection=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=(require("../input"),require("../../utils")),_question=require("./question"),Selection=exports.Selection=function(_Question){function Selection(){return _classCallCheck(this,Selection),_possibleConstructorReturn(this,Object.getPrototypeOf(Selection).apply(this,arguments))}return _inherits(Selection,_Question),_createClass(Selection,[{key:"create",value:function(attrs,content,marks){var sel=this.schema.nodes.select.create(attrs);if(content){var nodes=content.toArray();nodes.pop(),content=_model.Fragment.fromArray(nodes.concat(sel))}else content=_model.Fragment.from([this.schema.nodes.paragraph.create(null,""),sel]);return _get(Object.getPrototypeOf(Selection.prototype),"create",this).call(this,attrs,content,marks)}},{key:"attrs",get:function(){return{name:new _model.Attribute,options:new _model.Attribute,size:new _model.Attribute({"default":1}),multiple:new _model.Attribute({"default":"single"}),"class":new _model.Attribute({"default":"widgets-selection"})}}}]),Selection}(_question.Question);(0,_utils.defParser)(Selection,"div","widgets-selection"),Selection.register("command","insert",{label:"Selection",run:function(pm,name,options,size,multiple){var _pm$selection=pm.selection,from=_pm$selection.from,node=(_pm$selection.to,_pm$selection.node);return node&&node.type==this?pm.tr.setNodeType(from,this,{name:name,options:options,size:size,multiple:multiple}).apply(pm.apply.scroll):(0,_utils.insertWidget)(pm,from,this.create({name:name,options:options,size:size,multiple:multiple}))},menu:{group:"question",rank:75,display:{type:"label",label:"Selection"}},params:[{name:"Name",attr:"name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}},{name:"Options",attr:"options",label:"comma separated names",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"options")}},{name:"Size",attr:"size",label:"options displayed",type:"number","default":1,prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"size")},options:{min:1,max:10}},{name:"Selection",attr:"multiple",label:"Selection (single or multiple)",type:"select","default":"single",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"multiple")},options:[{value:"multiple",label:"multiple"},{value:"single",label:"single"}]}]}),(0,_utils.defParamsClick)(Selection,"selection:insert"),(0,_dom.insertCSS)("\n\n")},{"../../utils":68,"../input":83,"./question":93,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],96:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver);
}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShortAnswer=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=(require("../input"),require("../../utils")),_question=require("./question"),ShortAnswer=exports.ShortAnswer=function(_Question){function ShortAnswer(){return _classCallCheck(this,ShortAnswer),_possibleConstructorReturn(this,Object.getPrototypeOf(ShortAnswer).apply(this,arguments))}return _inherits(ShortAnswer,_Question),_createClass(ShortAnswer,[{key:"create",value:function(attrs,content,marks){var tf=this.schema.nodes.textfield.create(attrs);if(content){var nodes=content.toArray();nodes.pop(),content=_model.Fragment.fromArray(nodes.concat(tf))}else content=_model.Fragment.from([this.schema.nodes.paragraph.create(null,""),tf]);return _get(Object.getPrototypeOf(ShortAnswer.prototype),"create",this).call(this,attrs,content,marks)}},{key:"attrs",get:function(){return{name:new _model.Attribute,type:new _model.Attribute({"default":"text"}),size:new _model.Attribute({"default":"20"}),"class":new _model.Attribute({"default":"widgets-shortanswer"})}}}]),ShortAnswer}(_question.Question);(0,_utils.defParser)(ShortAnswer,"div","widgets-shortanswer"),ShortAnswer.register("command","insert",{label:"Short Answer",run:function(pm,name,size){var _pm$selection=pm.selection,from=_pm$selection.from,node=(_pm$selection.to,_pm$selection.node);return node&&node.type==this?pm.tr.setNodeType(from,this,{name:name,size:size}).apply(pm.apply.scroll):(0,_utils.insertWidget)(pm,from,this.create({name:name,size:size}))},menu:{group:"question",rank:71,display:{type:"label",label:"Short Answer"}},params:[{name:"Name",attr:"name",label:"Short ID",type:"text",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"name")},options:{pattern:_utils.namePattern,size:10,title:_utils.nameTitle}},{name:"Size",attr:"size",label:"Size in characters",type:"number","default":"20",prefill:function(pm){return(0,_utils.selectedNodeAttr)(pm,this,"size")},options:{min:1,max:80}}]}),(0,_utils.defParamsClick)(ShortAnswer,"shortanswer:insert"),(0,_dom.insertCSS)("\n")},{"../../utils":68,"../input":83,"./question":93,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}],97:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextBox=void 0;var _model=require("prosemirror/dist/model"),_dom=require("prosemirror/dist/dom"),_utils=require("../../utils"),TextBox=exports.TextBox=function(_Textblock){function TextBox(){return _classCallCheck(this,TextBox),_possibleConstructorReturn(this,Object.getPrototypeOf(TextBox).apply(this,arguments))}return _inherits(TextBox,_Textblock),TextBox}(_model.Textblock);(0,_utils.defParser)(TextBox,"div","widgets-textbox"),TextBox.prototype.serializeDOM=function(node,s){return s.renderAs(node,"div",{"class":"widgets-textbox"})},(0,_dom.insertCSS)("\n\n.widgets-textbox {\n	margin-left: 1.2em;\n}\n\n")},{"../../utils":68,"prosemirror/dist/dom":1,"prosemirror/dist/model":34}]},{},[66]);